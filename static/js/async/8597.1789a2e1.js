"use strict";(self.webpackChunkmy_doc=self.webpackChunkmy_doc||[]).push([["8597"],{18090:function(e,n,r){r.r(n),r.d(n,{default:function(){return s}});var i=r(85893),t=r(50065);function o(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",ol:"ol",li:"li",ul:"ul",pre:"pre",code:"code",strong:"strong",img:"img",h3:"h3",div:"div"},(0,t.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"uiability组件",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#uiability组件",children:"#"}),"UIAbility组件"]}),"\n",(0,i.jsxs)(n.h2,{id:"概述",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#概述",children:"#"}),"概述"]}),"\n",(0,i.jsx)(n.p,{children:"UIAbility组件是一种包含UI的应用组件，主要用于和用户交互。"}),"\n",(0,i.jsx)(n.p,{children:"UIAbility的设计理念："}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"原生支持应用组件级的跨端迁移和多端协同。"}),"\n",(0,i.jsx)(n.li,{children:"支持多设备和多窗口形态。"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"UIAbility划分原则与建议："}),"\n",(0,i.jsx)(n.p,{children:"UIAbility组件是系统调度的基本单元，为应用提供绘制界面的窗口。一个应用可以包含一个或多个UIAbility组件。例如，在支付应用中，可以将入口功能和收付款功能分别配置为独立的UIAbility。"}),"\n",(0,i.jsx)(n.p,{children:"每一个UIAbility组件实例都会在最近任务列表中显示一个对应的任务。"}),"\n",(0,i.jsx)(n.p,{children:"对于开发者而言，可以根据具体场景选择单个还是多个UIAbility，划分建议如下："}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"如果开发者希望在任务视图中看到一个任务，建议使用“一个UIAbility+多个页面”的方式，可以避免不必要的资源加载。"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"如果开发者希望在任务视图中看到多个任务，或者需要同时开启多个窗口，建议使用多个UIAbility实现不同的功能。"}),"\n",(0,i.jsx)(n.p,{children:"例如，即时通讯类应用中的消息列表与音视频通话采用不同的UIAbility进行开发，既可以方便地切换任务窗口，又可以实现应用的两个任务窗口在一个屏幕上分屏显示。"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"说明"}),"\n",(0,i.jsx)(n.p,{children:"任务视图用于快速查看和管理当前设备上运行的所有任务或应用。"}),"\n",(0,i.jsxs)(n.h2,{id:"声明配置",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#声明配置",children:"#"}),"声明配置"]}),"\n",(0,i.jsxs)(n.p,{children:["为使应用能够正常使用UIAbility，需要在",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/module-configuration-file-V5",rel:"noopener noreferrer",target:"_blank",children:"module.json5配置文件"}),"的",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/module-configuration-file-V5#abilities%E6%A0%87%E7%AD%BE",rel:"noopener noreferrer",target:"_blank",children:"abilities标签"}),"中声明UIAbility的名称、入口、标签等相关信息。"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",meta:"",children:'{\r\n  "module": {\r\n    // ...\r\n    "abilities": [\r\n      {\r\n        "name": "EntryAbility", // UIAbility组件的名称\r\n        "srcEntry": "./ets/entryability/EntryAbility.ets", // UIAbility组件的代码路径\r\n        "description": "$string:EntryAbility_desc", // UIAbility组件的描述信息\r\n        "icon": "$media:icon", // UIAbility组件的图标\r\n        "label": "$string:EntryAbility_label", // UIAbility组件的标签\r\n        "startWindowIcon": "$media:icon", // UIAbility组件启动页面图标资源文件的索引\r\n        "startWindowBackground": "$color:start_window_background", // UIAbility组件启动页面背景颜色资源文件的索引\r\n        // ...\r\n      }\r\n    ]\r\n  }\r\n}\n'})}),"\n",(0,i.jsxs)(n.h2,{id:"uiability组件生命周期",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#uiability组件生命周期",children:"#"}),(0,i.jsx)(n.strong,{children:"UIAbility组件生命周期"})]}),"\n",(0,i.jsxs)(n.p,{children:["当用户打开、切换和返回到对应应用时，应用中的",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-uiability-V5",rel:"noopener noreferrer",target:"_blank",children:"UIAbility"}),"实例会在其生命周期的不同状态之间转换。UIAbility类提供了一系列回调，通过这些回调可以知道当前UIAbility实例的某个状态发生改变，会经过UIAbility实例的创建和销毁，或者UIAbility实例发生了前后台的状态切换。"]}),"\n",(0,i.jsx)(n.p,{children:"UIAbility的生命周期包括Create、Foreground、Background、Destroy四个状态，如下图所示。"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"图1"})," UIAbility生命周期状态"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250127121109.29349418525951918132782153362118:50001231000000:2800:6307CA2A7FE585E145A07986433B9D6846FEFC9C4571EE0CF091A2EDC8EBBBD7.png?needInitFileName=true?needInitFileName=true",alt:"img"})}),"\n",(0,i.jsxs)(n.h2,{id:"生命周期状态说明",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#生命周期状态说明",children:"#"}),"生命周期状态说明"]}),"\n",(0,i.jsxs)(n.h3,{id:"create状态",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#create状态",children:"#"}),"Create状态"]}),"\n",(0,i.jsxs)(n.p,{children:["Create状态为在应用加载过程中，",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-uiability-V5",rel:"noopener noreferrer",target:"_blank",children:"UIAbility"}),"实例创建完成时触发，系统会调用",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-uiability-V5#uiabilityoncreate",rel:"noopener noreferrer",target:"_blank",children:"onCreate()"}),"回调。可以在该回调中进行页面初始化操作，例如变量定义资源加载等，用于后续的UI展示。"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",meta:"",children:"import { AbilityConstant, UIAbility, Want } from '@kit.AbilityKit';\r\n\r\nexport default class EntryAbility extends UIAbility {\r\n  onCreate(want: Want, launchParam: AbilityConstant.LaunchParam): void {\r\n    // 页面初始化\r\n  }\r\n  // ...\r\n}\n"})}),"\n",(0,i.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,i.jsx)(n.div,{className:"rspress-directive-title",children:"说明"}),(0,i.jsx)(n.div,{className:"rspress-directive-content",children:(0,i.jsxs)(n.p,{children:["\n",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-want-V5",rel:"noopener noreferrer",target:"_blank",children:"Want"}),"是对象间信息传递的载体，可以用于应用组件间的信息传递。Want的详细介绍请参见",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/want-overview-V5",rel:"noopener noreferrer",target:"_blank",children:"信息传递载体Want"}),"。"]})})]}),"\n",(0,i.jsxs)(n.h3,{id:"windowstagecreate和windowstagedestroy状态",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#windowstagecreate和windowstagedestroy状态",children:"#"}),"WindowStageCreate和WindowStageDestroy状态"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-uiability-V5",rel:"noopener noreferrer",target:"_blank",children:"UIAbility"}),"实例创建完成之后，在进入Foreground之前，系统会创建一个WindowStage。WindowStage创建完成后会进入",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-uiability-V5#uiabilityonwindowstagecreate",rel:"noopener noreferrer",target:"_blank",children:"onWindowStageCreate()"}),"回调，可以在该回调中设置UI加载、设置WindowStage的事件订阅。"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"图2"})," WindowStageCreate和WindowStageDestroy状态"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250127121109.08593469081023152522740623877372:50001231000000:2800:D8C219C3A4CD3D0EBC302E051692B852A0C05085674E125EF0F315A5F56E2811.png?needInitFileName=true?needInitFileName=true",alt:"img"})}),"\n",(0,i.jsxs)(n.p,{children:["在onWindowStageCreate()回调中通过",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#loadcontent9",rel:"noopener noreferrer",target:"_blank",children:"loadContent()"}),"方法设置应用要加载的页面，并根据需要调用",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#onwindowstageevent9",rel:"noopener noreferrer",target:"_blank",children:"on('windowStageEvent')"}),"方法订阅",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#windowstageeventtype9",rel:"noopener noreferrer",target:"_blank",children:"WindowStage的事件"}),"（获焦/失焦、切到前台/切到后台、前台可交互/前台不可交互）。"]}),"\n",(0,i.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,i.jsx)(n.div,{className:"rspress-directive-title",children:"说明"}),(0,i.jsx)(n.div,{className:"rspress-directive-content",children:(0,i.jsxs)(n.p,{children:["\n不同开发场景下",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-window-V5#windowstageeventtype9",rel:"noopener noreferrer",target:"_blank",children:"WindowStage事件"}),"的时序可能存在差异。"]})})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",meta:"",children:"import { UIAbility } from '@kit.AbilityKit';\r\nimport { window } from '@kit.ArkUI';\r\nimport { hilog } from '@kit.PerformanceAnalysisKit';\r\n\r\nconst TAG: string = '[EntryAbility]';\r\nconst DOMAIN_NUMBER: number = 0xFF00;\r\n\r\nexport default class EntryAbility extends UIAbility {\r\n  // ...\r\n  onWindowStageCreate(windowStage: window.WindowStage): void {\r\n    // 设置WindowStage的事件订阅（获焦/失焦、切到前台/切到后台、前台可交互/前台不可交互）\r\n    try {\r\n      windowStage.on('windowStageEvent', (data) => {\r\n        let stageEventType: window.WindowStageEventType = data;\r\n        switch (stageEventType) {\r\n          case window.WindowStageEventType.SHOWN: // 切到前台\r\n            hilog.info(DOMAIN_NUMBER, TAG, `windowStage foreground.`);\r\n            break;\r\n          case window.WindowStageEventType.ACTIVE: // 获焦状态\r\n            hilog.info(DOMAIN_NUMBER, TAG, `windowStage active.`);\r\n            break;\r\n          case window.WindowStageEventType.INACTIVE: // 失焦状态\r\n            hilog.info(DOMAIN_NUMBER, TAG, `windowStage inactive.`);\r\n            break;\r\n          case window.WindowStageEventType.HIDDEN: // 切到后台\r\n            hilog.info(DOMAIN_NUMBER, TAG, `windowStage background.`);\r\n            break;\r\n          case window.WindowStageEventType.RESUMED: // 前台可交互状态\r\n            hilog.info(DOMAIN_NUMBER, TAG, `windowStage resumed.`);\r\n            break;\r\n          case window.WindowStageEventType.PAUSED: // 前台不可交互状态\r\n            hilog.info(DOMAIN_NUMBER, TAG, `windowStage paused.`);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      });\r\n    } catch (exception) {\r\n      hilog.error(DOMAIN_NUMBER, TAG,\r\n        `Failed to enable the listener for window stage event changes. Cause: ${JSON.stringify(exception)}`);\r\n    }\r\n    hilog.info(DOMAIN_NUMBER, TAG, `%{public}s`, `Ability onWindowStageCreate`);\r\n    // 设置UI加载\r\n    windowStage.loadContent('pages/Index', (err, data) => {\r\n      // ...\r\n    });\r\n  }\r\n}\n"})}),"\n",(0,i.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,i.jsx)(n.div,{className:"rspress-directive-title",children:"说明"}),(0,i.jsx)(n.div,{className:"rspress-directive-content",children:(0,i.jsxs)(n.p,{children:["\nWindowStage的相关使用请参见",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-window-stage-V5",rel:"noopener noreferrer",target:"_blank",children:"窗口开发指导"}),"。"]})})]}),"\n",(0,i.jsxs)(n.p,{children:["对应于",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-uiability-V5#uiabilityonwindowstagecreate",rel:"noopener noreferrer",target:"_blank",children:"onWindowStageCreate()"}),"回调。在",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-uiability-V5",rel:"noopener noreferrer",target:"_blank",children:"UIAbility"}),"实例销毁之前，则会先进入",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-uiability-V5#uiabilityonwindowstagedestroy",rel:"noopener noreferrer",target:"_blank",children:"onWindowStageDestroy()"}),"回调，可以在该回调中释放UI资源。"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",meta:"",children:"import { UIAbility } from '@kit.AbilityKit';\r\nimport { window } from '@kit.ArkUI';\r\n\r\nexport default class EntryAbility extends UIAbility {\r\n  windowStage: window.WindowStage | undefined = undefined;\r\n\r\n  // ...\r\n  onWindowStageCreate(windowStage: window.WindowStage): void {\r\n    this.windowStage = windowStage;\r\n    // ...\r\n  }\r\n\r\n  onWindowStageDestroy() {\r\n    // 释放UI资源\r\n  }\r\n}\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"windowstagewilldestroy状态",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#windowstagewilldestroy状态",children:"#"}),"WindowStageWillDestroy状态"]}),"\n",(0,i.jsxs)(n.p,{children:["对应",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-uiability-V5#uiabilityonwindowstagewilldestroy12",rel:"noopener noreferrer",target:"_blank",children:"onWindowStageWillDestroy()"}),"回调，在WindowStage销毁前执行，此时WindowStage可以使用。"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",meta:"",children:"import { UIAbility } from '@kit.AbilityKit';\r\nimport { window } from '@kit.ArkUI';\r\nimport { BusinessError } from '@kit.BasicServicesKit';\r\nimport { hilog } from '@kit.PerformanceAnalysisKit';\r\n\r\nconst TAG: string = '[EntryAbility]';\r\nconst DOMAIN_NUMBER: number = 0xFF00;\r\n\r\nexport default class EntryAbility extends UIAbility {\r\n  windowStage: window.WindowStage | undefined = undefined;\r\n  // ...\r\n  onWindowStageCreate(windowStage: window.WindowStage): void {\r\n    this.windowStage = windowStage;\r\n    // ...\r\n  }\r\n\r\n  onWindowStageWillDestroy(windowStage: window.WindowStage) {\r\n    // 释放通过windowStage对象获取的资源\r\n    // 在onWindowStageWillDestroy()中注销WindowStage事件订阅（获焦/失焦、切到前台/切到后台、前台可交互/前台不可交互）\r\n    try {\r\n      if (this.windowStage) {\r\n        this.windowStage.off('windowStageEvent');\r\n      }\r\n    } catch (err) {\r\n      let code = (err as BusinessError).code;\r\n      let message = (err as BusinessError).message;\r\n      hilog.error(DOMAIN_NUMBER, TAG, `Failed to disable the listener for windowStageEvent. Code is ${code}, message is ${message}`);\r\n    }\r\n  }\r\n\r\n  onWindowStageDestroy() {\r\n    // 释放UI资源\r\n  }\r\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"说明"}),"\n",(0,i.jsxs)(n.p,{children:["WindowStage的相关使用请参见",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-window-stage-V5",rel:"noopener noreferrer",target:"_blank",children:"窗口开发指导"}),"。"]}),"\n",(0,i.jsxs)(n.h3,{id:"foreground和background状态",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#foreground和background状态",children:"#"}),"Foreground和Background状态"]}),"\n",(0,i.jsxs)(n.p,{children:["Foreground和Background状态分别在",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-uiability-V5",rel:"noopener noreferrer",target:"_blank",children:"UIAbility"}),"实例切换至前台和切换至后台时触发，对应于",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-uiability-V5#uiabilityonforeground",rel:"noopener noreferrer",target:"_blank",children:"onForeground()"}),"回调和",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-uiability-V5#uiabilityonbackground",rel:"noopener noreferrer",target:"_blank",children:"onBackground()"}),"回调。"]}),"\n",(0,i.jsx)(n.p,{children:"onForeground()回调，在UIAbility的UI可见之前，如UIAbility切换至前台时触发。可以在onForeground()回调中申请系统需要的资源，或者重新申请在onBackground()中释放的资源。"}),"\n",(0,i.jsx)(n.p,{children:"onBackground()回调，在UIAbility的UI完全不可见之后，如UIAbility切换至后台时候触发。可以在onBackground()回调中释放UI不可见时无用的资源，或者在此回调中执行较为耗时的操作，例如状态保存等。"}),"\n",(0,i.jsx)(n.p,{children:"例如应用在使用过程中需要使用用户定位时，假设应用已获得用户的定位权限授权。在UI显示之前，可以在onForeground()回调中开启定位功能，从而获取到当前的位置信息。"}),"\n",(0,i.jsx)(n.p,{children:"当应用切换到后台状态，可以在onBackground()回调中停止定位功能，以节省系统的资源消耗。"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",meta:"",children:"import { UIAbility } from '@kit.AbilityKit';\r\n\r\nexport default class EntryAbility extends UIAbility {\r\n  // ...\r\n\r\n  onForeground(): void {\r\n    // 申请系统需要的资源，或者重新申请在onBackground()中释放的资源\r\n  }\r\n\r\n  onBackground(): void {\r\n    // 释放UI不可见时无用的资源，或者在此回调中执行较为耗时的操作\r\n    // 例如状态保存等\r\n  }\r\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["当应用的UIAbility实例已创建，且UIAbility配置为",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/uiability-launch-type-V5#singleton%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F",rel:"noopener noreferrer",target:"_blank",children:"singleton"}),"启动模式时，再次调用",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inner-application-uiabilitycontext-V5#uiabilitycontextstartability",rel:"noopener noreferrer",target:"_blank",children:"startAbility()"}),"方法启动该UIAbility实例时，只会进入该UIAbility的",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-uiability-V5#uiabilityonnewwant",rel:"noopener noreferrer",target:"_blank",children:"onNewWant()"}),"回调，不会进入其",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-uiability-V5#uiabilityoncreate",rel:"noopener noreferrer",target:"_blank",children:"onCreate()"}),"和",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-uiability-V5#uiabilityonwindowstagecreate",rel:"noopener noreferrer",target:"_blank",children:"onWindowStageCreate()"}),"生命周期回调。应用可以在该回调中更新要加载的资源和数据等，用于后续的UI展示。"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",meta:"",children:"import { AbilityConstant, UIAbility, Want } from '@kit.AbilityKit';\r\n\r\nexport default class EntryAbility extends UIAbility {\r\n  // ...\r\n\r\n  onNewWant(want: Want, launchParam: AbilityConstant.LaunchParam) {\r\n    // 更新资源、数据\r\n  }\r\n}\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"destroy状态",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#destroy状态",children:"#"}),"Destroy状态"]}),"\n",(0,i.jsxs)(n.p,{children:["Destroy状态在",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-app-ability-uiability-V5",rel:"noopener noreferrer",target:"_blank",children:"UIAbility"}),"实例销毁时触发。可以在onDestroy()回调中进行系统资源的释放、数据的保存等操作。"]}),"\n",(0,i.jsxs)(n.p,{children:["例如，调用",(0,i.jsx)(n.a,{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-inner-application-uiabilitycontext-V5#uiabilitycontextterminateself",rel:"noopener noreferrer",target:"_blank",children:"terminateSelf()"}),"方法停止当前UIAbility实例，执行onDestroy()回调，并完成UIAbility实例的销毁。"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",meta:"",children:"import { UIAbility } from '@kit.AbilityKit';\r\n\r\nexport default class EntryAbility extends UIAbility {\r\n  // ...\r\n\r\n  onDestroy() {\r\n    // 系统资源的释放、数据的保存等\r\n  }\r\n}\n"})})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,t.ah)(),e.components);return n?(0,i.jsx)(n,Object.assign({},e,{children:(0,i.jsx)(o,e)})):o(e)}let s=a;a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["harmony%2Fkaifajichu%2Fpart8.md"]={toc:[{id:"概述",text:"概述",depth:2},{id:"声明配置",text:"声明配置",depth:2},{id:"uiability组件生命周期",text:"**UIAbility组件生命周期**",depth:2},{id:"生命周期状态说明",text:"生命周期状态说明",depth:2},{id:"create状态",text:"Create状态",depth:3},{id:"windowstagecreate和windowstagedestroy状态",text:"WindowStageCreate和WindowStageDestroy状态",depth:3},{id:"windowstagewilldestroy状态",text:"WindowStageWillDestroy状态",depth:3},{id:"foreground和background状态",text:"Foreground和Background状态",depth:3},{id:"destroy状态",text:"Destroy状态",depth:3}],title:"UIAbility组件",headingTitle:"UIAbility组件",frontmatter:{}}}}]);