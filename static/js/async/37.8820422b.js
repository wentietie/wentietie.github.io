"use strict";(self.webpackChunkmy_doc=self.webpackChunkmy_doc||[]).push([["37"],{48515:function(e,a,s){s.r(a),s.d(a,{default:()=>x});var n=s("85893"),r=s("50065");let i=s.p+"static/image/es_install.a6817337.png",c=s.p+"static/image/es_sudo_power.9c03faf0.png",h=s.p+"static/image/es_file_limits.a8a35bce.png",d=s.p+"static/image/es_visit.54951ab9.png";function l(e){let a=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",img:"img",h3:"h3",strong:"strong",pre:"pre",code:"code"},(0,r.ah)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.h1,{id:"9-linux安装es相关工具",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#9-linux安装es相关工具",children:"#"}),"9 Linux安装ES相关工具"]}),"\n",(0,n.jsxs)(a.h2,{id:"91-安装elasticsearch",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#91-安装elasticsearch",children:"#"}),"9.1 安装Elasticsearch"]}),"\n",(0,n.jsx)(a.p,{children:"在Linux服务器上创建/opt/es文件夹，下载Elasticsearch7.8安装包，上传到该文件夹，进行解压即可。"}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{src:i})}),"\n",(0,n.jsxs)(a.h2,{id:"92-配置elasticsearch环境参数",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#92-配置elasticsearch环境参数",children:"#"}),"9.2 配置Elasticsearch环境参数"]}),"\n",(0,n.jsxs)(a.h3,{id:"921-创建用户",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#921-创建用户",children:"#"}),"9.2.1 创建用户"]}),"\n",(0,n.jsxs)(a.p,{children:[(0,n.jsx)(a.strong,{children:"Elasticsearch不能直接通过root用户启动"}),"，所以需要先创建一个普通用户。"]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-shell",meta:"script",children:"# 创建用户\r\nuseradd es\r\n# 设置密码（输入如下命令后，按照提示输入密码）\r\npasswd es\r\n# 授权（授权后，/opt/es 文件夹的Owner由root用户变为es用户）\r\nchown -R es /opt/es\n"})}),"\n",(0,n.jsxs)(a.h3,{id:"922-给用户设置sudo权限",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#922-给用户设置sudo权限",children:"#"}),"9.2.2 给用户设置sudo权限"]}),"\n",(0,n.jsx)(a.p,{children:"相当于临时给某个用户类似于管理员的权限"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-shell",meta:"script",children:"# 使用root用户执行visudo（相当于vim /etc/sudoers）\r\nvisudo\r\n# 在root    ALL=(ALL)       ALL下面新增如下命令\r\nes      ALL=(ALL)       ALL\n"})}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{src:c})}),"\n",(0,n.jsxs)(a.h3,{id:"923-修改普通用户打开文件最大数限制启动线程数限制",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#923-修改普通用户打开文件最大数限制启动线程数限制",children:"#"}),"9.2.3 修改普通用户打开文件最大数限制、启动线程数限制"]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-shell",meta:"script",children:"vim /etc/security/limits.conf\r\n# 在文件中添加入下内容（*表示所有用户）\r\n* soft nofile 65535\r\n* hard nofile 65535\r\n* soft nproc 4096\r\n* hard nproc 4096\n"})}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{src:h})}),"\n",(0,n.jsxs)(a.h3,{id:"924-为普通用户增大虚拟内存",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#924-为普通用户增大虚拟内存",children:"#"}),"9.2.4 为普通用户增大虚拟内存"]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-shell",meta:"script",children:"vim /etc/sysctl.conf\r\n# 在文件中添加以下内容\r\nvm.max_map_count = 262144\n"})}),"\n",(0,n.jsxs)(a.h3,{id:"925-使以上配置生效",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#925-使以上配置生效",children:"#"}),"9.2.5 使以上配置生效"]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-shell",meta:"script",children:"sysctl -p\n"})}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.strong,{children:"以上步骤完成后，需要重新打开终端，重新登入，才可看到配置生效。"})}),"\n",(0,n.jsxs)(a.h3,{id:"926-修改elasticsearchyml文件",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#926-修改elasticsearchyml文件",children:"#"}),"9.2.6 修改elasticsearch.yml文件"]}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.strong,{children:"需要使用es用户执行以下操作"})}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-shell",meta:"script",children:'# 切换es用户（由root用户切换到普通用户，不需要密码）\r\nsu - es\r\n# 编辑elasticsearch.yml文件\r\nvim  /opt/es/elasticsearch-7.8.0/config/elasticsearch.yml\r\n# 按照如下内容进行修改\r\n# 集群名称\r\ncluster.name: my-application\r\n# 节点名\r\nnode.name: node-1\r\n# 配置文件\r\npath.data: ./data\r\n# 日志文件\r\npath.logs: ./logs\r\n# 0.0.0.0表示允许任意ip访问，如此，便可以远程访问\r\nnetwork.host: 0.0.0.0\r\nhttp.port: 9200\r\n# 集群初始化时的master节点\r\ncluster.initial_master_nodes: ["node-1"]\n'})}),"\n",(0,n.jsxs)(a.h3,{id:"927-修改jvm配置",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#927-修改jvm配置",children:"#"}),"9.2.7 修改jvm配置"]}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.strong,{children:"需要使用es用户执行以下操作"})}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-shell",meta:"script",children:"vim /opt/es/elasticsearch-7.8.0/config/jvm.options\r\n# 按照如下内容进行修改\r\n-Xms512m\r\n-Xmx512m\n"})}),"\n",(0,n.jsxs)(a.h2,{id:"93-启动elasticsearch",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#93-启动elasticsearch",children:"#"}),"9.3 启动Elasticsearch"]}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.strong,{children:"需要使用es用户执行以下操作"})}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-shell",meta:"script",children:"# 执行/opt/es/elasticsearch-7.8.0/bin/elasticsearch\r\n/opt/es/elasticsearch-7.8.0/bin/elasticsearch\r\n# 若想后台启动，可加-d参数\r\n/opt/es/elasticsearch-7.8.0/bin/elasticsearch -d\n"})}),"\n",(0,n.jsxs)(a.h2,{id:"94-访问elasticsearch",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#94-访问elasticsearch",children:"#"}),"9.4 访问Elasticsearch"]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-shell",meta:"script",children:"curl http://localhost:9200\n"})}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{src:d})}),"\n",(0,n.jsxs)(a.h2,{id:"95-安装kibana",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#95-安装kibana",children:"#"}),"9.5 安装Kibana"]}),"\n",(0,n.jsx)(a.p,{children:"下载Kibana7.8安装包，上传到/opt/es文件夹，进行解压即可。"}),"\n",(0,n.jsxs)(a.h2,{id:"96-配置kibana环境参数",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#96-配置kibana环境参数",children:"#"}),"9.6 配置Kibana环境参数"]}),"\n",(0,n.jsxs)(a.h3,{id:"961-授权",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#961-授权",children:"#"}),"9.6.1 授权"]}),"\n",(0,n.jsx)(a.p,{children:"将kibana-7.8.0的操作权限赋给es用户"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-shell",meta:"script",children:"chown -R es /opt/es/kibana-7.8.0\n"})}),"\n",(0,n.jsxs)(a.h3,{id:"962-修改kibana配置",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#962-修改kibana配置",children:"#"}),"9.6.2 修改kibana配置"]}),"\n",(0,n.jsx)(a.p,{children:"修改/opt/es/kibana-7.8.0/config/kibana.yml，内容如下："}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-yaml",meta:"",children:'# 服务端口\r\nserver.port: 5601\r\n# 访问IP设置，0.0.0.0表示可以远程访问\r\nserver.host: "0.0.0.0"\r\n# 配置es访问地址（使用ip不要用localhost。以后使用集群的时候，必须得用ip）\r\nelasticsearch.hosts: ["http://192.168.1.11:9200"]\n'})}),"\n",(0,n.jsxs)(a.h2,{id:"97-后台运行kibana",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#97-后台运行kibana",children:"#"}),"9.7 后台运行kibana"]}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.strong,{children:"需要使用es用户执行以下操作"})}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-shell",meta:"script",children:"nohup /opt/es/kibana-7.8.0/bin/kibana &\n"})}),"\n",(0,n.jsxs)(a.h2,{id:"98-访问kibana",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#98-访问kibana",children:"#"}),"9.8 访问kibana"]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-shell",meta:"script",children:"curl http://localhost:5601\n"})}),"\n",(0,n.jsxs)(a.h2,{id:"99-安装ik分词器",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#99-安装ik分词器",children:"#"}),"9.9 安装ik分词器"]}),"\n",(0,n.jsxs)(a.p,{children:["在/opt/es/elasticsearch-7.8.0/plugins/文件夹创建ik文件夹。\r\n下载ik安装包，上传到/opt/es/elasticsearch-7.8.0/plugins/ik文件夹，进行解压。",(0,n.jsx)(a.strong,{children:"解压后，将安装包删除"})]}),"\n",(0,n.jsxs)(a.h2,{id:"98-ik分词器文件夹授权",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#98-ik分词器文件夹授权",children:"#"}),"9.8 ik分词器文件夹授权"]}),"\n",(0,n.jsx)(a.p,{children:"将ik分词器的操作权限赋给es用户"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-shell",meta:"script",children:"chown -R es /opt/es/elasticsearch-7.8.0/plugins/ik\n"})}),"\n",(0,n.jsxs)(a.h2,{id:"99-重启es和kibana",children:[(0,n.jsx)(a.a,{className:"header-anchor","aria-hidden":"true",href:"#99-重启es和kibana",children:"#"}),"9.9 重启es和kibana"]}),"\n",(0,n.jsx)(a.p,{children:"重启后，ik分词器生效。"})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:a}=Object.assign({},(0,r.ah)(),e.components);return a?(0,n.jsx)(a,Object.assign({},e,{children:(0,n.jsx)(l,e)})):l(e)}let x=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["tang%2FElasticsearch%2F09_Linux%20%E5%AE%89%E8%A3%85%20Elasticsearch.md"]={toc:[{id:"91-安装elasticsearch",text:"9.1 安装Elasticsearch",depth:2},{id:"92-配置elasticsearch环境参数",text:"9.2 配置Elasticsearch环境参数",depth:2},{id:"921-创建用户",text:"9.2.1 创建用户",depth:3},{id:"922-给用户设置sudo权限",text:"9.2.2 给用户设置sudo权限",depth:3},{id:"923-修改普通用户打开文件最大数限制启动线程数限制",text:"9.2.3 修改普通用户打开文件最大数限制、启动线程数限制",depth:3},{id:"924-为普通用户增大虚拟内存",text:"9.2.4 为普通用户增大虚拟内存",depth:3},{id:"925-使以上配置生效",text:"9.2.5 使以上配置生效",depth:3},{id:"926-修改elasticsearchyml文件",text:"9.2.6 修改elasticsearch.yml文件",depth:3},{id:"927-修改jvm配置",text:"9.2.7 修改jvm配置",depth:3},{id:"93-启动elasticsearch",text:"9.3 启动Elasticsearch",depth:2},{id:"94-访问elasticsearch",text:"9.4 访问Elasticsearch",depth:2},{id:"95-安装kibana",text:"9.5 安装Kibana",depth:2},{id:"96-配置kibana环境参数",text:"9.6 配置Kibana环境参数",depth:2},{id:"961-授权",text:"9.6.1 授权",depth:3},{id:"962-修改kibana配置",text:"9.6.2 修改kibana配置",depth:3},{id:"97-后台运行kibana",text:"9.7 后台运行kibana",depth:2},{id:"98-访问kibana",text:"9.8 访问kibana",depth:2},{id:"99-安装ik分词器",text:"9.9 安装ik分词器",depth:2},{id:"98-ik分词器文件夹授权",text:"9.8 ik分词器文件夹授权",depth:2},{id:"99-重启es和kibana",text:"9.9 重启es和kibana",depth:2}],title:"9 Linux安装ES相关工具",headingTitle:"9 Linux安装ES相关工具",frontmatter:{}}}}]);