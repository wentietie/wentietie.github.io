"use strict";(self.webpackChunkmy_doc=self.webpackChunkmy_doc||[]).push([["5924"],{93622:function(n,e,r){r.r(e),r.d(e,{default:()=>o});var s=r("85893"),i=r("50065");let c=r.p+"static/image/sort.7d177ceb.png",l=r.p+"static/image/from_size.4e7e2217.png",h=r.p+"static/image/scroll_first.b5079f13.png",d=r.p+"static/image/scroll_second.55f1b204.png",t=r.p+"static/image/highlight.db9e98a2.png",x=r.p+"static/image/fuzzy.43fed4ae.png";function a(n){let e=Object.assign({h1:"h1",a:"a",h2:"h2",blockquote:"blockquote",p:"p",pre:"pre",code:"code",img:"img",h3:"h3",ul:"ul",li:"li",strong:"strong"},(0,i.ah)(),n.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.h1,{id:"6-进阶查询",children:[(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#6-进阶查询",children:"#"}),"6 进阶查询"]}),"\n",(0,s.jsxs)(e.h2,{id:"61-排序",children:[(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#61-排序",children:"#"}),"6.1 排序"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"关键字"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"sort"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"语法"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{meta:"",children:'POST /索引名/_search\r\n{\r\n  "query": {...},\r\n  "sort": [ // 排序关键字，与query同级\r\n    {\r\n      "字段1": {\r\n        "order": "asc或desc"\r\n      }\r\n    },\r\n    {\r\n      "字段2": {\r\n        "order": "asc或desc"\r\n      }\r\n    }\r\n    ...\r\n  ]\r\n}\n'})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"举例"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:c})}),"\n",(0,s.jsxs)(e.h2,{id:"62-分页",children:[(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#62-分页",children:"#"}),"6.2 分页"]}),"\n",(0,s.jsxs)(e.h3,{id:"621-fromsize分页",children:[(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#621-fromsize分页",children:"#"}),"6.2.1 from、size分页"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"关键字"}),"\n"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"from：起始索引值，默认从0开始。from = (pageNum - 1) * size"}),"\n",(0,s.jsx)(e.li,{children:"size：每页显示多少条"}),"\n"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"语法"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{meta:"",children:'POST /索引名/_search\r\n{\r\n  "query": {...},\r\n  "from": 0, // 起始索引值\r\n  "size": 2 // 每页显示多少条\r\n}\n'})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"举例"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:l})}),"\n",(0,s.jsxs)(e.h3,{id:"622-scoll分页",children:[(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#622-scoll分页",children:"#"}),"6.2.2 scoll分页"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"概念"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"滚动查询的意思是指如果获取的数据特别多，那我们可以分批获取数据。\r\n给服务器一个处理请求的时间，在该时间内，一次性查询出来所有满足条件的数据，保存到内存中，分批次进行获取。所以每次进行查询的时候都要传递一个系统的处理时间。类似于关系型数据库中的游标 。"}),"\n",(0,s.jsx)(e.p,{children:"第一次查询：返回相关数据的同时，还是返回一个_scroll_id，该时间内，数据有变动不受影响。"}),"\n",(0,s.jsx)(e.p,{children:"第n次查询（n>1）：在相关时间内，body体只传_scroll_id即可实现翻页效果"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"关键字"}),"\n"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"scroll：指明服务器处理时间"}),"\n",(0,s.jsx)(e.li,{children:"size：每页显示多少条"}),"\n"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"语法"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"注意：两次查询接口不一样"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{meta:"",children:'# 第一次查询\r\nPOST /索引名/_search?scroll=1m\r\n{\r\n  "query": {...}, \r\n  "size": 1 // 每页多少条数据\r\n}\r\n\r\n# 第n次查询（n>1）：\r\nGET /_search/scroll?scroll=1m\r\n{\r\n  "scroll_id": "第一次查询时返回的_scroll_id"\r\n}\n'})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"举例"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.img,{src:h}),"\r\n",(0,s.jsx)(e.img,{src:d})]}),"\n",(0,s.jsxs)(e.h2,{id:"63-高亮",children:[(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#63-高亮",children:"#"}),"6.3 高亮"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"关键字"}),"\n"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"highlight"}),"\n",(0,s.jsx)(e.li,{children:"highlight.pre_tags：高亮前缀。"}),"\n",(0,s.jsx)(e.li,{children:"highlight.post_tags：高亮后缀。"}),"\n",(0,s.jsx)(e.li,{children:"highlight.fields：配置需要高亮的属性"}),"\n"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"语法"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"注意：highlight.fields中的字段必须是query中被检索的字段"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{meta:"",children:'POST /索引名/_search\r\n{\r\n  "query": {...},\r\n  "highlight": {\r\n    "pre_tags": "高亮前缀",\r\n    "post_tags": "高亮后缀",\r\n    "fields": {\r\n      "字段名1": {},\r\n      "字段名2": {},\r\n      ...\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"举例"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:t})}),"\n",(0,s.jsxs)(e.h2,{id:"64-近似查询",children:[(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#64-近似查询",children:"#"}),"6.4 近似查询"]}),"\n",(0,s.jsx)(e.p,{children:"简单了解，中文用不上。"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"概念"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"近似查询指的是返回包含与搜索字词相似的字词的文档。如百度搜索中，某个单词拼写错误，但是会返回正确单词对应的记录。"}),"\n",(0,s.jsx)(e.p,{children:"对中文不适用，只适用于英文。"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"编辑距离"}),"是将一个术语转换为另一个术语所需的一个字符更改的次数。这些更改可以包括："]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"更改字符，如box改为fox"}),"\n",(0,s.jsx)(e.li,{children:"删除字符，如black改为lack"}),"\n",(0,s.jsx)(e.li,{children:"插入字符，如sic改为sick"}),"\n",(0,s.jsx)(e.li,{children:"转置两个相邻字符，如act改为cat"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"为了找到相似的术语，fuzzy会在指定的编辑距离内创建一组搜索词的所有可能的变体或扩展。然后查询返回每个扩展的完全匹配。\r\n通过fuzziness修改编辑距离，一般使用默认值AUTO，根据术语的长度生成编辑距离。"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"关键字"}),"\n"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"fuzzy"}),"\n"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"语法"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{meta:"",children:'GET /索引名/_search\r\n{\r\n  "query": {\r\n    "fuzzy": {\r\n      "字段名": {\r\n        "value": "字段值"\r\n      }\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"举例"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:x})})]})}function j(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,i.ah)(),n.components);return e?(0,s.jsx)(e,Object.assign({},n,{children:(0,s.jsx)(a,n)})):a(n)}let o=j;j.__RSPRESS_PAGE_META={},j.__RSPRESS_PAGE_META["tang%2FElasticsearch%2F06_Elasticsearch%E8%BF%9B%E9%98%B6%E6%9F%A5%E8%AF%A2.md"]={toc:[{id:"61-排序",text:"6.1 排序",depth:2},{id:"62-分页",text:"6.2 分页",depth:2},{id:"621-fromsize分页",text:"6.2.1 from、size分页",depth:3},{id:"622-scoll分页",text:"6.2.2 scoll分页",depth:3},{id:"63-高亮",text:"6.3 高亮",depth:2},{id:"64-近似查询",text:"6.4 近似查询",depth:2}],title:"6 进阶查询",headingTitle:"6 进阶查询",frontmatter:{}}}}]);