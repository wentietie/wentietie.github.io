"use strict";(self.webpackChunkmy_doc=self.webpackChunkmy_doc||[]).push([["7052"],{57661:function(n,e,r){r.r(e),r.d(e,{default:()=>p});var a=r("85893"),s=r("50065");let c=r.p+"static/image/1616641821310.42e20a19.png",o=r.p+"static/image/1616642793574.967a32a8.png",i=r.p+"static/image/1616642006422.3f91204a.png",t=r.p+"static/image/1616643085380.16a5d257.png",l=r.p+"static/image/1616643201018.54942eb2.png";function d(n){let e=Object.assign({h1:"h1",a:"a",p:"p",ul:"ul",li:"li",code:"code",h2:"h2",img:"img",pre:"pre"},(0,s.ah)(),n.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.h1,{id:"nacos的使用",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#nacos的使用",children:"#"}),"Nacos的使用"]}),"\n",(0,a.jsxs)(e.p,{children:["Nacos官方文档：",(0,a.jsx)(e.a,{href:"https://nacos.io/zh-cn/docs/quick-start.html",rel:"noopener noreferrer",target:"_blank",children:"https://nacos.io/zh-cn/docs/quick-start.html"})]}),"\n",(0,a.jsxs)(e.h1,{id:"1windows环境启动nacos",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#1windows环境启动nacos",children:"#"}),"1.windows环境启动Nacos"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"环境准备： 64 bit JDK 1.8+ 、 Maven 3.2.x+"}),"\n",(0,a.jsxs)(e.li,{children:["Nacos有两种启动方式。一种是下载源码，进行编译后再启动；另一种是直接下载",(0,a.jsx)(e.code,{children:"nacos-server-$version.zip"}),"解压后再启动。本文介绍使用下载zip文件的方式进行启动。"]}),"\n",(0,a.jsxs)(e.li,{children:["目前稳定版本是1.4.1，推荐使用该版本，下载地址：",(0,a.jsx)(e.a,{href:"https://github.com/alibaba/nacos/releases/download/1.4.1/nacos-server-1.4.1.zip%E3%80%82%E6%88%91%E8%BF%99%E9%87%8C%E4%BD%BF%E7%94%A8%E7%9A%84%E6%98%AF%E6%9C%80%E6%96%B0%E7%89%882.0.0%E3%80%82",rel:"noopener noreferrer",target:"_blank",children:"https://github.com/alibaba/nacos/releases/download/1.4.1/nacos-server-1.4.1.zip。我这里使用的是最新版2.0.0。"})]}),"\n"]}),"\n",(0,a.jsxs)(e.h2,{id:"11解压",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#11解压",children:"#"}),"1.1解压"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{alt:"1616641821310",src:c})}),"\n",(0,a.jsxs)(e.h2,{id:"12创建数据库",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#12创建数据库",children:"#"}),"1.2创建数据库"]}),"\n",(0,a.jsxs)(e.p,{children:["在mysql中创建nacos数据库，导入",(0,a.jsx)(e.code,{children:"D:\\Nacos\\nacos\\conf\\nacos-mysql.sql"}),":"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{alt:"1616642793574",src:o})}),"\n",(0,a.jsxs)(e.h2,{id:"13修改配置文件",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#13修改配置文件",children:"#"}),"1.3修改配置文件"]}),"\n",(0,a.jsxs)(e.p,{children:["用记事本打开",(0,a.jsx)(e.code,{children:"D:\\Nacos\\nacos\\conf\\application.properties"}),"文件进行修改。"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{alt:"1616642006422",src:i})}),"\n",(0,a.jsxs)(e.h2,{id:"14启动",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#14启动",children:"#"}),"1.4启动"]}),"\n",(0,a.jsxs)(e.p,{children:["cmd进入",(0,a.jsx)(e.code,{children:"D:\\Nacos\\nacos\\bin"}),"路径，执行",(0,a.jsx)(e.code,{children:"startup.cmd -m standalone"}),"命令。"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{alt:"1616643085380",src:t})}),"\n",(0,a.jsxs)(e.h2,{id:"15访问",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#15访问",children:"#"}),"1.5访问"]}),"\n",(0,a.jsxs)(e.p,{children:["浏览器输入",(0,a.jsx)(e.a,{href:"http://localhost:8848/nacos/",rel:"noopener noreferrer",target:"_blank",children:"http://localhost:8848/nacos/"})," 进行访问。登录账号/密码为：nacos/nacos"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{alt:"1616643201018",src:l})}),"\n",(0,a.jsxs)(e.h1,{id:"2云平台部署nacos",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#2云平台部署nacos",children:"#"}),"2.云平台部署Nacos"]}),"\n",(0,a.jsx)(e.p,{children:"一个yaml文件搞定~"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-yaml",meta:"",children:'---\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: nacos\r\n  namespace: pano-dev # 此处改成自己的namespace\r\n  labels:\r\n    app: nacos\r\nspec:\r\n  type: NodePort\r\n  ports:\r\n    - port: 8848\r\n      name: nacos-server\r\n      targetPort: 8848\r\n      protocol: TCP\r\n  selector:\r\n    app: nacos\r\n---\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: nacos-cm\r\n  namespace: pano-dev # 此处改成自己的namespace\r\ndata: # 根据自己的数据库信息进行配置\r\n  mysql.db.name: "ry-config"\r\n  mysql.port: "3306"\r\n  mysql.user: "root"\r\n  mysql.password: "bd@20!Cloud#123"\r\n  mysql.host: "10.1.93.168"\r\n---\r\napiVersion: apps/v1\r\nkind: StatefulSet\r\nmetadata:\r\n  name: nacos\r\n  namespace: pano-dev # 此处改成自己的namespace\r\nspec:\r\n  serviceName: nacos\r\n  replicas: 1\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: nacos\r\n      annotations:\r\n        pod.alpha.kubernetes.io/initialized: "true"\r\n    spec:\r\n      affinity:\r\n        podAntiAffinity:\r\n          requiredDuringSchedulingIgnoredDuringExecution:\r\n            - labelSelector:\r\n                matchExpressions:\r\n                  - key: "app"\r\n                    operator: In\r\n                    values:\r\n                      - nacos\r\n              topologyKey: "kubernetes.io/hostname"\r\n      containers:\r\n        - name: k8snacos\r\n          imagePullPolicy: IfNotPresent\r\n          image: nacos/nacos-server:latest\r\n          ports:\r\n            - containerPort: 8848\r\n              name: client\r\n          env:\r\n            - name: NACOS_REPLICAS\r\n              value: "1"\r\n            - name: MYSQL_SERVICE_DB_NAME\r\n              valueFrom:\r\n                configMapKeyRef:\r\n                  name: nacos-cm\r\n                  key: mysql.db.name\r\n            - name: MYSQL_SERVICE_PORT\r\n              valueFrom:\r\n                configMapKeyRef:\r\n                  name: nacos-cm\r\n                  key: mysql.port\r\n            - name: MYSQL_SERVICE_USER\r\n              valueFrom:\r\n                configMapKeyRef:\r\n                  name: nacos-cm\r\n                  key: mysql.user\r\n            - name: MYSQL_SERVICE_PASSWORD\r\n              valueFrom:\r\n                configMapKeyRef:\r\n                  name: nacos-cm\r\n                  key: mysql.password\r\n            - name: MYSQL_SERVICE_HOST\r\n              valueFrom:\r\n                configMapKeyRef:\r\n                  name: nacos-cm\r\n                  key: mysql.host\r\n            - name: NACOS_SERVER_PORT\r\n              value: "8848"\r\n            - name: NACOS_APPLICATION_PORT\r\n              value: "8848"\r\n            - name: PREFER_HOST_MODE\r\n              value: "hostname"\r\n            - name: NACOS_SERVERS\r\n              value: "nacos-0.nacos-headless.default.svc.cluster.local:8848"\r\n  selector:\r\n    matchLabels:\r\n      app: nacos\n'})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-shell",meta:"",children:"kubectl apply -f nacos.yaml\n"})}),"\n",(0,a.jsxs)(e.p,{children:["访问的话，需要去查询service的端口号进行访问：",(0,a.jsx)(e.a,{href:"http://IP:%E7%AB%AF%E5%8F%A3%E5%8F%B7/nacos%E3%80%82",rel:"noopener noreferrer",target:"_blank",children:"http://IP:端口号/nacos。"})]})]})}function h(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,s.ah)(),n.components);return e?(0,a.jsx)(e,Object.assign({},n,{children:(0,a.jsx)(d,n)})):d(n)}let p=h;h.__RSPRESS_PAGE_META={},h.__RSPRESS_PAGE_META["tang%2Fmservice%2F1.md"]={toc:[{id:"11解压",text:"1.1解压",depth:2},{id:"12创建数据库",text:"1.2创建数据库",depth:2},{id:"13修改配置文件",text:"1.3修改配置文件",depth:2},{id:"14启动",text:"1.4启动",depth:2},{id:"15访问",text:"1.5访问",depth:2}],title:"Nacos的使用",headingTitle:"Nacos的使用",frontmatter:{}}}}]);