"use strict";(self.webpackChunkmy_doc=self.webpackChunkmy_doc||[]).push([["191"],{81296:function(e,n,r){r.r(n),r.d(n,{default:()=>a});var s=r("85893"),l=r("50065");let i=r.p+"static/image/img4.79913d1b.png";function c(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",pre:"pre",code:"code",ul:"ul",li:"li",p:"p",strong:"strong",img:"img",blockquote:"blockquote"},(0,l.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"5-mysql一些常用命令",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#5-mysql一些常用命令",children:"#"}),"5 MySQL一些常用命令"]}),"\n",(0,s.jsxs)(n.h2,{id:"51-查看所有的数据库",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#51-查看所有的数据库",children:"#"}),"5.1 查看所有的数据库"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mysql",meta:"",children:"show databases;\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"“information_schema”是 MySQL 系统自带的数据库，主要保存 MySQL 数据库服务器的系统信息， 比如数据库的名称、数据表的名称、字段名称、存取权限、数据文件\r\n所在的文件夹和系统使用的 文件夹，等等"}),"\n",(0,s.jsx)(n.li,{children:"“performance_schema”是 MySQL 系统自带的数据库，可以用来监控 MySQL 的各类性能指标。"}),"\n",(0,s.jsx)(n.li,{children:"“sys”数据库是 MySQL 系统自带的数据库，主要作用是以一种更容易被理解的方式展示 MySQL 数据 库服务器的各类性能指标，帮助系统管理员和开发人员监控\r\nMySQL 的技术性能。"}),"\n",(0,s.jsx)(n.li,{children:"“mysql”数据库保存了 MySQL 数据库服务器运行时需要的系统信息，比如数据文件夹、当前使用的 字符集、约束检查信息，等等"}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"52-查看库表的创建信息",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#52-查看库表的创建信息",children:"#"}),"5.2 查看库、表的创建信息"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mysql",meta:"",children:"# 查看库的创建信息\r\nshow create database 库名;\r\n# 查看表的创建信息\r\nshow create table 表名称;\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"53-显示表结构",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#53-显示表结构",children:"#"}),"5.3 显示表结构"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"describe 表名"}),"或",(0,s.jsx)(n.code,{children:"desc 表名"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mysql",meta:"",children:"mysql> describe dw_project; #也可以使用d\r\n+-------------+--------------+------+-----+---------+-------+\r\n| Field       | Type         | Null | Key | Default | Extra |\r\n+-------------+--------------+------+-----+---------+-------+\r\n| id          | int          | NO   | PRI | NULL    |       |\r\n| Source_Name | varchar(255) | YES  |     | NULL    |       |\r\n| Fund_Usd    | varchar(100) | YES  |     | NULL    |       |\r\n+-------------+--------------+------+-----+---------+-------+\r\n3 rows in set (0.01 sec)\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"54-分页",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#54-分页",children:"#"}),"5.4 分页"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"limit"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["语法： ",(0,s.jsx)(n.code,{children:"limit 位置偏移量, 行数"}),"，其中位置偏移量可省（省略时表示从0开始）"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"limit字句必须放在select语句的最后！"})}),"\n",(0,s.jsxs)(n.li,{children:["MySQL8.0新特性","：",(0,s.jsx)(n.code,{children:"limit 行数 offset 位置偏移量"})," 和  ",(0,s.jsx)(n.code,{children:"limit 位置偏移量, 行数"}),"\r\n效果一致"]}),"\n",(0,s.jsxs)(n.li,{children:["使用limit的优点：","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"减少表的网格传输量，提升查询效率。"}),"\n",(0,s.jsxs)(n.li,{children:["当知道返回结果只有1条时，就可以使用",(0,s.jsx)(n.code,{children:"limit 1"}),"，这样不需扫描整张表，从而提升效率"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"55-多表查询",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#55-多表查询",children:"#"}),"5.5 多表查询"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"inner join ... on"}),"或",(0,s.jsx)(n.code,{children:"join ... on"}),"：内连接。",(0,s.jsx)(n.code,{children:"A inner join B ... on"}),"表示取A和B的交集"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"left outer join ... on"}),"或",(0,s.jsx)(n.code,{children:"left join ... on"}),"：左外连接。",(0,s.jsx)(n.code,{children:"A left join B ... on"}),"表示取所有满足条件的A中元素"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"right outer join ... on"}),"或",(0,s.jsx)(n.code,{children:"right join ... on"}),"：左外连接。",(0,s.jsx)(n.code,{children:"A right join B ... on"}),"表示取所有满足条件的B中元素"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"union"}),"或",(0,s.jsx)(n.code,{children:"union all"}),"：合并查询结果。即将多条select的结果集组合成一个结果集。"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"union"}),"：返回两个查询结果集的并集，并",(0,s.jsx)(n.strong,{children:"去除重复记录"}),"。"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"union all"}),"：返回两个查询结果集的并集，",(0,s.jsx)(n.strong,{children:"不去重，效率高"})]}),"\n",(0,s.jsxs)(n.p,{children:["当明知道合并数据后的结果不存在重复数据，或者不需要去重的情况下，尽量使用",(0,s.jsx)(n.code,{children:"union all"}),"。"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"natural join"}),"：自然连接。","SQL99新特性","。会自动查询两张表中",(0,s.jsx)(n.strong,{children:"所有同名的字段"}),"\r\n，并对它们进行",(0,s.jsx)(n.strong,{children:"等值连接"})]}),"\n",(0,s.jsx)(n.p,{children:"在SQL92标准中："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mysql",meta:"",children:"SELECT employee_id,last_name,department_name\r\nFROM employees e \r\nJOIN departments d ON e.`department_id` = d.`department_id` AND e.`manager_id` = d.`manager_id`;\n"})}),"\n",(0,s.jsx)(n.p,{children:"在 SQL99 中可以写成："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mysql",meta:"",children:"SELECT employee_id,last_name,department_name\r\nFROM employees e \r\nNATURAL JOIN departments d;\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"join ... using(字段名)"}),"：","SQL99新特性","。",(0,s.jsx)(n.strong,{children:"指定数据表里的同名字段"}),"进行**等值连接\r\n**，",(0,s.jsx)(n.strong,{children:"只能配合join使用"}),"。"]}),"\n",(0,s.jsx)(n.p,{children:"在SQL92标准中："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mysql",meta:"",children:"SELECT employee_id,last_name,department_name\r\nFROM employees e \r\nJOIN departments d ON e.`department_id` = d.`department_id`;\n"})}),"\n",(0,s.jsx)(n.p,{children:"在 SQL99 中可以写成："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mysql",meta:"",children:"SELECT employee_id,last_name,department_name\r\nFROM employees e \r\nJOIN departments d USING (department_id);\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"注意"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["要",(0,s.jsx)(n.strong,{children:"控制连接表的数量"})," 。多表连接就相当于嵌套 for 循环一样，非常消耗资源，会让 SQL 查询性能下 降得很严重，因此不要连接不必要的表。"]}),"\n",(0,s.jsxs)(n.p,{children:["阿里巴巴《Java开发手册》中，",(0,s.jsx)(n.strong,{children:"超过三个表禁止 join"}),"。"]}),"\n",(0,s.jsxs)(n.h2,{id:"56-编码集设置",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#56-编码集设置",children:"#"}),"5.6 编码集设置"]}),"\n",(0,s.jsxs)(n.p,{children:["在",(0,s.jsx)(n.strong,{children:"MySQL 8.0版本之前"}),"，默认字符集为latin1，utf8字符集指向的是utf8mb3，如果没有修改编码，",(0,s.jsx)(n.strong,{children:"会出现乱码问题"}),"。但是从MySQL 8.0\r\n开始，数据库的默认编码改为 utf8mb4，从而避免了乱码问题。因此，此处编码集设置是",(0,s.jsx)(n.strong,{children:"针对MySQL5.7版本"}),"。"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"问题再现"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mysql",meta:"",children:"mysql> INSERT INTO t_stu VALUES(1,'张三','男');\r\nERROR 1366 (HY000): Incorrect string value: '\\xD5\\xC5\\xC8\\xFD' for column 'sname' at\r\nrow 1\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"问题解决"}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"步骤1：查看编码命令"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mysql",meta:"",children:"show variables like 'character_%';\r\nshow variables like 'collation_%';\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"步骤2：修改mysql的数据目录下的my.ini配置文件"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",meta:"",children:"[mysql] #大概在63行左右，在其下添加\r\n...\r\ndefault-character-set=utf8 #默认字符集\r\n[mysqld] # 大概在76行左右，在其下添加\r\n...\r\ncharacter-set-server=utf8\r\ncollation-server=utf8_general_ci\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"步骤3：重启服务"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"步骤4：查看编码信息"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mysql",meta:"",children:"mysql> show variables like 'character_%';\r\n+--------------------------+---------------------------------------------+\r\n| Variable_name            | Value                                       |\r\n+--------------------------+---------------------------------------------+\r\n| character_set_client     | utf8                                        |\r\n| character_set_connection | utf8                                        |\r\n| character_set_database   | utf8                                        |\r\n| character_set_filesystem | binary                                      |\r\n| character_set_results    | utf8                                        |\r\n| character_set_server     | utf8                                        |\r\n| character_set_system     | utf8                                        |\r\n| character_sets_dir       | D:\\soft\\mysql-8.0.23-winx64\\share\\charsets\\ |\r\n+--------------------------+---------------------------------------------+\r\n8 rows in set, 1 warning (0.03 sec)\r\n\r\nmysql> show variables like 'collation_%';\r\n+----------------------+--------------------+\r\n| Variable_name        | Value              |\r\n+----------------------+--------------------+\r\n| collation_connection | utf8               |\r\n| collation_database   | utf8               |\r\n| collation_server     | utf8               |\r\n+----------------------+--------------------+\n"})}),"\n"]}),"\n"]})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,l.ah)(),e.components);return n?(0,s.jsx)(n,Object.assign({},e,{children:(0,s.jsx)(c,e)})):c(e)}let a=d;d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["tang%2Fmysql%2F05_MySQL%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.md"]={toc:[{id:"51-查看所有的数据库",text:"5.1 查看所有的数据库",depth:2},{id:"52-查看库表的创建信息",text:"5.2 查看库、表的创建信息",depth:2},{id:"53-显示表结构",text:"5.3 显示表结构",depth:2},{id:"54-分页",text:"5.4 分页",depth:2},{id:"55-多表查询",text:"5.5 多表查询",depth:2},{id:"56-编码集设置",text:"5.6 编码集设置",depth:2}],title:"5 MySQL一些常用命令",headingTitle:"5 MySQL一些常用命令",frontmatter:{}}}}]);