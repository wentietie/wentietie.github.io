<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <title>13 约束 | wenatie</title><meta name="description" content="我的个人博客">
    <link rel="preload" href="/assets/style-DSwRxUHW.css" as="style"><link rel="stylesheet" href="/assets/style-DSwRxUHW.css">
    <link rel="modulepreload" href="/assets/app-CW2dCZSC.js"><link rel="modulepreload" href="/assets/13_约束.html-BnuDos7-.js">
    <link rel="prefetch" href="/assets/index.html-BB3gAwfD.js" as="script"><link rel="prefetch" href="/assets/fileToBase64.html-XoQUesJl.js" as="script"><link rel="prefetch" href="/assets/imgZip.html-I29B6FqW.js" as="script"><link rel="prefetch" href="/assets/jsonutil.html-BW0G2DsO.js" as="script"><link rel="prefetch" href="/assets/jsonView.html-BCB8g7SN.js" as="script"><link rel="prefetch" href="/assets/part1.html-Dks7b_JZ.js" as="script"><link rel="prefetch" href="/assets/part2.html-DevfUS9H.js" as="script"><link rel="prefetch" href="/assets/part3.html-DXnMig3k.js" as="script"><link rel="prefetch" href="/assets/part4.html-0ATK1gVu.js" as="script"><link rel="prefetch" href="/assets/part1.html-CdwCj0FA.js" as="script"><link rel="prefetch" href="/assets/part2.html-BAQk2MwX.js" as="script"><link rel="prefetch" href="/assets/git.html-y6tihAdN.js" as="script"><link rel="prefetch" href="/assets/wp-1.html-2Qv-4c8N.js" as="script"><link rel="prefetch" href="/assets/part1.html-CCp8JqjD.js" as="script"><link rel="prefetch" href="/assets/part2.html-DNd8V3TS.js" as="script"><link rel="prefetch" href="/assets/part1.html-BXJiclzn.js" as="script"><link rel="prefetch" href="/assets/part2.html-D4ow0J5C.js" as="script"><link rel="prefetch" href="/assets/spring6.html-BQLWtEEL.js" as="script"><link rel="prefetch" href="/assets/fzzj.html-DumCdxqr.js" as="script"><link rel="prefetch" href="/assets/smzqhs.html-DMuRgviR.js" as="script"><link rel="prefetch" href="/assets/vue-slsx.html-D-y1Cm2o.js" as="script"><link rel="prefetch" href="/assets/vueyuanli.html-DCJ7AmDi.js" as="script"><link rel="prefetch" href="/assets/ysbd.html-B_nXaAGX.js" as="script"><link rel="prefetch" href="/assets/part1.html-CV3arDXz.js" as="script"><link rel="prefetch" href="/assets/part1.html-BMrPvyEb.js" as="script"><link rel="prefetch" href="/assets/part2.html-25U0JKV1.js" as="script"><link rel="prefetch" href="/assets/part3.html-BB-2hvh0.js" as="script"><link rel="prefetch" href="/assets/part4.html-ZSXt4j2R.js" as="script"><link rel="prefetch" href="/assets/index.html-D3UAI_ir.js" as="script"><link rel="prefetch" href="/assets/es6-1.html-DETYAToK.js" as="script"><link rel="prefetch" href="/assets/es6-10.html-BU5JhXxZ.js" as="script"><link rel="prefetch" href="/assets/es6-11.html-B70ajPge.js" as="script"><link rel="prefetch" href="/assets/es6-12.html-ywi_nMPM.js" as="script"><link rel="prefetch" href="/assets/es6-13.html-C7Hmr1zS.js" as="script"><link rel="prefetch" href="/assets/es6-14.html-De7eJs0m.js" as="script"><link rel="prefetch" href="/assets/es6-15.html-TgSkdp_O.js" as="script"><link rel="prefetch" href="/assets/es6-16.html-B6bv6682.js" as="script"><link rel="prefetch" href="/assets/es6-17.html-CeJLx5G_.js" as="script"><link rel="prefetch" href="/assets/es6-18.html-oVC1GU76.js" as="script"><link rel="prefetch" href="/assets/es6-2.html-DlM0w0bD.js" as="script"><link rel="prefetch" href="/assets/es6-3.html-Dia7z-g3.js" as="script"><link rel="prefetch" href="/assets/es6-4.html-C8nJqtxS.js" as="script"><link rel="prefetch" href="/assets/es6-5.html-BTnpNWYZ.js" as="script"><link rel="prefetch" href="/assets/es6-6.html-D8yeSp66.js" as="script"><link rel="prefetch" href="/assets/es6-7.html-DL_fTK43.js" as="script"><link rel="prefetch" href="/assets/es6-8.html-CM-_76ax.js" as="script"><link rel="prefetch" href="/assets/es6-9.html-BSAnaRVi.js" as="script"><link rel="prefetch" href="/assets/p1.html-DKsAzRvB.js" as="script"><link rel="prefetch" href="/assets/ts-basic.html-BvbipOjv.js" as="script"><link rel="prefetch" href="/assets/part1.html-B7fWRYsu.js" as="script"><link rel="prefetch" href="/assets/part2.html-BpAhFDLm.js" as="script"><link rel="prefetch" href="/assets/kuayu.html-u1UFuv0O.js" as="script"><link rel="prefetch" href="/assets/layout.html-BohKWiyB.js" as="script"><link rel="prefetch" href="/assets/refresh.html-Rk3LUtrY.js" as="script"><link rel="prefetch" href="/assets/route.html-q-QnEG2i.js" as="script"><link rel="prefetch" href="/assets/storage.html-DZQEvYzD.js" as="script"><link rel="prefetch" href="/assets/xmlhttprequest.html-Dtxi5Y-1.js" as="script"><link rel="prefetch" href="/assets/autoheight.html-Blz0aNPc.js" as="script"><link rel="prefetch" href="/assets/css-selector.html-VcH-ddy_.js" as="script"><link rel="prefetch" href="/assets/CSSchangyong.html-BH-32BUy.js" as="script"><link rel="prefetch" href="/assets/flex.html-HG4tbXpy.js" as="script"><link rel="prefetch" href="/assets/grid.html-CRGNq_hT.js" as="script"><link rel="prefetch" href="/assets/longlist.html-DykMrHCr.js" as="script"><link rel="prefetch" href="/assets/beforeunload.html-BKStiYVG.js" as="script"><link rel="prefetch" href="/assets/buding.html-CexXEq05.js" as="script"><link rel="prefetch" href="/assets/hwdj.html-dREOWCSs.js" as="script"><link rel="prefetch" href="/assets/modules.html-C5rJXjlk.js" as="script"><link rel="prefetch" href="/assets/pro-compile.html-CO2MqPsp.js" as="script"><link rel="prefetch" href="/assets/usually-functions.html-knjSAt89.js" as="script"><link rel="prefetch" href="/assets/vue-webpack-optimize.html-DumpUpkR.js" as="script"><link rel="prefetch" href="/assets/webpack-optimize.html-rY5tECb-.js" as="script"><link rel="prefetch" href="/assets/linuxinstallnode.html-abpPhp7Q.js" as="script"><link rel="prefetch" href="/assets/node.html-Bc3af3Xu.js" as="script"><link rel="prefetch" href="/assets/Docker.html-Wi6xSxFA.js" as="script"><link rel="prefetch" href="/assets/docker搭建私有镜像仓库.html-DlpTZ5RK.js" as="script"><link rel="prefetch" href="/assets/01_Elasticsearch概述.html-Bven4LHP.js" as="script"><link rel="prefetch" href="/assets/02_Elasticsearch相关工具的安装与使用.html-SzFbYm8F.js" as="script"><link rel="prefetch" href="/assets/03_Elasticsearch核心概念.html-pihpzwSp.js" as="script"><link rel="prefetch" href="/assets/04_Elasticsearch基本操作.html-CR3Kixyh.js" as="script"><link rel="prefetch" href="/assets/05_Elasticsearch DSL高级查询.html-Cva7jh1_.js" as="script"><link rel="prefetch" href="/assets/06_Elasticsearch进阶查询.html-NQsw-BjS.js" as="script"><link rel="prefetch" href="/assets/07_Java API 操作 Elasticsearch.html-Dw7bRIPg.js" as="script"><link rel="prefetch" href="/assets/08_Spring Data Elasticsearch.html-D2mt2UoM.js" as="script"><link rel="prefetch" href="/assets/09_Linux 安装 Elasticsearch.html-BAxTMD8V.js" as="script"><link rel="prefetch" href="/assets/10_CAP定理.html-DK6GtlCj.js" as="script"><link rel="prefetch" href="/assets/11_Elasticsearch集群.html-NOV_BJwo.js" as="script"><link rel="prefetch" href="/assets/12_Elasticsearch分片控制与原理.html-D4iHKZAA.js" as="script"><link rel="prefetch" href="/assets/13_Elasticsearch的优化建议.html-B9IIQXK-.js" as="script"><link rel="prefetch" href="/assets/gitlab-commands.html-sGn5Jqia.js" as="script"><link rel="prefetch" href="/assets/gitlab-error.html-BvjhJ3k0.js" as="script"><link rel="prefetch" href="/assets/jetlinks项目初体验.html-D3SZ6s86.js" as="script"><link rel="prefetch" href="/assets/00_前言.html-iYOdVWZ2.js" as="script"><link rel="prefetch" href="/assets/01_Java语言概述.html-CcvbDjsI.js" as="script"><link rel="prefetch" href="/assets/02_Java基本语法.html-CxUKwTCy.js" as="script"><link rel="prefetch" href="/assets/03_Java数组.html-MEw3q8qO.js" as="script"><link rel="prefetch" href="/assets/04_面向对象编程（上）.html-DwUdJZOd.js" as="script"><link rel="prefetch" href="/assets/05_面向对象编程（中）.html-BdZlawj_.js" as="script"><link rel="prefetch" href="/assets/06_面向对象编程（下）.html-QZkjTKPH.js" as="script"><link rel="prefetch" href="/assets/07_异常处理.html-CgjJXz5d.js" as="script"><link rel="prefetch" href="/assets/08_多线程.html-Cd8ItOOS.js" as="script"><link rel="prefetch" href="/assets/09_Java常用类.html-Cqnd-hqT.js" as="script"><link rel="prefetch" href="/assets/10_枚举_注解.html-9Zwf4aqN.js" as="script"><link rel="prefetch" href="/assets/11_Java集合.html-LjAFmmC_.js" as="script"><link rel="prefetch" href="/assets/12_Java泛型.html-Ddr2l5Mo.js" as="script"><link rel="prefetch" href="/assets/13_IO流.html-CRlFLRsh.js" as="script"><link rel="prefetch" href="/assets/14_网络编程.html-B6p0bmU7.js" as="script"><link rel="prefetch" href="/assets/15_Java反射机制.html-CUJtofdp.js" as="script"><link rel="prefetch" href="/assets/16_Java8新特性.html-Zt8HQSVh.js" as="script"><link rel="prefetch" href="/assets/17_Java9_10_11新特性.html-ChsntUss.js" as="script"><link rel="prefetch" href="/assets/18_JUC并发编程.html-PoCeD4zT.js" as="script"><link rel="prefetch" href="/assets/19_设计模式.html-DPUuKqfx.js" as="script"><link rel="prefetch" href="/assets/20_排序算法.html-B5J_iEaE.js" as="script"><link rel="prefetch" href="/assets/99_面试题.html-BrhZbxiT.js" as="script"><link rel="prefetch" href="/assets/1.html-erJQoudj.js" as="script"><link rel="prefetch" href="/assets/2.html-DUlUruRj.js" as="script"><link rel="prefetch" href="/assets/01_MySQL概述.html-DrrU-z0x.js" as="script"><link rel="prefetch" href="/assets/02_关系型数据库与非关系型数据库.html-gSS3hvip.js" as="script"><link rel="prefetch" href="/assets/03_关系型数据库设计原则.html-CocvPf2Z.js" as="script"><link rel="prefetch" href="/assets/04_MySQL的登录.html-DXb5FVrn.js" as="script"><link rel="prefetch" href="/assets/05_MySQL一些常用命令.html-DLtWANBj.js" as="script"><link rel="prefetch" href="/assets/06_MySQL图形化管理工具.html-CHs11b_O.js" as="script"><link rel="prefetch" href="/assets/07_运算符.html-C843VWcI.js" as="script"><link rel="prefetch" href="/assets/08_MySQL函数.html-CJyAfCLT.js" as="script"><link rel="prefetch" href="/assets/09_子查询.html-D6qTPoU4.js" as="script"><link rel="prefetch" href="/assets/10_管理数据库和数据库表.html-COYaVje4.js" as="script"><link rel="prefetch" href="/assets/11_数据的增删改.html-DXdPsvsp.js" as="script"><link rel="prefetch" href="/assets/12_MySQL中的数据类型.html-Nr7NR1uK.js" as="script"><link rel="prefetch" href="/assets/14_视图.html-q840ER8u.js" as="script"><link rel="prefetch" href="/assets/15_存储过程与存储函数.html-CTr7ejtw.js" as="script"><link rel="prefetch" href="/assets/16_变量、流程控制与游标.html-BFnw3GbA.js" as="script"><link rel="prefetch" href="/assets/17_触发器.html-HIfa3hFt.js" as="script"><link rel="prefetch" href="/assets/18_MySQL8.0新特性.html-BSaf8l9o.js" as="script"><link rel="prefetch" href="/assets/19_表及其数据.html-Qy-RDW5K.js" as="script"><link rel="prefetch" href="/assets/99_MySQL常见问题的解决.html-Bf1oVI63.js" as="script"><link rel="prefetch" href="/assets/1.html-B4JyoMjg.js" as="script"><link rel="prefetch" href="/assets/2.html-BtInyTLG.js" as="script"><link rel="prefetch" href="/assets/3.html-D0z4PAzC.js" as="script"><link rel="prefetch" href="/assets/1.html-Dqfg2lv2.js" as="script"><link rel="prefetch" href="/assets/2.html-1kdAcW7t.js" as="script"><link rel="prefetch" href="/assets/CentOS7root账号免密登录.html-DeGjAjqJ.js" as="script"><link rel="prefetch" href="/assets/CentOS7安装GitLab.html-Cq8hAu8k.js" as="script"><link rel="prefetch" href="/assets/CentOS7安装jdk1.8.html-Dk-5NFhU.js" as="script"><link rel="prefetch" href="/assets/CentOs7安装jenkins.html-3CpywilQ.js" as="script"><link rel="prefetch" href="/assets/CentOS7安装mysql5.7(使用yum源安装).html-woB66SXN.js" as="script"><link rel="prefetch" href="/assets/CentOS7安装redis.html-BFsUtLsD.js" as="script"><link rel="prefetch" href="/assets/CentOS7平滑升级nginx.html-6dhYAUMf.js" as="script"><link rel="prefetch" href="/assets/借助阿里云服务器使用frp做内网穿透.html-ChSEwkS3.js" as="script"><link rel="prefetch" href="/assets/1.html-CuHxqKi_.js" as="script"><link rel="prefetch" href="/assets/1.html-DAHxZLen.js" as="script"><link rel="prefetch" href="/assets/2.html-DoZgwhaL.js" as="script"><link rel="prefetch" href="/assets/3.html-1Vo_YoHQ.js" as="script"><link rel="prefetch" href="/assets/记一次小程序接口的发布.html-Bmg5secS.js" as="script"><link rel="prefetch" href="/assets/part1.html-DWG4ovCD.js" as="script"><link rel="prefetch" href="/assets/part1.html-Dm1Hlrtt.js" as="script"><link rel="prefetch" href="/assets/part1.html-CCOsbsfA.js" as="script"><link rel="prefetch" href="/assets/part10.html-CEtIwsKt.js" as="script"><link rel="prefetch" href="/assets/part11.html-DhKp_arQ.js" as="script"><link rel="prefetch" href="/assets/part12.html-BtZQsnQW.js" as="script"><link rel="prefetch" href="/assets/part2.html-DDOMepY9.js" as="script"><link rel="prefetch" href="/assets/part3.html-D_mU3gth.js" as="script"><link rel="prefetch" href="/assets/part9.html-BGW2bY9b.js" as="script"><link rel="prefetch" href="/assets/auto.html-Db8vbJ5a.js" as="script"><link rel="prefetch" href="/assets/blog.html-BYU4EXs0.js" as="script"><link rel="prefetch" href="/assets/command.html-DZnNbVqs.js" as="script"><link rel="prefetch" href="/assets/ftp.html-DPUKp99d.js" as="script"><link rel="prefetch" href="/assets/1.html-CdQy9l-8.js" as="script"><link rel="prefetch" href="/assets/2.html-vXS5yTBG.js" as="script"><link rel="prefetch" href="/assets/3.html-CAJdsyUM.js" as="script"><link rel="prefetch" href="/assets/4.html-KC8t6zhp.js" as="script"><link rel="prefetch" href="/assets/6443_connect-refused.html-BELJdJEM.js" as="script"><link rel="prefetch" href="/assets/404.html-BTi6zSQL.js" as="script"><link rel="prefetch" href="/assets/FileToBase64-CWyMVsJu.js" as="script"><link rel="prefetch" href="/assets/ImgZip-BrdIny8h.js" as="script"><link rel="prefetch" href="/assets/JsonUtil-DIn9vz9V.js" as="script"><link rel="prefetch" href="/assets/JsonView-YrVmFOjC.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="vp-site-name" aria-hidden="true">wenatie</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端工具"><span class="title">前端工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端工具"><span class="title">前端工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/utils/jsonutil.html" aria-label="JSON工具"><!---->JSON工具<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/utils/jsonView.html" aria-label="JSON View"><!---->JSON View<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/utils/fileToBase64.html" aria-label="文件转base64"><!---->文件转base64<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/utils/imgZip.html" aria-label="图片压缩"><!---->图片压缩<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="AI"><span class="title">AI</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="AI"><span class="title">AI</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/ai/llm/llm-study/part1.html" aria-label="大模型入门"><!---->大模型入门<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/ai/llm/chatglm/part1.html" aria-label="chatGLM大模型实践"><!---->chatGLM大模型实践<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/gitlab/gitlab-error.html" aria-label="gitlab"><!---->gitlab<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/java2/00_%E5%89%8D%E8%A8%80.html" aria-label="java"><!---->java<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/mysql/01_MySQL%E6%A6%82%E8%BF%B0.html" aria-label="mysql"><!---->mysql<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/docker/Docker.html" aria-label="docker"><!---->docker<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/k8s/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/command.html" aria-label="k8s"><!---->k8s<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Elasticsearch/01_Elasticsearch%E6%A6%82%E8%BF%B0.html" aria-label="Elasticsearch"><!---->Elasticsearch<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Prometheus/1.html" aria-label="Prometheus"><!---->Prometheus<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Python/1.html" aria-label="Python"><!---->Python<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Vue/1.html" aria-label="Vue"><!---->Vue<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/server/CentOS7root%E8%B4%A6%E5%8F%B7%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95.html" aria-label="服务器环境安装"><!---->服务器环境安装<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/mservice/2.html" aria-label="微服务"><!---->微服务<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/%E9%A1%B9%E7%9B%AE%E4%B8%8A%E7%BA%BF/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%8F%91%E5%B8%83.html" aria-label="项目上线"><!---->项目上线<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/IoTPlatform/jetlinks%E9%A1%B9%E7%9B%AE%E5%88%9D%E4%BD%93%E9%AA%8C.html" aria-label="物联网项目"><!---->物联网项目<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/basic/part1.html" aria-label="JS基础"><!---->JS基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/es6/es6-1.html" aria-label="ES6入门"><!---->ES6入门<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/youdontknowjs/part1.html" aria-label="你不知道的Javascript"><!---->你不知道的Javascript<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/design/" aria-label="设计模式"><!---->设计模式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/typescript/ts-basic.html" aria-label="typescript"><!---->typescript<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/vue/vueyuanli.html" aria-label="vue2"><!---->vue2<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/vue3/reactive/part1.html" aria-label="vue3"><!---->vue3<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/spring5/part1.html" aria-label="spring5"><!---->spring5<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/end/c/data-contruction/part1.html" aria-label="数据结构（严蔚敏）"><!---->数据结构（严蔚敏）<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/JS/hwdj.html" aria-label="JS相关"><!---->JS相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/CSS/css-selector.html" aria-label="CSS相关"><!---->CSS相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/browser/xmlhttprequest.html" aria-label="浏览器相关"><!---->浏览器相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/node/node.html" aria-label="node相关"><!---->node相关<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端工具"><span class="title">前端工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端工具"><span class="title">前端工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/utils/jsonutil.html" aria-label="JSON工具"><!---->JSON工具<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/utils/jsonView.html" aria-label="JSON View"><!---->JSON View<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/utils/fileToBase64.html" aria-label="文件转base64"><!---->文件转base64<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/utils/imgZip.html" aria-label="图片压缩"><!---->图片压缩<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="AI"><span class="title">AI</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="AI"><span class="title">AI</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/ai/llm/llm-study/part1.html" aria-label="大模型入门"><!---->大模型入门<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/ai/llm/chatglm/part1.html" aria-label="chatGLM大模型实践"><!---->chatGLM大模型实践<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/gitlab/gitlab-error.html" aria-label="gitlab"><!---->gitlab<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/java2/00_%E5%89%8D%E8%A8%80.html" aria-label="java"><!---->java<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/mysql/01_MySQL%E6%A6%82%E8%BF%B0.html" aria-label="mysql"><!---->mysql<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/docker/Docker.html" aria-label="docker"><!---->docker<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/k8s/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/command.html" aria-label="k8s"><!---->k8s<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Elasticsearch/01_Elasticsearch%E6%A6%82%E8%BF%B0.html" aria-label="Elasticsearch"><!---->Elasticsearch<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Prometheus/1.html" aria-label="Prometheus"><!---->Prometheus<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Python/1.html" aria-label="Python"><!---->Python<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Vue/1.html" aria-label="Vue"><!---->Vue<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/server/CentOS7root%E8%B4%A6%E5%8F%B7%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95.html" aria-label="服务器环境安装"><!---->服务器环境安装<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/mservice/2.html" aria-label="微服务"><!---->微服务<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/%E9%A1%B9%E7%9B%AE%E4%B8%8A%E7%BA%BF/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%8F%91%E5%B8%83.html" aria-label="项目上线"><!---->项目上线<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/IoTPlatform/jetlinks%E9%A1%B9%E7%9B%AE%E5%88%9D%E4%BD%93%E9%AA%8C.html" aria-label="物联网项目"><!---->物联网项目<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/basic/part1.html" aria-label="JS基础"><!---->JS基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/es6/es6-1.html" aria-label="ES6入门"><!---->ES6入门<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/youdontknowjs/part1.html" aria-label="你不知道的Javascript"><!---->你不知道的Javascript<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/design/" aria-label="设计模式"><!---->设计模式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/typescript/ts-basic.html" aria-label="typescript"><!---->typescript<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/vue/vueyuanli.html" aria-label="vue2"><!---->vue2<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/vue3/reactive/part1.html" aria-label="vue3"><!---->vue3<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/spring5/part1.html" aria-label="spring5"><!---->spring5<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/end/c/data-contruction/part1.html" aria-label="数据结构（严蔚敏）"><!---->数据结构（严蔚敏）<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/JS/hwdj.html" aria-label="JS相关"><!---->JS相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/CSS/css-selector.html" aria-label="CSS相关"><!---->CSS相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/browser/xmlhttprequest.html" aria-label="浏览器相关"><!---->浏览器相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/node/node.html" aria-label="node相关"><!---->node相关<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">mysql基础查漏补缺 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mysql/01_MySQL%E6%A6%82%E8%BF%B0.html" aria-label="1 MySQL数据库概述"><!---->1 MySQL数据库概述<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mysql/02_%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8E%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93.html" aria-label="2 关系型数据库与非关系型数据库"><!---->2 关系型数据库与非关系型数据库<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mysql/03_%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99.html" aria-label="3 关系型数据库设计原则"><!---->3 关系型数据库设计原则<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mysql/04_MySQL%E7%9A%84%E7%99%BB%E5%BD%95.html" aria-label="4 MySQL的登录"><!---->4 MySQL的登录<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mysql/05_MySQL%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" aria-label="5 MySQL一些常用命令"><!---->5 MySQL一些常用命令<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mysql/06_MySQL%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7.html" aria-label="6 MySQL图形化管理工具"><!---->6 MySQL图形化管理工具<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mysql/07_%E8%BF%90%E7%AE%97%E7%AC%A6.html" aria-label="7 运算符"><!---->7 运算符<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mysql/08_MySQL%E5%87%BD%E6%95%B0.html" aria-label="8 MySQL函数"><!---->8 MySQL函数<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mysql/09_%E5%AD%90%E6%9F%A5%E8%AF%A2.html" aria-label="9 子查询"><!---->9 子查询<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mysql/10_%E7%AE%A1%E7%90%86%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8.html" aria-label="10 数据库和数据库表的管理"><!---->10 数据库和数据库表的管理<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mysql/11_%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9.html" aria-label="11 数据处理之增删改"><!---->11 数据处理之增删改<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mysql/12_MySQL%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html" aria-label="12 MySQL中的数据类型"><!---->12 MySQL中的数据类型<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/static/tang/mysql/13_%E7%BA%A6%E6%9D%9F.html" aria-label="13 约束"><!---->13 约束<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mysql/14_%E8%A7%86%E5%9B%BE.html" aria-label="14 视图"><!---->14 视图<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mysql/15_%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%B8%8E%E5%AD%98%E5%82%A8%E5%87%BD%E6%95%B0.html" aria-label="15 存储过程与存储函数"><!---->15 存储过程与存储函数<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mysql/16_%E5%8F%98%E9%87%8F%E3%80%81%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E4%B8%8E%E6%B8%B8%E6%A0%87.html" aria-label="16 变量、流程控制与游标"><!---->16 变量、流程控制与游标<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mysql/17_%E8%A7%A6%E5%8F%91%E5%99%A8.html" aria-label="17 触发器"><!---->17 触发器<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mysql/18_MySQL8.0%E6%96%B0%E7%89%B9%E6%80%A7.html" aria-label="18 MySQL8.0新特性"><!---->18 MySQL8.0新特性<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mysql/19_%E8%A1%A8%E5%8F%8A%E5%85%B6%E6%95%B0%E6%8D%AE.html" aria-label="19 附：表及其数据"><!---->19 附：表及其数据<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mysql/99_MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3.html" aria-label="99 MySQL常见问题的解决"><!---->99 MySQL常见问题的解决<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="_13-约束" tabindex="-1"><a class="header-anchor" href="#_13-约束"><span>13 约束</span></a></h1><h2 id="_13-1-概述" tabindex="-1"><a class="header-anchor" href="#_13-1-概述"><span>13.1 概述</span></a></h2><h3 id="_13-1-1-为什么需要约束" tabindex="-1"><a class="header-anchor" href="#_13-1-1-为什么需要约束"><span>13.1.1 为什么需要约束</span></a></h3><p><code>数据完整性（Data Integrity）</code>是指数据的精确性（Accuracy）和可靠性（Reliability）。它是防止数据库中存在不符合语义规定的数据和防止因错误信息的输入输出造成无效操作或错误信息而提出的。</p><p>为了保证数据的完整性，SQL规范以约束的方式对<strong>表数据进行额外的条件限制</strong>，从以下4个方面考虑：</p><ul><li><code>实体完整性（Entity Integrity）</code>：例如，同一个表中不能存在两条完全相同无法区分的数据</li><li><code>域完整性（Domain Integrity）</code>：例如，年龄范围0~120；再如，性别范围“男/女”</li><li><code>引用完整性（Referential Integrity）</code>：例如，员工所在部门，要在部门表中能找到这个部门</li><li><code>用户自定义完整性（User-defined Integrity）</code>：例如，用户名唯一、密码不能为空等；再如，本部门经历的工资不得高于本部门职工的平均工资的5倍</li></ul><p><!---->保证数据的完整性</p><h3 id="_13-1-2-什么是约束" tabindex="-1"><a class="header-anchor" href="#_13-1-2-什么是约束"><span>13.1.2 什么是约束</span></a></h3><p>约束是对表中字段的限制，是表级的强制规定。</p><p>可以在<strong>创建表时规定约束（通过CREATE TABLE语句）</strong>，或者<strong>在表创建之后通过ALTER TABLE语句规定约束</strong>。</p><h3 id="_13-1-3-约束的分类" tabindex="-1"><a class="header-anchor" href="#_13-1-3-约束的分类"><span>13.1.3 约束的分类</span></a></h3><ul><li>按照<code>约束数据列的限制</code>分： <ul><li><strong>单列约束</strong>：每个约束只约束一列</li><li><strong>多列约束</strong>：每个约束可约束多列</li></ul></li><li>按照<code>约束的作用范围</code>分： <ul><li><strong>列级约束</strong>：只能作用在一个列上。在列的定义后面指明约束</li><li><strong>表级约束</strong>：可以作用在多个列上。不与列的定义在一起，而是单独定义</li></ul></li><li>按照<code>约束的作用</code>分： <ul><li><strong>NOT NULL</strong>：非空约束。规定字段值不能为空</li><li><strong>UNIQUE</strong>：唯一约束。规定字段值在整个表中是唯一的</li><li><strong>PRIMARY KEY</strong>：主键约束。是非空和唯一约束的组合</li><li><strong>FOREIGN KEY</strong>：外键约束</li><li><strong>CHECK</strong>：检查约束</li><li><strong>DEFAULT</strong>：默认值约束</li></ul></li></ul><h3 id="_13-1-4-查看指定表已有的约束" tabindex="-1"><a class="header-anchor" href="#_13-1-4-查看指定表已有的约束"><span>13.1.4 查看指定表已有的约束</span></a></h3><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">#information_schema数据库名（系统库）</span>
<span class="line">#table_constraints表名称（专门存储各个表的约束）</span>
<span class="line">SELECT * </span>
<span class="line">FROM information_schema.table_constraints</span>
<span class="line">WHERE table_name = &#39;表名称&#39;;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_13-2非空约束" tabindex="-1"><a class="header-anchor" href="#_13-2非空约束"><span>13.2非空约束</span></a></h2><h3 id="_13-2-1-作用" tabindex="-1"><a class="header-anchor" href="#_13-2-1-作用"><span>13.2.1 作用</span></a></h3><p><strong>限定某个字段的值不允许为空</strong></p><h3 id="_13-2-2-关键字" tabindex="-1"><a class="header-anchor" href="#_13-2-2-关键字"><span>13.2.2 关键字</span></a></h3><p><strong>NOT NUL</strong></p><h3 id="_13-2-3-特点" tabindex="-1"><a class="header-anchor" href="#_13-2-3-特点"><span>13.2.3 特点</span></a></h3><ul><li>默认情况下，所有的类型都是可以为NULL的。包括INT、FLOAT等</li><li>非空约束只能是列级约束，不能组合非空</li><li>一个表可以有多个字段分别限制非空</li><li>空字符、0都不等于NULL</li><li>如果某字段原有<strong>默认值约束</strong>，并且想在添加非空约束后还想<strong>保留默认值约束</strong>，则需要在MODIFY语句中保留默认值约束</li></ul><h3 id="_13-2-4-添加非空约束" tabindex="-1"><a class="header-anchor" href="#_13-2-4-添加非空约束"><span>13.2.4 添加非空约束</span></a></h3><blockquote><p>方式一：在创建表时添加非空约束</p></blockquote><p><!----></p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">CREATE TABLE 表名称(</span>
<span class="line">字段名 数据类型,</span>
<span class="line">字段名 数据类型 NOT NULL, # 非空约束，列级</span>
<span class="line">字段名 数据类型 NOT NULL, # 非空约束，列级</span>
<span class="line">    ...</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>方式二：在建表后添加非空约束</p></blockquote><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">ALTER TABLE 表名 MODIFY 字段名 数据类型 NOT NULL;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_13-2-5-删除非空约束" tabindex="-1"><a class="header-anchor" href="#_13-2-5-删除非空约束"><span>13.2.5 删除非空约束</span></a></h3><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">ALTER TABLE 表名 MODIFY 字段名 数据类型 NULL; # 将该字段的NOT NULL改为NULL，允许为空</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">ALTER TABLE 表名 MODIFY 字段名 数据类型; # 去掉该字段的 NOT NULL，默认该字段允许为空</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_13-2-6-面试题" tabindex="-1"><a class="header-anchor" href="#_13-2-6-面试题"><span>13.2.6 面试题</span></a></h3><blockquote><p>为什么建表时，加 not null default &#39;&#39; 或 default 0</p></blockquote><p><code>答：</code>不想让表中出现null值。</p><blockquote><p>为什么不想要 null 的值</p></blockquote><p><code>答：</code></p><ul><li><p>① 不好比较。null是一种特殊值，比较时只能用专门的is null 和 is not null来比较。碰到运算符，通常返回null。</p></li><li><p>② 效率不高。影响提高索引效果。因此，我们往往在建表时 not null default &#39;&#39; 或 default 0</p></li></ul><h2 id="_13-3-唯一性约束" tabindex="-1"><a class="header-anchor" href="#_13-3-唯一性约束"><span>13.3 唯一性约束</span></a></h2><h3 id="_13-3-1-作用" tabindex="-1"><a class="header-anchor" href="#_13-3-1-作用"><span>13.3.1 作用</span></a></h3><p><strong>用来限制某个字段的值不能重复。</strong></p><h3 id="_13-3-2-关键字" tabindex="-1"><a class="header-anchor" href="#_13-3-2-关键字"><span>13.3.2 关键字</span></a></h3><p><strong>UNIQUE</strong></p><h3 id="_13-3-3-特点" tabindex="-1"><a class="header-anchor" href="#_13-3-3-特点"><span>13.3.3 特点</span></a></h3><ul><li>同一个表可以有多个唯一约束</li><li>唯一性约束可以是一个列的值唯一，也可以是多个列组合的值唯一</li><li>唯一性约束允许列值为空，且允许多列为空值</li><li>在创建唯一约束的时候，如果不给唯一性约束命名，就默认和列名相同</li><li><strong>MySQL会给唯一性约束的列上默认创建一个唯一索引</strong></li></ul><h3 id="_13-3-4-添加唯一性约束" tabindex="-1"><a class="header-anchor" href="#_13-3-4-添加唯一性约束"><span>13.3.4 添加唯一性约束</span></a></h3><blockquote><p>方式一：在创建表是添加唯一性约束</p></blockquote><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">create table 表名称(</span>
<span class="line">	字段名 数据类型,</span>
<span class="line">	字段名 数据类型 UNIQUE, # 列级约束</span>
<span class="line">	字段名 数据类型 UNIQUE KEY,</span>
<span class="line">	字段名 数据类型,</span>
<span class="line">    ...</span>
<span class="line">    [CONSTRAINT 约束名] UNIQUE KEY(字段名[, 字段名2, 字段名3, ...]) # 表级约束</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>方式二：建表后添加唯一性约束</p></blockquote><ul><li><p>ALTER ... ADD方式</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">ALTER TABLE 表名 ADD [CONSTRAINT 约束名] UNIQUE KEY (字段名列表)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>ALTER ... MODIFY方式</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">ALTER TABLE 表名 MODIFY 字段名 字段类型 UNIQUE;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h3 id="_13-3-5-删除唯一性约束" tabindex="-1"><a class="header-anchor" href="#_13-3-5-删除唯一性约束"><span>13.3.5 删除唯一性约束</span></a></h3><blockquote><p>说明</p></blockquote><ul><li><p>添加唯一性约束的列也会<strong>自动创建唯一索引</strong></p></li><li><p>删除唯一性约束<strong>只能通过删除唯一索引的方式删除</strong></p></li><li><p><strong>删除时需要指定唯一索引名</strong>，唯一索引名和唯一约束名一样</p></li><li><p>如果创建唯一约束时未指明名称，如果是单列，就默认和列名相同；如果是组合列，默认为第一个列名。此外也可以自定义唯一性约束名</p></li><li><p><strong>查看指定表中都有哪些索引</strong></p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">SHOW INDEX FROM 表名;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><blockquote><p>删除唯一性约束</p></blockquote><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">ALTER TABLE 表名 DROP INDEX 唯一索引名;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_13-4-主键约束" tabindex="-1"><a class="header-anchor" href="#_13-4-主键约束"><span>13.4 主键约束</span></a></h2><h3 id="_13-4-1-作用" tabindex="-1"><a class="header-anchor" href="#_13-4-1-作用"><span>13.4.1 作用</span></a></h3><p><strong>非空且唯一，用来唯一标识表中的一行记录</strong></p><h3 id="_13-4-2-关键字" tabindex="-1"><a class="header-anchor" href="#_13-4-2-关键字"><span>13.4.2 关键字</span></a></h3><p><strong>PRIMARY KEY</strong></p><h3 id="_13-4-3-特点" tabindex="-1"><a class="header-anchor" href="#_13-4-3-特点"><span>13.4.3 特点</span></a></h3><ul><li>主键约束<strong>相当于唯一约束+非空约束的组合</strong>。主键约束列不允许重复，也不允许出现空值</li><li><strong>一个表最多只能有一个主键约束</strong></li><li>建立主键约束，既可以在列级创建，也可以在表级创建</li><li><strong>主键约束对应着表中的一列或者多列（复合主键）</strong></li><li>如果是多列组合的<strong>复合主键约束</strong>，那么<strong>这些列都不允许为空，且<code>组合的值</code>不允许重复</strong></li><li><strong>MySQL的主键约束名总是PRIMARY</strong>，自己命名的无效</li><li>当创建主键约束时，会默认创建<strong>主键索引</strong>。如果删除主键约束了，那么其对应的主键索引也自动删除了</li><li><strong>不要修改主键字段的值</strong>。因为主键是数据记录的唯一标识，如果修改了主键的值，就有可能破坏数据的完整性</li></ul><h3 id="_13-4-4-添加主键约束" tabindex="-1"><a class="header-anchor" href="#_13-4-4-添加主键约束"><span>13.4.4 添加主键约束</span></a></h3><blockquote><p>方式一：在创建表时添加主键约束</p></blockquote><ul><li><p>列级约束</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">CREATE TABLE 表名 (</span>
<span class="line">	字段名 字段类型 PRIMARY KEY, # 列级约束</span>
<span class="line">	字段名 字段类型,</span>
<span class="line">	字段名 字段类型</span>
<span class="line">    ...</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>表级约束</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">CREATE TABLE 表名 (</span>
<span class="line">	字段名 字段类型,</span>
<span class="line">	字段名 字段类型,</span>
<span class="line">	字段名 字段类型</span>
<span class="line">    ...</span>
<span class="line">    PRIMARY KEY (字段名列表) # 表级约束</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><blockquote><p>方式二：在创建表后添加主键约束</p></blockquote><ul><li><p>ALTER ... ADD方式</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">ALTER TABLE 表名 ADD PRIMARY KEY (字段名列表)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>ALTER ... MODIFY方式</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">ALTER TABLE 表名 MODIFY 字段名 字段类型 PRIMARY KEY;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h3 id="_13-4-5-删除主键约束" tabindex="-1"><a class="header-anchor" href="#_13-4-5-删除主键约束"><span>13.4.5 删除主键约束</span></a></h3><p><!----></p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">ALTER TABLE 表名 DROP PRIMARY KEY;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>主键约束被删除后，该列的非空属性仍保留</strong></p><h2 id="_13-5-自增约束" tabindex="-1"><a class="header-anchor" href="#_13-5-自增约束"><span>13.5 自增约束</span></a></h2><h3 id="_13-5-1-作用" tabindex="-1"><a class="header-anchor" href="#_13-5-1-作用"><span>13.5.1 作用</span></a></h3><p><strong>使得指定字段的值进行自增</strong></p><h3 id="_13-5-2-关键字" tabindex="-1"><a class="header-anchor" href="#_13-5-2-关键字"><span>13.5.2 关键字</span></a></h3><p><strong>AUTO_INCREMENT</strong></p><h3 id="_13-5-3-特点和要求" tabindex="-1"><a class="header-anchor" href="#_13-5-3-特点和要求"><span>13.5.3 特点和要求</span></a></h3><ul><li>一个表<strong>最多只能有一个自增长的列</strong></li><li>当需要产生唯一标识或者顺序值时，可以设置自增长</li><li>设置为自增长的列<strong>必须是主键约束列或者唯一性约束列</strong></li><li>自增约束的列的数据类型<strong>必须是整数类型</strong></li><li>在插入数据时，如果自增长列设置为0或者null，会在当前列最大值的基础上递增；如果手动指定了非0、非null的值，则直接赋值为该值</li></ul><h3 id="_13-5-4-添加自增约束" tabindex="-1"><a class="header-anchor" href="#_13-5-4-添加自增约束"><span>13.5.4 添加自增约束</span></a></h3><blockquote><p>方式一：在创建表的时候添加自增约束</p></blockquote><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">CREATE TABLE 表名(</span>
<span class="line">	字段名 字段类型 PRIMARY KEY AUTO_INCREMENT, # 被AUTO_INCREMENT修饰的列必须是PRIMARY KEY列或者UNIQUE列</span>
<span class="line">	字段名 字段类型,</span>
<span class="line">    ...</span>
<span class="line">)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>方式二：在建表后添加自增约束</p></blockquote><p>只能使用ALTER...MODIFY方式</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">ALTER TABLE 表名 MODIFY 字段名 字段类型  AUTO_INCREMENT;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_13-5-5-删除自增约束" tabindex="-1"><a class="header-anchor" href="#_13-5-5-删除自增约束"><span>13.5.5 删除自增约束</span></a></h3><p><strong>去掉auto_increment相当于删除</strong></p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">ALTER TABLE 表名 MODIFY 字段名 字段类型; </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_13-5-6-mysql8-0新特性" tabindex="-1"><a class="header-anchor" href="#_13-5-6-mysql8-0新特性"><span>13.5.6 MySQL8.0新特性</span></a></h3><p><!----></p><p>在MySQL5.7和MySQL8.0中分别执行以下操作：</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line"># ①创建表，主键自增</span>
<span class="line">CREATE TABLE test(</span>
<span class="line">id INT PRIMARY KEY AUTO_INCREMENT</span>
<span class="line">);</span>
<span class="line"></span>
<span class="line"># ② 插入4个空值</span>
<span class="line">INSERT INTO test9 VALUES(0),(0),(0),(0);</span>
<span class="line"></span>
<span class="line"># ③ 查询，此时id的值为1,2,3,4</span>
<span class="line">SELECT * FROM test9;</span>
<span class="line"></span>
<span class="line"># ④ 删除id为4的记录，此时id的值为1,2,3</span>
<span class="line">DELETE FROM test9 WHERE id = 4;</span>
<span class="line"></span>
<span class="line"># ⑤ 再次插入一条记录，此时id的值为1,2,3,5</span>
<span class="line">INSERT INTO test9 VALUES(0);</span>
<span class="line"></span>
<span class="line"># ⑥ 删除id为5的记录，此时id的值为1,2,3</span>
<span class="line">DELETE FROM test9 WHERE id = 5;</span>
<span class="line"></span>
<span class="line"># ⑦ 重启MySQL服务器</span>
<span class="line"></span>
<span class="line"># ⑧ 查询，此时id的值为1,2,3</span>
<span class="line">SELECT * FROM test9;</span>
<span class="line"></span>
<span class="line"># ⑨ 再次插入一条记录。在这里MySQL5.7和MySQL8.0插入后的结果不一样了。</span>
<span class="line">INSERT INTO test9 VALUES(0);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行为步骤⑨后，再次查询，<strong>MySQL5.7查询到的id值为1,2,3,4，MySQL8.0查询到的id值为1,2,3,6</strong>。</p><p><code>原因：</code></p><ul><li>在<strong>MySQL 5.7</strong>系统中，对于自增主键的分配规则，是由InnoDB数据字典内部一个<strong>计数器</strong>来决定的，而该计数器<strong>只在内存中维护</strong> ，并不会持久化到磁盘中。<strong>当数据库重启时，该计数器会被初始化</strong>；</li><li><strong>MySQL 8.0将自增主键的计数器持久化到 <code>重做日志</code> 中</strong>。每次计数器发生改变，都会将其写入重做日志 中。<strong>如果数据库重启，InnoDB会根据重做日志中的信息来初始化计数器的内存值</strong>。</li></ul><h3 id="_13-5-7-面试题" tabindex="-1"><a class="header-anchor" href="#_13-5-7-面试题"><span>13.5.7 面试题</span></a></h3><blockquote><p>带AUTO_INCREMENT约束的字段值是从1开始的吗？</p></blockquote><p><code>答：</code>在MySQL中，<strong>默认AUTO_INCREMENT的初始值是1</strong>，每新增一条记录，字段值自动加1。此外，还可以通过如下两种方法设置自增属性的起始值：</p><ul><li><p>① 在建表时指定AUTO_INCREMENT的值：</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">CREATE TABLE 表名(</span>
<span class="line">	字段名 字段类型 PRIMARY KEY AUTO_INCREMENT,</span>
<span class="line">	字段名 字段类型,</span>
<span class="line">    ...</span>
<span class="line">)AUTO_INCREMENT = 自定义默认值;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>② 在使用ALTER TABLE ... 时修改指定表的AUTO_INCREMENT的默认值：</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line"># 首先，需要给指定字段设置为自增列</span>
<span class="line">CREATE TABLE 表名(</span>
<span class="line">	字段名 字段类型 PRIMARY KEY AUTO_INCREMENT,</span>
<span class="line">	字段名 字段类型,</span>
<span class="line">    ...</span>
<span class="line">);</span>
<span class="line"></span>
<span class="line"># 然后，修改指定表的AUTO_INCREMENT的默认值</span>
<span class="line">ALTER TABLE 表名 AUTO_INCREMENT = 默认值;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>② 指定第 一条插入记录的自增字段的值。这样新插入的记录的自增字段值从初始值开始递增。</p><p>如在表中插入第一 条记录，同时指定id值为5，则以后插入的记录的id值就会从6开始往上增加</p></li></ul><h2 id="_13-6-外键约束" tabindex="-1"><a class="header-anchor" href="#_13-6-外键约束"><span>13.6 外键约束</span></a></h2><h3 id="_13-6-1-作用" tabindex="-1"><a class="header-anchor" href="#_13-6-1-作用"><span>13.6.1 作用</span></a></h3><p><strong>限定某个表的某个字段的引用完整性</strong>。 比如：员工表的员工所在部门的选择，必须在部门表能找到对应的部分。</p><h3 id="_13-6-2-关键字" tabindex="-1"><a class="header-anchor" href="#_13-6-2-关键字"><span>13.6.2 关键字</span></a></h3><p><strong>FOREIGN KEY</strong></p><h3 id="_13-6-3-主表和从表" tabindex="-1"><a class="header-anchor" href="#_13-6-3-主表和从表"><span>13.6.3 主表和从表</span></a></h3><ul><li>主表（父表）：被引用的表，被参考的表</li><li>从表（子表）：引用别人的表，参考别人的表</li></ul><h3 id="_13-6-4-特点" tabindex="-1"><a class="header-anchor" href="#_13-6-4-特点"><span>13.6.4 特点</span></a></h3><ul><li><p>从表的外键列，必须引用/参考主表的主键或唯一约束的列</p><p><code>原因：</code>因为被引用/参考的值必须是唯一的</p></li><li><p>在创建外键约束时，如果不给外键约束命名，<strong>默认名不是列名，而是自动产生一个外键名</strong>（如student_ibfk_1）</p></li><li><p>如果在创建表时就指定外键，需要<strong>先创建主表，再创建子表</strong></p></li><li><p><strong>删除表时，先删子表，再删主表</strong></p></li><li><p><strong>当主表的记录被参考时，主表记录将不允许删除</strong>。如果要删除数据，需要先删除从表中依赖该记录的数据，然后才可删除主表数据</p></li><li><p><strong>从表中，一个表可以建立多个外键约束</strong></p></li><li><p>从表的外键列与主表被参照列<strong>名字可以不同，但是数据类型必须一样，逻辑意义一致</strong></p></li><li><p><strong>删除外键约束时，必须<code>手动</code>删除对应的索引</strong></p></li><li><p><strong>外键约束不可以跨引擎使用</strong></p></li></ul><h3 id="_13-6-4-添加外键约束" tabindex="-1"><a class="header-anchor" href="#_13-6-4-添加外键约束"><span>13.6.4 添加外键约束</span></a></h3><blockquote><p>方式一：建表时添加外键约束</p></blockquote><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">CREATE TABLE 从表名(</span>
<span class="line">	字段名 字段类型,</span>
<span class="line">	字段名 字段类型,</span>
<span class="line">	...</span>
<span class="line">	[CONSTRAINT 约束名] FOREIGN KEY (从表字段名) REFERENCES 主表(主表字段列表)</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>方式二：建表后添加外键约束</p></blockquote><p>只能通过ALTER TABLE ... ADD方式添加</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">ALTER TABLE 从表名 ADD [CONSTRAINT 约束名 ]FOREIGN KEY (从表字段名) REFERENCES 主表名(主表字段列表)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_13-6-5-删除外键约束" tabindex="-1"><a class="header-anchor" href="#_13-6-5-删除外键约束"><span>13.6.5 删除外键约束</span></a></h3><p><!----></p><ul><li><p>① 查看表中约束，以确定外键约束名（如果已知外键约束名，此步骤可省）</p><p><strong>CONSTRAINT_NAME列对应的是约束名</strong></p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">SELECT *</span>
<span class="line">FROM information_schema.table_constraints</span>
<span class="line">WHERE table_name = &quot;表名&quot;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>② 删除外键约束</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">ALTER TABLE 表名 DROP FOREIGN KEY 约束名;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>③ 查看外键约束对应的普通索引名</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">SHOW INDEX FROM 表名;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>④ 删除索引（<strong>外键约束对应的索引，只能手动删除</strong>）</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">ALTER TABLE 表名 DROP INDEX 索引名;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><p><!----></p><h3 id="_13-6-6-约束等级" tabindex="-1"><a class="header-anchor" href="#_13-6-6-约束等级"><span>13.6.6 约束等级</span></a></h3><ul><li><code>Cascade方式</code>：在父表中update或delete记录时，同步update或delete子表的匹配记录</li><li><code>Set null方式</code>：在父表中update或delete记录时，将子表上匹配记录的列设为null，此时需要注意子表的外键列不能是not null</li><li><code>No action方式</code>：如果子表中有匹配的记录，不允许对父表对应候选键进行update或delete操作</li><li><code>Restrict方式</code>：同no action方式，都是立即检查外键约束</li><li><code>Set default方式</code>：父表有变更时，子表将外键列设置成一个默认值，但InnoDB不能识别</li></ul><p><!----></p><ul><li><p><strong>如果没有指定等级，相当于Restrict方式。</strong></p></li><li><p><strong>对于外键约束，最好是采用<code>ON UPDATE CASCADE ON DELETE RESTRICt</code>的方式：</strong></p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">CREATE TABLE 从表名(</span>
<span class="line">	字段名 字段类型,</span>
<span class="line">	字段名 字段类型,</span>
<span class="line">	...</span>
<span class="line">	[CONSTRAINT 约束名] FOREIGN KEY (从表字段名) REFERENCES 主表(主表字段列表) ON UPDATE CASCADE ON DELETE RESTRICT </span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_13-6-7-开发中的常见问题" tabindex="-1"><a class="header-anchor" href="#_13-6-7-开发中的常见问题"><span>13.6.7 开发中的常见问题</span></a></h3><ul><li><p><code>问题1</code>：如果两个表之间有关联关系，如员工表和部门表，是否一定要建外键约束？</p><p><code>答：</code>不一定</p></li><li><p><code>问题2</code>：建和不建外键约束有什么区别？</p><p><code>答：</code>①创建外键约束，创建表、删除表、添加记录、修改记录、删除记录会在<strong>语法</strong>方面受到限制。比如，在员工表中添加员工时，该员工所在的部门不允许在部门表中找不到；②不创建外键约束，创建表、删除表、添加记录、修改记录、删除记录不会受到限制。但是要保证数据的<strong>引用完整性</strong>，只能依靠<strong>程序员的自觉</strong>（但自觉一般都没用），或者<strong>在Java程序中进行限定</strong>。</p></li><li><p><code>问题3</code>：建和不建外键约束和查询有没有关系？</p><p><code>答：</code>没有</p></li></ul><blockquote><p>小结：</p></blockquote><p>在 MySQL 里，<strong>外键约束</strong>是有成本的，需要消耗系统资源**。对于大并发的 SQL 操作，有可能会不适 合**。比如大型网站的中央数据库，可能会 因为外键约束的系统开销而变得非常慢 。所以， <strong>MySQL 允许不使用系统自带的外键约束，在 应用层面完成检查数据一致性的逻辑</strong>。也就是说，即使你不 用外键约束，也要想办法通过应用层面的附加逻辑，来实现外键约束的功能，确保数据的一致性。</p><h3 id="_13-6-8-阿里开发规范" tabindex="-1"><a class="header-anchor" href="#_13-6-8-阿里开发规范"><span>13.6.8 阿里开发规范</span></a></h3><p>【<strong>强制</strong>】不得使用外键与级联，一切外键概念必须在应用层解决。</p><p>说明：（概念解释）学生表中的 student_id 是主键，那么成绩表中的 student_id 则为外键。如果更新学生表中的 student_id，同时触发成绩表中的 student_id 更新，即为<strong>级联更新</strong>。外键与级联更新适用于<strong>单机低并发</strong> ，不适合<strong>分布式</strong>、 <strong>并发集群</strong>；<em>级联</em>更新是<strong>强阻塞</strong>，存在数据库<strong>更新风暴</strong> 的风险；<em>外键</em>影响数据库的<strong>插入速度</strong> 。</p><h2 id="_13-7-检查约束" tabindex="-1"><a class="header-anchor" href="#_13-7-检查约束"><span>13.7 检查约束</span></a></h2><h3 id="_13-7-1-作用" tabindex="-1"><a class="header-anchor" href="#_13-7-1-作用"><span>13.7.1 作用</span></a></h3><p><strong>检查某个字段的值是否符合指定要求</strong>。一般指的是值的范围</p><p>检查约束在MySQL8.0中才开始有作用（MySQL5.7中已存在，但是没有起作用）。</p><h3 id="_13-7-2-关键字" tabindex="-1"><a class="header-anchor" href="#_13-7-2-关键字"><span>13.7.2 关键字</span></a></h3><p><strong>CHECK</strong></p><h3 id="_13-7-3-添加检查约束" tabindex="-1"><a class="header-anchor" href="#_13-7-3-添加检查约束"><span>13.7.3 添加检查约束</span></a></h3><blockquote><p>方式一：在建表时添加约束</p></blockquote><ul><li><p>列级约束</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">CREATE TABLE 表名(</span>
<span class="line">	字段名 字段类型,</span>
<span class="line">	字段名 字段类型,</span>
<span class="line">	字段名 字段类型 CHECK(字段值需要满足的条件)</span>
<span class="line">    ...</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>表级约束</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">CREATE TABLE 表名(</span>
<span class="line">	字段名 字段类型,</span>
<span class="line">	字段名 字段类型,</span>
<span class="line">	字段名 字段类型,</span>
<span class="line">	...</span>
<span class="line">	CONSTRAINT 约束名 CHECK(字段值需要满足的条件)</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><blockquote><p>方式2：建表后添加约束</p></blockquote><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">ALTER TABLE 表名 ADD CONSTRAINT 约束名 CHECK(字段值需要满足的条件);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>例1</code>：salary不得小于2000</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">CREATE TABLE test_check1(</span>
<span class="line">	id INT,</span>
<span class="line">	`name` VARCHAR(15),</span>
<span class="line">	salary DECIMAL(10, 2) CHECK(salary &gt; 2000)</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>例2</code>：sex只能是男或女</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">CREATE TABLE test_check3(</span>
<span class="line">	id INT,</span>
<span class="line">	`name` VARCHAR(15),</span>
<span class="line">	sex CHAR,</span>
<span class="line">    CONSTRAINT ck_tc3_sex CHECK(sex in(&#39;男&#39;,&#39;女&#39;))</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_13-7-4-删除检查约束" tabindex="-1"><a class="header-anchor" href="#_13-7-4-删除检查约束"><span>13.7.4 删除检查约束</span></a></h3><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line"># ① 查询约束名</span>
<span class="line">SELECT * FROM information_schema.TABLE_CONSTRAINTS WHERE table_name = &#39;表名&#39;</span>
<span class="line"># ② 删除检查约束</span>
<span class="line">ALTER TABLE 表名 DROP CONSTRAINT 约束名;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_13-8-默认值约束" tabindex="-1"><a class="header-anchor" href="#_13-8-默认值约束"><span>13.8 默认值约束</span></a></h2><h3 id="_13-8-1-作用" tabindex="-1"><a class="header-anchor" href="#_13-8-1-作用"><span>13.8.1 作用</span></a></h3><p><strong>为给定字段指定默认值</strong>。插入数据时，如果该字段没有显示赋值，则赋值为默认值</p><h3 id="_13-8-2-关键字" tabindex="-1"><a class="header-anchor" href="#_13-8-2-关键字"><span>13.8.2 关键字</span></a></h3><p><strong>DEFAULT</strong></p><h3 id="_13-8-3-特点" tabindex="-1"><a class="header-anchor" href="#_13-8-3-特点"><span>13.8.3 特点</span></a></h3><ul><li>在建表后给字段<strong>添加</strong>默认值约束时，<strong>如果该字段原有NOT NULL约束，并且仍旧想保留NOT NULL，那么需要在MODIFY语句中保留非空约束</strong></li><li>在建表后将字段的默认值约束<strong>删除</strong>时，<strong>如果该字段原有NOT NULL约束，并且仍旧想保留NOT NULL，那么需要在MODIFY语句中保留非空约束</strong></li></ul><h3 id="_13-8-4-添加默认值约束" tabindex="-1"><a class="header-anchor" href="#_13-8-4-添加默认值约束"><span>13.8.4 添加默认值约束</span></a></h3><blockquote><p>方式1：建表时添加默认值约束</p></blockquote><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">CREATE TABLE 表名(</span>
<span class="line">	字段名 字段类型,</span>
<span class="line">	字段名 字段类型 DEFAULT 默认值</span>
<span class="line">    ...</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>方式2：建表后添加默认值约束</p></blockquote><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">ALTER TABLE 表名 MODIFY 字段名 字段类型 DEFAULT 默认值 [NOT NULL];</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><!----></p><ul><li><p>如果该字段原来有<strong>非空约束</strong>，并且在添加默认值约束后还想<strong>保留非空约束</strong>，则需要在MODIFY语句中保留非空约束</p></li><li><p>同理，如果某字段原有<strong>默认值约束</strong>，并且想在添加非空约束后还想<strong>保留默认值约束</strong>，则需要在MODIFY语句中保留默认值约束。</p><p>这就是以如下代码报错的原因。</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">CREATE TABLE test_default2(</span>
<span class="line">	id INT,</span>
<span class="line">	`name` VARCHAR(15),</span>
<span class="line">	sex CHAR NOT NULL</span>
<span class="line">);</span>
<span class="line">DESC test_default2;</span>
<span class="line"># 插入报错：Field &#39;sex&#39; doesn&#39;t have a default value</span>
<span class="line">INSERT INTO test_default2(id, `name`) VALUES(1, &#39;Tom&#39;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_13-8-5-删除默认值约束" tabindex="-1"><a class="header-anchor" href="#_13-8-5-删除默认值约束"><span>13.8.5 删除默认值约束</span></a></h3><ul><li>如果该字段原有非空约束，只需删除默认值约束时，需要保留原有非空约束：</li></ul><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">ALTER TABLE 表名 MODIFY 字段值 字段类型 NOT NULL;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>删除字段值的默认约束的同时，也删除其非空约束：</li></ul><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">ALTER TABLE 表名 MODIFY 字段值 字段类型;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1179131421@qq.com">文铁铁~</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/static/tang/mysql/12_MySQL%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html" aria-label="12 MySQL中的数据类型"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>12 MySQL中的数据类型</span></div></a><a class="route-link auto-link next" href="/static/tang/mysql/14_%E8%A7%86%E5%9B%BE.html" aria-label="14 视图"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>14 视图</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CW2dCZSC.js" defer></script>
  </body>
</html>
