<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <title>11 Elasticsearch集群 | wenatie</title><meta name="description" content="我的个人博客">
    <link rel="preload" href="/assets/style-qprCm-5e.css" as="style"><link rel="stylesheet" href="/assets/style-qprCm-5e.css">
    <link rel="modulepreload" href="/assets/app-CQavEA7Q.js"><link rel="modulepreload" href="/assets/11_Elasticsearch集群.html-DbTW8Wvf.js">
    <link rel="prefetch" href="/assets/index.html-D9TU5PK4.js" as="script"><link rel="prefetch" href="/assets/jsonutil.html-LZl0naJ4.js" as="script"><link rel="prefetch" href="/assets/jsonView.html-DeAYDW8C.js" as="script"><link rel="prefetch" href="/assets/part1.html-DuR5GfT_.js" as="script"><link rel="prefetch" href="/assets/part2.html-Btel-p8U.js" as="script"><link rel="prefetch" href="/assets/part3.html-uchQkMsf.js" as="script"><link rel="prefetch" href="/assets/part4.html-BoiaTHuW.js" as="script"><link rel="prefetch" href="/assets/part1.html-CYaBoSUq.js" as="script"><link rel="prefetch" href="/assets/part2.html-DfGCwRaP.js" as="script"><link rel="prefetch" href="/assets/part1.html-DAhCmPbl.js" as="script"><link rel="prefetch" href="/assets/part2.html-Cajr2H2D.js" as="script"><link rel="prefetch" href="/assets/part1.html-C-_HPzqk.js" as="script"><link rel="prefetch" href="/assets/part2.html-pyZEfNnc.js" as="script"><link rel="prefetch" href="/assets/spring6.html-DxTeVIju.js" as="script"><link rel="prefetch" href="/assets/fzzj.html-D3YMxYan.js" as="script"><link rel="prefetch" href="/assets/smzqhs.html-CIeemtFe.js" as="script"><link rel="prefetch" href="/assets/vue-slsx.html-D7-7dotJ.js" as="script"><link rel="prefetch" href="/assets/vueyuanli.html-CtBuPc7I.js" as="script"><link rel="prefetch" href="/assets/ysbd.html-DAfYkNhA.js" as="script"><link rel="prefetch" href="/assets/git.html-BtBTYVND.js" as="script"><link rel="prefetch" href="/assets/wp-1.html-DGqwZ3Ug.js" as="script"><link rel="prefetch" href="/assets/part1.html-VECCkrWb.js" as="script"><link rel="prefetch" href="/assets/part1.html-tZ2ol_VE.js" as="script"><link rel="prefetch" href="/assets/part2.html-BnexerQB.js" as="script"><link rel="prefetch" href="/assets/part3.html-DMVGXVsn.js" as="script"><link rel="prefetch" href="/assets/part4.html-Dupvo3oF.js" as="script"><link rel="prefetch" href="/assets/index.html-Q7v54NOG.js" as="script"><link rel="prefetch" href="/assets/es6-1.html-BSRfMlmj.js" as="script"><link rel="prefetch" href="/assets/es6-10.html-CDnRrRY5.js" as="script"><link rel="prefetch" href="/assets/es6-11.html-CgprtUKz.js" as="script"><link rel="prefetch" href="/assets/es6-12.html-BSCUL77S.js" as="script"><link rel="prefetch" href="/assets/es6-13.html-0-xDO0qt.js" as="script"><link rel="prefetch" href="/assets/es6-14.html-CJ2Z1PHP.js" as="script"><link rel="prefetch" href="/assets/es6-15.html-DT_RvXDV.js" as="script"><link rel="prefetch" href="/assets/es6-16.html-POsTw3oa.js" as="script"><link rel="prefetch" href="/assets/es6-17.html-B-e9nh5_.js" as="script"><link rel="prefetch" href="/assets/es6-18.html-DXwSI5n3.js" as="script"><link rel="prefetch" href="/assets/es6-2.html-DuKDvLxP.js" as="script"><link rel="prefetch" href="/assets/es6-3.html-DH17eYgY.js" as="script"><link rel="prefetch" href="/assets/es6-4.html-B24VfRfC.js" as="script"><link rel="prefetch" href="/assets/es6-5.html-CJQa4RTW.js" as="script"><link rel="prefetch" href="/assets/es6-6.html-C6IsZQ-R.js" as="script"><link rel="prefetch" href="/assets/es6-7.html-D5L_rKY-.js" as="script"><link rel="prefetch" href="/assets/es6-8.html-2hp2Z5S8.js" as="script"><link rel="prefetch" href="/assets/es6-9.html-D0wp4hl6.js" as="script"><link rel="prefetch" href="/assets/p1.html-DAGMjZrC.js" as="script"><link rel="prefetch" href="/assets/ts-basic.html-DtCamA7t.js" as="script"><link rel="prefetch" href="/assets/part1.html-BEuhbRUY.js" as="script"><link rel="prefetch" href="/assets/part2.html-DgENipGT.js" as="script"><link rel="prefetch" href="/assets/kuayu.html-DS9Z_fck.js" as="script"><link rel="prefetch" href="/assets/layout.html-DOjL4-VP.js" as="script"><link rel="prefetch" href="/assets/refresh.html-DHNgRh43.js" as="script"><link rel="prefetch" href="/assets/route.html-BTucMrWE.js" as="script"><link rel="prefetch" href="/assets/storage.html-DseLBXIB.js" as="script"><link rel="prefetch" href="/assets/xmlhttprequest.html-C3rqbaqh.js" as="script"><link rel="prefetch" href="/assets/autoheight.html-B22bW-QG.js" as="script"><link rel="prefetch" href="/assets/css-selector.html-DiD0Jn5Z.js" as="script"><link rel="prefetch" href="/assets/CSSchangyong.html-HKIk6sFf.js" as="script"><link rel="prefetch" href="/assets/flex.html-DVtIkvzR.js" as="script"><link rel="prefetch" href="/assets/grid.html-DbO8w-Sc.js" as="script"><link rel="prefetch" href="/assets/longlist.html-DUlXnfnH.js" as="script"><link rel="prefetch" href="/assets/beforeunload.html-C3lhmZqp.js" as="script"><link rel="prefetch" href="/assets/buding.html-CJa1xvpx.js" as="script"><link rel="prefetch" href="/assets/hwdj.html-CLU3HKgV.js" as="script"><link rel="prefetch" href="/assets/modules.html-B2gBAUZN.js" as="script"><link rel="prefetch" href="/assets/pro-compile.html-BPXz-Kir.js" as="script"><link rel="prefetch" href="/assets/usually-functions.html-DdC_yayp.js" as="script"><link rel="prefetch" href="/assets/vue-webpack-optimize.html-B91GmpMm.js" as="script"><link rel="prefetch" href="/assets/webpack-optimize.html-D7MDUft5.js" as="script"><link rel="prefetch" href="/assets/linuxinstallnode.html-DTOJk79P.js" as="script"><link rel="prefetch" href="/assets/node.html-BUzF0zqb.js" as="script"><link rel="prefetch" href="/assets/Docker.html-3_iuw04G.js" as="script"><link rel="prefetch" href="/assets/docker搭建私有镜像仓库.html-C_sXDX-0.js" as="script"><link rel="prefetch" href="/assets/01_Elasticsearch概述.html-D3dTThyb.js" as="script"><link rel="prefetch" href="/assets/02_Elasticsearch相关工具的安装与使用.html-CNs0oPvW.js" as="script"><link rel="prefetch" href="/assets/03_Elasticsearch核心概念.html-B8Jsmbny.js" as="script"><link rel="prefetch" href="/assets/04_Elasticsearch基本操作.html-BFZHgqlz.js" as="script"><link rel="prefetch" href="/assets/05_Elasticsearch DSL高级查询.html-9cXxQ6jr.js" as="script"><link rel="prefetch" href="/assets/06_Elasticsearch进阶查询.html-Dqwzde1E.js" as="script"><link rel="prefetch" href="/assets/07_Java API 操作 Elasticsearch.html-ps0yFC1m.js" as="script"><link rel="prefetch" href="/assets/08_Spring Data Elasticsearch.html-Dq6HFOqZ.js" as="script"><link rel="prefetch" href="/assets/09_Linux 安装 Elasticsearch.html-nOLXHv5R.js" as="script"><link rel="prefetch" href="/assets/10_CAP定理.html-DiYr_Lng.js" as="script"><link rel="prefetch" href="/assets/12_Elasticsearch分片控制与原理.html-C0Gmpg72.js" as="script"><link rel="prefetch" href="/assets/13_Elasticsearch的优化建议.html-fBGdxXKT.js" as="script"><link rel="prefetch" href="/assets/gitlab-commands.html-Cl4PKdwc.js" as="script"><link rel="prefetch" href="/assets/gitlab-error.html-S_wwpjpH.js" as="script"><link rel="prefetch" href="/assets/jetlinks项目初体验.html-DusYv5BZ.js" as="script"><link rel="prefetch" href="/assets/00_前言.html-BnRR9tk6.js" as="script"><link rel="prefetch" href="/assets/01_Java语言概述.html-CqwmXzmp.js" as="script"><link rel="prefetch" href="/assets/02_Java基本语法.html-CykegFcq.js" as="script"><link rel="prefetch" href="/assets/03_Java数组.html-D1IqVnVE.js" as="script"><link rel="prefetch" href="/assets/04_面向对象编程（上）.html-Dnuu1b3H.js" as="script"><link rel="prefetch" href="/assets/05_面向对象编程（中）.html-OnmoBP3L.js" as="script"><link rel="prefetch" href="/assets/06_面向对象编程（下）.html-CQvF0gJ0.js" as="script"><link rel="prefetch" href="/assets/07_异常处理.html-DHb2BV4-.js" as="script"><link rel="prefetch" href="/assets/08_多线程.html-BALv19kB.js" as="script"><link rel="prefetch" href="/assets/09_Java常用类.html-RcVv5TNx.js" as="script"><link rel="prefetch" href="/assets/10_枚举_注解.html-DPbASkNb.js" as="script"><link rel="prefetch" href="/assets/11_Java集合.html-C3CWkJ2Y.js" as="script"><link rel="prefetch" href="/assets/12_Java泛型.html-iPR3FiQM.js" as="script"><link rel="prefetch" href="/assets/13_IO流.html-Dq2JAHmY.js" as="script"><link rel="prefetch" href="/assets/14_网络编程.html-CYrngJuT.js" as="script"><link rel="prefetch" href="/assets/15_Java反射机制.html-C1eQWNgZ.js" as="script"><link rel="prefetch" href="/assets/16_Java8新特性.html-2DGhK0AY.js" as="script"><link rel="prefetch" href="/assets/17_Java9_10_11新特性.html-CfbYEHyB.js" as="script"><link rel="prefetch" href="/assets/18_JUC并发编程.html-oatHzLy0.js" as="script"><link rel="prefetch" href="/assets/19_设计模式.html-DXLXwTcW.js" as="script"><link rel="prefetch" href="/assets/20_排序算法.html-DLEULPah.js" as="script"><link rel="prefetch" href="/assets/99_面试题.html-CPHzGkSM.js" as="script"><link rel="prefetch" href="/assets/1.html-f1DBn7MR.js" as="script"><link rel="prefetch" href="/assets/2.html-va9UcIRc.js" as="script"><link rel="prefetch" href="/assets/01_MySQL概述.html-C8Q_Psq1.js" as="script"><link rel="prefetch" href="/assets/02_关系型数据库与非关系型数据库.html-gjmNMpOb.js" as="script"><link rel="prefetch" href="/assets/03_关系型数据库设计原则.html-DDXsl_C7.js" as="script"><link rel="prefetch" href="/assets/04_MySQL的登录.html-BY3t7uMo.js" as="script"><link rel="prefetch" href="/assets/05_MySQL一些常用命令.html-Cgc8upLJ.js" as="script"><link rel="prefetch" href="/assets/06_MySQL图形化管理工具.html-aLdZj_pt.js" as="script"><link rel="prefetch" href="/assets/07_运算符.html-COZBKyFO.js" as="script"><link rel="prefetch" href="/assets/08_MySQL函数.html-BcZzqzDX.js" as="script"><link rel="prefetch" href="/assets/09_子查询.html-CWGoKIWz.js" as="script"><link rel="prefetch" href="/assets/10_管理数据库和数据库表.html-pqm0St5R.js" as="script"><link rel="prefetch" href="/assets/11_数据的增删改.html-GrywX9YI.js" as="script"><link rel="prefetch" href="/assets/12_MySQL中的数据类型.html-BzKtiP7s.js" as="script"><link rel="prefetch" href="/assets/13_约束.html-BaBKFRnT.js" as="script"><link rel="prefetch" href="/assets/14_视图.html-DsYzF2sO.js" as="script"><link rel="prefetch" href="/assets/15_存储过程与存储函数.html-jrfS-HMC.js" as="script"><link rel="prefetch" href="/assets/16_变量、流程控制与游标.html-TVRDO7BE.js" as="script"><link rel="prefetch" href="/assets/17_触发器.html-CLwsoZvN.js" as="script"><link rel="prefetch" href="/assets/18_MySQL8.0新特性.html-D9tKUcdl.js" as="script"><link rel="prefetch" href="/assets/19_表及其数据.html-CcfzqEyu.js" as="script"><link rel="prefetch" href="/assets/99_MySQL常见问题的解决.html-Cmfiks6g.js" as="script"><link rel="prefetch" href="/assets/1.html-DRdURDYh.js" as="script"><link rel="prefetch" href="/assets/2.html-CUsmJZJq.js" as="script"><link rel="prefetch" href="/assets/3.html-C58tzy3R.js" as="script"><link rel="prefetch" href="/assets/1.html-D8pRQcSZ.js" as="script"><link rel="prefetch" href="/assets/2.html-BqvXgRFl.js" as="script"><link rel="prefetch" href="/assets/CentOS7root账号免密登录.html-DctTv2eG.js" as="script"><link rel="prefetch" href="/assets/CentOS7安装GitLab.html-B1bXSpSz.js" as="script"><link rel="prefetch" href="/assets/CentOS7安装jdk1.8.html-Cp2sUu7S.js" as="script"><link rel="prefetch" href="/assets/CentOs7安装jenkins.html-kkIGKWlN.js" as="script"><link rel="prefetch" href="/assets/CentOS7安装mysql5.7(使用yum源安装).html-CtlyH-FO.js" as="script"><link rel="prefetch" href="/assets/CentOS7安装redis.html-Bs_ewyNC.js" as="script"><link rel="prefetch" href="/assets/CentOS7平滑升级nginx.html-SQDSaxeH.js" as="script"><link rel="prefetch" href="/assets/借助阿里云服务器使用frp做内网穿透.html-QjIQiEJ0.js" as="script"><link rel="prefetch" href="/assets/1.html-CNnznj-q.js" as="script"><link rel="prefetch" href="/assets/1.html-CKoYdiOz.js" as="script"><link rel="prefetch" href="/assets/2.html-BDVJ1zy3.js" as="script"><link rel="prefetch" href="/assets/3.html-BQcpS3RU.js" as="script"><link rel="prefetch" href="/assets/记一次小程序接口的发布.html-C76Q13-u.js" as="script"><link rel="prefetch" href="/assets/part1.html-BFnwRZFJ.js" as="script"><link rel="prefetch" href="/assets/part1.html-C9faX_IY.js" as="script"><link rel="prefetch" href="/assets/part1.html-DNBoUve7.js" as="script"><link rel="prefetch" href="/assets/part10.html-BJwbvDDq.js" as="script"><link rel="prefetch" href="/assets/part11.html-Bn3DeWYA.js" as="script"><link rel="prefetch" href="/assets/part12.html-B1QUg5xj.js" as="script"><link rel="prefetch" href="/assets/part2.html-CkDiGo_Y.js" as="script"><link rel="prefetch" href="/assets/part3.html-BclsmWNQ.js" as="script"><link rel="prefetch" href="/assets/part9.html-DeTjE1Qr.js" as="script"><link rel="prefetch" href="/assets/auto.html-BERgrtnz.js" as="script"><link rel="prefetch" href="/assets/blog.html-DYbMea1Z.js" as="script"><link rel="prefetch" href="/assets/command.html-uSaDY-MC.js" as="script"><link rel="prefetch" href="/assets/ftp.html-CmsKcTKV.js" as="script"><link rel="prefetch" href="/assets/1.html-IYM5_Tc0.js" as="script"><link rel="prefetch" href="/assets/2.html-3JVQcnA6.js" as="script"><link rel="prefetch" href="/assets/3.html-BqRVsE7k.js" as="script"><link rel="prefetch" href="/assets/4.html-RJRUgzQC.js" as="script"><link rel="prefetch" href="/assets/6443_connect-refused.html-Bl6Hbf_D.js" as="script"><link rel="prefetch" href="/assets/404.html-Dd7dlws0.js" as="script"><link rel="prefetch" href="/assets/JsonUtil-BkU8Y0qk.js" as="script"><link rel="prefetch" href="/assets/JsonView-CW8a3djt.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="vp-site-name" aria-hidden="true">wenatie</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端工具"><span class="title">前端工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端工具"><span class="title">前端工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/utils/jsonutil.html" aria-label="JSON工具"><!---->JSON工具<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/utils/jsonView.html" aria-label="JSON View"><!---->JSON View<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="AI"><span class="title">AI</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="AI"><span class="title">AI</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/ai/llm/llm-study/part1.html" aria-label="大模型入门"><!---->大模型入门<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/ai/llm/chatglm/part1.html" aria-label="chatGLM大模型实践"><!---->chatGLM大模型实践<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/gitlab/gitlab-error.html" aria-label="gitlab"><!---->gitlab<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/java2/00_%E5%89%8D%E8%A8%80.html" aria-label="java"><!---->java<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/mysql/01_MySQL%E6%A6%82%E8%BF%B0.html" aria-label="mysql"><!---->mysql<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/docker/Docker.html" aria-label="docker"><!---->docker<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/k8s/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/command.html" aria-label="k8s"><!---->k8s<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Elasticsearch/01_Elasticsearch%E6%A6%82%E8%BF%B0.html" aria-label="Elasticsearch"><!---->Elasticsearch<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Prometheus/1.html" aria-label="Prometheus"><!---->Prometheus<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Python/1.html" aria-label="Python"><!---->Python<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Vue/1.html" aria-label="Vue"><!---->Vue<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/server/CentOS7root%E8%B4%A6%E5%8F%B7%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95.html" aria-label="服务器环境安装"><!---->服务器环境安装<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/mservice/2.html" aria-label="微服务"><!---->微服务<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/%E9%A1%B9%E7%9B%AE%E4%B8%8A%E7%BA%BF/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%8F%91%E5%B8%83.html" aria-label="项目上线"><!---->项目上线<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/IoTPlatform/jetlinks%E9%A1%B9%E7%9B%AE%E5%88%9D%E4%BD%93%E9%AA%8C.html" aria-label="物联网项目"><!---->物联网项目<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/basic/part1.html" aria-label="JS基础"><!---->JS基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/es6/es6-1.html" aria-label="ES6入门"><!---->ES6入门<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/youdontknowjs/part1.html" aria-label="你不知道的Javascript"><!---->你不知道的Javascript<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/design/" aria-label="设计模式"><!---->设计模式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/typescript/ts-basic.html" aria-label="typescript"><!---->typescript<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/vue/vueyuanli.html" aria-label="vue2"><!---->vue2<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/vue3/reactive/part1.html" aria-label="vue3"><!---->vue3<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/spring5/part1.html" aria-label="spring5"><!---->spring5<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/end/c/data-contruction/part1.html" aria-label="数据结构（严蔚敏）"><!---->数据结构（严蔚敏）<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/JS/hwdj.html" aria-label="JS相关"><!---->JS相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/CSS/css-selector.html" aria-label="CSS相关"><!---->CSS相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/browser/xmlhttprequest.html" aria-label="浏览器相关"><!---->浏览器相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/node/node.html" aria-label="node相关"><!---->node相关<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端工具"><span class="title">前端工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端工具"><span class="title">前端工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/utils/jsonutil.html" aria-label="JSON工具"><!---->JSON工具<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/utils/jsonView.html" aria-label="JSON View"><!---->JSON View<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="AI"><span class="title">AI</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="AI"><span class="title">AI</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/ai/llm/llm-study/part1.html" aria-label="大模型入门"><!---->大模型入门<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/ai/llm/chatglm/part1.html" aria-label="chatGLM大模型实践"><!---->chatGLM大模型实践<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/gitlab/gitlab-error.html" aria-label="gitlab"><!---->gitlab<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/java2/00_%E5%89%8D%E8%A8%80.html" aria-label="java"><!---->java<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/mysql/01_MySQL%E6%A6%82%E8%BF%B0.html" aria-label="mysql"><!---->mysql<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/docker/Docker.html" aria-label="docker"><!---->docker<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/k8s/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/command.html" aria-label="k8s"><!---->k8s<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Elasticsearch/01_Elasticsearch%E6%A6%82%E8%BF%B0.html" aria-label="Elasticsearch"><!---->Elasticsearch<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Prometheus/1.html" aria-label="Prometheus"><!---->Prometheus<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Python/1.html" aria-label="Python"><!---->Python<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Vue/1.html" aria-label="Vue"><!---->Vue<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/server/CentOS7root%E8%B4%A6%E5%8F%B7%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95.html" aria-label="服务器环境安装"><!---->服务器环境安装<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/mservice/2.html" aria-label="微服务"><!---->微服务<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/%E9%A1%B9%E7%9B%AE%E4%B8%8A%E7%BA%BF/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%8F%91%E5%B8%83.html" aria-label="项目上线"><!---->项目上线<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/IoTPlatform/jetlinks%E9%A1%B9%E7%9B%AE%E5%88%9D%E4%BD%93%E9%AA%8C.html" aria-label="物联网项目"><!---->物联网项目<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/basic/part1.html" aria-label="JS基础"><!---->JS基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/es6/es6-1.html" aria-label="ES6入门"><!---->ES6入门<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/youdontknowjs/part1.html" aria-label="你不知道的Javascript"><!---->你不知道的Javascript<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/design/" aria-label="设计模式"><!---->设计模式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/typescript/ts-basic.html" aria-label="typescript"><!---->typescript<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/vue/vueyuanli.html" aria-label="vue2"><!---->vue2<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/vue3/reactive/part1.html" aria-label="vue3"><!---->vue3<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/spring5/part1.html" aria-label="spring5"><!---->spring5<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/end/c/data-contruction/part1.html" aria-label="数据结构（严蔚敏）"><!---->数据结构（严蔚敏）<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/JS/hwdj.html" aria-label="JS相关"><!---->JS相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/CSS/css-selector.html" aria-label="CSS相关"><!---->CSS相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/browser/xmlhttprequest.html" aria-label="浏览器相关"><!---->浏览器相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/node/node.html" aria-label="node相关"><!---->node相关<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">Elasticsearch <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/Elasticsearch/01_Elasticsearch%E6%A6%82%E8%BF%B0.html" aria-label="1 概述"><!---->1 概述<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/Elasticsearch/02_Elasticsearch%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8.html" aria-label="2 ES相关工具的安装与使用"><!---->2 ES相关工具的安装与使用<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/Elasticsearch/03_Elasticsearch%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5.html" aria-label="3 核心概念"><!---->3 核心概念<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/Elasticsearch/04_Elasticsearch%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C.html" aria-label="4 es基本操作"><!---->4 es基本操作<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/Elasticsearch/05_Elasticsearch%20DSL%E9%AB%98%E7%BA%A7%E6%9F%A5%E8%AF%A2.html" aria-label="5 DSL高级查询"><!---->5 DSL高级查询<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/Elasticsearch/06_Elasticsearch%E8%BF%9B%E9%98%B6%E6%9F%A5%E8%AF%A2.html" aria-label="6 进阶查询"><!---->6 进阶查询<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/Elasticsearch/07_Java%20API%20%E6%93%8D%E4%BD%9C%20Elasticsearch.html" aria-label="7 Java API 操作 es"><!---->7 Java API 操作 es<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/Elasticsearch/08_Spring%20Data%20Elasticsearch.html" aria-label="8 Spring Data Elasticsearch"><!---->8 Spring Data Elasticsearch<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/Elasticsearch/09_Linux%20%E5%AE%89%E8%A3%85%20Elasticsearch.html" aria-label="9 Linux安装ES相关工具"><!---->9 Linux安装ES相关工具<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/Elasticsearch/10_CAP%E5%AE%9A%E7%90%86.html" aria-label="10 CAP定理"><!---->10 CAP定理<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/static/tang/Elasticsearch/11_Elasticsearch%E9%9B%86%E7%BE%A4.html" aria-label="11 Elasticsearch集群"><!---->11 Elasticsearch集群<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/Elasticsearch/12_Elasticsearch%E5%88%86%E7%89%87%E6%8E%A7%E5%88%B6%E4%B8%8E%E5%8E%9F%E7%90%86.html" aria-label="12 Elasticsearch分片控制与原理"><!---->12 Elasticsearch分片控制与原理<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/Elasticsearch/13_Elasticsearch%E7%9A%84%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE.html" aria-label="13 Elasticsearch的优化建议"><!---->13 Elasticsearch的优化建议<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="_11-elasticsearch集群" tabindex="-1"><a class="header-anchor" href="#_11-elasticsearch集群"><span>11 Elasticsearch集群</span></a></h1><p><strong>Elasticsearch天生就是分布式的系统。</strong></p><p>配置服务器集群时，集群中节点数量没有限制，大于等于2个节点就是集群了。 一般处于高性能及高可用的方面来考虑，集群中的节点数量都是3个以上。</p><blockquote><p>为什么要搭建集群</p></blockquote><ul><li>单台机器存储容量有限</li><li>单服务器容易出现单点故障，无法实现高可用性</li><li>单服务的并发处理能力有限</li></ul><h2 id="_11-1-集群安装" tabindex="-1"><a class="header-anchor" href="#_11-1-集群安装"><span>11.1 集群安装</span></a></h2><h3 id="_11-1-1-搭建方案" tabindex="-1"><a class="header-anchor" href="#_11-1-1-搭建方案"><span>11.1.1 搭建方案</span></a></h3><p>一般集群建议3台机器以上。这里我们就是用3台机器来安装集群环境。</p><h3 id="_11-1-2-复制es程序" tabindex="-1"><a class="header-anchor" href="#_11-1-2-复制es程序"><span>11.1.2 复制ES程序</span></a></h3><ul><li><p>创建elasticsearch-cluster文件夹，重新解压elasticsearch安装包到当前路径下，并将文件夹重命名node1。</p></li><li><p>将ik分词器解压到elasticsearch-cluster/node1/plugins/ik文件夹下，同时删除ik分词器的压缩包文件。</p></li><li><p>修改elasticsearch-cluster/node1/config/jvm.options文件：</p><p><img src="/assets/es_jvm_update-Dr1K2RAp.png" alt=""></p></li><li><p>复制node1两份，分别重命名为node2，node3</p><p><img src="/assets/es_cluster_nodes-BggaFaZN.png" alt=""></p></li></ul><h3 id="_11-1-3-修改es配置文件" tabindex="-1"><a class="header-anchor" href="#_11-1-3-修改es配置文件"><span>11.1.3 修改es配置文件</span></a></h3><p>修改elasticsearch-cluster/node*/config/elasticsearch.yml文件</p><blockquote><p>node1</p></blockquote><pre><code>```yaml
# 集群名称
cluster.name: my-application

# 默认为true。设置为false禁用磁盘分配决定器(禁用的原因：集群环境对磁盘的要求比较高，在启动集群时会检测磁盘大小。如果磁盘太小，集群就会启动失败)
cluster.routing.allocation.disk.threshold_enabled: false

# 节点名称
node.name: node-1

# 将node1节点设置为主节点（是否为主节点，默认为true）
node.master: true

# 将node1节点设置为数据节点（是否为数据节点，默认为true）
node.data: true

path.data: ./data
path.logs: ./logs

# 允许所有ip访问，即允许远程访问
network.host: 0.0.0.0

# 因为是一台机器启动3个es服务，每个节点的端口号都不能重复，所以需要修改一下
http.port: 9201

# 集群间通信端口号，在同一台机器下必须不一样
transport.tcp.port: 9301

# 发现集群中的节点
discovery.seed_hosts: [&quot;127.0.0.1:9301&quot;, &quot;127.0.0.1:9302&quot;, &quot;127.0.0.1:9303&quot;]

# 初始配置选举主节点
cluster.initial_master_nodes: [&quot;node-1&quot;]

# elasticsearch-head解决跨域
http.cors.allow-origin: &quot;*&quot;
http.cors.enabled: true
```
</code></pre><blockquote><p>node2</p></blockquote><pre><code>```yaml
# 集群名称
cluster.name: my-application

# 默认为true。设置为false禁用磁盘分配决定器(禁用的原因：集群环境对磁盘的要求比较高，在启动集群时会检测磁盘大小。如果磁盘太小，集群就会启动失败)
cluster.routing.allocation.disk.threshold_enabled: false

# 节点名称
node.name: node-2

# 将node2节点设置为主节点（是否为主节点，默认为true）
node.master: true

# 将node1节点设置为数据节点（是否为数据节点，默认为true）
node.data: true

path.data: ./data
path.logs: ./logs

# 允许所有ip访问，即允许远程访问
network.host: 0.0.0.0
#
# Set a custom port for HTTP:
# 因为是一台机器启动3个es服务，每个节点的端口号都不能重复，所以需要修改一下
http.port: 9202

# 集群间通信端口号，在同一台机器下必须不一样
transport.tcp.port: 9302

# 发现集群中的节点
discovery.seed_hosts: [&quot;127.0.0.1:9301&quot;, &quot;127.0.0.1:9302&quot;, &quot;127.0.0.1:9303&quot;]

# 初始配置选举主节点
cluster.initial_master_nodes: [&quot;node-1&quot;]

# elasticsearch-head解决跨域
http.cors.allow-origin: &quot;*&quot;
http.cors.enabled: true
```
</code></pre><blockquote><p>node3</p></blockquote><pre><code>```yaml
 # 集群名称
 cluster.name: my-application
 
 # 默认为true。设置为false禁用磁盘分配决定器(禁用的原因：集群环境对磁盘的要求比较高，在启动集群时会检测磁盘大小。如果磁盘太小，集群就会启动失败)
 cluster.routing.allocation.disk.threshold_enabled: false
 
 # 节点名称
 node.name: node-3
 
 # 将node2节点设置为主节点（是否为主节点，默认为true）
 node.master: true
 
 # 将node1节点设置为数据节点（是否为数据节点，默认为true）
 node.data: true
 
 path.data: ./data
 path.logs: ./logs
 
 # 允许所有ip访问，即允许远程访问
 network.host: 0.0.0.0
 #
 # Set a custom port for HTTP:
 # 因为是一台机器启动3个es服务，每个节点的端口号都不能重复，所以需要修改一下
 http.port: 9203
 
 # 集群间通信端口号，在同一台机器下必须不一样
 transport.tcp.port: 9303
 
 # 发现集群中的节点
 discovery.seed_hosts: [&quot;127.0.0.1:9301&quot;, &quot;127.0.0.1:9302&quot;, &quot;127.0.0.1:9303&quot;]
 
 # 初始配置选举主节点
 cluster.initial_master_nodes: [&quot;node-1&quot;]
 
 # elasticsearch-head解决跨域
 http.cors.allow-origin: &quot;*&quot;
 http.cors.enabled: true
```
</code></pre><h3 id="_11-1-4-集群的启动与访问测试" tabindex="-1"><a class="header-anchor" href="#_11-1-4-集群的启动与访问测试"><span>11.1.4 集群的启动与访问测试</span></a></h3><blockquote><p>集群启动</p></blockquote><p>依次启动node1、node2、node3 3个节点。</p><p>注意：不能一块都启动，要保证上一个启动成功，再启动下一个</p><blockquote><p>访问测试</p></blockquote><p>浏览器输入<a href="http://127.0.0.1:9201/_cat/health?v" target="_blank" rel="noopener noreferrer">http://127.0.0.1:9201/_cat/health?v</a>，查看节点状态。 如果status=green 且 total.node=3，表示集群启动后成功。</p><p><img src="/assets/es_cluster_status_visit-Dtz9tMUg.png" alt=""></p><h3 id="_11-1-5-kibana的配置与访问测试" tabindex="-1"><a class="header-anchor" href="#_11-1-5-kibana的配置与访问测试"><span>11.1.5 kibana的配置与访问测试</span></a></h3><blockquote><p>修改kibana配置文件并启动</p></blockquote><p>修改kibana-7.8.0-windows-x86_64/config/kibana.yml文件，使kibana指向当前集群。 <img src="/assets/kibana_properties-CZ-pxt_Q.png" alt=""></p><blockquote><p>kibana访问测试</p></blockquote><p><img src="/assets/es_cluster_status_kinaba-D7Y7_wd2.png" alt=""></p><h3 id="_11-1-6-集群中节点的状态" tabindex="-1"><a class="header-anchor" href="#_11-1-6-集群中节点的状态"><span>11.1.6 集群中节点的状态</span></a></h3><blockquote><p>Green</p></blockquote><p>表示所有的主分片和副本分片都已分配，集群100%是可用的。</p><blockquote><p>Yellow</p></blockquote><p>表示所有的主分片已经分片了，但至少还有一个副本是缺失的。该情况下，不会有数据丢失，搜索结果依然是完整的。</p><p>但是，集群的高可用在某种程度上被弱化了。如果更多的分片消失，数据就会丢失了。</p><p>可以将该状态想象成一个需要及时调查的<strong>警告</strong>。</p><blockquote><p>Red</p></blockquote><p>至少有一个主分片以及它的全部副本分片都在缺失，搜索只能返回部分数据，且分配到这个分片上的写入请求会返回一个异常。</p><h2 id="_11-2-elasticsearch集群中的核心概念" tabindex="-1"><a class="header-anchor" href="#_11-2-elasticsearch集群中的核心概念"><span>11.2 Elasticsearch集群中的核心概念</span></a></h2><h3 id="_11-2-1-集群cluster" tabindex="-1"><a class="header-anchor" href="#_11-2-1-集群cluster"><span>11.2.1 集群Cluster</span></a></h3><ul><li>一个集群就是由一个或多个服务器节点组织在一起，共用持有整个数据，并一起提供索引和搜索功能。</li><li>一个集群有一个唯一的名字表示。当一个新的节点需要加入某个集群时，只能通过该集群的名字加入。</li></ul><h3 id="_11-2-2-节点node" tabindex="-1"><a class="header-anchor" href="#_11-2-2-节点node"><span>11.2.2 节点Node</span></a></h3><ul><li>集群中包含多台服务器，一个节点就是其中的一台服务器。作为集群的一部分，它存储数据，参与集群的索引和搜索功能。</li><li>节点也是由名字来标识的。名字会在启动时赋予节点。</li><li>一个节点可以通过配置集群名称的方式加入指定的集群。</li><li>一个集群中可以有任意多个节点。</li></ul><h3 id="_11-2-3-分片shards" tabindex="-1"><a class="header-anchor" href="#_11-2-3-分片shards"><span>11.2.3 分片Shards</span></a></h3><ul><li><p>一个索引可以存储超出单个节点硬件限制的大量数据。比如，一个具有10亿文档数据的索引占据1TB的磁盘空间，而任一节点都可能没有这样大的磁盘空间， 或者单个节点处理索引请求时响应太慢。为了解决这个问题，<strong>Elasticsearch提供了将索引划分为多份的能力，每一份就称为一个分片。</strong> 当创建索引时，可以指定分片数量。每个分片本身也是一个功能完善且独立的“索引”，这个“索引”可以被放置到集群中的任何节点上。</p></li><li><p>分片的作用</p><ul><li>允许水平分割/扩展内容量</li><li>允许在分片上进行分布式的、并行的操作，进而提高性能/吞吐量</li></ul></li><li><p>用户无需关心分片怎样分布、文档怎样聚合和搜索请求，这些都是Elasticsearch管理的。</p></li></ul><h3 id="_11-2-4-副本replicas" tabindex="-1"><a class="header-anchor" href="#_11-2-4-副本replicas"><span>11.2.4 副本Replicas</span></a></h3><ul><li><p>在一个网络/云环境中，失败随时都有可能发生，在某个分片/节点处于离线状态，或者由于某个原因消失了，这种情况下，有一个故障转移机制是非常必要的。 <strong>Elasticsearch允许创建分片的一份或多分拷贝，这些拷贝就叫做复制分片，即副本。</strong></p></li><li><p>副本的作用：</p><ul><li>在分片/节点失败的情况下，提供了高可用性。这是因为<strong>副本不会与主分片置于同一节点中。</strong></li><li>扩展搜索量/吞吐量，这是因为<strong>搜索可以在所有副本上并行运行。</strong></li></ul></li><li><p>可以在创建索引时指定主分片和副本数量。索引创建后，可以改变副本数量，但不能改变主分片数量。默认情况下，在创建索引的时候会被分配1个主分片1个副本。</p></li><li><p>数据的总份数 = 主分片数量 + 主分片数量 * 副本数量</p></li></ul><h3 id="_11-2-5-分配allocation" tabindex="-1"><a class="header-anchor" href="#_11-2-5-分配allocation"><span>11.2.5 分配Allocation</span></a></h3><p>将分片分配给某个节点的过程，包括分配主分片或者副本。如果是副本，还包含从主分片复制数据的过程。这个过程由master节点完成。即Elasticsearch的分片分配和均衡机制。</p><h3 id="_11-2-6-节点类型" tabindex="-1"><a class="header-anchor" href="#_11-2-6-节点类型"><span>11.2.6 节点类型</span></a></h3><p>es中的节点分为Master节点、DataNode节点。</p><ul><li><p>Master节点：</p><ul><li>Elasticsearch启动时，会选举出一个master节点。当某个节点启动后，使用Zen Discovery机制找到集群中的其他节点并建立连接（<code>discovery.seed_hosts:[&quot;host1&quot;, &quot;host2&quot;, &quot;host3&quot;]</code>）, 并从候选主节点中选举出一个主节点（<code>cluster.initial_master_nodes: [&quot;node1&quot;, &quot;node2&quot;, &quot;node3&quot;]</code>）。</li><li>master节点功能： <ul><li>管理索引（创建索引、删除索引），分配分配</li><li>维护元数据</li><li>管理集群节点状态</li></ul></li><li>master不负责写入和查询，比较轻量级。一个Elasticsearch集群中，只有一个master节点。在生产环境中，内存可以相对小一点，但是要确保机器的稳定。</li></ul></li><li><p>DataNode节点：</p><ul><li>DataNode主要功能： <ul><li>数据写入</li><li>数据检索</li></ul></li><li>大部分Elasticsearch的压力都在DataNode节点上，在生产环境中，内存最好分配大一些。</li></ul></li></ul><h2 id="_11-3-系统架构" tabindex="-1"><a class="header-anchor" href="#_11-3-系统架构"><span>11.3 系统架构</span></a></h2><p><img src="/assets/elasticsearch_cluster_framework-D3NfCu9y.png" alt=""></p><p>一个运行中的Elasticsearch实例称为一个节点，而集群是由一个或多个拥有相同集群名称（cluster.name配置相同）的节点组成。 它们<strong>共同承担数据和负载的压力</strong>。当有节点<strong>加入</strong>集群或者从集群中<strong>移除</strong>时，集群将会<strong>重新平均分布</strong>所有数据。</p><p>当一个节点被选举为主节点时，它将负责管理集群范围内的所有变更，如增加、删除索引，或者增加、移除节点等。 作为用户，我们可以将请求发送到集群的任何节点，包括主节点。 每个节点都知道任意文档所处的位置，并且能够将我们的请求直接转发到存储我们所需文档的节点。 无论将请求发送到哪个节点，它都能负责从各个包含我们所需文档的节点收集回数据，并将最终结果返回给客户端。 Elasticsearch对这一切的管理都是透明的。</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1179131421@qq.com">文铁铁~</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/static/tang/Elasticsearch/10_CAP%E5%AE%9A%E7%90%86.html" aria-label="10 CAP定理"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>10 CAP定理</span></div></a><a class="route-link auto-link next" href="/static/tang/Elasticsearch/12_Elasticsearch%E5%88%86%E7%89%87%E6%8E%A7%E5%88%B6%E4%B8%8E%E5%8E%9F%E7%90%86.html" aria-label="12 Elasticsearch分片控制与原理"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>12 Elasticsearch分片控制与原理</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CQavEA7Q.js" defer></script>
  </body>
</html>
