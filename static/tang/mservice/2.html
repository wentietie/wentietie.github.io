<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <title>微服务学习 | wenatie</title><meta name="description" content="我的个人博客">
    <link rel="preload" href="/assets/style-BlZK-UN3.css" as="style"><link rel="stylesheet" href="/assets/style-BlZK-UN3.css">
    <link rel="modulepreload" href="/assets/app-DRxAhH5h.js"><link rel="modulepreload" href="/assets/2.html-DighqJ-w.js">
    <link rel="prefetch" href="/assets/index.html-DqeIlwJD.js" as="script"><link rel="prefetch" href="/assets/jsonutil.html-BNgnD3Mc.js" as="script"><link rel="prefetch" href="/assets/part1.html-CbBNdYcP.js" as="script"><link rel="prefetch" href="/assets/part2.html-JoBO2jgV.js" as="script"><link rel="prefetch" href="/assets/part3.html-CaMMts8l.js" as="script"><link rel="prefetch" href="/assets/part4.html-BBd0_IUI.js" as="script"><link rel="prefetch" href="/assets/part1.html-D0CjmP7L.js" as="script"><link rel="prefetch" href="/assets/part2.html-CrihMSRK.js" as="script"><link rel="prefetch" href="/assets/part1.html-B9T8WETR.js" as="script"><link rel="prefetch" href="/assets/part2.html-BZUlGVp7.js" as="script"><link rel="prefetch" href="/assets/fzzj.html-BJWwjm7W.js" as="script"><link rel="prefetch" href="/assets/smzqhs.html-DBJezNSI.js" as="script"><link rel="prefetch" href="/assets/vue-slsx.html-BQ_Hf49Q.js" as="script"><link rel="prefetch" href="/assets/vueyuanli.html-_3Y8mUZv.js" as="script"><link rel="prefetch" href="/assets/ysbd.html-BCxsMI1x.js" as="script"><link rel="prefetch" href="/assets/part1.html-RU4tvHyd.js" as="script"><link rel="prefetch" href="/assets/part2.html-BwBScVf_.js" as="script"><link rel="prefetch" href="/assets/spring6.html-PNHKNZSh.js" as="script"><link rel="prefetch" href="/assets/git.html-DXgyQuJX.js" as="script"><link rel="prefetch" href="/assets/wp-1.html-CyCVtA__.js" as="script"><link rel="prefetch" href="/assets/part1.html-B-OzqaqV.js" as="script"><link rel="prefetch" href="/assets/part1.html-B7O31IS-.js" as="script"><link rel="prefetch" href="/assets/part2.html-CKVQ37R6.js" as="script"><link rel="prefetch" href="/assets/part3.html-BXsXgKRC.js" as="script"><link rel="prefetch" href="/assets/part4.html-CGIxkhMQ.js" as="script"><link rel="prefetch" href="/assets/index.html-DvO0afLN.js" as="script"><link rel="prefetch" href="/assets/es6-1.html-BeuXPb4J.js" as="script"><link rel="prefetch" href="/assets/es6-10.html-UMsbfB_T.js" as="script"><link rel="prefetch" href="/assets/es6-11.html-BGCiK6ZG.js" as="script"><link rel="prefetch" href="/assets/es6-12.html-Dw_YJyRd.js" as="script"><link rel="prefetch" href="/assets/es6-13.html-C3NH__C1.js" as="script"><link rel="prefetch" href="/assets/es6-14.html-28odG0y0.js" as="script"><link rel="prefetch" href="/assets/es6-15.html-FoQNOmBI.js" as="script"><link rel="prefetch" href="/assets/es6-16.html-FlzuIAXx.js" as="script"><link rel="prefetch" href="/assets/es6-17.html-DtSdi6HW.js" as="script"><link rel="prefetch" href="/assets/es6-18.html-CMzfugoe.js" as="script"><link rel="prefetch" href="/assets/es6-2.html-t9M9z8d-.js" as="script"><link rel="prefetch" href="/assets/es6-3.html-CE445YTn.js" as="script"><link rel="prefetch" href="/assets/es6-4.html-C2JT1B9e.js" as="script"><link rel="prefetch" href="/assets/es6-5.html-B2B5UtGO.js" as="script"><link rel="prefetch" href="/assets/es6-6.html-m2BEbHEd.js" as="script"><link rel="prefetch" href="/assets/es6-7.html-mjuOifk0.js" as="script"><link rel="prefetch" href="/assets/es6-8.html-Cnv0OLYC.js" as="script"><link rel="prefetch" href="/assets/es6-9.html-DnrJoQJM.js" as="script"><link rel="prefetch" href="/assets/p1.html-BxTQvcSZ.js" as="script"><link rel="prefetch" href="/assets/ts-basic.html-IG12RqrY.js" as="script"><link rel="prefetch" href="/assets/part1.html-Bi353i51.js" as="script"><link rel="prefetch" href="/assets/part2.html-aNQBWmHT.js" as="script"><link rel="prefetch" href="/assets/kuayu.html-xjErk4Wz.js" as="script"><link rel="prefetch" href="/assets/layout.html-BAgVyqJd.js" as="script"><link rel="prefetch" href="/assets/refresh.html-CHb8QbmS.js" as="script"><link rel="prefetch" href="/assets/route.html-B8J9GB-J.js" as="script"><link rel="prefetch" href="/assets/storage.html-BssklvYA.js" as="script"><link rel="prefetch" href="/assets/xmlhttprequest.html-CpeX2qQf.js" as="script"><link rel="prefetch" href="/assets/autoheight.html-lmILph-C.js" as="script"><link rel="prefetch" href="/assets/css-selector.html-D2HEt8Do.js" as="script"><link rel="prefetch" href="/assets/CSSchangyong.html-DjIO6f-P.js" as="script"><link rel="prefetch" href="/assets/flex.html-BewIKRIr.js" as="script"><link rel="prefetch" href="/assets/grid.html-Ds9t5DRX.js" as="script"><link rel="prefetch" href="/assets/longlist.html-B6LOsoQN.js" as="script"><link rel="prefetch" href="/assets/beforeunload.html-DXeAj06c.js" as="script"><link rel="prefetch" href="/assets/buding.html-_arHTsFT.js" as="script"><link rel="prefetch" href="/assets/hwdj.html-G_VEyomR.js" as="script"><link rel="prefetch" href="/assets/modules.html-DohAs9Wq.js" as="script"><link rel="prefetch" href="/assets/pro-compile.html-CivDTF3s.js" as="script"><link rel="prefetch" href="/assets/usually-functions.html-DzrVdkpi.js" as="script"><link rel="prefetch" href="/assets/vue-webpack-optimize.html-NZZgny03.js" as="script"><link rel="prefetch" href="/assets/webpack-optimize.html-BKWMeu6Y.js" as="script"><link rel="prefetch" href="/assets/linuxinstallnode.html-BmdP5_Cf.js" as="script"><link rel="prefetch" href="/assets/node.html-abOwDNUm.js" as="script"><link rel="prefetch" href="/assets/Docker.html-H2PbGWbf.js" as="script"><link rel="prefetch" href="/assets/docker搭建私有镜像仓库.html-DUBzU1lC.js" as="script"><link rel="prefetch" href="/assets/01_Elasticsearch概述.html-CnF-Y2FN.js" as="script"><link rel="prefetch" href="/assets/02_Elasticsearch相关工具的安装与使用.html-DERjf9ei.js" as="script"><link rel="prefetch" href="/assets/03_Elasticsearch核心概念.html-CpimKHkr.js" as="script"><link rel="prefetch" href="/assets/04_Elasticsearch基本操作.html-C85UWRIt.js" as="script"><link rel="prefetch" href="/assets/05_Elasticsearch DSL高级查询.html-B0QN4Loz.js" as="script"><link rel="prefetch" href="/assets/06_Elasticsearch进阶查询.html-DzA03zNe.js" as="script"><link rel="prefetch" href="/assets/07_Java API 操作 Elasticsearch.html-DOy75zOF.js" as="script"><link rel="prefetch" href="/assets/08_Spring Data Elasticsearch.html-BLYr7mKV.js" as="script"><link rel="prefetch" href="/assets/09_Linux 安装 Elasticsearch.html-BUJGPko-.js" as="script"><link rel="prefetch" href="/assets/10_CAP定理.html-Bus3LSEZ.js" as="script"><link rel="prefetch" href="/assets/11_Elasticsearch集群.html-B5GYSWg-.js" as="script"><link rel="prefetch" href="/assets/12_Elasticsearch分片控制与原理.html-CFQczMHB.js" as="script"><link rel="prefetch" href="/assets/13_Elasticsearch的优化建议.html-C38euUWv.js" as="script"><link rel="prefetch" href="/assets/gitlab-commands.html-CnGZC7Li.js" as="script"><link rel="prefetch" href="/assets/gitlab-error.html-BcwqCcFe.js" as="script"><link rel="prefetch" href="/assets/jetlinks项目初体验.html-eMDyYD8B.js" as="script"><link rel="prefetch" href="/assets/00_前言.html-B7l7xj-D.js" as="script"><link rel="prefetch" href="/assets/01_Java语言概述.html-BT0TbJ6h.js" as="script"><link rel="prefetch" href="/assets/02_Java基本语法.html-Ctp80JmJ.js" as="script"><link rel="prefetch" href="/assets/03_Java数组.html-BKAd5yON.js" as="script"><link rel="prefetch" href="/assets/04_面向对象编程（上）.html-CXn0WKZz.js" as="script"><link rel="prefetch" href="/assets/05_面向对象编程（中）.html-PKAphF6J.js" as="script"><link rel="prefetch" href="/assets/06_面向对象编程（下）.html-B578NZKG.js" as="script"><link rel="prefetch" href="/assets/07_异常处理.html-q2OxmbcY.js" as="script"><link rel="prefetch" href="/assets/08_多线程.html-CYrp69FY.js" as="script"><link rel="prefetch" href="/assets/09_Java常用类.html-BA3R6qvu.js" as="script"><link rel="prefetch" href="/assets/10_枚举_注解.html-9gU0cVjo.js" as="script"><link rel="prefetch" href="/assets/11_Java集合.html-BBSDim4L.js" as="script"><link rel="prefetch" href="/assets/12_Java泛型.html-DFzNeE9i.js" as="script"><link rel="prefetch" href="/assets/13_IO流.html-BIdhFrmN.js" as="script"><link rel="prefetch" href="/assets/14_网络编程.html-CYRK8ROo.js" as="script"><link rel="prefetch" href="/assets/15_Java反射机制.html-rhvXkpJU.js" as="script"><link rel="prefetch" href="/assets/16_Java8新特性.html-C4ieC8hE.js" as="script"><link rel="prefetch" href="/assets/17_Java9_10_11新特性.html-B66hX2Rn.js" as="script"><link rel="prefetch" href="/assets/18_JUC并发编程.html-BYHcCpNY.js" as="script"><link rel="prefetch" href="/assets/19_设计模式.html-gBzZx6ne.js" as="script"><link rel="prefetch" href="/assets/20_排序算法.html-BZFpsp-0.js" as="script"><link rel="prefetch" href="/assets/99_面试题.html-6cRs8Xpi.js" as="script"><link rel="prefetch" href="/assets/1.html-Df9kqD3X.js" as="script"><link rel="prefetch" href="/assets/01_MySQL概述.html-C-OrxbHl.js" as="script"><link rel="prefetch" href="/assets/02_关系型数据库与非关系型数据库.html-BB6VwvaE.js" as="script"><link rel="prefetch" href="/assets/03_关系型数据库设计原则.html-CzOOPaB7.js" as="script"><link rel="prefetch" href="/assets/04_MySQL的登录.html-B6i-2h7L.js" as="script"><link rel="prefetch" href="/assets/05_MySQL一些常用命令.html-CAZnWl0H.js" as="script"><link rel="prefetch" href="/assets/06_MySQL图形化管理工具.html-Cvq_PwbY.js" as="script"><link rel="prefetch" href="/assets/07_运算符.html-BxzS7XfR.js" as="script"><link rel="prefetch" href="/assets/08_MySQL函数.html-DXMtp9nF.js" as="script"><link rel="prefetch" href="/assets/09_子查询.html-CLOzQsmt.js" as="script"><link rel="prefetch" href="/assets/10_管理数据库和数据库表.html-BSNA42dC.js" as="script"><link rel="prefetch" href="/assets/11_数据的增删改.html-CQZ_6yd0.js" as="script"><link rel="prefetch" href="/assets/12_MySQL中的数据类型.html-DcyYEzVa.js" as="script"><link rel="prefetch" href="/assets/13_约束.html-BeV_4Dmn.js" as="script"><link rel="prefetch" href="/assets/14_视图.html-BI_N4Cpl.js" as="script"><link rel="prefetch" href="/assets/15_存储过程与存储函数.html-oybozGap.js" as="script"><link rel="prefetch" href="/assets/16_变量、流程控制与游标.html-DPpn4wJO.js" as="script"><link rel="prefetch" href="/assets/17_触发器.html-D4xDcMX-.js" as="script"><link rel="prefetch" href="/assets/18_MySQL8.0新特性.html-CrgrNOfa.js" as="script"><link rel="prefetch" href="/assets/19_表及其数据.html-DF4pjH9q.js" as="script"><link rel="prefetch" href="/assets/99_MySQL常见问题的解决.html-BW1O-rKx.js" as="script"><link rel="prefetch" href="/assets/1.html-DD9-EacF.js" as="script"><link rel="prefetch" href="/assets/2.html-BM3okK1X.js" as="script"><link rel="prefetch" href="/assets/3.html-DU1O5nw2.js" as="script"><link rel="prefetch" href="/assets/1.html-CrmCed-e.js" as="script"><link rel="prefetch" href="/assets/2.html-BSURwxOy.js" as="script"><link rel="prefetch" href="/assets/CentOS7root账号免密登录.html-Fq8nQYpd.js" as="script"><link rel="prefetch" href="/assets/CentOS7安装GitLab.html-CXHgwa-N.js" as="script"><link rel="prefetch" href="/assets/CentOS7安装jdk1.8.html-qD9-Dx0t.js" as="script"><link rel="prefetch" href="/assets/CentOs7安装jenkins.html-COHLm9vM.js" as="script"><link rel="prefetch" href="/assets/CentOS7安装mysql5.7(使用yum源安装).html-xPTo9_RY.js" as="script"><link rel="prefetch" href="/assets/CentOS7安装redis.html-BqkO5lbq.js" as="script"><link rel="prefetch" href="/assets/CentOS7平滑升级nginx.html-CGpBcg_f.js" as="script"><link rel="prefetch" href="/assets/借助阿里云服务器使用frp做内网穿透.html-tMJCykIr.js" as="script"><link rel="prefetch" href="/assets/1.html-BNbdhQhp.js" as="script"><link rel="prefetch" href="/assets/1.html-DmzEGxuN.js" as="script"><link rel="prefetch" href="/assets/2.html-xQHCXMEE.js" as="script"><link rel="prefetch" href="/assets/3.html-Dvg7oBfC.js" as="script"><link rel="prefetch" href="/assets/记一次小程序接口的发布.html-Cf54aNbY.js" as="script"><link rel="prefetch" href="/assets/part1.html-D93_j3xD.js" as="script"><link rel="prefetch" href="/assets/part1.html-BXgduQ89.js" as="script"><link rel="prefetch" href="/assets/part1.html-DcZWbJzW.js" as="script"><link rel="prefetch" href="/assets/part10.html-CR8--Ifn.js" as="script"><link rel="prefetch" href="/assets/part11.html-BmSOzPh-.js" as="script"><link rel="prefetch" href="/assets/part12.html-LQqv2vpY.js" as="script"><link rel="prefetch" href="/assets/part2.html-Bq0QF293.js" as="script"><link rel="prefetch" href="/assets/part3.html-S0B0wm6k.js" as="script"><link rel="prefetch" href="/assets/part9.html-DeBHn0RB.js" as="script"><link rel="prefetch" href="/assets/auto.html-bXHLp1LX.js" as="script"><link rel="prefetch" href="/assets/blog.html-CcxthXRw.js" as="script"><link rel="prefetch" href="/assets/command.html-LheFAZO8.js" as="script"><link rel="prefetch" href="/assets/ftp.html-Cv43NrbQ.js" as="script"><link rel="prefetch" href="/assets/1.html-DmLEUsl_.js" as="script"><link rel="prefetch" href="/assets/2.html-CK21d8ab.js" as="script"><link rel="prefetch" href="/assets/3.html-C5gNXo-b.js" as="script"><link rel="prefetch" href="/assets/4.html-Uh84GCwB.js" as="script"><link rel="prefetch" href="/assets/6443_connect-refused.html-JfKYunWm.js" as="script"><link rel="prefetch" href="/assets/404.html-DOQGf883.js" as="script"><link rel="prefetch" href="/assets/JsonUtil-DlB9EX03.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="vp-site-name" aria-hidden="true">wenatie</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端工具"><span class="title">前端工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端工具"><span class="title">前端工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/utils/jsonutil.html" aria-label="JSON工具"><!---->JSON工具<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="AI"><span class="title">AI</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="AI"><span class="title">AI</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/ai/llm/llm-study/part1.html" aria-label="大模型入门"><!---->大模型入门<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/ai/llm/chatglm/part1.html" aria-label="chatGLM大模型实践"><!---->chatGLM大模型实践<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/gitlab/gitlab-error.html" aria-label="gitlab"><!---->gitlab<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/java2/00_%E5%89%8D%E8%A8%80.html" aria-label="java"><!---->java<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/mysql/01_MySQL%E6%A6%82%E8%BF%B0.html" aria-label="mysql"><!---->mysql<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/docker/Docker.html" aria-label="docker"><!---->docker<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/k8s/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/command.html" aria-label="k8s"><!---->k8s<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Elasticsearch/01_Elasticsearch%E6%A6%82%E8%BF%B0.html" aria-label="Elasticsearch"><!---->Elasticsearch<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Prometheus/1.html" aria-label="Prometheus"><!---->Prometheus<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Python/1.html" aria-label="Python"><!---->Python<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Vue/1.html" aria-label="Vue"><!---->Vue<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/server/CentOS7root%E8%B4%A6%E5%8F%B7%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95.html" aria-label="服务器环境安装"><!---->服务器环境安装<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/static/tang/mservice/2.html" aria-label="微服务"><!---->微服务<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/%E9%A1%B9%E7%9B%AE%E4%B8%8A%E7%BA%BF/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%8F%91%E5%B8%83.html" aria-label="项目上线"><!---->项目上线<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/IoTPlatform/jetlinks%E9%A1%B9%E7%9B%AE%E5%88%9D%E4%BD%93%E9%AA%8C.html" aria-label="物联网项目"><!---->物联网项目<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/basic/part1.html" aria-label="JS基础"><!---->JS基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/es6/es6-1.html" aria-label="ES6入门"><!---->ES6入门<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/youdontknowjs/part1.html" aria-label="你不知道的Javascript"><!---->你不知道的Javascript<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/design/" aria-label="设计模式"><!---->设计模式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/typescript/ts-basic.html" aria-label="typescript"><!---->typescript<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/vue/vueyuanli.html" aria-label="vue2"><!---->vue2<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/vue3/reactive/part1.html" aria-label="vue3"><!---->vue3<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/spring5/part1.html" aria-label="spring5"><!---->spring5<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/end/c/data-contruction/part1.html" aria-label="数据结构（严蔚敏）"><!---->数据结构（严蔚敏）<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/JS/hwdj.html" aria-label="JS相关"><!---->JS相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/CSS/css-selector.html" aria-label="CSS相关"><!---->CSS相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/browser/xmlhttprequest.html" aria-label="浏览器相关"><!---->浏览器相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/node/node.html" aria-label="node相关"><!---->node相关<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端工具"><span class="title">前端工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端工具"><span class="title">前端工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/utils/jsonutil.html" aria-label="JSON工具"><!---->JSON工具<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="AI"><span class="title">AI</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="AI"><span class="title">AI</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/ai/llm/llm-study/part1.html" aria-label="大模型入门"><!---->大模型入门<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/ai/llm/chatglm/part1.html" aria-label="chatGLM大模型实践"><!---->chatGLM大模型实践<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/gitlab/gitlab-error.html" aria-label="gitlab"><!---->gitlab<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/java2/00_%E5%89%8D%E8%A8%80.html" aria-label="java"><!---->java<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/mysql/01_MySQL%E6%A6%82%E8%BF%B0.html" aria-label="mysql"><!---->mysql<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/docker/Docker.html" aria-label="docker"><!---->docker<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/k8s/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/command.html" aria-label="k8s"><!---->k8s<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Elasticsearch/01_Elasticsearch%E6%A6%82%E8%BF%B0.html" aria-label="Elasticsearch"><!---->Elasticsearch<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Prometheus/1.html" aria-label="Prometheus"><!---->Prometheus<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Python/1.html" aria-label="Python"><!---->Python<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Vue/1.html" aria-label="Vue"><!---->Vue<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/server/CentOS7root%E8%B4%A6%E5%8F%B7%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95.html" aria-label="服务器环境安装"><!---->服务器环境安装<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/static/tang/mservice/2.html" aria-label="微服务"><!---->微服务<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/%E9%A1%B9%E7%9B%AE%E4%B8%8A%E7%BA%BF/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%8F%91%E5%B8%83.html" aria-label="项目上线"><!---->项目上线<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/IoTPlatform/jetlinks%E9%A1%B9%E7%9B%AE%E5%88%9D%E4%BD%93%E9%AA%8C.html" aria-label="物联网项目"><!---->物联网项目<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/basic/part1.html" aria-label="JS基础"><!---->JS基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/es6/es6-1.html" aria-label="ES6入门"><!---->ES6入门<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/youdontknowjs/part1.html" aria-label="你不知道的Javascript"><!---->你不知道的Javascript<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/design/" aria-label="设计模式"><!---->设计模式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/typescript/ts-basic.html" aria-label="typescript"><!---->typescript<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/vue/vueyuanli.html" aria-label="vue2"><!---->vue2<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/vue3/reactive/part1.html" aria-label="vue3"><!---->vue3<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/spring5/part1.html" aria-label="spring5"><!---->spring5<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/end/c/data-contruction/part1.html" aria-label="数据结构（严蔚敏）"><!---->数据结构（严蔚敏）<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/JS/hwdj.html" aria-label="JS相关"><!---->JS相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/CSS/css-selector.html" aria-label="CSS相关"><!---->CSS相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/browser/xmlhttprequest.html" aria-label="浏览器相关"><!---->浏览器相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/node/node.html" aria-label="node相关"><!---->node相关<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">微服务学习 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/static/tang/mservice/2.html" aria-label="微服务学习"><!---->微服务学习<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/mservice/1.html" aria-label="Nacos的使用"><!---->Nacos的使用<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="微服务学习" tabindex="-1"><a class="header-anchor" href="#微服务学习"><span>微服务学习</span></a></h1><h1 id="_1-认识微服务" tabindex="-1"><a class="header-anchor" href="#_1-认识微服务"><span>1.认识微服务</span></a></h1><h2 id="_1-1-分布式架构" tabindex="-1"><a class="header-anchor" href="#_1-1-分布式架构"><span>1.1 分布式架构</span></a></h2><blockquote><p>定义</p></blockquote><p>根据业务功能对系统进行拆分，每个业务模块的作为独立项目开发，成为一个服务。</p><blockquote><p>优点</p></blockquote><ul><li>降低服务耦合</li><li>有利于服务扩展</li></ul><blockquote><p>分布式架构要考虑的问题</p></blockquote><ul><li>服务拆分粒度？</li><li>服务集群地址如何维护？</li><li>服务之间如何实现远程调用？</li><li>服务健康状态如何感知？</li></ul><h2 id="_1-2-微服务" tabindex="-1"><a class="header-anchor" href="#_1-2-微服务"><span>1.2 微服务</span></a></h2><blockquote><p>定义</p></blockquote><p>微服务是一种经过良好架构设计的<strong>分布式</strong>架构方案。</p><blockquote><p>特征</p></blockquote><ul><li>==单一职责==：微服务拆分粒度更小，每一个服务对应唯一的业务能力，做到单一职责，避免业务重复开发</li><li>==面向对象==：微服务对外暴露接口</li><li>==自治==：团队独立、技术独立、数据独立、部署独立</li><li>==隔离性强==：服务调用做好隔离、容错、降级，避免出现隔离问题</li></ul><blockquote><p>微服务技术对比</p></blockquote><table><thead><tr><th></th><th>Dubbo</th><th>SpringCloud</th><th>SpringCloudAlibaba</th></tr></thead><tbody><tr><td>注册中心</td><td>zookeeper、Redis</td><td>Eureka、Consul</td><td>Nacos、Eureka</td></tr><tr><td>服务远程调用</td><td>Dobbo协议</td><td>Feign（http协议）</td><td>Dubbo、Feign</td></tr><tr><td>配置中心</td><td>无</td><td>SpringCloudConfig</td><td>SpringCloudConfig、Nacos</td></tr><tr><td>服务网关</td><td>无</td><td>SpringCloudGateway、Zuul</td><td>SpringCloudGateway、Zuul</td></tr><tr><td>服务监控和保护</td><td>dubbo-admin，功能弱</td><td>Hystrix</td><td>Sentinel</td></tr></tbody></table><h2 id="_1-3-springcloud" tabindex="-1"><a class="header-anchor" href="#_1-3-springcloud"><span>1.3 SpringCloud</span></a></h2><p>目前使用最广泛的微服务架构。</p><h1 id="_2-服务拆分及远程调用" tabindex="-1"><a class="header-anchor" href="#_2-服务拆分及远程调用"><span>2.服务拆分及远程调用</span></a></h1><h2 id="_2-1-服务拆分注意事项" tabindex="-1"><a class="header-anchor" href="#_2-1-服务拆分注意事项"><span>2.1 服务拆分注意事项</span></a></h2><ul><li>不同微服务，不要重复开发相同业务。</li><li>微服务数据独立，不要访问其他微服务的数据库。</li><li>微服务可以将自己的业务暴露为接口，供其他服务使用。</li></ul><h2 id="_2-2-服务调用关系" tabindex="-1"><a class="header-anchor" href="#_2-2-服务调用关系"><span>2.2 服务调用关系</span></a></h2><ul><li><p>==服务提供者==：一次业务中，被其他微服务调用的服务。</p></li><li><p>==服务消费者==：一次业务中，低啊用其他微服务的服务。</p><p>==<strong>提供者与消费者的角色是相对而言的</strong>==：一个服务既可以是消费者，又可以是提供者</p></li></ul><h2 id="_2-3-eureka注册中心" tabindex="-1"><a class="header-anchor" href="#_2-3-eureka注册中心"><span>2.3 Eureka注册中心</span></a></h2><p>Eureka架构中,微服务角色有两类:</p><ul><li><p>EurekaServer：服务端，注册中心</p><ul><li>作用：记录服务信息，监控客户端心跳</li></ul></li><li><p>EurekaClient：客户端</p><ul><li>Provider：服务提供者 <ul><li>启动时，注册自己的信息到EurekaServer</li><li>每隔30s向EurekaServer发送心跳</li></ul></li><li>Consumer：服务消费者 <ul><li>根据服务名称从EurekaServer拉取服务列表</li><li>基于服务列表做负载均衡，选中一个微服务后发起调用。</li></ul></li></ul></li></ul><h2 id="_2-4-ribbon负载均衡" tabindex="-1"><a class="header-anchor" href="#_2-4-ribbon负载均衡"><span>2.4 Ribbon负载均衡</span></a></h2><blockquote><p>Ribbon负载均衡流程</p></blockquote><p><img src="/assets/image-20220127171558841-B-vEP21s.png" alt="image-20220127171558841"></p><blockquote><p>负载均衡策略</p></blockquote><p>==Ribbon的负载均衡规则是一个叫IRule的接口来定义的，每一个子接口都是一种规则。==</p><p><img src="/assets/image-20220127171820634-VlQPl1vs.png" alt="image-20220127171820634"></p><table><thead><tr><th>内置负载均衡规则类</th><th>规则描述</th></tr></thead><tbody><tr><td>RoundRobinRule</td><td>轮询。Ribbon默认的负载均衡。</td></tr><tr><td>AvailabilityFilteringRule</td><td>对以下两种服务器忽略: <br>1.“短路”的服务器。默认情况下，如果一台服务器3次连接失败，就会被设置为“短路”状态。短路状态将持续30s，如果再次连接失败，短路状态持续时间几何级增加。<br> 2.并发数过高的服务器。可以由<code>&lt;clientName&gt;.&lt;clientConfigNameSpace&gt;.ActiveConnectionsLimit</code>配置。</td></tr><tr><td>WeightedResponseTimeRule</td><td>为每一个服务器赋予一个权重值。服务器响应时间越长，其权重值越小。这个规则会随机选择服务器，权重值会影响服务器的选择。</td></tr><tr><td>ZoneAvoidanceRule</td><td>以区域可用的服务器为基础进行服务器的选择。使用Zone对服务器进行分类，Zone可以理解为一个机房、一个机架等。而后再对Zone内的多个服务做轮询。</td></tr><tr><td>BestAvailableRule</td><td>忽略短路服务器，并选择并发数较低的服务器。</td></tr><tr><td>RandomRule</td><td>随机选择一个可用的服务器。</td></tr><tr><td>RetryRule</td><td>重试机制的选择逻辑。</td></tr><tr><td>RandomRule</td><td>随机选择。</td></tr></tbody></table><blockquote><p>负载均衡两种配置方式</p></blockquote><ul><li><p>在消费者服务的启动类里注入IRule</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token annotation punctuation">@Bean</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token class-name">IRule</span> <span class="token function">randomRule</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RendomRule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在消费者服务的yaml文件里添加规则</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">userservice</span><span class="token punctuation">:</span> <span class="token comment"># 服务提供者的服务名</span></span>
<span class="line">    <span class="token key atrule">ribbon</span><span class="token punctuation">:</span></span>
<span class="line">       <span class="token key atrule">NFLoadBalancerRuleClassName</span><span class="token punctuation">:</span> com.netflix.loadbalancer.RandomRule <span class="token comment"># 负载均衡规则</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>==以上二者的区别==：</p><p>​ 第一种是所有服务的负载均衡策略都是RandomRule；第二种是只有指定服务名（userservice）的服务的负载均衡策略是RandomRule。</p><blockquote><p>Ribbon 策略--饥饿加载</p></blockquote><p>Ribbon默认使用的是<strong>懒加载</strong>。</p><p>==开启饥饿加载==</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">ribbon</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">eager-load</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 开启饥饿加载</span></span>
<span class="line">      <span class="token key atrule">clients</span><span class="token punctuation">:</span> userservice <span class="token comment"># 只对单个服务开启饥饿加载</span></span>
<span class="line"><span class="token comment">#--------------------------------------------------------------------------------------------      </span></span>
<span class="line"><span class="token key atrule">ribbon</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">eager-load</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 开启饥饿加载</span></span>
<span class="line">      <span class="token key atrule">clients</span><span class="token punctuation">:</span> </span>
<span class="line">        <span class="token punctuation">-</span> userservice <span class="token comment"># 对多个服务开启饥饿加载</span></span>
<span class="line">           goodservice</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-5-nacos注册中心" tabindex="-1"><a class="header-anchor" href="#_2-5-nacos注册中心"><span>2.5 Nacos注册中心</span></a></h2><h1 id="_7-feign-http客户端" tabindex="-1"><a class="header-anchor" href="#_7-feign-http客户端"><span>7.Feign(HTTP客户端)</span></a></h1><h2 id="_7-1-feign替代resttemplate" tabindex="-1"><a class="header-anchor" href="#_7-1-feign替代resttemplate"><span>7.1 Feign替代RestTemplate</span></a></h2><blockquote><p>Feign定义</p></blockquote><p>Feign是一个声明式的http客户端，作用是帮助我们优雅的实现http请求的发现，帮助实现各个微服务内部之间的调用。</p><blockquote><p>使用</p></blockquote><p>Step1. 引入依赖</p><p><img src="/assets/image-20220209154437564-CUY55fRs.png" alt="image-20220209154437564"></p><p>Step2. 启动类添加Feign启动注解</p><p><img src="/assets/image-20220209154452236-DK4NWiwk.png" alt="image-20220209154452236"></p><p>Step3. 编写Feign客户端</p><p><img src="/assets/image-20220209151658578-DHPH_CSn.png" alt="image-20220209151658578"></p><p>Step4. 测试使用</p><p><img src="/assets/image-20220209151739496-uI-D0JUO.png" alt="image-20220209151739496"></p><h2 id="_7-2-自定义配置" tabindex="-1"><a class="header-anchor" href="#_7-2-自定义配置"><span>7.2 自定义配置</span></a></h2><blockquote><p>概念</p></blockquote><p><img src="/assets/image-20220209164321092-C8QixLGb.png" alt="image-20220209164321092"></p><blockquote><p>使用配置文件配置Feign日志</p></blockquote><p><img src="/assets/image-20220209164434848-WzgVkJTF.png" alt="image-20220209164434848"></p><blockquote><p>使用注解配置Feign日志</p></blockquote><p><img src="/assets/image-20220209164849881-Mjz9vAzh.png" alt="image-20220209164849881"></p><h2 id="_7-3-feign使用优化" tabindex="-1"><a class="header-anchor" href="#_7-3-feign使用优化"><span>7.3 Feign使用优化</span></a></h2><blockquote><p>Feign底层客户端实现</p></blockquote><ul><li>URLConnection：默认实现，不支持连接池，性能较差</li><li>Apache HttpClient：支持连接池</li><li>OKHttp：支持连接池</li></ul><blockquote><p>优化策略</p></blockquote><ul><li>使用连接池代替默认URLConnection</li><li>日志级别，最好使用basic或none</li></ul><blockquote><p>Feign性能优化-连接池配置</p></blockquote><p><img src="/assets/image-20220209165620070-CdwYlsY0.png" alt="image-20220209165620070"></p><h2 id="_7-4-最佳实践" tabindex="-1"><a class="header-anchor" href="#_7-4-最佳实践"><span>7.4 最佳实践</span></a></h2><blockquote><p>方式一--继承（耦合度比较高）</p></blockquote><p><img src="/assets/image-20220209170014814-CqizYZyF.png" alt="image-20220209170014814"></p><blockquote><p>方式二--抽取（如果FeignAPI功能比较多，包比较大，orderservice只用到一两个方法，就造成了浪费）</p></blockquote><p><img src="/assets/image-20220209170120507-B2t79kN8.png" alt="image-20220209170120507"></p><p>方式2的实现难点</p><blockquote><p>当定义的FeignClient不在SpringBootApplication的扫描包范围时，这些FeignClient无法使用，解决方法如下：</p></blockquote><p><img src="/assets/image-20220209171005236-NI4p1Ogb.png" alt="image-20220209171005236"></p><h1 id="_8-统一网关gateway" tabindex="-1"><a class="header-anchor" href="#_8-统一网关gateway"><span>8.统一网关Gateway</span></a></h1><h2 id="_8-1-为什么需要网关" tabindex="-1"><a class="header-anchor" href="#_8-1-为什么需要网关"><span>8.1 为什么需要网关</span></a></h2><blockquote><p>网关功能</p></blockquote><ul><li>对用户请求做身份认证和权限校验</li><li>将用户请求路由到微服务，并实现负载均衡</li><li>对要不过户请求做限流</li></ul><blockquote><p>网关的技术实现</p></blockquote><ul><li>gateway</li><li>zuul</li></ul><p>==对比==：zuul是基于servlet实现，属于阻塞式变成。gateway是基于SPring5中提供的WebFlux，属于响应式变成，具备更好的性能。</p><h2 id="_8-2-gateway快速入门" tabindex="-1"><a class="header-anchor" href="#_8-2-gateway快速入门"><span>8.2 gateway快速入门</span></a></h2><blockquote><p>搭建步骤</p></blockquote><p><img src="/assets/12-XXQo5BRu.png" alt="12"></p><blockquote><p>请求流程</p></blockquote><p><img src="/assets/image-20220209174439226-D-5IyBO2.png" alt="image-20220209174439226"></p><blockquote><p>总结-&gt;路由可以配置的内容包括以下几点：</p></blockquote><ul><li>路由id：路由唯一标识</li><li>路由目标（uri）：路由的目标地址，http代表固定地址，lb代表根据服务名称做负载均衡</li><li>路由断言（predicates）：判断路由规则</li><li>路由过滤器（filters）：对请求或响应做处理</li></ul><h2 id="_8-3-断言工厂" tabindex="-1"><a class="header-anchor" href="#_8-3-断言工厂"><span>8.3 断言工厂</span></a></h2><blockquote><p>作用</p></blockquote><p>读取用户在配置文件中编写的断言规则，将他们解析出来，并且对请求做出判断</p><blockquote><p>Spring提供的11中基本的Predicate工厂</p></blockquote><p><img src="/assets/image-20220209175005801-CCKX-fNA.png" alt="image-20220209175005801"></p><blockquote><p>After断言工厂的使用</p></blockquote><p><img src="/assets/image-20220209175858695-BXdFlgLR.png" alt="image-20220209175858695"></p><p>==当前是2022年，不符合路由规则，此时访问会报404==</p><h2 id="_8-4-过滤器工厂" tabindex="-1"><a class="header-anchor" href="#_8-4-过滤器工厂"><span>8.4 过滤器工厂</span></a></h2><h3 id="_8-4-1-路由过滤器gatewayfilter" tabindex="-1"><a class="header-anchor" href="#_8-4-1-路由过滤器gatewayfilter"><span>8.4.1 路由过滤器GatewayFilter</span></a></h3><p>GatewayFilter是网关中提供的一种过滤器，可以对进入网关的请求和微服务返回的响应做处理：</p><p><img src="/assets/image-20220209180256860-g-6Qq3Bz.png" alt="image-20220209180256860"></p><h3 id="_8-4-2-路由过滤器工厂" tabindex="-1"><a class="header-anchor" href="#_8-4-2-路由过滤器工厂"><span>8.4.2 路由过滤器工厂</span></a></h3><blockquote><p>过滤器的作用</p></blockquote><ul><li>对路由的请求或响应做加工处理，比如添加请求头</li><li>配置在路由下的过滤器只对当前路由的请求生效（==如果想对所有路由都生效，可以使用defaultFilter==）</li></ul><p>一共30多种。使用时可以参考官网。</p><p><img src="/assets/image-20220209180441253-E6zxZ3_S.png" alt="image-20220209180441253"></p><blockquote><p>例子：给所有进入userservice的请求加一个请求头：Truth=Itcast is freeking awesome！</p></blockquote><p><img src="/assets/image-20220209180558252-Cw8oUFIb.png" alt="image-20220209180558252"></p><p><img src="/assets/image-20220209180819755-BzIh_u0f.png" alt="image-20220209180819755"></p><blockquote><p>优化：给所有请求都加上请求头：Truth=Itcast is freeking awesome！</p></blockquote><p><img src="/assets/image-20220209180923497-Bh0-AOHo.png" alt="image-20220209180923497"></p><h2 id="_8-5-全局过滤器globalfilter" tabindex="-1"><a class="header-anchor" href="#_8-5-全局过滤器globalfilter"><span>8.5 全局过滤器GlobalFilter</span></a></h2><blockquote><p>作用</p></blockquote><p>处理一切进入网关的请求和微服务响应，和GatewayFilter的作用一样。==区别==在于GatewayFilter通过配置定义，处理逻辑是固定的；但是GlobalFilter的逻辑需要自己写代码实现。</p><blockquote><p>实现方式</p></blockquote><p><strong>实现GlobalFilter接口。</strong></p><p><img src="/assets/image-20220210093916467-D7S38i7W.png" alt="image-20220210093916467"></p><blockquote><p>案例：编写一个拦截器，获取请求中的authorization参数。如果用户是admin，放行，否则就拦截。</p></blockquote><p><img src="/assets/8-5-1-16444579203281-Dra7_wls.png" alt="8-5-1"></p><h2 id="_8-6-过滤器执行顺序" tabindex="-1"><a class="header-anchor" href="#_8-6-过滤器执行顺序"><span>8.6 过滤器执行顺序</span></a></h2><ul><li>order值越小，执行顺序越靠前</li><li>order值相等时，安装defaultFilter&gt;路由过滤器&gt;GlobalFilter的顺序执行。</li></ul><h2 id="_8-7-跨域问题" tabindex="-1"><a class="header-anchor" href="#_8-7-跨域问题"><span>8.7 跨域问题</span></a></h2><blockquote><p>定义</p></blockquote><p>浏览器禁止请求的发起者与服务端发生跨域ajax请求，请求被浏览器拦截的问题。</p><blockquote><p>解决方案</p></blockquote><p>CORS</p><blockquote><p>实现</p></blockquote><p><img src="/assets/image-20220210103110838-CU3V5JTw.png" alt="image-20220210103110838"></p><h1 id="_9-docker" tabindex="-1"><a class="header-anchor" href="#_9-docker"><span>9.Docker</span></a></h1><h2 id="_9-1-初识docker" tabindex="-1"><a class="header-anchor" href="#_9-1-初识docker"><span>9.1 初识Docker</span></a></h2><h3 id="_9-1-1-概念" tabindex="-1"><a class="header-anchor" href="#_9-1-1-概念"><span>9.1.1 概念</span></a></h3><blockquote><p>Docker如何解决大型项目依赖关系复杂、不同组件依赖兼容性的问题？</p></blockquote><ul><li>Docker允许开发中将应用、依赖、函数库、配置一起<strong>打包</strong>，形成可移植镜像。</li><li>Docker应用运行在容器中，使用沙箱机制，相互<strong>隔离</strong></li></ul><blockquote><p>Docker如何解决开发、测试、生产环境有差异的问题？</p></blockquote><p>Docker镜像中包含完整的运行环境，包括系统函数库，仅依赖系统的Linux内核，因此可以在任意Linux操作系统上运行。</p><h3 id="_9-1-2-docker与虚拟机的区别" tabindex="-1"><a class="header-anchor" href="#_9-1-2-docker与虚拟机的区别"><span>9.1.2 Docker与虚拟机的区别</span></a></h3><ul><li>Docker是一个系统进程；虚拟机是在操作系统中的操作系统</li><li>Docker体积小，启动速度快，性能好；虚拟机体积大，启动速度慢，性能较差。</li></ul><p><img src="/assets/image-20220210104913398-_WuQTwQN.png" alt="image-20220210104913398"></p><h3 id="_9-1-3-docker架构" tabindex="-1"><a class="header-anchor" href="#_9-1-3-docker架构"><span>9.1.3 Docker架构</span></a></h3><p><img src="/assets/image-20220210131410083-B36M7d9J.png" alt="image-20220210131410083"></p><h2 id="_9-2-数据卷" tabindex="-1"><a class="header-anchor" href="#_9-2-数据卷"><span>9.2 数据卷</span></a></h2><p><img src="/assets/image-20220210140826301-Ce1ad3WB.png" alt="image-20220210140826301"></p><p><img src="/assets/image-20220210141144238-BSrv1cXM.png" alt="image-20220210141144238"></p><h2 id="_9-3-目录挂载" tabindex="-1"><a class="header-anchor" href="#_9-3-目录挂载"><span>9.3 目录挂载</span></a></h2><p>命令和数据卷挂载一致。</p><blockquote><p>目录挂载和数据卷挂载的区别</p></blockquote><p><img src="/assets/image-20220210143457921-6OI8ALXl.png" alt="image-20220210143457921"></p><h2 id="_9-4-镜像" tabindex="-1"><a class="header-anchor" href="#_9-4-镜像"><span>9.4 镜像</span></a></h2><blockquote><p>定义</p></blockquote><p>镜像是将<strong>应用程序</strong>及其需要的<strong>系统函数库</strong>、<strong>环境</strong>、<strong>配置</strong>、依赖打包而成。</p><blockquote><p>镜像结构</p></blockquote><p>==镜像是分层结构，每一层称为一个Layer==</p><p><img src="/assets/image-20220210143938080-CVvJKYdz.png" alt="image-20220210143938080"></p><h2 id="_9-5-dockercompose" tabindex="-1"><a class="header-anchor" href="#_9-5-dockercompose"><span>9.5 DockerCompose</span></a></h2><blockquote><p>概念</p></blockquote><ul><li><p>DockerCompose基于Compose文件实现快速部署分布式应用。</p></li><li><p>Compose文件是一个文本文件，通过指令定义急群众的每个容器如何运行。</p><p><img src="/assets/image-20220210145521763-H1DpkEeU.png" alt="image-20220210145521763"></p></li></ul><h1 id="_10-服务异步通讯rabbitmq" tabindex="-1"><a class="header-anchor" href="#_10-服务异步通讯rabbitmq"><span>10. 服务异步通讯RabbitMQ</span></a></h1><h2 id="_10-1-初始mq" tabindex="-1"><a class="header-anchor" href="#_10-1-初始mq"><span>10.1 初始MQ</span></a></h2><h3 id="_10-1-1-同步通讯" tabindex="-1"><a class="header-anchor" href="#_10-1-1-同步通讯"><span>10.1.1 同步通讯</span></a></h3><p>==微服务间基于Feign的调用就属于同步方式。==</p><blockquote><p>优点</p></blockquote><p>时效性强，能够立即得到结果</p><blockquote><p>同步调用的问题</p></blockquote><ul><li><strong>耦合度高</strong>：每次加入新需求，都要改原来的代码</li><li><strong>性能下降</strong>：调用者需要等待提供者响应。如果调用链过程则响应时间等于每次调用的时间之和</li><li><strong>资源浪费</strong>：调用链中的每个服务在等待响应过程中，不能释放请求占用的资源，高并发场景下极度浪费系统资源</li><li><strong>级联失败</strong>：如果提供者出现问题，所有调用方法都会跟着出问题，如同多米诺骨牌，迅速导致整个微服务群故障</li></ul><h3 id="_10-1-2-异步通讯" tabindex="-1"><a class="header-anchor" href="#_10-1-2-异步通讯"><span>10.1.2 异步通讯</span></a></h3><p>==异步调用常见实现就是事件驱动模式。==</p><p><img src="/assets/image-20220210164846034-pLMYCFIm.png" alt="image-20220210164846034"></p><blockquote><p>优势</p></blockquote><ul><li>服务解耦</li><li>性能提升，吞吐量提高</li><li>服务没有强依赖，不担心级联失败问题</li><li>流量削峰</li></ul><blockquote><p>缺点</p></blockquote><ul><li>依赖于Broker的可靠性、安全性、吞吐能力</li><li>架构复杂了，业务没有明显的流程线，不好追踪管理</li></ul><h3 id="_10-1-3-mq常见框架" tabindex="-1"><a class="header-anchor" href="#_10-1-3-mq常见框架"><span>10.1.3 MQ常见框架</span></a></h3><blockquote><p>MQ定义</p></blockquote><p>MQ（MessageQueue），存放消息的队列，即时间驱动架构中的Broker。</p><blockquote><p>MQ常见框架对比</p></blockquote><p><img src="/assets/image-20220210171202166-CfqUy4cu.png" alt="image-20220210171202166"></p><h2 id="_10-2-rabbitmq快速入门" tabindex="-1"><a class="header-anchor" href="#_10-2-rabbitmq快速入门"><span>10.2 RabbitMQ快速入门</span></a></h2><h3 id="_10-2-1-概述" tabindex="-1"><a class="header-anchor" href="#_10-2-1-概述"><span>10.2.1 概述</span></a></h3><p>==RabbitMQ最擅长的是消息的可靠性、稳定性，以及系统的高可用==</p><p>官网：<a href="https://www.rabbitmq.com/" target="_blank" rel="noopener noreferrer">Messaging that just works — RabbitMQ</a></p><h4 id="_10-2-1-1-单机部署mq" tabindex="-1"><a class="header-anchor" href="#_10-2-1-1-单机部署mq"><span>10.2.1.1 单机部署MQ</span></a></h4><p>Step1. 下载RabbitMQ镜像</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">docker</span> pull rabbitmq:3-management</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Step2. 运行MQ容器</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">docker</span> run <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">-e</span> <span class="token assign-left variable">RABBITMQ_DEFAULT_USER</span><span class="token operator">=</span>itcast <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">-e</span> <span class="token assign-left variable">RABBITMQ_DEFAULT_PASS</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">--name</span> mq <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">--hostname</span> mq1 <span class="token punctuation">\</span> <span class="token comment"># 配置主机名，单机的话可以不设置，但是集群部署必须设置</span></span>
<span class="line">  <span class="token parameter variable">-p</span> <span class="token number">15672</span>:15672 <span class="token punctuation">\</span>   <span class="token comment"># mq管理平台的端口，提供一个UI界面</span></span>
<span class="line">  <span class="token parameter variable">-p</span> <span class="token number">5672</span>:5672 <span class="token punctuation">\</span>   <span class="token comment"># 消息接收与发送端口</span></span>
<span class="line">  <span class="token parameter variable">-d</span> <span class="token punctuation">\</span></span>
<span class="line">  rabbitmq:3-management</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-2-2-rabbitmq概念和结构" tabindex="-1"><a class="header-anchor" href="#_10-2-2-rabbitmq概念和结构"><span>10.2.2 RabbitMQ概念和结构</span></a></h3><blockquote><p>概念</p></blockquote><ul><li>channel：操作MQ的工具</li><li>exchange：路由消息到队列中</li><li>queue：缓存消息</li><li>virtual host：虚拟主机，是对queue、exchange等资源的逻辑分组</li></ul><blockquote><p>结构</p></blockquote><p><img src="/assets/image-20220210173943912-BgnSIlg-.png" alt="image-20220210173943912"></p><h2 id="_10-3-常见消息模型" tabindex="-1"><a class="header-anchor" href="#_10-3-常见消息模型"><span>10.3 常见消息模型</span></a></h2><p><img src="/assets/image-20220210174208165-ly2FX9LE.png" alt="image-20220210174208165"></p><blockquote><p>Hello World 实践</p></blockquote><p><img src="/assets/image-20220210175441671-ATXVPIcQ.png" alt="image-20220210175441671"></p><h2 id="_10-4-springamqp" tabindex="-1"><a class="header-anchor" href="#_10-4-springamqp"><span>10.4 SpringAMQP</span></a></h2><h3 id="_10-4-1-概念" tabindex="-1"><a class="header-anchor" href="#_10-4-1-概念"><span>10.4.1 概念</span></a></h3><blockquote><p>AMQP</p></blockquote><p><strong>A</strong>dvanced <strong>M</strong>essage <strong>Q</strong>ueuing <strong>P</strong>rotocol，用于在应用程序之间传递业务消息的开放标准。该协议与平台无关，更符合微服务中独立性要求。</p><blockquote><p>Spring AMQP</p></blockquote><p>Spring AMQP是基于AMQP协议定义的一套API规范，提供了模板来发送和接收消息。包含两部分，其中spring-amqp是基础抽象，spring-rabbit是底层的默认实现。</p><p>==特征==</p><ul><li>侦听器容器，用于异步处理入栈消息</li><li>支持用于发送和接收消息的RabbitTemplate</li><li>支持RabbitAdmin自动声明队列、交换、绑定</li></ul><h3 id="_10-4-2-案例" tabindex="-1"><a class="header-anchor" href="#_10-4-2-案例"><span>10.4.2 案例</span></a></h3><blockquote><p>利用SpringAMQP实现HelloWorld中的基础消息队列功能</p></blockquote><p>流程如下：</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav" aria-label="page navigation"><!----><a class="route-link auto-link next" href="/static/tang/mservice/1.html" aria-label="Nacos的使用"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>Nacos的使用</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DRxAhH5h.js" defer></script>
  </body>
</html>
