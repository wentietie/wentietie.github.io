<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <title>Vue3快速入门 | wenatie</title><meta name="description" content="我的个人博客">
    <link rel="preload" href="/assets/style-qprCm-5e.css" as="style"><link rel="stylesheet" href="/assets/style-qprCm-5e.css">
    <link rel="modulepreload" href="/assets/app-CQavEA7Q.js"><link rel="modulepreload" href="/assets/3.html-BQcpS3RU.js">
    <link rel="prefetch" href="/assets/index.html-D9TU5PK4.js" as="script"><link rel="prefetch" href="/assets/jsonutil.html-LZl0naJ4.js" as="script"><link rel="prefetch" href="/assets/jsonView.html-DeAYDW8C.js" as="script"><link rel="prefetch" href="/assets/part1.html-DuR5GfT_.js" as="script"><link rel="prefetch" href="/assets/part2.html-Btel-p8U.js" as="script"><link rel="prefetch" href="/assets/part3.html-uchQkMsf.js" as="script"><link rel="prefetch" href="/assets/part4.html-BoiaTHuW.js" as="script"><link rel="prefetch" href="/assets/part1.html-CYaBoSUq.js" as="script"><link rel="prefetch" href="/assets/part2.html-DfGCwRaP.js" as="script"><link rel="prefetch" href="/assets/part1.html-DAhCmPbl.js" as="script"><link rel="prefetch" href="/assets/part2.html-Cajr2H2D.js" as="script"><link rel="prefetch" href="/assets/part1.html-C-_HPzqk.js" as="script"><link rel="prefetch" href="/assets/part2.html-pyZEfNnc.js" as="script"><link rel="prefetch" href="/assets/spring6.html-DxTeVIju.js" as="script"><link rel="prefetch" href="/assets/fzzj.html-D3YMxYan.js" as="script"><link rel="prefetch" href="/assets/smzqhs.html-CIeemtFe.js" as="script"><link rel="prefetch" href="/assets/vue-slsx.html-D7-7dotJ.js" as="script"><link rel="prefetch" href="/assets/vueyuanli.html-CtBuPc7I.js" as="script"><link rel="prefetch" href="/assets/ysbd.html-DAfYkNhA.js" as="script"><link rel="prefetch" href="/assets/git.html-BtBTYVND.js" as="script"><link rel="prefetch" href="/assets/wp-1.html-DGqwZ3Ug.js" as="script"><link rel="prefetch" href="/assets/part1.html-VECCkrWb.js" as="script"><link rel="prefetch" href="/assets/part1.html-tZ2ol_VE.js" as="script"><link rel="prefetch" href="/assets/part2.html-BnexerQB.js" as="script"><link rel="prefetch" href="/assets/part3.html-DMVGXVsn.js" as="script"><link rel="prefetch" href="/assets/part4.html-Dupvo3oF.js" as="script"><link rel="prefetch" href="/assets/index.html-Q7v54NOG.js" as="script"><link rel="prefetch" href="/assets/es6-1.html-BSRfMlmj.js" as="script"><link rel="prefetch" href="/assets/es6-10.html-CDnRrRY5.js" as="script"><link rel="prefetch" href="/assets/es6-11.html-CgprtUKz.js" as="script"><link rel="prefetch" href="/assets/es6-12.html-BSCUL77S.js" as="script"><link rel="prefetch" href="/assets/es6-13.html-0-xDO0qt.js" as="script"><link rel="prefetch" href="/assets/es6-14.html-CJ2Z1PHP.js" as="script"><link rel="prefetch" href="/assets/es6-15.html-DT_RvXDV.js" as="script"><link rel="prefetch" href="/assets/es6-16.html-POsTw3oa.js" as="script"><link rel="prefetch" href="/assets/es6-17.html-B-e9nh5_.js" as="script"><link rel="prefetch" href="/assets/es6-18.html-DXwSI5n3.js" as="script"><link rel="prefetch" href="/assets/es6-2.html-DuKDvLxP.js" as="script"><link rel="prefetch" href="/assets/es6-3.html-DH17eYgY.js" as="script"><link rel="prefetch" href="/assets/es6-4.html-B24VfRfC.js" as="script"><link rel="prefetch" href="/assets/es6-5.html-CJQa4RTW.js" as="script"><link rel="prefetch" href="/assets/es6-6.html-C6IsZQ-R.js" as="script"><link rel="prefetch" href="/assets/es6-7.html-D5L_rKY-.js" as="script"><link rel="prefetch" href="/assets/es6-8.html-2hp2Z5S8.js" as="script"><link rel="prefetch" href="/assets/es6-9.html-D0wp4hl6.js" as="script"><link rel="prefetch" href="/assets/p1.html-DAGMjZrC.js" as="script"><link rel="prefetch" href="/assets/ts-basic.html-DtCamA7t.js" as="script"><link rel="prefetch" href="/assets/part1.html-BEuhbRUY.js" as="script"><link rel="prefetch" href="/assets/part2.html-DgENipGT.js" as="script"><link rel="prefetch" href="/assets/kuayu.html-DS9Z_fck.js" as="script"><link rel="prefetch" href="/assets/layout.html-DOjL4-VP.js" as="script"><link rel="prefetch" href="/assets/refresh.html-DHNgRh43.js" as="script"><link rel="prefetch" href="/assets/route.html-BTucMrWE.js" as="script"><link rel="prefetch" href="/assets/storage.html-DseLBXIB.js" as="script"><link rel="prefetch" href="/assets/xmlhttprequest.html-C3rqbaqh.js" as="script"><link rel="prefetch" href="/assets/autoheight.html-B22bW-QG.js" as="script"><link rel="prefetch" href="/assets/css-selector.html-DiD0Jn5Z.js" as="script"><link rel="prefetch" href="/assets/CSSchangyong.html-HKIk6sFf.js" as="script"><link rel="prefetch" href="/assets/flex.html-DVtIkvzR.js" as="script"><link rel="prefetch" href="/assets/grid.html-DbO8w-Sc.js" as="script"><link rel="prefetch" href="/assets/longlist.html-DUlXnfnH.js" as="script"><link rel="prefetch" href="/assets/beforeunload.html-C3lhmZqp.js" as="script"><link rel="prefetch" href="/assets/buding.html-CJa1xvpx.js" as="script"><link rel="prefetch" href="/assets/hwdj.html-CLU3HKgV.js" as="script"><link rel="prefetch" href="/assets/modules.html-B2gBAUZN.js" as="script"><link rel="prefetch" href="/assets/pro-compile.html-BPXz-Kir.js" as="script"><link rel="prefetch" href="/assets/usually-functions.html-DdC_yayp.js" as="script"><link rel="prefetch" href="/assets/vue-webpack-optimize.html-B91GmpMm.js" as="script"><link rel="prefetch" href="/assets/webpack-optimize.html-D7MDUft5.js" as="script"><link rel="prefetch" href="/assets/linuxinstallnode.html-DTOJk79P.js" as="script"><link rel="prefetch" href="/assets/node.html-BUzF0zqb.js" as="script"><link rel="prefetch" href="/assets/Docker.html-3_iuw04G.js" as="script"><link rel="prefetch" href="/assets/docker搭建私有镜像仓库.html-C_sXDX-0.js" as="script"><link rel="prefetch" href="/assets/01_Elasticsearch概述.html-D3dTThyb.js" as="script"><link rel="prefetch" href="/assets/02_Elasticsearch相关工具的安装与使用.html-CNs0oPvW.js" as="script"><link rel="prefetch" href="/assets/03_Elasticsearch核心概念.html-B8Jsmbny.js" as="script"><link rel="prefetch" href="/assets/04_Elasticsearch基本操作.html-BFZHgqlz.js" as="script"><link rel="prefetch" href="/assets/05_Elasticsearch DSL高级查询.html-9cXxQ6jr.js" as="script"><link rel="prefetch" href="/assets/06_Elasticsearch进阶查询.html-Dqwzde1E.js" as="script"><link rel="prefetch" href="/assets/07_Java API 操作 Elasticsearch.html-ps0yFC1m.js" as="script"><link rel="prefetch" href="/assets/08_Spring Data Elasticsearch.html-Dq6HFOqZ.js" as="script"><link rel="prefetch" href="/assets/09_Linux 安装 Elasticsearch.html-nOLXHv5R.js" as="script"><link rel="prefetch" href="/assets/10_CAP定理.html-DiYr_Lng.js" as="script"><link rel="prefetch" href="/assets/11_Elasticsearch集群.html-DbTW8Wvf.js" as="script"><link rel="prefetch" href="/assets/12_Elasticsearch分片控制与原理.html-C0Gmpg72.js" as="script"><link rel="prefetch" href="/assets/13_Elasticsearch的优化建议.html-fBGdxXKT.js" as="script"><link rel="prefetch" href="/assets/gitlab-commands.html-Cl4PKdwc.js" as="script"><link rel="prefetch" href="/assets/gitlab-error.html-S_wwpjpH.js" as="script"><link rel="prefetch" href="/assets/jetlinks项目初体验.html-DusYv5BZ.js" as="script"><link rel="prefetch" href="/assets/00_前言.html-BnRR9tk6.js" as="script"><link rel="prefetch" href="/assets/01_Java语言概述.html-CqwmXzmp.js" as="script"><link rel="prefetch" href="/assets/02_Java基本语法.html-CykegFcq.js" as="script"><link rel="prefetch" href="/assets/03_Java数组.html-D1IqVnVE.js" as="script"><link rel="prefetch" href="/assets/04_面向对象编程（上）.html-Dnuu1b3H.js" as="script"><link rel="prefetch" href="/assets/05_面向对象编程（中）.html-OnmoBP3L.js" as="script"><link rel="prefetch" href="/assets/06_面向对象编程（下）.html-CQvF0gJ0.js" as="script"><link rel="prefetch" href="/assets/07_异常处理.html-DHb2BV4-.js" as="script"><link rel="prefetch" href="/assets/08_多线程.html-BALv19kB.js" as="script"><link rel="prefetch" href="/assets/09_Java常用类.html-RcVv5TNx.js" as="script"><link rel="prefetch" href="/assets/10_枚举_注解.html-DPbASkNb.js" as="script"><link rel="prefetch" href="/assets/11_Java集合.html-C3CWkJ2Y.js" as="script"><link rel="prefetch" href="/assets/12_Java泛型.html-iPR3FiQM.js" as="script"><link rel="prefetch" href="/assets/13_IO流.html-Dq2JAHmY.js" as="script"><link rel="prefetch" href="/assets/14_网络编程.html-CYrngJuT.js" as="script"><link rel="prefetch" href="/assets/15_Java反射机制.html-C1eQWNgZ.js" as="script"><link rel="prefetch" href="/assets/16_Java8新特性.html-2DGhK0AY.js" as="script"><link rel="prefetch" href="/assets/17_Java9_10_11新特性.html-CfbYEHyB.js" as="script"><link rel="prefetch" href="/assets/18_JUC并发编程.html-oatHzLy0.js" as="script"><link rel="prefetch" href="/assets/19_设计模式.html-DXLXwTcW.js" as="script"><link rel="prefetch" href="/assets/20_排序算法.html-DLEULPah.js" as="script"><link rel="prefetch" href="/assets/99_面试题.html-CPHzGkSM.js" as="script"><link rel="prefetch" href="/assets/1.html-f1DBn7MR.js" as="script"><link rel="prefetch" href="/assets/2.html-va9UcIRc.js" as="script"><link rel="prefetch" href="/assets/01_MySQL概述.html-C8Q_Psq1.js" as="script"><link rel="prefetch" href="/assets/02_关系型数据库与非关系型数据库.html-gjmNMpOb.js" as="script"><link rel="prefetch" href="/assets/03_关系型数据库设计原则.html-DDXsl_C7.js" as="script"><link rel="prefetch" href="/assets/04_MySQL的登录.html-BY3t7uMo.js" as="script"><link rel="prefetch" href="/assets/05_MySQL一些常用命令.html-Cgc8upLJ.js" as="script"><link rel="prefetch" href="/assets/06_MySQL图形化管理工具.html-aLdZj_pt.js" as="script"><link rel="prefetch" href="/assets/07_运算符.html-COZBKyFO.js" as="script"><link rel="prefetch" href="/assets/08_MySQL函数.html-BcZzqzDX.js" as="script"><link rel="prefetch" href="/assets/09_子查询.html-CWGoKIWz.js" as="script"><link rel="prefetch" href="/assets/10_管理数据库和数据库表.html-pqm0St5R.js" as="script"><link rel="prefetch" href="/assets/11_数据的增删改.html-GrywX9YI.js" as="script"><link rel="prefetch" href="/assets/12_MySQL中的数据类型.html-BzKtiP7s.js" as="script"><link rel="prefetch" href="/assets/13_约束.html-BaBKFRnT.js" as="script"><link rel="prefetch" href="/assets/14_视图.html-DsYzF2sO.js" as="script"><link rel="prefetch" href="/assets/15_存储过程与存储函数.html-jrfS-HMC.js" as="script"><link rel="prefetch" href="/assets/16_变量、流程控制与游标.html-TVRDO7BE.js" as="script"><link rel="prefetch" href="/assets/17_触发器.html-CLwsoZvN.js" as="script"><link rel="prefetch" href="/assets/18_MySQL8.0新特性.html-D9tKUcdl.js" as="script"><link rel="prefetch" href="/assets/19_表及其数据.html-CcfzqEyu.js" as="script"><link rel="prefetch" href="/assets/99_MySQL常见问题的解决.html-Cmfiks6g.js" as="script"><link rel="prefetch" href="/assets/1.html-DRdURDYh.js" as="script"><link rel="prefetch" href="/assets/2.html-CUsmJZJq.js" as="script"><link rel="prefetch" href="/assets/3.html-C58tzy3R.js" as="script"><link rel="prefetch" href="/assets/1.html-D8pRQcSZ.js" as="script"><link rel="prefetch" href="/assets/2.html-BqvXgRFl.js" as="script"><link rel="prefetch" href="/assets/CentOS7root账号免密登录.html-DctTv2eG.js" as="script"><link rel="prefetch" href="/assets/CentOS7安装GitLab.html-B1bXSpSz.js" as="script"><link rel="prefetch" href="/assets/CentOS7安装jdk1.8.html-Cp2sUu7S.js" as="script"><link rel="prefetch" href="/assets/CentOs7安装jenkins.html-kkIGKWlN.js" as="script"><link rel="prefetch" href="/assets/CentOS7安装mysql5.7(使用yum源安装).html-CtlyH-FO.js" as="script"><link rel="prefetch" href="/assets/CentOS7安装redis.html-Bs_ewyNC.js" as="script"><link rel="prefetch" href="/assets/CentOS7平滑升级nginx.html-SQDSaxeH.js" as="script"><link rel="prefetch" href="/assets/借助阿里云服务器使用frp做内网穿透.html-QjIQiEJ0.js" as="script"><link rel="prefetch" href="/assets/1.html-CNnznj-q.js" as="script"><link rel="prefetch" href="/assets/1.html-CKoYdiOz.js" as="script"><link rel="prefetch" href="/assets/2.html-BDVJ1zy3.js" as="script"><link rel="prefetch" href="/assets/记一次小程序接口的发布.html-C76Q13-u.js" as="script"><link rel="prefetch" href="/assets/part1.html-BFnwRZFJ.js" as="script"><link rel="prefetch" href="/assets/part1.html-C9faX_IY.js" as="script"><link rel="prefetch" href="/assets/part1.html-DNBoUve7.js" as="script"><link rel="prefetch" href="/assets/part10.html-BJwbvDDq.js" as="script"><link rel="prefetch" href="/assets/part11.html-Bn3DeWYA.js" as="script"><link rel="prefetch" href="/assets/part12.html-B1QUg5xj.js" as="script"><link rel="prefetch" href="/assets/part2.html-CkDiGo_Y.js" as="script"><link rel="prefetch" href="/assets/part3.html-BclsmWNQ.js" as="script"><link rel="prefetch" href="/assets/part9.html-DeTjE1Qr.js" as="script"><link rel="prefetch" href="/assets/auto.html-BERgrtnz.js" as="script"><link rel="prefetch" href="/assets/blog.html-DYbMea1Z.js" as="script"><link rel="prefetch" href="/assets/command.html-uSaDY-MC.js" as="script"><link rel="prefetch" href="/assets/ftp.html-CmsKcTKV.js" as="script"><link rel="prefetch" href="/assets/1.html-IYM5_Tc0.js" as="script"><link rel="prefetch" href="/assets/2.html-3JVQcnA6.js" as="script"><link rel="prefetch" href="/assets/3.html-BqRVsE7k.js" as="script"><link rel="prefetch" href="/assets/4.html-RJRUgzQC.js" as="script"><link rel="prefetch" href="/assets/6443_connect-refused.html-Bl6Hbf_D.js" as="script"><link rel="prefetch" href="/assets/404.html-Dd7dlws0.js" as="script"><link rel="prefetch" href="/assets/JsonUtil-BkU8Y0qk.js" as="script"><link rel="prefetch" href="/assets/JsonView-CW8a3djt.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="vp-site-name" aria-hidden="true">wenatie</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端工具"><span class="title">前端工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端工具"><span class="title">前端工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/utils/jsonutil.html" aria-label="JSON工具"><!---->JSON工具<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/utils/jsonView.html" aria-label="JSON View"><!---->JSON View<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="AI"><span class="title">AI</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="AI"><span class="title">AI</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/ai/llm/llm-study/part1.html" aria-label="大模型入门"><!---->大模型入门<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/ai/llm/chatglm/part1.html" aria-label="chatGLM大模型实践"><!---->chatGLM大模型实践<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/gitlab/gitlab-error.html" aria-label="gitlab"><!---->gitlab<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/java2/00_%E5%89%8D%E8%A8%80.html" aria-label="java"><!---->java<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/mysql/01_MySQL%E6%A6%82%E8%BF%B0.html" aria-label="mysql"><!---->mysql<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/docker/Docker.html" aria-label="docker"><!---->docker<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/k8s/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/command.html" aria-label="k8s"><!---->k8s<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Elasticsearch/01_Elasticsearch%E6%A6%82%E8%BF%B0.html" aria-label="Elasticsearch"><!---->Elasticsearch<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Prometheus/1.html" aria-label="Prometheus"><!---->Prometheus<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Python/1.html" aria-label="Python"><!---->Python<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Vue/1.html" aria-label="Vue"><!---->Vue<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/server/CentOS7root%E8%B4%A6%E5%8F%B7%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95.html" aria-label="服务器环境安装"><!---->服务器环境安装<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/mservice/2.html" aria-label="微服务"><!---->微服务<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/%E9%A1%B9%E7%9B%AE%E4%B8%8A%E7%BA%BF/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%8F%91%E5%B8%83.html" aria-label="项目上线"><!---->项目上线<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/IoTPlatform/jetlinks%E9%A1%B9%E7%9B%AE%E5%88%9D%E4%BD%93%E9%AA%8C.html" aria-label="物联网项目"><!---->物联网项目<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/basic/part1.html" aria-label="JS基础"><!---->JS基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/es6/es6-1.html" aria-label="ES6入门"><!---->ES6入门<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/youdontknowjs/part1.html" aria-label="你不知道的Javascript"><!---->你不知道的Javascript<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/design/" aria-label="设计模式"><!---->设计模式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/typescript/ts-basic.html" aria-label="typescript"><!---->typescript<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/vue/vueyuanli.html" aria-label="vue2"><!---->vue2<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/vue3/reactive/part1.html" aria-label="vue3"><!---->vue3<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/spring5/part1.html" aria-label="spring5"><!---->spring5<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/end/c/data-contruction/part1.html" aria-label="数据结构（严蔚敏）"><!---->数据结构（严蔚敏）<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/JS/hwdj.html" aria-label="JS相关"><!---->JS相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/CSS/css-selector.html" aria-label="CSS相关"><!---->CSS相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/browser/xmlhttprequest.html" aria-label="浏览器相关"><!---->浏览器相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/node/node.html" aria-label="node相关"><!---->node相关<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端工具"><span class="title">前端工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端工具"><span class="title">前端工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/utils/jsonutil.html" aria-label="JSON工具"><!---->JSON工具<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/utils/jsonView.html" aria-label="JSON View"><!---->JSON View<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="AI"><span class="title">AI</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="AI"><span class="title">AI</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/ai/llm/llm-study/part1.html" aria-label="大模型入门"><!---->大模型入门<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/ai/llm/chatglm/part1.html" aria-label="chatGLM大模型实践"><!---->chatGLM大模型实践<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/gitlab/gitlab-error.html" aria-label="gitlab"><!---->gitlab<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/java2/00_%E5%89%8D%E8%A8%80.html" aria-label="java"><!---->java<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/mysql/01_MySQL%E6%A6%82%E8%BF%B0.html" aria-label="mysql"><!---->mysql<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/docker/Docker.html" aria-label="docker"><!---->docker<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/k8s/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/command.html" aria-label="k8s"><!---->k8s<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Elasticsearch/01_Elasticsearch%E6%A6%82%E8%BF%B0.html" aria-label="Elasticsearch"><!---->Elasticsearch<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Prometheus/1.html" aria-label="Prometheus"><!---->Prometheus<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Python/1.html" aria-label="Python"><!---->Python<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/Vue/1.html" aria-label="Vue"><!---->Vue<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/server/CentOS7root%E8%B4%A6%E5%8F%B7%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95.html" aria-label="服务器环境安装"><!---->服务器环境安装<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/mservice/2.html" aria-label="微服务"><!---->微服务<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/%E9%A1%B9%E7%9B%AE%E4%B8%8A%E7%BA%BF/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%8F%91%E5%B8%83.html" aria-label="项目上线"><!---->项目上线<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/tang/IoTPlatform/jetlinks%E9%A1%B9%E7%9B%AE%E5%88%9D%E4%BD%93%E9%AA%8C.html" aria-label="物联网项目"><!---->物联网项目<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/basic/part1.html" aria-label="JS基础"><!---->JS基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/es6/es6-1.html" aria-label="ES6入门"><!---->ES6入门<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/youdontknowjs/part1.html" aria-label="你不知道的Javascript"><!---->你不知道的Javascript<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/design/" aria-label="设计模式"><!---->设计模式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/JavaScript/typescript/ts-basic.html" aria-label="typescript"><!---->typescript<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/vue/vueyuanli.html" aria-label="vue2"><!---->vue2<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/vue3/reactive/part1.html" aria-label="vue3"><!---->vue3<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/formwork/spring5/part1.html" aria-label="spring5"><!---->spring5<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/end/c/data-contruction/part1.html" aria-label="数据结构（严蔚敏）"><!---->数据结构（严蔚敏）<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/JS/hwdj.html" aria-label="JS相关"><!---->JS相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/CSS/css-selector.html" aria-label="CSS相关"><!---->CSS相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/browser/xmlhttprequest.html" aria-label="浏览器相关"><!---->浏览器相关<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/static/notes/node/node.html" aria-label="node相关"><!---->node相关<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">Vue <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/Vue/1.html" aria-label="Vue基础知识"><!---->Vue基础知识<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/static/tang/Vue/2.html" aria-label="Vue组件编程"><!---->Vue组件编程<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/static/tang/Vue/3.html" aria-label="Vue3快速入门"><!---->Vue3快速入门<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="vue3快速入门" tabindex="-1"><a class="header-anchor" href="#vue3快速入门"><span>Vue3快速入门</span></a></h1><h1 id="_1-创建vue3-0工程" tabindex="-1"><a class="header-anchor" href="#_1-创建vue3-0工程"><span>1.创建Vue3.0工程</span></a></h1><h2 id="_1-1-使用vue-cli创建" tabindex="-1"><a class="header-anchor" href="#_1-1-使用vue-cli创建"><span>1.1 使用vue-cli创建</span></a></h2><p>==创建Vue3工程，需要保证@vue/cli的版本在4.5.0以上==</p><p>==官方文档：==https://cli.vuejs.org/zh/guide/creating-a-project.html</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 查看@vue/cli版本</span></span>
<span class="line">vue <span class="token parameter variable">-V</span></span>
<span class="line"><span class="token comment"># 安装或升级@vue/cli</span></span>
<span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> @vue/cli</span>
<span class="line"><span class="token comment"># 创建项目</span></span>
<span class="line">vue create <span class="token operator">&lt;</span>project_name<span class="token operator">&gt;</span><span class="token punctuation">(</span>项目名<span class="token punctuation">)</span></span>
<span class="line"><span class="token comment"># 创建过程中，选择vue3</span></span>
<span class="line"><span class="token comment"># 启动项目</span></span>
<span class="line"><span class="token builtin class-name">cd</span> <span class="token operator">&lt;</span>project_name<span class="token operator">&gt;</span></span>
<span class="line"><span class="token function">npm</span> run serve</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-2使用vite创建" tabindex="-1"><a class="header-anchor" href="#_1-2使用vite创建"><span>1.2使用vite创建</span></a></h2><blockquote><p>vite简介</p></blockquote><p>==vite官网：==https://vitejs.cn/</p><blockquote><p>概念</p></blockquote><p>新一代前端构建工具</p><blockquote><p>优势</p></blockquote><ul><li>开发环境中，无需打包，可快速冷启动</li><li>轻量快速的热重载（HMR）</li><li>真正的按需编译，不再等待整个应用编译完成</li></ul><blockquote><p>传统构建与vite构建对比图</p></blockquote><p><img src="/assets/image-20220826144824327-CsnViciQ.png" alt="image-20220826144824327"></p><blockquote><p>创建过程</p></blockquote><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 创建工程</span></span>
<span class="line"><span class="token function">npm</span> init vite-app <span class="token operator">&lt;</span>project_name<span class="token operator">&gt;</span></span>
<span class="line"><span class="token comment"># 首次使用vite-app，创建过程中需要安装，直接输入y回车即可</span></span>
<span class="line"><span class="token comment"># 安装依赖</span></span>
<span class="line"><span class="token builtin class-name">cd</span> <span class="token operator">&lt;</span>project_name<span class="token operator">&gt;</span></span>
<span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token comment"># 或者使用‘yarn’命令</span></span>
<span class="line"><span class="token comment"># 启动项目</span></span>
<span class="line"><span class="token function">npm</span> run dev <span class="token comment"># 或者使用‘yarn dev’命令</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-3-分析工程结构" tabindex="-1"><a class="header-anchor" href="#_1-3-分析工程结构"><span>1.3 分析工程结构</span></a></h2><p>==以下分析均使用vue-cli创建的项目==</p><blockquote><p>main.js文件</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token comment">// 引入的不再是Vue构造函数了，而是一个名为createApp的工厂函数</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span></span>
<span class="line"><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;./App.vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * 以上代码可以进行如下拆解</span>
<span class="line"> * ===================================</span>
<span class="line"> * 创建应用实例对象--app(类似于vue2中的vm实例，但app比vm更“轻量”)</span>
<span class="line"> * const app = createApp(App)</span>
<span class="line"> * 挂载</span>
<span class="line"> * app.mount(&#39;#app&#39;)</span>
<span class="line"> * ====================================</span>
<span class="line"> */</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>App.vue文件</p></blockquote><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token comment">&lt;!-- Vue3组件中的模板结构可以没有根标签 --&gt;</span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Vue logo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./assets/logo.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HelloWorld</span> <span class="token attr-name">msg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Welcome to Your Vue.js App<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">...</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_2-常用composition-api" tabindex="-1"><a class="header-anchor" href="#_2-常用composition-api"><span>2.常用Composition API</span></a></h1><h2 id="_2-1-拉开序幕的setup" tabindex="-1"><a class="header-anchor" href="#_2-1-拉开序幕的setup"><span>2.1 拉开序幕的setup</span></a></h2><blockquote><p>什么是setup</p></blockquote><ul><li>Vue3.0中一个新的==配置项==，值为一个函数。</li><li>是所有Composition API“表演的舞台”</li><li>组件中所用到的数据、方法等，均要配置在setup中</li></ul><blockquote><p>setup函数的两种返回值</p></blockquote><ul><li><p>返回一个对象：对象中的属性、方法，在模板中均可直接使用（重点关注！！！）</p><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>人员信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">&gt;</span></span>姓名：{{name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">&gt;</span></span>年龄：{{age}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sayHello<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>sayHello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;App&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// setup函数，返回一个对象（暂时不考虑响应式问题）</span></span>
<span class="line">  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 定义数据</span></span>
<span class="line">    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">&#39;张三&#39;</span></span>
<span class="line">    <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">18</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 定义方法</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 方法中使用变量时，前边不用再加“this.”</span></span>
<span class="line">      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我叫</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, 今年</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">岁，你好啊~</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 将数据和方法包装成一个对象返回  </span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">      name<span class="token punctuation">,</span></span>
<span class="line">      age<span class="token punctuation">,</span></span>
<span class="line">      sayHello</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>返回一个渲染函数：可以自定义渲染内容（了解）</p><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="line">...</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span>h<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;App&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// setup函数，返回一个渲染函数</span></span>
<span class="line">  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 和Vue2中vm的render配置项一致</span></span>
<span class="line">    <span class="token comment">// h(param1, param2)参数说明：param1 标签， param2 标签内容</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;h1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Vue3学习&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><blockquote><p>注意事项</p></blockquote><ul><li>尽量不要与Vue2.x配置混用 <ul><li>Vue2.x配置（data、methods、computed...）可以访问到setup中的属性、方法</li><li>setup中不能访问到Vue2.x配置（data、methods、computed...）</li><li>如果重名，setup优先</li></ul></li><li>setup不能是一个async函数，因为async函数返回值不再是return的对象，而是promise，模板看不到return对象中的属性（后期也可以返回一个Promise实例，但需要Suspense和异步组件的配合）</li></ul><h2 id="_2-2-ref函数" tabindex="-1"><a class="header-anchor" href="#_2-2-ref函数"><span>2.2 ref函数</span></a></h2><blockquote><p>作用</p></blockquote><p>定义一个响应式数据</p><blockquote><p>使用方法</p></blockquote><ul><li><p>声明变量：<code>let xxx = ref(initValue)</code>)(创建了一个包含响应式数据的<span style="color:red;">引用对象（reference对象，简称ref对象）</span>)</p><p>需要引入<code>ref</code>函数：<code>import {ref} from &#39;vue&#39;</code></p></li><li><p>js中操作数据：<code>xxx.value</code></p></li><li><p>模板中读取数据：<code>&lt;div&gt;xxx&lt;/div&gt;</code>(不需要.value)</p></li><li><p>完整代码</p><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>人员信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token comment">&lt;!-- 模板中读取数据 --&gt;</span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>姓名：{{name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>年龄：{{age}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>工作类型：{{job.type}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>工作薪资：{{job.salary}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changePersonInfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改人员信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line"><span class="token comment">// 引入ref函数</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;App&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 定义基本类型数据</span></span>
<span class="line">    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;张三&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// 定义一个对象</span></span>
<span class="line">    <span class="token keyword">let</span> job <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;前端开发工程师&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">salary</span><span class="token operator">:</span> <span class="token string">&#39;30K&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">changePersonInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 修改基本类型数据</span></span>
<span class="line">      name<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&#39;李四&#39;</span></span>
<span class="line">      age<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">48</span></span>
<span class="line">      <span class="token comment">// 修改对象中的属性</span></span>
<span class="line">      job<span class="token punctuation">.</span>value<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">&#39;UI设计师&#39;</span></span>
<span class="line">      job<span class="token punctuation">.</span>value<span class="token punctuation">.</span>salary <span class="token operator">=</span> <span class="token string">&#39;80K&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">      name<span class="token punctuation">,</span></span>
<span class="line">      age<span class="token punctuation">,</span></span>
<span class="line">      job<span class="token punctuation">,</span></span>
<span class="line">      changePersonInfo</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css"></span>
<span class="line"><span class="token selector">#app</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">font-family</span><span class="token punctuation">:</span> Avenir<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">-webkit-font-smoothing</span><span class="token punctuation">:</span> antialiased<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">-moz-osx-font-smoothing</span><span class="token punctuation">:</span> grayscale<span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">/* text-align: center; */</span></span>
<span class="line">  <span class="token property">color</span><span class="token punctuation">:</span> #2c3e50<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">margin</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><blockquote><p>备注</p></blockquote><ul><li>ref()接收的数据可以是基本类型，也可以是对象类型</li><li>基本类型的数据：响应式依然是靠<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>完成</li><li>对象类型的数据：内部“求助”了Vue3.0中的一个新函数---<code>reactive</code>函数</li></ul><h2 id="_2-3-reactive函数" tabindex="-1"><a class="header-anchor" href="#_2-3-reactive函数"><span>2.3 reactive函数</span></a></h2><blockquote><p>作用</p></blockquote><p>定义一个==对象类型==的响应式数据</p><p>只能定义对象类型的数据，不能定义基本类型的数据</p><blockquote><p>语法</p></blockquote><ul><li><p>声明变量：<code>const 代理对象 = reactive(源对象)</code></p><p>需要引入<code>reactive</code>函数：<code>import {reactive} from &#39;vue&#39;</code></p></li><li><p>JS使用：<code>console.log(代理对象)</code></p></li><li><p>模板中使用：<code>&lt;div&gt;{{代理对象}}&lt;/div&gt;</code></p></li></ul><p>==接收一个对象或数组，返回一个<span style="color:red;font-weight:900;">代理对象（Proxy的实例对象，简称proxy对象）</span>==</p><blockquote><p>说明</p></blockquote><ul><li><code>reactive</code>定义的响应式数据是“深层次的”</li><li>内部基于ES6的Proxy实现，通过代理对象操作源对象内部数据进行操作</li></ul><h2 id="_2-4-vue3-0中的响应式原理" tabindex="-1"><a class="header-anchor" href="#_2-4-vue3-0中的响应式原理"><span>2.4 Vue3.0中的响应式原理</span></a></h2><blockquote><p>vue2.x的响应式</p></blockquote><ul><li><p>实现原理</p><ul><li><p>对象类型：通过<code>Object.defineProperty()</code>对属性的读取、修改进行拦截（数据劫持）</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>源对象<span class="token punctuation">,</span> <span class="token string">&#39;属性名&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>数组对象：通过重写更新数组的一系列方法来实现拦截（对数据的变更方法进行包裹）</p></li></ul></li><li><p>存在问题</p><ul><li><p>新增属性、删除属性，界面不会更新</p><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="line">...</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;App&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">person</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">              <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;张三&#39;</span><span class="token punctuation">,</span></span>
<span class="line">              <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">addSex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token comment">// 使用如下代码添加属性，界面不会更新</span></span>
<span class="line">          <span class="token keyword">this</span><span class="token punctuation">.</span>person<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">&#39;男&#39;</span></span>
<span class="line">          <span class="token comment">// 解决方法：借助vue封装的API</span></span>
<span class="line">          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>person<span class="token punctuation">,</span> <span class="token string">&#39;sex&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;男&#39;</span><span class="token punctuation">)</span></span>
<span class="line">          <span class="token comment">// 或者直接使用Vue调用API</span></span>
<span class="line">          Vue<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>person<span class="token punctuation">,</span> <span class="token string">&#39;sex&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;男&#39;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token function">deleteName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token comment">// 使用如下代码删除属性，界面不会更新</span></span>
<span class="line">          <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>person<span class="token punctuation">.</span>name</span>
<span class="line">           <span class="token comment">// 解决方法：借助vue封装的API</span></span>
<span class="line">          <span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token keyword">delete</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>person<span class="token punctuation">,</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span></span>
<span class="line">          <span class="token comment">// 或者直接使用Vue调用API</span></span>
<span class="line">          Vue<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>person<span class="token punctuation">,</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">...</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>直接通过下标修改数组，界面 不会自动更新</p><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="line">...</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;App&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">hobbies</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;吃饭&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;睡觉&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;打豆豆&#39;</span><span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">updateHobby</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token comment">// 使用如下方法修改第一个爱好，界面不会更新</span></span>
<span class="line">          <span class="token keyword">this</span><span class="token punctuation">.</span>hobbies<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;狂阶&#39;</span></span>
<span class="line">          <span class="token comment">// 可以使用如下方法解决</span></span>
<span class="line">          <span class="token comment">// 方法一：借助Vue的API</span></span>
<span class="line">          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hobbies<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;逛街&#39;</span><span class="token punctuation">)</span></span>
<span class="line">          <span class="token comment">// 或者使用Vue直接调用</span></span>
<span class="line">          Vue<span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hobbies<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;逛街&#39;</span><span class="token punctuation">)</span></span>
<span class="line">          <span class="token comment">// 方法二：使用数组的变更方法（vue自己封装了的）</span></span>
<span class="line">          <span class="token keyword">this</span><span class="token punctuation">.</span>hobbies<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;逛街&#39;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">...</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><blockquote><p>Vue3.0响应式</p></blockquote><ul><li><p>实现原理</p><ul><li><p>通过Proxy（代理）：拦截对象中任意属性的变化，包括：属性值的读写、属性的添加、属性的删除等</p></li><li><p>通过Reflect（反射）：对源对象的属性进行操作</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>源对象<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">    * 拦截读取属性值</span>
<span class="line">    * <span class="token keyword">@param</span> <span class="token parameter">target</span> 源对象</span>
<span class="line">    * <span class="token keyword">@param</span> <span class="token parameter">prop</span> 属性名</span>
<span class="line">    */</span></span>
<span class="line">    <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    </span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">    * 拦截设置属性值或添加新属性</span>
<span class="line">    * <span class="token keyword">@param</span> <span class="token parameter">target</span> 源对象</span>
<span class="line">    * <span class="token keyword">@param</span> <span class="token parameter">prop</span> 属性名</span>
<span class="line">    */</span></span>
<span class="line">    <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    </span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">    * 拦截删除属性</span>
<span class="line">    * <span class="token keyword">@param</span> <span class="token parameter">target</span> 源对象</span>
<span class="line">    * <span class="token keyword">@param</span> <span class="token parameter">prop</span> 属性名</span>
<span class="line">    */</span></span>
<span class="line">    <span class="token function">deleteProperty</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">deleteProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h2 id="_2-5-setup的两个注意点" tabindex="-1"><a class="header-anchor" href="#_2-5-setup的两个注意点"><span>2.5 setup的两个注意点</span></a></h2><blockquote><p>setup执行时机</p></blockquote><p>在beforeCreate之前执行一次，this是<code>undefined</code></p><blockquote><p>setup参数</p></blockquote><ul><li><p>props：值为对象，包含组件外部传递过来，且在组件内部<span style="color:red;font-weight:900;">声明接收</span>了的属性</p><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="line"><span class="token comment">&lt;!-- 父组件 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Demo</span> <span class="token attr-name">msg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hello<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Demo</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- 子组件 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line"><span class="token operator">...</span></span>
<span class="line">	<span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;msg&#39;</span><span class="token punctuation">]</span> <span class="token comment">// 只有在此处声明接收父组件传过来的属性，setup函数中的props才能获取到值</span></span>
<span class="line">	<span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token operator">...</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>contetx：上下文对象，包含以下属性</p><ul><li><p>attrs：值为对象，包含组件外部传递过来，但是props配置<span style="color:red;font-weight:900;">没有声明</span>的属性，相当于vue2.x中的<code>vm.$attrs</code></p></li><li><p>slots：收到的插槽内容，相当于vue2.x中的<code>vm.$slots</code></p><h6 style="color:red;">Vue3.0使用具名插槽时，用 <span style="color:blue;">v-slot:插槽名</span> 绑定具体插槽！！！</h6></li><li><p>emit：分发自定义事件的函数，相当于vue2.x中的<code>vm.$emit</code></p><h6 style="color:red;">Vue3.0使用自定义事件时，如果没有声明接收，控制台会有警告，可以使用 <span style="color:blue;">emits[&#39;自定义事件1&#39;, &#39;自定义事件2&#39;, ...]</span> 来声明接收自定义事件！！！</h6></li></ul></li></ul><h2 id="_2-6-reactive对比ref" tabindex="-1"><a class="header-anchor" href="#_2-6-reactive对比ref"><span>2.6 reactive对比ref</span></a></h2><ul><li><p>从定义数据的角度对比</p><ul><li>ref用来定义<span style="color:red;font-weight:900;">基本类型数据</span></li><li>reactive用来定义<span style="color:red;font-weight:900;">对象或数组类型数据</span></li><li>备注：ref也可以用来定义<span style="color:red;font-weight:900;">对象或数组类型数据</span>，它内部会通过<code>reactive</code>转化为<span style="color:red;font-weight:900;">代理对象</span></li></ul></li><li><p>从原理的角度对比</p><ul><li>ref通过<code>Object.defineProperty()</code>的<code>get</code>和<code>set</code>来实现响应式（数据劫持）</li><li>reactive通过使用<span style="color:red;font-weight:900;">Proxy</span>来实现响应式（数据劫持），并通过<span style="color:red;font-weight:900;">Reflect</span>操作<span style="color:orange;font-weight:900;">源对象</span>内部的数据</li></ul></li><li><p>从使用的角度对比</p><ul><li>ref定义的数据：js中操作数据<span style="color:red;font-weight:900;">需要</span><code>.value</code>，模板中使用时<span style="color:red;font-weight:900;">不需要</span><code>.value</code></li><li>reactive定义的数据：在js和模板中操作和使用，<span style="color:red;font-weight:900;">均不需要</span><code>.value</code></li></ul></li></ul><h2 id="_2-7-计算函数computed" tabindex="-1"><a class="header-anchor" href="#_2-7-计算函数computed"><span>2.7 计算函数computed</span></a></h2><p>==与Vue2.x中computed配置功能一致==</p><blockquote><p>使用方法</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token comment">// 引入</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Demo&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;msg&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">&#39;张&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">&#39;三&#39;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 计算属性，简单写法（只能读不能改）</span></span>
<span class="line">        person<span class="token punctuation">.</span>fullName <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> person<span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">&#39;-&#39;</span> <span class="token operator">+</span>person<span class="token punctuation">.</span>lastName</span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 计算属性，复杂写法（能读能改）</span></span>
<span class="line">        person<span class="token punctuation">.</span>fullName <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">return</span> person<span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">&#39;-&#39;</span> <span class="token operator">+</span> person<span class="token punctuation">.</span>lastName</span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">const</span> nameArr <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;-&#39;</span><span class="token punctuation">)</span></span>
<span class="line">                person<span class="token punctuation">.</span>firstName <span class="token operator">=</span> nameArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></span>
<span class="line">                person<span class="token punctuation">.</span>lastName <span class="token operator">=</span> nameArr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">            person</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-8-监视函数watch" tabindex="-1"><a class="header-anchor" href="#_2-8-监视函数watch"><span>2.8 监视函数watch</span></a></h2><p>==与vue2.x中的watch配置共一致==</p><blockquote><p>两个小“坑”：</p></blockquote><ul><li>==监视reactive定义的响应式数据时，oldValue无法正确获取，强制开启了深度监视（deep配置无效）==</li><li>==监视reactive定义的响应式数据中的某个属性（对象类型）时，deep配置有效==</li></ul><blockquote><p>语法</p></blockquote><p><code>watch(prop, function, config)</code></p><ul><li>prop：要监视的变量</li><li>function：(newValue, oldValue) =&gt; {}，变量发生变化时的回调</li><li>config：是个对象，编写watch的一些配置，如{immediate: true; deep: true}，可以为空</li></ul><blockquote><p>具体代码</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Demo&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;msg&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 定义数据库</span></span>
<span class="line">        <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;张三&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">job</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token literal-property property">s1</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token literal-property property">salary</span><span class="token operator">:</span> <span class="token number">20</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 监视器</span></span>
<span class="line">        <span class="token comment">// 情况一：监视ref定义的一个响应式数据</span></span>
<span class="line">        <span class="token function">watch</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">num发生了变化，新值是</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">，原来为</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>oldValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 情况二：监视ref定义的多个响应式数据</span></span>
<span class="line">        <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>num<span class="token punctuation">,</span> msg<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">num或msg发生了变化，新值是</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">，原来为</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>oldValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token doc-comment comment">/**</span>
<span class="line">         * 情况三：监视reactive定义的一个响应式数据的全部属性</span>
<span class="line">         * 1. 此处无法正确获取oldValue的值</span>
<span class="line">         * 2. 强制开启了深度监视模式（deep配置无效）</span>
<span class="line">         */</span></span>
<span class="line">        <span class="token function">watch</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;person发生了改变&#39;</span><span class="token punctuation">,</span> newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token doc-comment comment">/**</span>
<span class="line">         * 情况四：监视reactive定义的一个响应式数据的某个属性</span>
<span class="line">         * 此处可以拿到oldValue</span>
<span class="line">         */</span></span>
<span class="line">        <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> person<span class="token punctuation">.</span>age<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;person.age发生了改变&#39;</span><span class="token punctuation">,</span> newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token doc-comment comment">/**</span>
<span class="line">         * 情况五：监视reactive定义的一个响应式数据的某些属性</span>
<span class="line">         * 此处可以拿到oldValue</span>
<span class="line">         */</span></span>
<span class="line">        <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> person<span class="token punctuation">.</span>age<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> person<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;person.age或person.name发生了改变&#39;</span><span class="token punctuation">,</span> newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token doc-comment comment">/**</span>
<span class="line">         * 特殊情况</span>
<span class="line">         * 1. 此处拿不到oldValue</span>
<span class="line">         * 2. 此处必须配置deep为true才可以监测到person.job的变化</span>
<span class="line">         */</span></span>
<span class="line">        <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> person<span class="token punctuation">.</span>job<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;person.job发生了改变&#39;</span><span class="token punctuation">,</span> newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">            num<span class="token punctuation">,</span></span>
<span class="line">            msg<span class="token punctuation">,</span></span>
<span class="line">            person</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-9-监视函数watcheffect" tabindex="-1"><a class="header-anchor" href="#_2-9-监视函数watcheffect"><span>2.9 监视函数watchEffect</span></a></h2><blockquote><p>和watch的对比</p></blockquote><ul><li>watch既要指明监视的属性，也要指明监视的回调</li><li>watchEffect不用指明监视的属性，监视回调函数中用到哪个属性，就会监视哪个属性</li></ul><blockquote><p>和computed的对比</p></blockquote><p>watchEffect有点像computed，但二者有如下区别：</p><ul><li>computed注重的是计算出来的值（回调函数的返回值），所以必须要写返回值</li><li>watchEffect更注重的是过程（回调函数的函数体），所以不用写返回值</li></ul><blockquote><p>语法</p></blockquote><p><code>watchEffect(() =&gt; {})</code></p><blockquote><p>具体代码</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Demo&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;msg&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 定义数据库</span></span>
<span class="line">        <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;张三&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">job</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token literal-property property">s1</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token literal-property property">salary</span><span class="token operator">:</span> <span class="token number">20</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 监视器</span></span>
<span class="line">        <span class="token comment">// 回调函数中用到了num和person.job.s1.salary，所以只要这俩值一发生变化，watchEffect的回调就会被触发</span></span>
<span class="line">        <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">const</span> x1 <span class="token operator">=</span> num<span class="token punctuation">.</span>value<span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">const</span> x2 <span class="token operator">=</span> person<span class="token punctuation">.</span>job<span class="token punctuation">.</span>s1<span class="token punctuation">.</span>salary</span>
<span class="line">            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;watchEffect执行了&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">            num<span class="token punctuation">,</span></span>
<span class="line">            msg<span class="token punctuation">,</span></span>
<span class="line">            person</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-10-生命周期" tabindex="-1"><a class="header-anchor" href="#_2-10-生命周期"><span>2.10 生命周期</span></a></h2><p><img src="/assets/image-20220830155133893-Cp4-cKwl.png" alt="image-20220830155133893"></p><blockquote><p>注意</p></blockquote><p>Vue3.0可以继续使用Vue2.x中的生命周期钩子，但有两个被更名：</p><ul><li><code>beforeDestroy</code>改名为<code>beforeUnmount</code></li><li><code>destroyed</code>改名为<code>unmounted</code></li></ul><blockquote><p>Vue3.0中Composition API形式的生命周期钩子，与Vue3.0中钩子对应如下</p></blockquote><ul><li><code>beforeCreate</code>===&gt;<code>setUp()</code></li><li><code>created</code>===&gt;<code>setUp()</code></li><li><code>beforeMount</code>===&gt;<code>onBeforeMount</code></li><li><code>mounted</code>===&gt;<code>onMounted</code></li><li><code>beforeUpdate</code>===&gt;<code>onBeforeUpdate</code></li><li><code>updated</code>===&gt;<code>onUpdated</code></li><li><code>beforeUnmount</code>===&gt;<code>onBeforeUnmount</code></li><li><code>unmounted</code>===&gt;<code>onUnmounted</code></li></ul><h2 id="_2-11-自定义hook函数" tabindex="-1"><a class="header-anchor" href="#_2-11-自定义hook函数"><span>2.11 自定义hook函数</span></a></h2><blockquote><p>概念</p></blockquote><ul><li>hook本质是一个函数，把setup函数中使用的Composition API进行了封装</li><li>类似于vue2.x中的mixin</li><li>自定义hook的优势：复用代码，让setup中的逻辑更清晰易懂</li><li>个人理解：抽取setup中的可以实现某个具体功能的代码，简化setup中的代码，同时也方便后期实现代码的复用</li></ul><blockquote><p>具体例子</p></blockquote><p>==需求：获取鼠标点击的点的坐标==</p><p>步骤如下：</p><ul><li><p>创建<code>src/hooks</code>文件夹，自定义的hook函数都存放在该路径下</p></li><li><p>在<code>src/hooks</code>文件夹下，创建<code>usePoint.js</code>文件(<span style="color:orange;font-weight:600;">一般hook函数的js文件命名方式均为useXXX.js</span>)</p></li><li><p>在<code>usePoint.js</code>文件中编写函数实现逻辑，并将函数暴露出去，代码如下：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> onMounted<span class="token punctuation">,</span> onBeforeUnmount<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 数据：鼠标点击的点的坐标</span></span>
<span class="line">    <span class="token keyword">let</span> point <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">0</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 方法：获取鼠标点击的点的坐标</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">getPoint</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        point<span class="token punctuation">.</span>x <span class="token operator">=</span> event<span class="token punctuation">.</span>pageX</span>
<span class="line">        point<span class="token punctuation">.</span>y <span class="token operator">=</span> event<span class="token punctuation">.</span>pageY</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 生命周期钩子：页面挂载时触发</span></span>
<span class="line">    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> getPoint<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 生命周期钩子：页面卸载时触发</span></span>
<span class="line">    <span class="token function">onBeforeUnmount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> getPoint<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 返回坐标</span></span>
<span class="line">    <span class="token keyword">return</span> point</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>使用<code>usePoint.js</code>中的函数</p><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token comment">&lt;!-- 显示点的坐标 --&gt;</span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>坐标：（{{point.x}}, {{point.y}}）<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line"><span class="token comment">// 引入hook函数usePoint </span></span>
<span class="line"><span class="token keyword">import</span> usePoint <span class="token keyword">from</span> <span class="token string">&#39;../hooks/usePoint&#39;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Demo&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;msg&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 使用usePoint，并拿到点的坐标</span></span>
<span class="line">        <span class="token keyword">let</span> point <span class="token operator">=</span> <span class="token function">usePoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">            num<span class="token punctuation">,</span></span>
<span class="line">            point</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>最终效果如下</p><p><img src="/assets/image-20220830165134692-82A88KdI.png" alt="image-20220830165134692"></p></li></ul><h2 id="_2-10-torefs" tabindex="-1"><a class="header-anchor" href="#_2-10-torefs"><span>2.10 toRefs</span></a></h2><blockquote><p>作用</p></blockquote><p>创建一个ref对象，其value值指向另一个对象中的某个属性</p><blockquote><p>语法</p></blockquote><p><code>const name = toRef(对象变量, &#39;变量属性名&#39;)</code></p><blockquote><p>应用</p></blockquote><p>要将响应式对象中的某个属性单独提供给外部使用时</p><blockquote><p>扩展</p></blockquote><p><code>toRefs</code>和<code>toRef</code>功能一致，但可以批量创建多个ref对象，语法：<code>toRefs(对象变量)</code></p><p>==备注：==可以借助<code>toRefs</code>函数，简化模板编码</p><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token comment">&lt;!-- 页面中使用person的属性时，可以不再加&#39;person.&#39; --&gt;</span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>用户信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>姓名：{{name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>年龄：{{age}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>性别：{{sex}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>爱好：{{hobbies}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>手机号：{{phone}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>家庭住址：{{familyAddress}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>学校名称：{{collage}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>所学专业：{{major}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@vue/reactivity&#39;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Demo&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 定义数据库</span></span>
<span class="line">        <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;张三&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token string">&#39;男&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">hobbies</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;吃饭&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;睡觉&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">phone</span><span class="token operator">:</span> <span class="token string">&#39;130XXXXXXXX&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">familyAddress</span><span class="token operator">:</span> <span class="token string">&#39;山东省济南市XXXX&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">collage</span><span class="token operator">:</span> <span class="token string">&#39;山东大学&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">major</span><span class="token operator">:</span> <span class="token string">&#39;会计&#39;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token operator">...</span><span class="token function">toRefs</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span> <span class="token comment">// 此处使用了toRefs()组合API</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_3-其他composition-api" tabindex="-1"><a class="header-anchor" href="#_3-其他composition-api"><span>3.其他Composition API</span></a></h1><h2 id="_3-1-shallowreactive与shallowref" tabindex="-1"><a class="header-anchor" href="#_3-1-shallowreactive与shallowref"><span>3.1 shallowReactive与shallowRef</span></a></h2><blockquote><p>shallowReactive</p></blockquote><p>只处理对象最外层属性的响应式（浅响应式）</p><blockquote><p>shallowRef</p></blockquote><p>只处理基本数据类型的响应式，不进行对象的响应式处理</p><blockquote><p>语法</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token keyword">let</span> person1 <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">let</span> person2 <span class="token operator">=</span> <span class="token function">shallowReactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>使用场景</p></blockquote><ul><li>shallowReactive：当一个对象结构比较深，但是只有外层属性才会发生变化</li><li>shallowRef：如果一个对象有数据，后续功能不会修改该对象中的属性，而是生成新的对象来替换</li></ul><h2 id="_3-2-readonly与shallowreadonly" tabindex="-1"><a class="header-anchor" href="#_3-2-readonly与shallowreadonly"><span>3.2 readonly与shallowReadonly</span></a></h2><blockquote><p>readonly</p></blockquote><p>让一个响应式的数据变为只读（深只读）</p><blockquote><p>shallowReadonly</p></blockquote><p>让一个响应式数据变为只读（浅只读）</p><blockquote><p>语法</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token comment">// 定义响应式变量</span></span>
<span class="line"><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 深只读</span></span>
<span class="line">person <span class="token operator">=</span> <span class="token function">readonly</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 浅只读</span></span>
<span class="line">person <span class="token operator">=</span> <span class="token function">shallowReadonly</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>应用场景</p></blockquote><p>不希望数据被修改时</p><blockquote><p>注意事项</p></blockquote><p>readonly与shallowReadonly也可以用来定义数据，但是定义出来的数据不是响应式的。如果想让响应式的数据变为只读，只能先用ref或reactive定义数据，然后再用readonly或者shallowReadonly定义数据变为只读。</p><h2 id="_3-3-toraw与markrow" tabindex="-1"><a class="header-anchor" href="#_3-3-toraw与markrow"><span>3.3 toRaw与markRow</span></a></h2><blockquote><p>toRaw</p></blockquote><ul><li><p>作用：将一个由<code>reactive</code>生成的<span style="color:orange;font-weight:900;">响应式对象</span>转为<span style="color:orange;font-weight:900;">普通对象</span></p></li><li><p>使用场景：用于读取响应式对象对应的普通对象，对这个普通对象的操作，不会引起页面刷新</p></li><li><p>语法</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token function">toRaw</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 之后对p做的修改，不会引起页面变化</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><blockquote><p>markRow</p></blockquote><ul><li><p>作用：标记一个对象，使其永远不会再成为响应式对象</p></li><li><p>使用场景：</p><ul><li>1.有些值不应该被设置为响应式的，例如复杂的第三方类库</li><li>2.当渲染具有不可变数据源的大列表时，跳过响应式转换可以提高性能</li></ul></li><li><p>语法：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">markRow</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h2 id="_3-4-customref" tabindex="-1"><a class="header-anchor" href="#_3-4-customref"><span>3.4 customRef</span></a></h2><blockquote><p>作用</p></blockquote><p>创建一个自定义的ref，并对其依赖项跟踪和更新触发进行显示控制</p><blockquote><p>语法</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token doc-comment comment">/**</span>
<span class="line">* <span class="token keyword">@param</span> <span class="token parameter">trace</span> 函数，通知Vue追踪value的变化。在get()中直接调用即可</span>
<span class="line">* <span class="token keyword">@param</span> <span class="token parameter">trigger</span> 函数， 通知Vue重新解析模板。在set()中直接调用即可</span>
<span class="line">* <span class="token keyword">@return</span> 返回值是一个对象。该对象包含get()(用来获取数据)、set()(用来修改数据)方法 </span>
<span class="line">*/</span></span>
<span class="line"><span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">trace<span class="token punctuation">,</span> trigger</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 获取数据</span></span>
<span class="line">        <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">trace</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 通知Vue追踪value的变化</span></span>
<span class="line">            <span class="token keyword">return</span> value</span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token comment">// 修改数据</span></span>
<span class="line">        <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token comment">//每次进来先清除一下定时器，防止页面抖动</span></span>
<span class="line">            timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                value <span class="token operator">=</span> newValue</span>
<span class="line">                <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 通知Vue重新解析模板</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>栗子：自定义ref，实现防抖效果</p></blockquote><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>keyWord<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>{{keyWord}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span>customRef<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;App&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> keyWord <span class="token operator">=</span> <span class="token function">myRef</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span> </span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 自定义ref</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">myRef</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">let</span> timer<span class="token punctuation">;</span> <span class="token comment">// 定时器id</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">trace<span class="token punctuation">,</span> trigger</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token comment">// 获取数据</span></span>
<span class="line">          <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">trace</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 通知Vue追踪value的变化</span></span>
<span class="line">            <span class="token keyword">return</span> value</span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token comment">// 修改数据</span></span>
<span class="line">          <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token comment">//每次进来先清除一下定时器，防止页面抖动</span></span>
<span class="line">            timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">              value <span class="token operator">=</span> newValue</span>
<span class="line">              <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 通知Vue重新解析模板</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">      keyWord<span class="token punctuation">,</span></span>
<span class="line">      myRef</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css"></span>
<span class="line"><span class="token selector">#app</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">font-family</span><span class="token punctuation">:</span> Avenir<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">-webkit-font-smoothing</span><span class="token punctuation">:</span> antialiased<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">-moz-osx-font-smoothing</span><span class="token punctuation">:</span> grayscale<span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">/* text-align: center; */</span></span>
<span class="line">  <span class="token property">color</span><span class="token punctuation">:</span> #2c3e50<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">margin</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-5-provide与inject" tabindex="-1"><a class="header-anchor" href="#_3-5-provide与inject"><span>3.5 provide与inject</span></a></h2><p><img src="/assets/image-20220906164035052-23UTMJMW.png" alt="image-20220906164035052"></p><blockquote><p>作用</p></blockquote><p>实现==祖组件与后代组件间==通信</p><blockquote><p>语法</p></blockquote><p>组组件中用<code>provide</code>选项提供数据，后代组件用<code>inject</code>选线来接收数据</p><blockquote><p>语法</p></blockquote><ul><li><p>祖组件：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token operator">...</span></span>
<span class="line">    <span class="token keyword">let</span> car <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;比亚迪·汉&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token string">&#39;25W&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">    * 使用provide提供数据</span>
<span class="line">    * 第一个参数：要传递的数据的名。inject函数使用该值来接收参数</span>
<span class="line">    * 第二个参数：要传递的数据的值</span>
<span class="line">    */</span></span>
<span class="line">    <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">&#39;car&#39;</span><span class="token punctuation">,</span> car<span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">...</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>后代组件：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token operator">...</span></span>
<span class="line">   <span class="token doc-comment comment">/**</span>
<span class="line">   * 使用inject接收数据</span>
<span class="line">   * 参数 祖组件中provide函数的第一个参数的值</span>
<span class="line">   */</span></span>
<span class="line">   <span class="token keyword">let</span> car <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">&#39;car&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">...</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="_3-6-响应式数据的判断" tabindex="-1"><a class="header-anchor" href="#_3-6-响应式数据的判断"><span>3.6 响应式数据的判断</span></a></h2><ul><li>isRef：检查一个值是否为一个<code>ref</code>对象</li><li>isReactive ：检查一个对象是否是由<code>reactive</code>创建的响应式代理</li><li>isReadonly：检查一个对象是否是由<code>readonly</code>创建的只读代理</li><li>isProxy：检查一个对象是否是由<code>reactive</code>或者<code>readonly</code>创建的代理</li></ul><h1 id="_4-composition-api的优势" tabindex="-1"><a class="header-anchor" href="#_4-composition-api的优势"><span>4.Composition API的优势</span></a></h1><blockquote><p>Options API 存在的问题</p></blockquote><p>使用传统Options API时，新增或者修改一个需求，就需要在data、methods、computed等中分别进行修改</p><blockquote><p>Composition API的优势</p></blockquote><p>可以自定义hook函数，更加优雅的组织代码，让功能相关的数据和函数更加有序的组织在一起</p><h1 id="_5-新的组件" tabindex="-1"><a class="header-anchor" href="#_5-新的组件"><span>5.新的组件</span></a></h1><h2 id="_5-1-fragment" tabindex="-1"><a class="header-anchor" href="#_5-1-fragment"><span>5.1 Fragment</span></a></h2><ul><li>在vue2中：组件必须有一个根标签</li><li>在Vue3中：组件可以没有根标签。当不写根标签时，vue会将多个标签包含在一个Fragment虚拟元素中</li><li>好处：减少标签层级，减少内存占用（理论上）</li></ul><h2 id="_5-2-teleport" tabindex="-1"><a class="header-anchor" href="#_5-2-teleport"><span>5.2 teleport</span></a></h2><p>==<code>teleport</code>是将组件html结构移动到指定位置==</p><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="line"><span class="token comment">&lt;!-- to的值可以是html标签（如html、body），也可以是css选择器 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>teleport</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>指定位置<span class="token punctuation">&#39;</span></span> <span class="token punctuation">&gt;</span></span></span>
<span class="line">	<span class="token comment">&lt;!-- html结构 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>teleport</span><span class="token punctuation">&gt;</span></span>xxxxxxxxxx &lt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>teleport</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span><span class="token punctuation">&#39;</span></span> <span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- html结构 --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>teleport</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-3-suspense" tabindex="-1"><a class="header-anchor" href="#_5-3-suspense"><span>5.3 Suspense</span></a></h2><blockquote><p>使用场景</p></blockquote><p>等待<span style="color:red;">异步组件</span>时渲染一些额外内容，让应用有更好的用户体验</p><blockquote><p>使用步骤</p></blockquote><ul><li><p>异步引入组件</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span>defineAsyncComponent<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span></span>
<span class="line"><span class="token keyword">let</span> Son <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./components/Son&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>使用<code>Suspense</code>包裹组件，并配置好<code>default</code>和<code>fallback</code>插槽</p><ul><li>default：默认插槽。组件往这里边放</li><li>fallback：由于各种原因，插槽未加载出来的提示信息往这里边放</li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Suspense</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>default</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Son</span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>fallback</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">		加载中，请稍后</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Suspense</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><blockquote><p>完整栗子</p></blockquote><ul><li><p>APP 组件</p><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>我是APP组件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Suspense</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>default</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Son</span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>fallback</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        加载中，请稍后</span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Suspense</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span>defineAsyncComponent<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span></span>
<span class="line"><span class="token keyword">let</span> Son <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./components/Son&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;App&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>Son<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css"></span>
<span class="line"><span class="token selector">.app</span> <span class="token punctuation">{</span></span>
<span class="line"> <span class="token property">background-color</span><span class="token punctuation">:</span> gray<span class="token punctuation">;</span></span>
<span class="line"> <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Son组件</p><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>son<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    我是子组件</span>
<span class="line">    {{sum}}</span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">import</span> Grandson <span class="token keyword">from</span> <span class="token string">&#39;./Grandson.vue&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Son&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>Grandson<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token comment">// 为了使组件延迟加载，setup返回值是一个Promise对象</span></span>
<span class="line">        <span class="token keyword">async</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>sum<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">return</span> <span class="token keyword">await</span> p</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scpoed</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css"></span>
<span class="line"><span class="token selector">.son</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">background-color</span><span class="token punctuation">:</span> aquamarine<span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span></span>
<span class="line">    <span class="token property">margin-top</span><span class="token punctuation">:</span>10px<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h1 id="_6-vue3-0和vue2-x对比" tabindex="-1"><a class="header-anchor" href="#_6-vue3-0和vue2-x对比"><span>6.Vue3.0和Vue2.x对比</span></a></h1><ul><li><p>==全局API的转移==</p><p>Vue3.0将Vue2.x中的全局API（Vue.xxx）调整到了应用实例（app）上</p><table><thead><tr><th>Vue2.x全局API（Vue）</th><th>Vue3.0实例API（app）</th></tr></thead><tbody><tr><td>Vue.config.xxx</td><td>app.config.xxx</td></tr><tr><td>Vue.config.productionTip</td><td><strong><span style="color:red;">移除</span></strong></td></tr><tr><td>Vue.component</td><td>app.component</td></tr><tr><td>Vue.directive</td><td>app.directive</td></tr><tr><td>Vue.mixin</td><td>app.mixin</td></tr><tr><td>Vue.use</td><td>app.use</td></tr><tr><td>Vue.prototype</td><td>app.config.globalProperties</td></tr></tbody></table></li><li><p>==data选项应始终被声明为一个函数==</p></li><li><p>==过渡（动画）类名的改变==</p><table><thead><tr><th>Vue2.x</th><th>Vue3.0</th></tr></thead><tbody><tr><td>v-enter</td><td><strong><span style="color:red;">v-enter-from</span></strong></td></tr><tr><td>v-leave-to</td><td>v-leave-to</td></tr><tr><td>v-leave</td><td><strong><span style="color:red;">v-leave-from</span></strong></td></tr><tr><td>v-enter-to</td><td>v-enter-to</td></tr></tbody></table></li><li><p>==移除keyCode作为v-on的修饰符，同时也不再支持config.keyCode==</p></li><li><p>==移除v-on.native修饰符，自定义事件用emits属性配置==</p><ul><li><p>父组件中绑定事件</p><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component</span> </span>
<span class="line">              <span class="token attr-name"><span class="token namespace">v-on:</span>close</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>handleComponentEvent<span class="token punctuation">&quot;</span></span></span>
<span class="line">              <span class="token attr-name"><span class="token namespace">v-on:</span>click</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>handleNativeClickEvent<span class="token punctuation">&quot;</span></span></span>
<span class="line"><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>子组件中声明自定义事件</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token operator">...</span></span>
<span class="line">    <span class="token literal-property property">emits</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;close&#39;</span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token operator">...</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>==移除过滤器filter==</p><p>过滤器虽然看起来方便，但它需要一个自定义语法，打破大括号内表达式“只是JavaScript”的假设，这不仅有学习成本，还有实现成本！ <strong><span style="color:red;">建议用方法调用或者计算属性去替换过滤器。</span></strong></p></li></ul></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1179131421@qq.com">文铁铁~</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/static/tang/Vue/2.html" aria-label="Vue组件编程"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>Vue组件编程</span></div></a><!----></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CQavEA7Q.js" defer></script>
  </body>
</html>
