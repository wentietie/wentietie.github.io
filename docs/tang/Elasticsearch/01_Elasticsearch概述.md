# 1 概述

## 1.1 简介

> 概念

Elasticsearch(简称ES)，是一个分布式、RESTful风格的搜索和数据分析引擎。

> 优点

* 查询和分析：可以自定义搜索方式，分析大规模数据
* 查询速度快
* 可扩展性强：可以实现水平扩展，能够自动管理索引和查询在集群中的分布方式
* 查询结果具有内容相关度：可以对搜索结果进行排序，以优化向用户显示结果的方式
* 具有弹性设计：ES可以检测硬件故障等相关故障，确保集群和数据的安全性和可用性

## 1.2 全文搜索引擎

>工作原理

计算机索引程序通过扫描文章中的每一个词，**对每一个词建立一个索引，指明该词在文章中出现的次数和位置**。当用户查询时，检索程序就根据实现建立的索引进行查找，并将查找结果反馈给用户。这个过程类似于通过字典中的检索字表查字的过程。

## 1.3 Lucene介绍

**Lucene**是Apache软件基金会Jakarta项目组的一个子项目，提供了一个简单却强大的应用程式接口，能够全文索引和搜寻，是一个成熟的免费的**开源工具**。Lucene**只是提供一个全文搜索功能类库的核心工具包**。

目前市面上流行的**搜索引擎软件**，主要有两个：**Elasticsearch**和**Solr**。二者都是基于Lucene搭建的，可以独立部署启动的搜素引擎软件服务。

> Elasticsearch VS Solr

* 当单纯的对已有数据进行搜索时，Solr更快；
* 当实时建立索引时，Solr会产生io阻塞，查询性能较差，Elasticsearch具有明显的优势。
* 随着数据的增加，Solr的效率会变得更低

## 1.4 倒排索引
![](./images/Part1/1.png)

> 正排索引 VS 倒排索引

* 正排索引：根据id查记录
* 倒排索引：根据记录的分词找id，再根据id返回整条记录

> 倒排索引步骤

* 根据词条进行分析，同时记录文档索引位置
* 将词条相同的数据进行合并
* 对词条进行排序

> 搜索过程

先将搜索词语进行分词，分词后在倒排索引列表查询文档位置（docId），然后根据docId查询文档数据。
