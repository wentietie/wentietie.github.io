<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.41">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Proxy | wenatie</title><meta name="description" content="我的个人博客">
    <link rel="modulepreload" href="/assets/app.222641c0.js"><link rel="modulepreload" href="/assets/es6-12.html.79a55e53.js"><link rel="modulepreload" href="/assets/es6-12.html.7c6f02f9.js"><link rel="prefetch" href="/assets/index.html.30d9531c.js"><link rel="prefetch" href="/assets/fzzj.html.b6036490.js"><link rel="prefetch" href="/assets/smzqhs.html.6a2c74fe.js"><link rel="prefetch" href="/assets/vue-slsx.html.bed20329.js"><link rel="prefetch" href="/assets/vueyuanli.html.c38a59e6.js"><link rel="prefetch" href="/assets/ysbd.html.6c8228f0.js"><link rel="prefetch" href="/assets/git.html.6c8466bd.js"><link rel="prefetch" href="/assets/wp-1.html.3b06bea3.js"><link rel="prefetch" href="/assets/part1.html.8a6074d8.js"><link rel="prefetch" href="/assets/part1.html.3125a0b2.js"><link rel="prefetch" href="/assets/index.html.8296c61a.js"><link rel="prefetch" href="/assets/es6-1.html.f8a10200.js"><link rel="prefetch" href="/assets/es6-10.html.03055408.js"><link rel="prefetch" href="/assets/es6-11.html.d2b7584a.js"><link rel="prefetch" href="/assets/es6-13.html.2d56ec49.js"><link rel="prefetch" href="/assets/es6-14.html.f4435e9b.js"><link rel="prefetch" href="/assets/es6-15.html.b5fa31eb.js"><link rel="prefetch" href="/assets/es6-16.html.37a1e224.js"><link rel="prefetch" href="/assets/es6-17.html.40a19b75.js"><link rel="prefetch" href="/assets/es6-18.html.cb07ba59.js"><link rel="prefetch" href="/assets/es6-2.html.3d155da1.js"><link rel="prefetch" href="/assets/es6-3.html.f6f35aaf.js"><link rel="prefetch" href="/assets/es6-4.html.c957c8a6.js"><link rel="prefetch" href="/assets/es6-5.html.dc633f36.js"><link rel="prefetch" href="/assets/es6-6.html.ad37e692.js"><link rel="prefetch" href="/assets/es6-7.html.443c847b.js"><link rel="prefetch" href="/assets/es6-8.html.4c317346.js"><link rel="prefetch" href="/assets/es6-9.html.bca47cf7.js"><link rel="prefetch" href="/assets/p1.html.d5f73618.js"><link rel="prefetch" href="/assets/part1.html.6db87ded.js"><link rel="prefetch" href="/assets/part2.html.a96806ba.js"><link rel="prefetch" href="/assets/kuayu.html.5070e5d2.js"><link rel="prefetch" href="/assets/layout.html.5e0fe120.js"><link rel="prefetch" href="/assets/refresh.html.4b774571.js"><link rel="prefetch" href="/assets/route.html.9d3d6cab.js"><link rel="prefetch" href="/assets/storage.html.1464f18c.js"><link rel="prefetch" href="/assets/xmlhttprequest.html.46944bc6.js"><link rel="prefetch" href="/assets/css-selector.html.261b1f07.js"><link rel="prefetch" href="/assets/CSSchangyong.html.5b7bdd42.js"><link rel="prefetch" href="/assets/flex.html.8408f879.js"><link rel="prefetch" href="/assets/beforeunload.html.417273f5.js"><link rel="prefetch" href="/assets/buding.html.603166d0.js"><link rel="prefetch" href="/assets/hwdj.html.ceba92fe.js"><link rel="prefetch" href="/assets/modules.html.f7954f9b.js"><link rel="prefetch" href="/assets/pro-compile.html.80f0731b.js"><link rel="prefetch" href="/assets/usually-functions.html.d3adb29f.js"><link rel="prefetch" href="/assets/linuxinstallnode.html.1f200fd7.js"><link rel="prefetch" href="/assets/node.html.626e8879.js"><link rel="prefetch" href="/assets/Docker.html.626d4ad4.js"><link rel="prefetch" href="/assets/index.html.d40d7bfa.js"><link rel="prefetch" href="/assets/gitlab-error.html.0d27c837.js"><link rel="prefetch" href="/assets/JUC并发编程.html.3fc3eb9a.js"><link rel="prefetch" href="/assets/1.html.dbe1fd04.js"><link rel="prefetch" href="/assets/2.html.232c519c.js"><link rel="prefetch" href="/assets/MySQL学习之基础篇.html.1293d697.js"><link rel="prefetch" href="/assets/MySQL常见问题的解决.html.ffaefd48.js"><link rel="prefetch" href="/assets/1.html.b9e74d1e.js"><link rel="prefetch" href="/assets/2.html.923e7798.js"><link rel="prefetch" href="/assets/3.html.07e0a08b.js"><link rel="prefetch" href="/assets/1.html.d1ca4347.js"><link rel="prefetch" href="/assets/2.html.4f420f7d.js"><link rel="prefetch" href="/assets/part1.html.dc1d1e4c.js"><link rel="prefetch" href="/assets/part2.html.f59300ab.js"><link rel="prefetch" href="/assets/part3.html.13f2d93e.js"><link rel="prefetch" href="/assets/part4.html.e7966869.js"><link rel="prefetch" href="/assets/part5.html.b1580b41.js"><link rel="prefetch" href="/assets/part6.html.b90364c3.js"><link rel="prefetch" href="/assets/part7.html.561514b8.js"><link rel="prefetch" href="/assets/1.html.28828a55.js"><link rel="prefetch" href="/assets/1.html.7373d2f6.js"><link rel="prefetch" href="/assets/2.html.9e099edb.js"><link rel="prefetch" href="/assets/3.html.d4de9608.js"><link rel="prefetch" href="/assets/part1.html.448de892.js"><link rel="prefetch" href="/assets/part2.html.135f7a50.js"><link rel="prefetch" href="/assets/part3.html.77d1c84e.js"><link rel="prefetch" href="/assets/part4.html.e8127dee.js"><link rel="prefetch" href="/assets/part1.html.caf37611.js"><link rel="prefetch" href="/assets/part2.html.a01d5ca2.js"><link rel="prefetch" href="/assets/auto.html.6bdb4d40.js"><link rel="prefetch" href="/assets/blog.html.8157f51b.js"><link rel="prefetch" href="/assets/command.html.4e39b46d.js"><link rel="prefetch" href="/assets/ftp.html.235a0ddf.js"><link rel="prefetch" href="/assets/1.html.73b7274d.js"><link rel="prefetch" href="/assets/2.html.04da893f.js"><link rel="prefetch" href="/assets/3.html.5b35814a.js"><link rel="prefetch" href="/assets/4.html.28a0adac.js"><link rel="prefetch" href="/assets/6443_connect-refused.html.49fe5c0e.js"><link rel="prefetch" href="/assets/404.html.93146c89.js"><link rel="prefetch" href="/assets/index.html.fe3a69dd.js"><link rel="prefetch" href="/assets/fzzj.html.b35aaa2a.js"><link rel="prefetch" href="/assets/smzqhs.html.05b10cd8.js"><link rel="prefetch" href="/assets/vue-slsx.html.05734515.js"><link rel="prefetch" href="/assets/vueyuanli.html.e6465d21.js"><link rel="prefetch" href="/assets/ysbd.html.957f596a.js"><link rel="prefetch" href="/assets/git.html.d7a837a0.js"><link rel="prefetch" href="/assets/wp-1.html.52f450c4.js"><link rel="prefetch" href="/assets/part1.html.6530d177.js"><link rel="prefetch" href="/assets/part1.html.b0f8257d.js"><link rel="prefetch" href="/assets/index.html.fa8ef0ef.js"><link rel="prefetch" href="/assets/es6-1.html.0f8e73d3.js"><link rel="prefetch" href="/assets/es6-10.html.754490ad.js"><link rel="prefetch" href="/assets/es6-11.html.64f1e311.js"><link rel="prefetch" href="/assets/es6-13.html.d5e828c4.js"><link rel="prefetch" href="/assets/es6-14.html.47aea6ce.js"><link rel="prefetch" href="/assets/es6-15.html.aa1030fb.js"><link rel="prefetch" href="/assets/es6-16.html.41f97579.js"><link rel="prefetch" href="/assets/es6-17.html.653a0a77.js"><link rel="prefetch" href="/assets/es6-18.html.3e0dc8c8.js"><link rel="prefetch" href="/assets/es6-2.html.44173268.js"><link rel="prefetch" href="/assets/es6-3.html.adea9304.js"><link rel="prefetch" href="/assets/es6-4.html.b92b1df8.js"><link rel="prefetch" href="/assets/es6-5.html.90d17136.js"><link rel="prefetch" href="/assets/es6-6.html.0830c1d3.js"><link rel="prefetch" href="/assets/es6-7.html.13685d1d.js"><link rel="prefetch" href="/assets/es6-8.html.429b0ac2.js"><link rel="prefetch" href="/assets/es6-9.html.293239e4.js"><link rel="prefetch" href="/assets/p1.html.e2c567d6.js"><link rel="prefetch" href="/assets/part1.html.d82df702.js"><link rel="prefetch" href="/assets/part2.html.b0811ac5.js"><link rel="prefetch" href="/assets/kuayu.html.f2698085.js"><link rel="prefetch" href="/assets/layout.html.434ed08b.js"><link rel="prefetch" href="/assets/refresh.html.64c01134.js"><link rel="prefetch" href="/assets/route.html.3afd4749.js"><link rel="prefetch" href="/assets/storage.html.8a3427ff.js"><link rel="prefetch" href="/assets/xmlhttprequest.html.1035d416.js"><link rel="prefetch" href="/assets/css-selector.html.30b297ab.js"><link rel="prefetch" href="/assets/CSSchangyong.html.4d81aec9.js"><link rel="prefetch" href="/assets/flex.html.2c4642f1.js"><link rel="prefetch" href="/assets/beforeunload.html.8cfb54d8.js"><link rel="prefetch" href="/assets/buding.html.a7ed5664.js"><link rel="prefetch" href="/assets/hwdj.html.2d485bd3.js"><link rel="prefetch" href="/assets/modules.html.96067f12.js"><link rel="prefetch" href="/assets/pro-compile.html.513fccd6.js"><link rel="prefetch" href="/assets/usually-functions.html.23b5ca11.js"><link rel="prefetch" href="/assets/linuxinstallnode.html.1b63bc3d.js"><link rel="prefetch" href="/assets/node.html.61d142a0.js"><link rel="prefetch" href="/assets/Docker.html.d054be52.js"><link rel="prefetch" href="/assets/index.html.33f96dea.js"><link rel="prefetch" href="/assets/gitlab-error.html.14aeee7e.js"><link rel="prefetch" href="/assets/JUC并发编程.html.a18e77f7.js"><link rel="prefetch" href="/assets/1.html.c639c6f3.js"><link rel="prefetch" href="/assets/2.html.549c31c1.js"><link rel="prefetch" href="/assets/MySQL学习之基础篇.html.434eca96.js"><link rel="prefetch" href="/assets/MySQL常见问题的解决.html.1df2c410.js"><link rel="prefetch" href="/assets/1.html.e77a0280.js"><link rel="prefetch" href="/assets/2.html.1455e4d4.js"><link rel="prefetch" href="/assets/3.html.4387419c.js"><link rel="prefetch" href="/assets/1.html.6ed19069.js"><link rel="prefetch" href="/assets/2.html.f200c3dd.js"><link rel="prefetch" href="/assets/part1.html.cad01b78.js"><link rel="prefetch" href="/assets/part2.html.bbbda6a2.js"><link rel="prefetch" href="/assets/part3.html.64013c5f.js"><link rel="prefetch" href="/assets/part4.html.1fabed85.js"><link rel="prefetch" href="/assets/part5.html.476c1887.js"><link rel="prefetch" href="/assets/part6.html.2c7667cb.js"><link rel="prefetch" href="/assets/part7.html.93f7bbeb.js"><link rel="prefetch" href="/assets/1.html.2ee55839.js"><link rel="prefetch" href="/assets/1.html.bb15da14.js"><link rel="prefetch" href="/assets/2.html.32efcb36.js"><link rel="prefetch" href="/assets/3.html.7735f377.js"><link rel="prefetch" href="/assets/part1.html.6628de6d.js"><link rel="prefetch" href="/assets/part2.html.63f79c4f.js"><link rel="prefetch" href="/assets/part3.html.46405059.js"><link rel="prefetch" href="/assets/part4.html.dc5ef34a.js"><link rel="prefetch" href="/assets/part1.html.08737386.js"><link rel="prefetch" href="/assets/part2.html.0b49efda.js"><link rel="prefetch" href="/assets/auto.html.6c7fd29b.js"><link rel="prefetch" href="/assets/blog.html.b71ecf33.js"><link rel="prefetch" href="/assets/command.html.7d8c3e11.js"><link rel="prefetch" href="/assets/ftp.html.75bbbc3d.js"><link rel="prefetch" href="/assets/1.html.05e8a77c.js"><link rel="prefetch" href="/assets/2.html.18ef2ea8.js"><link rel="prefetch" href="/assets/3.html.be7c36e1.js"><link rel="prefetch" href="/assets/4.html.6b488043.js"><link rel="prefetch" href="/assets/6443_connect-refused.html.19ca04d6.js"><link rel="prefetch" href="/assets/404.html.da5c732c.js"><link rel="prefetch" href="/assets/404.5b481788.js"><link rel="prefetch" href="/assets/Layout.e583fee9.js">
    <link rel="stylesheet" href="/assets/style.c880abed.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">wenatie</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/tang/docker/readme.md" class="" aria-label="docker"><!--[--><!--]--> docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tang/gitlab/gitlab-error.md" class="" aria-label="gitlab"><!--[--><!--]--> gitlab <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tang/k8s/学习资料/command.md" class="" aria-label="k8s"><!--[--><!--]--> k8s <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tang/mysql/1.md" class="" aria-label="mysql"><!--[--><!--]--> mysql <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tang/Prometheus/1.md" class="" aria-label="Prometheus"><!--[--><!--]--> Prometheus <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tang/Python/1.md" class="" aria-label="Python"><!--[--><!--]--> Python <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tang/Vue/1.md" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tang/server/part1.md" class="" aria-label="服务器"><!--[--><!--]--> 服务器 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tang/mservice/2.md" class="" aria-label="微服务"><!--[--><!--]--> 微服务 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/JavaScript/es6/es6-1.md" class="" aria-label="ES6入门"><!--[--><!--]--> ES6入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/JavaScript/youdontknowjs/part1.md" class="" aria-label="你不知道的Javascript"><!--[--><!--]--> 你不知道的Javascript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/JavaScript/design/" class="" aria-label="设计模式"><!--[--><!--]--> 设计模式 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/formwork/vue/vueyuanli.md" class="" aria-label="vue2"><!--[--><!--]--> vue2 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/end/c/data-contruction/part1.md" class="" aria-label="数据结构（严蔚敏）"><!--[--><!--]--> 数据结构（严蔚敏） <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/notes/JS/hwdj" class="" aria-label="JS相关"><!--[--><!--]--> JS相关 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/CSS/css-selector" class="" aria-label="CSS相关"><!--[--><!--]--> CSS相关 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/browser/xmlhttprequest" class="" aria-label="浏览器相关"><!--[--><!--]--> 浏览器相关 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/node/node.md" class="" aria-label="node相关"><!--[--><!--]--> node相关 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="小唐学习笔记"><span class="title">小唐学习笔记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/tang/docker/readme.md" class="" aria-label="docker"><!--[--><!--]--> docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tang/gitlab/gitlab-error.md" class="" aria-label="gitlab"><!--[--><!--]--> gitlab <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tang/k8s/学习资料/command.md" class="" aria-label="k8s"><!--[--><!--]--> k8s <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tang/mysql/1.md" class="" aria-label="mysql"><!--[--><!--]--> mysql <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tang/Prometheus/1.md" class="" aria-label="Prometheus"><!--[--><!--]--> Prometheus <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tang/Python/1.md" class="" aria-label="Python"><!--[--><!--]--> Python <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tang/Vue/1.md" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tang/server/part1.md" class="" aria-label="服务器"><!--[--><!--]--> 服务器 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tang/mservice/2.md" class="" aria-label="微服务"><!--[--><!--]--> 微服务 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/JavaScript/es6/es6-1.md" class="" aria-label="ES6入门"><!--[--><!--]--> ES6入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/JavaScript/youdontknowjs/part1.md" class="" aria-label="你不知道的Javascript"><!--[--><!--]--> 你不知道的Javascript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/JavaScript/design/" class="" aria-label="设计模式"><!--[--><!--]--> 设计模式 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/formwork/vue/vueyuanli.md" class="" aria-label="vue2"><!--[--><!--]--> vue2 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="计算机基础"><span class="title">计算机基础</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/end/c/data-contruction/part1.md" class="" aria-label="数据结构（严蔚敏）"><!--[--><!--]--> 数据结构（严蔚敏） <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="随笔笔记"><span class="title">随笔笔记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/notes/JS/hwdj" class="" aria-label="JS相关"><!--[--><!--]--> JS相关 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/CSS/css-selector" class="" aria-label="CSS相关"><!--[--><!--]--> CSS相关 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/browser/xmlhttprequest" class="" aria-label="浏览器相关"><!--[--><!--]--> 浏览器相关 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/node/node.md" class="" aria-label="node相关"><!--[--><!--]--> node相关 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">ES6入门 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/JavaScript/es6/es6-1.html" class="sidebar-item" aria-label="let 和 const 命令"><!--[--><!--]--> let 和 const 命令 <!--[--><!--]--></a><!----></li><li><a href="/JavaScript/es6/es6-2.html" class="sidebar-item" aria-label="变量的解构赋值"><!--[--><!--]--> 变量的解构赋值 <!--[--><!--]--></a><!----></li><li><a href="/JavaScript/es6/es6-3.html" class="sidebar-item" aria-label="字符串的扩展"><!--[--><!--]--> 字符串的扩展 <!--[--><!--]--></a><!----></li><li><a href="/JavaScript/es6/es6-4.html" class="sidebar-item" aria-label="字符串的新增方法"><!--[--><!--]--> 字符串的新增方法 <!--[--><!--]--></a><!----></li><li><a href="/JavaScript/es6/es6-5.html" class="sidebar-item" aria-label="正则的扩展"><!--[--><!--]--> 正则的扩展 <!--[--><!--]--></a><!----></li><li><a href="/JavaScript/es6/es6-6.html" class="sidebar-item" aria-label="数值的扩展"><!--[--><!--]--> 数值的扩展 <!--[--><!--]--></a><!----></li><li><a href="/JavaScript/es6/es6-7.html" class="sidebar-item" aria-label="函数的扩展"><!--[--><!--]--> 函数的扩展 <!--[--><!--]--></a><!----></li><li><a href="/JavaScript/es6/es6-8.html" class="sidebar-item" aria-label="数组的扩展"><!--[--><!--]--> 数组的扩展 <!--[--><!--]--></a><!----></li><li><a href="/JavaScript/es6/es6-9.html" class="sidebar-item" aria-label="对象的扩展"><!--[--><!--]--> 对象的扩展 <!--[--><!--]--></a><!----></li><li><a href="/JavaScript/es6/es6-10.html" class="sidebar-item" aria-label="Symbol"><!--[--><!--]--> Symbol <!--[--><!--]--></a><!----></li><li><a href="/JavaScript/es6/es6-11.html" class="sidebar-item" aria-label="Set 与 Map 数据结构"><!--[--><!--]--> Set 与 Map 数据结构 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/JavaScript/es6/es6-12.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Proxy"><!--[--><!--]--> Proxy <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/JavaScript/es6/es6-12.html#介绍" class="router-link-active router-link-exact-active sidebar-item" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/JavaScript/es6/es6-12.html#proxy-实例的方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="Proxy 实例的方法"><!--[--><!--]--> Proxy 实例的方法 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/JavaScript/es6/es6-12.html#get" class="router-link-active router-link-exact-active sidebar-item" aria-label="get()"><!--[--><!--]--> get() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/JavaScript/es6/es6-12.html#set" class="router-link-active router-link-exact-active sidebar-item" aria-label="set()"><!--[--><!--]--> set() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/JavaScript/es6/es6-12.html#apply" class="router-link-active router-link-exact-active sidebar-item" aria-label="apply()"><!--[--><!--]--> apply() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/JavaScript/es6/es6-12.html#has" class="router-link-active router-link-exact-active sidebar-item" aria-label="has"><!--[--><!--]--> has <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/JavaScript/es6/es6-12.html#construct" class="router-link-active router-link-exact-active sidebar-item" aria-label="construct()"><!--[--><!--]--> construct() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/JavaScript/es6/es6-12.html#deleteproperty" class="router-link-active router-link-exact-active sidebar-item" aria-label="deleteProperty()"><!--[--><!--]--> deleteProperty() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/JavaScript/es6/es6-12.html#defineproperty" class="router-link-active router-link-exact-active sidebar-item" aria-label="defineProperty()"><!--[--><!--]--> defineProperty() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/JavaScript/es6/es6-12.html#getownpropertydescriptor" class="router-link-active router-link-exact-active sidebar-item" aria-label="getOwnPropertyDescriptor()"><!--[--><!--]--> getOwnPropertyDescriptor() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/JavaScript/es6/es6-12.html#getprototypeof" class="router-link-active router-link-exact-active sidebar-item" aria-label="getPrototypeOf()"><!--[--><!--]--> getPrototypeOf() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/JavaScript/es6/es6-12.html#isextensible" class="router-link-active router-link-exact-active sidebar-item" aria-label="isExtensible()"><!--[--><!--]--> isExtensible() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/JavaScript/es6/es6-12.html#ownkeys" class="router-link-active router-link-exact-active sidebar-item" aria-label="ownKeys()"><!--[--><!--]--> ownKeys() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/JavaScript/es6/es6-12.html#preventextensions" class="router-link-active router-link-exact-active sidebar-item" aria-label="preventExtensions()"><!--[--><!--]--> preventExtensions() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/JavaScript/es6/es6-12.html#setprototypeof" class="router-link-active router-link-exact-active sidebar-item" aria-label="setPrototypeOf()"><!--[--><!--]--> setPrototypeOf() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/JavaScript/es6/es6-12.html#proxy-revocable" class="router-link-active router-link-exact-active sidebar-item" aria-label="Proxy.revocable()"><!--[--><!--]--> Proxy.revocable() <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/JavaScript/es6/es6-12.html#this-问题" class="router-link-active router-link-exact-active sidebar-item" aria-label="this 问题"><!--[--><!--]--> this 问题 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/JavaScript/es6/es6-13.html" class="sidebar-item" aria-label="Reflect"><!--[--><!--]--> Reflect <!--[--><!--]--></a><!----></li><li><a href="/JavaScript/es6/es6-14.html" class="sidebar-item" aria-label="Promise 对象"><!--[--><!--]--> Promise 对象 <!--[--><!--]--></a><!----></li><li><a href="/JavaScript/es6/es6-15.html" class="sidebar-item" aria-label="Class 的基本语法"><!--[--><!--]--> Class 的基本语法 <!--[--><!--]--></a><!----></li><li><a href="/JavaScript/es6/es6-16.html" class="sidebar-item" aria-label="Class 的继承"><!--[--><!--]--> Class 的继承 <!--[--><!--]--></a><!----></li><li><a href="/JavaScript/es6/es6-17.html" class="sidebar-item" aria-label="Module 的语法"><!--[--><!--]--> Module 的语法 <!--[--><!--]--></a><!----></li><li><a href="/JavaScript/es6/es6-18.html" class="sidebar-item" aria-label="Module 的加载实现"><!--[--><!--]--> Module 的加载实现 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="proxy" tabindex="-1"><a class="header-anchor" href="#proxy" aria-hidden="true">#</a> Proxy</h1><h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍" aria-hidden="true">#</a> 介绍</h2><p>Proxy用于修改某些操作的默认行为，等同于在语言层面做出修改，所以属于一种“元编程”（meta programming），即对编程语言进行编程。</p><p>Proxy可以理解成，在目标对象之前架设一层“拦截”，外界对该对象的访问，都必须先通过这层拦截，因此提供了一种机制，可以对外界的访问进行过滤和改写。Proxy 这个词的原意是代理，用在这里表示由它来“代理”某些操作，可以译为“代理器”。这也是Vue3的实现核心实现方法。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> propKey<span class="token punctuation">,</span> receiver</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">getting </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>propKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> propKey<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> propKey<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">setting </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>propKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> propKey<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="proxy-实例的方法" tabindex="-1"><a class="header-anchor" href="#proxy-实例的方法" aria-hidden="true">#</a> Proxy 实例的方法</h2><p><strong>Proxy 支持的拦截操作一共 13 种。</strong></p><ul><li>get(target, propKey, receiver)：拦截对象属性的读取，比如 proxy.foo 和 proxy[&#39;foo&#39;] 。</li><li>set(target, propKey, value, receiver)：拦截对象属性的设置，比如 proxy.foo = v 或 proxy[&#39;foo&#39;] = v ，返回一个布尔值。</li><li>has(target, propKey)：拦截 propKey in proxy 的操作，返回一个布尔值。</li><li>deleteProperty(target, propKey)：拦截 delete proxy[propKey] 的操作，返回一个布尔值。</li><li>ownKeys(target)：拦截 Object.getOwnPropertyNames(proxy) 、 Object.getOwnPropertySymbols(proxy) 、 Object.keys(proxy) 、 for...in 循环，返回一个数组。该方法返回目标对象所有自身的属性的属性名，而 Object.keys() 的返回结果仅包括目标对象自身的可遍历属性。</li><li>getOwnPropertyDescriptor(target, propKey)：拦截 Object.getOwnPropertyDescriptor(proxy, propKey) ，返回属性的描述对象。</li><li>defineProperty(target, propKey, propDesc)：拦截 Object.defineProperty(proxy, propKey, propDesc） 、 Object.defineProperties(proxy, propDescs) ，返回一个布尔值。</li><li>preventExtensions(target)：拦截 Object.preventExtensions(proxy) ，返回一个布尔值。</li><li>getPrototypeOf(target)：拦截 Object.getPrototypeOf(proxy) ，返回一个对象。</li><li>isExtensible(target)：拦截 Object.isExtensible(proxy) ，返回一个布尔值。</li><li>setPrototypeOf(target, proto)：拦截 Object.setPrototypeOf(proxy, proto) ，返回一个布尔值。如果目标对象是函数，那么还有两种额外操作可以拦截。</li><li>apply(target, object, args)：拦截 Proxy 实例作为函数调用的操作，比如 proxy(...args) 、 proxy.call(object, ...args) 、 proxy.apply(...) 。</li><li>construct(target, args)：拦截 Proxy 实例作为构造函数调用的操作，比如 new proxy(...args) 。</li></ul><h3 id="get" tabindex="-1"><a class="header-anchor" href="#get" aria-hidden="true">#</a> get()</h3><p>get方法用于拦截某个属性的读取操作，可以接受三个参数，依次为目标对象、属性名和 proxy 实例本身（严格地说，是操作行为所针对的对象），其中最后一个参数可选。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 如果访问目标对象不存在的属性，会抛出一个错误。如果没有这个拦截函数，访问不存在的属性，只会返回 undefined 。</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> propKey</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>propKey <span class="token keyword">in</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> target<span class="token punctuation">[</span>propKey<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ReferenceError</span><span class="token punctuation">(</span><span class="token string">&quot;Prop name \&quot;&quot;</span> <span class="token operator">+</span> propKey <span class="token operator">+</span> <span class="token string">&quot;\&quot; does not exist.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
proxy<span class="token punctuation">.</span>name <span class="token comment">// &quot;张三&quot;</span>
proxy<span class="token punctuation">.</span>age <span class="token comment">// 抛出一个错误</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>get 方法可以继承。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> proto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> propertyKey<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;GET &#39;</span> <span class="token operator">+</span> propertyKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> target<span class="token punctuation">[</span>propertyKey<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>proto<span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>foo <span class="token comment">// &quot;GET foo&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>上面代码中，拦截操作定义在 Prototype 对象上面，所以如果读取 obj 对象继承的属性时，拦截会生效。</p><h3 id="set" tabindex="-1"><a class="header-anchor" href="#set" aria-hidden="true">#</a> set()</h3><p>set方法用来拦截某个属性的赋值操作，可以接受四个参数，依次为目标对象、属性名、属性值和 Proxy 实例本身，其中最后一个参数可选。</p><p>假定 Person 对象有一个 age 属性，该属性应该是一个不大于 200 的整数，那么可以使用 Proxy 保证 age 的属性值符合要求。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> validator <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>prop <span class="token operator">===</span> <span class="token string">&#39;age&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&#39;The age is not an integer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&gt;</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RangeError</span><span class="token punctuation">(</span><span class="token string">&#39;The age seems invalid&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 对于满足条件的 age 属性以及其他属性，直接保存</span>
    obj<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> validator<span class="token punctuation">)</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span>age <span class="token comment">// 100</span>
person<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">&#39;young&#39;</span> <span class="token comment">// 报错</span>
person<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">300</span> <span class="token comment">// 报错</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="apply" tabindex="-1"><a class="header-anchor" href="#apply" aria-hidden="true">#</a> apply()</h3><p>apply方法拦截函数的调用、 call 和 apply 操作。apply方法可以接受三个参数，分别是目标对象、目标对象的上下文对象（ this ）和目标对象的参数数组。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> twice <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">apply</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> ctx<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">Reflect</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">sum</span> <span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> left <span class="token operator">+</span> right<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span> twice<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">proxy</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">proxy</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 22</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">proxy</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 30</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="has" tabindex="-1"><a class="header-anchor" href="#has" aria-hidden="true">#</a> has</h3><p>has方法用来拦截HasProperty操作，即判断对象是否具有某个属性时，这个方法会生效。典型的操作就是 in 运算符。has 方法可以接受两个参数，分别是目标对象、需查询的属性名。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">has</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&#39;_&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> key <span class="token keyword">in</span> target<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> target <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">_prop</span><span class="token operator">:</span> <span class="token string">&#39;foo&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">prop</span><span class="token operator">:</span> <span class="token string">&#39;foo&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token string">&#39;_prop&#39;</span> <span class="token keyword">in</span> proxy <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><ul><li>如果原对象不可配置或者禁止扩展，这时 has 拦截会报错。</li><li>has 拦截只对 in 运算符生效，对 for...in 循环不生效，导致不符合要求的属性没有被 for...in 循环所排除。</li></ul></div><h3 id="construct" tabindex="-1"><a class="header-anchor" href="#construct" aria-hidden="true">#</a> construct()</h3><p>construct方法用于拦截new命令，construct 方法可以接受三个参数。 target ：目标对象 args ：构造函数的参数对象 newTarget ：创造实例对象时， new 命令作用的构造函数 下面是拦截对象的写法。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">construct</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;called: &#39;</span> <span class="token operator">+</span> args<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;, &#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">p</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value
<span class="token comment">// &quot;called: 1&quot;</span>
<span class="token comment">// 10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>construct方法返回的必须是一个对象，否则会报错。</p></div><h3 id="deleteproperty" tabindex="-1"><a class="header-anchor" href="#deleteproperty" aria-hidden="true">#</a> deleteProperty()</h3><p>deleteProperty方法用于拦截delete 操作，如果这个方法抛出错误或者返回 false ，当前属性就无法被 delete 命令删除。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">deleteProperty</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">invariant</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token string">&#39;delete&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">delete</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">invariant</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&#39;_&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Invalid attempt to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>action<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> private &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; property</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> target <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">_prop</span><span class="token operator">:</span> <span class="token string">&#39;foo&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span> proxy<span class="token punctuation">.</span>_prop
<span class="token comment">// Error: Invalid attempt to delete private &quot;_prop&quot; property</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="defineproperty" tabindex="-1"><a class="header-anchor" href="#defineproperty" aria-hidden="true">#</a> defineProperty()</h3><p>defineProperty()方法拦截了 Object.defineProperty()操作。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">defineProperty</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> descriptor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> target <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
proxy<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token string">&#39;bar&#39;</span> <span class="token comment">// 不会生效</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="getownpropertydescriptor" tabindex="-1"><a class="header-anchor" href="#getownpropertydescriptor" aria-hidden="true">#</a> getOwnPropertyDescriptor()</h3><p>getOwnPropertyDescriptor()方法拦截 Object.getOwnPropertyDescriptor()，返回一个属性描述对象或者 undefined 。</p><h3 id="getprototypeof" tabindex="-1"><a class="header-anchor" href="#getprototypeof" aria-hidden="true">#</a> getPrototypeOf()</h3><p>getPrototypeOf()方法主要用来拦截获取对象原型。具体来说，拦截下面这些操作。</p><ul><li>Object.prototype.proto</li><li>Object.prototype.isPrototypeOf()</li><li>Object.getPrototypeOf()</li><li>Reflect.getPrototypeOf()</li><li>instanceof</li></ul><h3 id="isextensible" tabindex="-1"><a class="header-anchor" href="#isextensible" aria-hidden="true">#</a> isExtensible()</h3><p>isExtensible() 方法拦截 Object.isExtensible() 操作。</p><h3 id="ownkeys" tabindex="-1"><a class="header-anchor" href="#ownkeys" aria-hidden="true">#</a> ownKeys()</h3><p>ownKeys() 方法用来拦截对象自身属性的读取操作。具体来说，拦截以下操作。</p><ul><li>Object.getOwnPropertyNames()</li><li>Object.getOwnPropertySymbols()</li><li>Object.keys()</li><li>for...in 循环</li></ul><h3 id="preventextensions" tabindex="-1"><a class="header-anchor" href="#preventextensions" aria-hidden="true">#</a> preventExtensions()</h3><p>preventExtensions()方法拦截 Object.preventExtensions() 。该方法必须返回一个布尔值，否则会被自动转为布尔值。</p><h3 id="setprototypeof" tabindex="-1"><a class="header-anchor" href="#setprototypeof" aria-hidden="true">#</a> setPrototypeOf()</h3><p>setPrototypeOf() 方法主要用来拦截 Object.setPrototypeOf()方法。</p><h3 id="proxy-revocable" tabindex="-1"><a class="header-anchor" href="#proxy-revocable" aria-hidden="true">#</a> Proxy.revocable()</h3><p>Proxy.revocable() 方法返回一个可取消的 Proxy实例。</p><h2 id="this-问题" tabindex="-1"><a class="header-anchor" href="#this-问题" aria-hidden="true">#</a> this 问题</h2><p>虽然 Proxy 可以代理针对目标对象的访问，但它不是目标对象的透明代理，即不做任何拦截的情况下，也无法保证与目标对象的行为一致。主要原因就是在 Proxy 代理的情况下，目标对象内部的 this 关键字会指向 Proxy 代理。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">m</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">===</span> proxy<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
target<span class="token punctuation">.</span><span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
proxy<span class="token punctuation">.</span><span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>一旦 proxy 代理 target.m ，后者内部的 this 就是指向 proxy ，而不是 target 。</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1179131421@qq.com">文铁铁</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/JavaScript/es6/es6-11.html" class="" aria-label="Set 与 Map 数据结构"><!--[--><!--]--> Set 与 Map 数据结构 <!--[--><!--]--></a></span><span class="next"><a href="/JavaScript/es6/es6-13.html" class="" aria-label="Reflect"><!--[--><!--]--> Reflect <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.222641c0.js" defer></script>
  </body>
</html>
