import{_ as n,o as s,c as a,b as e}from"./app-CW2dCZSC.js";const p="/assets/nginx-update-1-CPcQZaav.png",l={},t=e(`<h1 id="centos7平滑升级nginx" tabindex="-1"><a class="header-anchor" href="#centos7平滑升级nginx"><span>CentOS7平滑升级nginx</span></a></h1><blockquote><p>准备：</p></blockquote><p>下载并上传<code>nginx-1.14.2.tar.gz</code>、<code>nginx-1.22.0.tar.gz</code>到<code>/usr/tth/</code>路径。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ tth<span class="token punctuation">]</span><span class="token comment"># pwd</span></span>
<span class="line">/usr/tth</span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ tth<span class="token punctuation">]</span><span class="token comment"># ll</span></span>
<span class="line">total <span class="token number">2044</span></span>
<span class="line">-rw-r--r-- <span class="token number">1</span> root root <span class="token number">1015384</span> Oct <span class="token number">18</span> <span class="token number">11</span>:13 nginx-1.14.2.tar.gz</span>
<span class="line">-rw-r--r-- <span class="token number">1</span> root root <span class="token number">1073322</span> Oct <span class="token number">18</span> <span class="token number">11</span>:13 nginx-1.22.0.tar.gz</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>说明</p></blockquote><p>本教程是将nginx从1.14.2版本平滑升级到1.22.0版本。首先介绍1.14.2版本的nginx的安装，然后再进行平滑升级。 如果已有低版本的nginx，可以跳过<span style="background-color:orange;padding:0 5px;border-radius:5px;margin:0 5px;">1 安装旧版本nginx</span>部分。</p><h2 id="_1-安装旧版本nginx" tabindex="-1"><a class="header-anchor" href="#_1-安装旧版本nginx"><span>1 安装旧版本nginx</span></a></h2><h3 id="_1-1-解压-nginx-1-14-2-tar-gz" tabindex="-1"><a class="header-anchor" href="#_1-1-解压-nginx-1-14-2-tar-gz"><span>1.1 解压 nginx-1.14.2.tar.gz</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 进入/usr/tth/目录</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ tth<span class="token punctuation">]</span><span class="token comment"># cd /usr/tth/</span></span>
<span class="line"><span class="token comment"># 解压</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ tth<span class="token punctuation">]</span><span class="token comment"># tar zxf nginx-1.14.2.tar.gz</span></span>
<span class="line"><span class="token comment"># 查看解压结果</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ tth<span class="token punctuation">]</span><span class="token comment"># ll</span></span>
<span class="line">total <span class="token number">2044</span></span>
<span class="line">drwxr-xr-x <span class="token number">8</span> <span class="token number">1001</span> <span class="token number">1001</span>     <span class="token number">158</span> Dec  <span class="token number">4</span>  <span class="token number">2018</span> nginx-1.14.2 <span class="token comment"># 新增nginx-1.14.2文件夹</span></span>
<span class="line">-rw-r--r-- <span class="token number">1</span> root root <span class="token number">1015384</span> Oct <span class="token number">18</span> <span class="token number">11</span>:13 nginx-1.14.2.tar.gz</span>
<span class="line">-rw-r--r-- <span class="token number">1</span> root root <span class="token number">1073322</span> Oct <span class="token number">18</span> <span class="token number">11</span>:13 nginx-1.22.0.tar.gz</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-准备nginx安装路径" tabindex="-1"><a class="header-anchor" href="#_1-2-准备nginx安装路径"><span>1.2 准备nginx安装路径</span></a></h3><p>创建<code>/usr/local/nginx/1.14.2/</code>文件夹，作为nginx-1.14.2的安装目录</p><h3 id="_1-3-编译安装" tabindex="-1"><a class="header-anchor" href="#_1-3-编译安装"><span>1.3 编译安装</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 进入/usr/tth/nginx-1.14.2/目录</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ tth<span class="token punctuation">]</span><span class="token comment"># cd /usr/tth/nginx-1.14.2/</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 配置nginx</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.14.2<span class="token punctuation">]</span><span class="token comment"># ./configure --prefix=/usr/local/nginx/1.14.2</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 编译并安装</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.14.2<span class="token punctuation">]</span><span class="token comment"># make &amp;&amp; make install</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查看安装结果</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.14.2<span class="token punctuation">]</span><span class="token comment"># ll /usr/local/nginx/1.14.2/</span></span>
<span class="line">total <span class="token number">0</span></span>
<span class="line">drwxr-xr-x <span class="token number">2</span> root root <span class="token number">333</span> Oct <span class="token number">18</span> <span class="token number">15</span>:43 conf</span>
<span class="line">drwxr-xr-x <span class="token number">2</span> root root  <span class="token number">40</span> Oct <span class="token number">18</span> <span class="token number">15</span>:43 html</span>
<span class="line">drwxr-xr-x <span class="token number">2</span> root root   <span class="token number">6</span> Oct <span class="token number">18</span> <span class="token number">15</span>:43 logs</span>
<span class="line">drwxr-xr-x <span class="token number">2</span> root root  <span class="token number">19</span> Oct <span class="token number">18</span> <span class="token number">15</span>:43 sbin</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-4-修改nginx端口" tabindex="-1"><a class="header-anchor" href="#_1-4-修改nginx端口"><span>1.4 修改nginx端口</span></a></h3><p>将nginx端口，由80改为81（此步骤可省，用80也行。此处是为了确保在升级时，旧版本的配置仍旧生效）</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">vim</span> /usr/local/nginx/1.14.2/conf/nginx.conf</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+p+`" alt=""></p><h3 id="_1-5-运行" tabindex="-1"><a class="header-anchor" href="#_1-5-运行"><span>1.5 运行</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 测试配置文件是否正确（输出内容为ok、successful，表示正确。否则需要修改配置文件）</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.14.2<span class="token punctuation">]</span><span class="token comment"># /usr/local/nginx/1.14.2/sbin/nginx -t</span></span>
<span class="line">nginx: the configuration <span class="token function">file</span> /usr/local/nginx/1.14.2/conf/nginx.conf syntax is ok</span>
<span class="line">nginx: configuration <span class="token function">file</span> /usr/local/nginx/1.14.2/conf/nginx.conf <span class="token builtin class-name">test</span> is successful</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 运行</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.14.2<span class="token punctuation">]</span><span class="token comment"># /usr/local/nginx/1.14.2/sbin/nginx</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查看进程</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.14.2<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep nginx</span></span>
<span class="line">root     <span class="token number">2837549</span>       <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">15</span>:50 ?        00:00:00 nginx: master process /usr/local/nginx/1.14.2/sbin/nginx</span>
<span class="line">nobody   <span class="token number">2837550</span> <span class="token number">2837549</span>  <span class="token number">0</span> <span class="token number">15</span>:50 ?        00:00:00 nginx: worker process</span>
<span class="line">root     <span class="token number">2837555</span> <span class="token number">2834706</span>  <span class="token number">0</span> <span class="token number">15</span>:52 pts/2    00:00:00 <span class="token function">grep</span> <span class="token parameter variable">--color</span><span class="token operator">=</span>auto nginx</span>
<span class="line"></span>
<span class="line"><span class="token comment">#访问测试（访问成功）</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.14.2<span class="token punctuation">]</span><span class="token comment"># curl http://localhost:81</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE html<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>html<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Welcome to nginx<span class="token operator">!</span><span class="token operator">&lt;</span>/title<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>style<span class="token operator">&gt;</span></span>
<span class="line">    body <span class="token punctuation">{</span></span>
<span class="line">        width: 35em<span class="token punctuation">;</span></span>
<span class="line">        margin: <span class="token number">0</span> auto<span class="token punctuation">;</span></span>
<span class="line">        font-family: Tahoma, Verdana, Arial, sans-serif<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token operator">&lt;</span>/style<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>/head<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>Welcome to nginx<span class="token operator">!</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>If you see this page, the nginx web server is successfully installed and</span>
<span class="line">working. Further configuration is required.<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>For online documentation and support please refer to</span>
<span class="line"><span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;http://nginx.org/&quot;</span><span class="token operator">&gt;</span>nginx.org<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>.<span class="token operator">&lt;</span>br/<span class="token operator">&gt;</span></span>
<span class="line">Commercial support is available at</span>
<span class="line"><span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;http://nginx.com/&quot;</span><span class="token operator">&gt;</span>nginx.com<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>.<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span>em<span class="token operator">&gt;</span>Thank you <span class="token keyword">for</span> using nginx.<span class="token operator">&lt;</span>/em<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>/body<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>/html<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-6-查看nginx版本号" tabindex="-1"><a class="header-anchor" href="#_1-6-查看nginx版本号"><span>1.6 查看nginx版本号</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ tth<span class="token punctuation">]</span><span class="token comment">#  /usr/local/nginx/1.14.2/sbin/nginx -v</span></span>
<span class="line">nginx version: nginx/1.14.2</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-安装新版本nginx" tabindex="-1"><a class="header-anchor" href="#_2-安装新版本nginx"><span>2 安装新版本nginx</span></a></h2><h3 id="_2-1-解压nginx-1-22-0" tabindex="-1"><a class="header-anchor" href="#_2-1-解压nginx-1-22-0"><span>2.1 解压nginx-1.22.0</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 进入/usr/tth/目录</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ tth<span class="token punctuation">]</span><span class="token comment"># cd /usr/tth/</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 解压</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ tth<span class="token punctuation">]</span><span class="token comment"># tar zxf nginx-1.22.0.tar.gz</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查看解压结果</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ tth<span class="token punctuation">]</span><span class="token comment"># ll</span></span>
<span class="line">total <span class="token number">2044</span></span>
<span class="line">drwxr-xr-x <span class="token number">9</span> <span class="token number">1001</span> <span class="token number">1001</span>     <span class="token number">186</span> Oct <span class="token number">18</span> <span class="token number">15</span>:35 nginx-1.14.2</span>
<span class="line">-rw-r--r-- <span class="token number">1</span> root root <span class="token number">1015384</span> Oct <span class="token number">18</span> <span class="token number">11</span>:13 nginx-1.14.2.tar.gz</span>
<span class="line">drwxr-xr-x <span class="token number">8</span> <span class="token number">1001</span> <span class="token number">1001</span>     <span class="token number">158</span> May <span class="token number">24</span> 07:59 nginx-1.22.0</span>
<span class="line">-rw-r--r-- <span class="token number">1</span> root root <span class="token number">1073322</span> Oct <span class="token number">18</span> <span class="token number">11</span>:13 nginx-1.22.0.tar.gz</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-查看旧版本配置" tabindex="-1"><a class="header-anchor" href="#_2-2-查看旧版本配置"><span>2.2 查看旧版本配置</span></a></h3><p>新版本在执行<code>./config</code>命令时，需要用到旧版本的配置参数。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ tth<span class="token punctuation">]</span><span class="token comment"># /usr/local/nginx/1.14.2/sbin/nginx -V</span></span>
<span class="line">nginx version: nginx/1.14.2</span>
<span class="line">built by gcc <span class="token number">8.5</span>.0 <span class="token number">20210514</span> <span class="token punctuation">(</span>Red Hat <span class="token number">8.5</span>.0-4<span class="token punctuation">)</span> <span class="token punctuation">(</span>GCC<span class="token punctuation">)</span></span>
<span class="line">configure arguments: <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr/local/nginx/1.14.2 <span class="token comment"># 旧版本配置参数</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-编译" tabindex="-1"><a class="header-anchor" href="#_2-3-编译"><span>2.3 编译</span></a></h3><p>注意：此处只编译，不安装。执行完<code>make</code>命令之后，<code>/usr/tth/nginx-1.22.0/</code>会多出一个文件夹</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 进入/usr/tth/nginx-1.22.0目录</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ tth<span class="token punctuation">]</span><span class="token comment"># cd nginx-1.22.0/</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 配置nginx（需要用到上一步中的nginx配置信息）</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.22.0<span class="token punctuation">]</span><span class="token comment"># ./configure --prefix=/usr/local/nginx/1.14.2</span></span>
<span class="line"><span class="token comment"># 此时，/usr/tth/nginx-1.22.0路径下会多出objs文件夹</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 编译</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.22.0<span class="token punctuation">]</span><span class="token comment"># make</span></span>
<span class="line"><span class="token comment"># 此时/usr/tth/nginx-1.22.0/objs/文件夹下会多出nginx文件，下面会用到</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-升级" tabindex="-1"><a class="header-anchor" href="#_3-升级"><span>3 升级</span></a></h2><h3 id="_3-1-备份旧版本-用新版本替换" tabindex="-1"><a class="header-anchor" href="#_3-1-备份旧版本-用新版本替换"><span>3.1 备份旧版本，用新版本替换</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 备份旧版本</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.22.0<span class="token punctuation">]</span><span class="token comment"># mv /usr/local/nginx/1.14.2/sbin/nginx /usr/local/nginx/1.14.2/sbin/nginx_1.14.2</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查看备份结果</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.22.0<span class="token punctuation">]</span><span class="token comment"># ll /usr/local/nginx/1.14.2/sbin</span></span>
<span class="line">total <span class="token number">4888</span></span>
<span class="line">-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">5001856</span> Oct <span class="token number">18</span> <span class="token number">15</span>:43 nginx_1.14.2</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 复制新版本nginx到/usr/local/nginx/1.14.2/sbin路径下</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.22.0<span class="token punctuation">]</span><span class="token comment"># cp /usr/tth/nginx-1.22.0/objs/nginx /usr/local/nginx/1.14.2/sbin/</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查看复制结果</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.22.0<span class="token punctuation">]</span><span class="token comment"># ll /usr/local/nginx/1.14.2/sbin</span></span>
<span class="line">total <span class="token number">9828</span></span>
<span class="line">-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">5056008</span> Oct <span class="token number">18</span> <span class="token number">16</span>:13 nginx</span>
<span class="line">-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">5001856</span> Oct <span class="token number">18</span> <span class="token number">15</span>:43 nginx_1.14.2</span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.22.0<span class="token punctuation">]</span><span class="token comment">#</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-测试配置文件是否正确" tabindex="-1"><a class="header-anchor" href="#_3-2-测试配置文件是否正确"><span>3.2 测试配置文件是否正确</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.22.0<span class="token punctuation">]</span><span class="token comment"># /usr/local/nginx/1.14.2/sbin/nginx -t</span></span>
<span class="line">nginx: the configuration <span class="token function">file</span> /usr/local/nginx/1.14.2/conf/nginx.conf syntax is ok</span>
<span class="line">nginx: configuration <span class="token function">file</span> /usr/local/nginx/1.14.2/conf/nginx.conf <span class="token builtin class-name">test</span> is successful</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-查看nginx进程" tabindex="-1"><a class="header-anchor" href="#_3-3-查看nginx进程"><span>3.3 查看nginx进程</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.22.0<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep nginx</span></span>
<span class="line">root     <span class="token number">2837549</span>       <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">15</span>:50 ?        00:00:00 nginx: master process /usr/local/nginx/1.14.2/sbin/nginx</span>
<span class="line">nobody   <span class="token number">2837550</span> <span class="token number">2837549</span>  <span class="token number">0</span> <span class="token number">15</span>:50 ?        00:00:00 nginx: worker process</span>
<span class="line">root     <span class="token number">2840201</span> <span class="token number">2837586</span>  <span class="token number">0</span> <span class="token number">16</span>:17 pts/4    00:00:00 <span class="token function">grep</span> <span class="token parameter variable">--color</span><span class="token operator">=</span>auto nginx</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-发送usr2信号" tabindex="-1"><a class="header-anchor" href="#_3-4-发送usr2信号"><span>3.4 发送USR2信号</span></a></h3><p>向主进程（master）发送usr2信号，nginx会启动一个新的版本的master进程和对应工作进程，和旧版本一起处理请求。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.22.0<span class="token punctuation">]</span><span class="token comment"># kill -USR2 2837549</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-5-查看nginx进程" tabindex="-1"><a class="header-anchor" href="#_3-5-查看nginx进程"><span>3.5 查看nginx进程</span></a></h3><p>如下，多了两个新的进程，说明USR2信号发送成功。</p><p>此时，新旧两个版本的nginx都处于可用状态</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.22.0<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep nginx</span></span>
<span class="line">root     <span class="token number">2837549</span>       <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">15</span>:50 ?        00:00:00 nginx: master process /usr/local/nginx/1.14.2/sbin/nginx <span class="token comment"># 旧的nginx</span></span>
<span class="line">nobody   <span class="token number">2837550</span> <span class="token number">2837549</span>  <span class="token number">0</span> <span class="token number">15</span>:50 ?        00:00:00 nginx: worker process</span>
<span class="line">root     <span class="token number">2840202</span> <span class="token number">2837549</span>  <span class="token number">0</span> <span class="token number">16</span>:17 ?        00:00:00 nginx: master process /usr/local/nginx/1.14.2/sbin/nginx <span class="token comment"># 新的nginx</span></span>
<span class="line">nobody   <span class="token number">2840203</span> <span class="token number">2840202</span>  <span class="token number">0</span> <span class="token number">16</span>:17 ?        00:00:00 nginx: worker process</span>
<span class="line">root     <span class="token number">2840205</span> <span class="token number">2837586</span>  <span class="token number">0</span> <span class="token number">16</span>:17 pts/4    00:00:00 <span class="token function">grep</span> <span class="token parameter variable">--color</span><span class="token operator">=</span>auto nginx</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-6-发送winch信号" tabindex="-1"><a class="header-anchor" href="#_3-6-发送winch信号"><span>3.6 发送WINCH信号</span></a></h3><p>让旧版本的nginx的进程逐步退出。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 发送WINCH信号</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.22.0<span class="token punctuation">]</span><span class="token comment"># kill -WINCH 2837549</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查看nginx进程</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.22.0<span class="token punctuation">]</span><span class="token comment"># ps aux |grep nginx</span></span>
<span class="line">root     <span class="token number">2837549</span>  <span class="token number">0.0</span>  <span class="token number">0.1</span>  <span class="token number">34328</span>  <span class="token number">2232</span> ?        Ss   <span class="token number">15</span>:50   <span class="token number">0</span>:00 nginx: master process /usr/local/nginx/1.14.2/sbin/nginx</span>
<span class="line">root     <span class="token number">2840202</span>  <span class="token number">0.0</span>  <span class="token number">0.1</span>  <span class="token number">34436</span>  <span class="token number">2940</span> ?        S    <span class="token number">16</span>:17   <span class="token number">0</span>:00 nginx: master process /usr/local/nginx/1.14.2/sbin/nginx</span>
<span class="line">nobody   <span class="token number">2840203</span>  <span class="token number">0.0</span>  <span class="token number">0.2</span>  <span class="token number">66608</span>  <span class="token number">4520</span> ?        S    <span class="token number">16</span>:17   <span class="token number">0</span>:00 nginx: worker process</span>
<span class="line">root     <span class="token number">2840222</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>  <span class="token number">12132</span>  <span class="token number">1152</span> pts/4    S+   <span class="token number">16</span>:31   <span class="token number">0</span>:00 <span class="token function">grep</span> <span class="token parameter variable">--color</span><span class="token operator">=</span>auto nginx</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-7-访问验证" tabindex="-1"><a class="header-anchor" href="#_3-7-访问验证"><span>3.7 访问验证</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.22.0<span class="token punctuation">]</span><span class="token comment"># curl http://localhost:81</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE html<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>html<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Welcome to nginx<span class="token operator">!</span><span class="token operator">&lt;</span>/title<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>style<span class="token operator">&gt;</span></span>
<span class="line">  body <span class="token punctuation">{</span></span>
<span class="line">      width: 35em<span class="token punctuation">;</span></span>
<span class="line">      margin: <span class="token number">0</span> auto<span class="token punctuation">;</span></span>
<span class="line">      font-family: Tahoma, Verdana, Arial, sans-serif<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token operator">&lt;</span>/style<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>/head<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>Welcome to nginx<span class="token operator">!</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>If you see this page, the nginx web server is successfully installed and</span>
<span class="line">working. Further configuration is required.<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>For online documentation and support please refer to</span>
<span class="line"><span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;http://nginx.org/&quot;</span><span class="token operator">&gt;</span>nginx.org<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>.<span class="token operator">&lt;</span>br/<span class="token operator">&gt;</span></span>
<span class="line">Commercial support is available at</span>
<span class="line"><span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;http://nginx.com/&quot;</span><span class="token operator">&gt;</span>nginx.com<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>.<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span>em<span class="token operator">&gt;</span>Thank you <span class="token keyword">for</span> using nginx.<span class="token operator">&lt;</span>/em<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>/body<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>/html<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-8-发送hup信号-如果需要回滚的话" tabindex="-1"><a class="header-anchor" href="#_3-8-发送hup信号-如果需要回滚的话"><span>3.8 发送HUP信号（如果需要回滚的话）</span></a></h3><p>注意：此步骤是回滚步骤。如果不需要回滚，直接跳过该步骤</p><p>如果这时需要回退继续使用旧版本，可向旧的Nginx主进程发送HUP信号，它会重新启动工作进程，仍使用旧版配置文件。然后可以将新版Nginx进程杀死（使用QUIT、TERM 、或者KILL）</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">kill</span> <span class="token parameter variable">-HUP</span> <span class="token number">2837549</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-9-发送quit信号" tabindex="-1"><a class="header-anchor" href="#_3-9-发送quit信号"><span>3.9 发送QUIT信号</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 发送QUIT信号</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.22.0<span class="token punctuation">]</span><span class="token comment"># kill -QUIT 2837549</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查看nginx进程（旧版本进程消失）</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.22.0<span class="token punctuation">]</span><span class="token comment"># ps aux |grep nginx</span></span>
<span class="line">root     <span class="token number">2840202</span>  <span class="token number">0.0</span>  <span class="token number">0.1</span>  <span class="token number">34436</span>  <span class="token number">2940</span> ?        S    <span class="token number">16</span>:17   <span class="token number">0</span>:00 nginx: master process /usr/local/nginx/1.14.2/sbin/nginx</span>
<span class="line">nobody   <span class="token number">2840203</span>  <span class="token number">0.0</span>  <span class="token number">0.2</span>  <span class="token number">66608</span>  <span class="token number">4520</span> ?        S    <span class="token number">16</span>:17   <span class="token number">0</span>:00 nginx: worker process</span>
<span class="line">root     <span class="token number">2840231</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>  <span class="token number">12132</span>  <span class="token number">1124</span> pts/4    R+   <span class="token number">16</span>:38   <span class="token number">0</span>:00 <span class="token function">grep</span> <span class="token parameter variable">--color</span><span class="token operator">=</span>auto nginx</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-10-验证nginx版本号-并进行访问测试" tabindex="-1"><a class="header-anchor" href="#_3-10-验证nginx版本号-并进行访问测试"><span>3.10 验证nginx版本号，并进行访问测试</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 查看版本号</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.22.0<span class="token punctuation">]</span><span class="token comment"># /usr/local/nginx/1.14.2/sbin/nginx -v</span></span>
<span class="line">nginx version: nginx/1.22.0</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 访问测试</span></span>
<span class="line"><span class="token punctuation">[</span>root@iZ2zear1vazpz6ydchstjnZ nginx-1.22.0<span class="token punctuation">]</span><span class="token comment"># curl http://localhost:81</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE html<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>html<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Welcome to nginx<span class="token operator">!</span><span class="token operator">&lt;</span>/title<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>style<span class="token operator">&gt;</span></span>
<span class="line">  body <span class="token punctuation">{</span></span>
<span class="line">      width: 35em<span class="token punctuation">;</span></span>
<span class="line">      margin: <span class="token number">0</span> auto<span class="token punctuation">;</span></span>
<span class="line">      font-family: Tahoma, Verdana, Arial, sans-serif<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token operator">&lt;</span>/style<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>/head<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>Welcome to nginx<span class="token operator">!</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>If you see this page, the nginx web server is successfully installed and</span>
<span class="line">working. Further configuration is required.<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>For online documentation and support please refer to</span>
<span class="line"><span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;http://nginx.org/&quot;</span><span class="token operator">&gt;</span>nginx.org<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>.<span class="token operator">&lt;</span>br/<span class="token operator">&gt;</span></span>
<span class="line">Commercial support is available at</span>
<span class="line"><span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;http://nginx.com/&quot;</span><span class="token operator">&gt;</span>nginx.com<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>.<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span>em<span class="token operator">&gt;</span>Thank you <span class="token keyword">for</span> using nginx.<span class="token operator">&lt;</span>/em<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>/body<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>/html<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,57),i=[t];function o(c,r){return s(),a("div",null,i)}const d=n(l,[["render",o],["__file","CentOS7平滑升级nginx.html.vue"]]),m=JSON.parse('{"path":"/static/tang/server/CentOS7%E5%B9%B3%E6%BB%91%E5%8D%87%E7%BA%A7nginx.html","title":"CentOS7平滑升级nginx","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"1 安装旧版本nginx","slug":"_1-安装旧版本nginx","link":"#_1-安装旧版本nginx","children":[{"level":3,"title":"1.1 解压 nginx-1.14.2.tar.gz","slug":"_1-1-解压-nginx-1-14-2-tar-gz","link":"#_1-1-解压-nginx-1-14-2-tar-gz","children":[]},{"level":3,"title":"1.2 准备nginx安装路径","slug":"_1-2-准备nginx安装路径","link":"#_1-2-准备nginx安装路径","children":[]},{"level":3,"title":"1.3 编译安装","slug":"_1-3-编译安装","link":"#_1-3-编译安装","children":[]},{"level":3,"title":"1.4 修改nginx端口","slug":"_1-4-修改nginx端口","link":"#_1-4-修改nginx端口","children":[]},{"level":3,"title":"1.5 运行","slug":"_1-5-运行","link":"#_1-5-运行","children":[]},{"level":3,"title":"1.6 查看nginx版本号","slug":"_1-6-查看nginx版本号","link":"#_1-6-查看nginx版本号","children":[]}]},{"level":2,"title":"2 安装新版本nginx","slug":"_2-安装新版本nginx","link":"#_2-安装新版本nginx","children":[{"level":3,"title":"2.1 解压nginx-1.22.0","slug":"_2-1-解压nginx-1-22-0","link":"#_2-1-解压nginx-1-22-0","children":[]},{"level":3,"title":"2.2 查看旧版本配置","slug":"_2-2-查看旧版本配置","link":"#_2-2-查看旧版本配置","children":[]},{"level":3,"title":"2.3 编译","slug":"_2-3-编译","link":"#_2-3-编译","children":[]}]},{"level":2,"title":"3 升级","slug":"_3-升级","link":"#_3-升级","children":[{"level":3,"title":"3.1 备份旧版本，用新版本替换","slug":"_3-1-备份旧版本-用新版本替换","link":"#_3-1-备份旧版本-用新版本替换","children":[]},{"level":3,"title":"3.2 测试配置文件是否正确","slug":"_3-2-测试配置文件是否正确","link":"#_3-2-测试配置文件是否正确","children":[]},{"level":3,"title":"3.3 查看nginx进程","slug":"_3-3-查看nginx进程","link":"#_3-3-查看nginx进程","children":[]},{"level":3,"title":"3.4 发送USR2信号","slug":"_3-4-发送usr2信号","link":"#_3-4-发送usr2信号","children":[]},{"level":3,"title":"3.5 查看nginx进程","slug":"_3-5-查看nginx进程","link":"#_3-5-查看nginx进程","children":[]},{"level":3,"title":"3.6 发送WINCH信号","slug":"_3-6-发送winch信号","link":"#_3-6-发送winch信号","children":[]},{"level":3,"title":"3.7 访问验证","slug":"_3-7-访问验证","link":"#_3-7-访问验证","children":[]},{"level":3,"title":"3.8 发送HUP信号（如果需要回滚的话）","slug":"_3-8-发送hup信号-如果需要回滚的话","link":"#_3-8-发送hup信号-如果需要回滚的话","children":[]},{"level":3,"title":"3.9 发送QUIT信号","slug":"_3-9-发送quit信号","link":"#_3-9-发送quit信号","children":[]},{"level":3,"title":"3.10 验证nginx版本号，并进行访问测试","slug":"_3-10-验证nginx版本号-并进行访问测试","link":"#_3-10-验证nginx版本号-并进行访问测试","children":[]}]}],"git":{"updatedTime":1720499771000,"contributors":[{"name":"文铁铁~","email":"1179131421@qq.com","commits":1}]},"filePathRelative":"static/tang/server/CentOS7平滑升级nginx.md"}');export{d as comp,m as data};
