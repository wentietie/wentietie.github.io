import{_ as e,o as s,c as a,b as n}from"./app-CQavEA7Q.js";const l="/assets/index_create-MVUqBO_h.png",t="/assets/index_create_with_shards-DO00NOSr.png",i="/assets/index_search_all-DTRpAeFq.png",d="/assets/index_search_one-D7mEFR_e.png",c="/assets/index_delete-JWHDNRzn.png",r="/assets/doc_create-BLHzExRD.png",p="/assets/doc_search-tY-Av1pw.png",o="/assets/doc_update-Ab8-kX-9.png",u="/assets/doc_update_field-D8Rz6t3o.png",h="/assets/doc_delete-DUGrBSqU.png",m="/assets/doc_delete_com-BR1YWs5m.png",v="/assets/doc_batch_create_correct-CBOP-Woy.png",_="/assets/doc_batch_create_error-B-F30a6x.png",b="/assets/doc_batch_delete-D2rdoD-X.png",g="/assets/mapping_search-pKNwQuV8.png",x="/assets/mapping_create-CiaJs-j1.png",q={},k=n(`<h1 id="_4-es基本操作" tabindex="-1"><a class="header-anchor" href="#_4-es基本操作"><span>4 es基本操作</span></a></h1><h2 id="_4-1-分词器" tabindex="-1"><a class="header-anchor" href="#_4-1-分词器"><span>4.1 分词器</span></a></h2><p>常用的是ik中文分词器。</p><h2 id="_4-2-索引操作" tabindex="-1"><a class="header-anchor" href="#_4-2-索引操作"><span>4.2 索引操作</span></a></h2><h3 id="_4-2-1-创建索引" tabindex="-1"><a class="header-anchor" href="#_4-2-1-创建索引"><span>4.2.1 创建索引</span></a></h3><blockquote><p>直接指定索引名</p></blockquote><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">PUT /索引名</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+l+`" alt=""></p><blockquote><p>指定主副分片数</p></blockquote><p><strong>分片只有在集群中才有效果，且主副分片分布在不同节点中。</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">// 当未指定主副分片时，es7.X均默认为1</span>
<span class="line">PUT /索引名</span>
<span class="line">{</span>
<span class="line">  &quot;settings&quot;: {</span>
<span class="line">    &quot;number_of_shards&quot;: 3, // 分片数</span>
<span class="line">    &quot;number_of_replicas&quot;: 2 // 备份数</span>
<span class="line">  }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+t+`" alt=""></p><h3 id="_4-2-2-查看索引" tabindex="-1"><a class="header-anchor" href="#_4-2-2-查看索引"><span>4.2.2 查看索引</span></a></h3><blockquote><p>查看所有索引</p></blockquote><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">GET /_cat/indices?v</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+i+`" alt=""></p><blockquote><p>查单个索引</p></blockquote><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">GET /索引名</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+d+`" alt=""></p><h3 id="_4-2-3-删除索引" tabindex="-1"><a class="header-anchor" href="#_4-2-3-删除索引"><span>4.2.3 删除索引</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">DELETE /索引名</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+c+`" alt=""></p><h2 id="_4-3-文档操作" tabindex="-1"><a class="header-anchor" href="#_4-3-文档操作"><span>4.3 文档操作</span></a></h2><h3 id="_4-3-1-创建文档" tabindex="-1"><a class="header-anchor" href="#_4-3-1-创建文档"><span>4.3.1 创建文档</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">PUT /索引名/类型/id</span>
<span class="line">{</span>
<span class="line">    json类型的数据</span>
<span class="line">}</span>
<span class="line">// 类型：默认为_doc</span>
<span class="line">// id： 文档的主键</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+r+`" alt=""></p><h3 id="_4-3-2-查看文档" tabindex="-1"><a class="header-anchor" href="#_4-3-2-查看文档"><span>4.3.2 查看文档</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">GET /索引名/类型/id</span>
<span class="line">// 类型：默认为_doc</span>
<span class="line">// id： 文档的主键</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+p+`" alt=""></p><h3 id="_4-3-3-修改文档" tabindex="-1"><a class="header-anchor" href="#_4-3-3-修改文档"><span>4.3.3 修改文档</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">PUT /索引名/类型/id</span>
<span class="line">{</span>
<span class="line">    json类型的数据</span>
<span class="line">}</span>
<span class="line">// 类型：默认为_doc</span>
<span class="line">// id： 文档的主键</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+o+`" alt=""></p><h3 id="_4-3-4-修改局部属性" tabindex="-1"><a class="header-anchor" href="#_4-3-4-修改局部属性"><span>4.3.4 修改局部属性</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">POST /索引名/_update/id</span>
<span class="line">{</span>
<span class="line">    &quot;doc&quot; {</span>
<span class="line">        &quot;属性名&quot;: &quot;属性值&quot;</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">// id： 文档的主键</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+u+`" alt=""></p><h3 id="_4-3-5-删除文档" tabindex="-1"><a class="header-anchor" href="#_4-3-5-删除文档"><span>4.3.5 删除文档</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">DELETE /索引名/类型/id</span>
<span class="line"></span>
<span class="line">// 类型：默认为_doc</span>
<span class="line">// id： 文档的主键</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+h+'" alt=""></p><p>注意：</p><ul><li>删除后，调用文档查看接口，返回的found值为false</li><li>调用查询所有索引接口，可看到当前索引下的文档数为1。</li><li>以上说明，<strong>执行删除文档操作后，es并没有立刻将数据删除</strong>。 <img src="'+m+`" alt=""></li></ul><h3 id="_4-3-6-批量操作" tabindex="-1"><a class="header-anchor" href="#_4-3-6-批量操作"><span>4.3.6 批量操作</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">POST _bulk</span>
<span class="line">{&quot;actionName&quot;: {&quot;index&quot;: &quot;indexName&quot;,&quot;type&quot;: &quot;typeName&quot;,&quot;_id&quot;: &quot;id&quot;}}</span>
<span class="line">{&quot;field1&quot;: &quot;value1&quot;,&quot;field2&quot;: &quot;value2&quot;,...}</span>
<span class="line">{&quot;actionName&quot;: {&quot;index&quot;: &quot;indexName&quot;,&quot;type&quot;: &quot;typeName&quot;,&quot;_id&quot;: &quot;id&quot;}}</span>
<span class="line">{&quot;field1&quot;: &quot;value1&quot;,&quot;field2&quot;: &quot;value2&quot;,...}</span>
<span class="line">...</span>
<span class="line">// actionName：create、delete等增删改查都可以</span>
<span class="line">// index： 值为索引名称</span>
<span class="line">// type： 可省</span>
<span class="line">// _id： 索引id</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意：以上单个json对象不允许换行</strong></p><blockquote><p>批量添加</p></blockquote><p><img src="`+v+'" alt=""><img src="'+_+'" alt=""></p><blockquote><p>批量删除</p></blockquote><p><img src="'+b+`" alt=""></p><h2 id="_4-4-映射" tabindex="-1"><a class="header-anchor" href="#_4-4-映射"><span>4.4 映射</span></a></h2><blockquote><p>概念</p></blockquote><p>有了索引，就相当于有了数据库中的database。</p><p>索引库中的映射，类似于database中的表结构（table）。创建数据库表需要设置字段名称、类型、长度、约束等，索引库也一样，需要知道这个类型下有哪些字段，每个字段都有哪些约束信息，这就叫做映射。</p><p><strong>映射是可以自动创建的。</strong> 在向文档中插入第一条数据的时候，默认创建映射。</p><h3 id="_4-4-1-查看映射" tabindex="-1"><a class="header-anchor" href="#_4-4-1-查看映射"><span>4.4.1 查看映射</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">GET /索引名/_mapping</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+g+'" alt=""></p><h3 id="_4-4-2-动态映射" tabindex="-1"><a class="header-anchor" href="#_4-4-2-动态映射"><span>4.4.2 动态映射</span></a></h3><blockquote><p>概念</p></blockquote><p>映射是可以自动创建的。在文档写入ES时，会根据文档字段<strong>自动识别类型</strong>，这种机制被称为<strong>动态映射</strong>。</p><blockquote><p>映射规则对应</p></blockquote><table><thead><tr><th>数据</th><th>对应类型</th></tr></thead><tbody><tr><td>null</td><td>字段不添加</td></tr><tr><td>true或false</td><td>boolean</td></tr><tr><td>字符串</td><td>text</td></tr><tr><td>数值</td><td>long</td></tr><tr><td>小数</td><td>float</td></tr><tr><td>日期</td><td>date</td></tr></tbody></table><blockquote><p>注意</p></blockquote><p>很少有使用动态映射的</p><h3 id="_4-4-3-静态映射" tabindex="-1"><a class="header-anchor" href="#_4-4-3-静态映射"><span>4.4.3 静态映射</span></a></h3><blockquote><p>概念</p></blockquote><p>静态映射是指在ES中事先定义好映射，即手动映射，包含文档的各终端类型、分词器等，这就是静态映射。</p><p>一般都会选择使用静态映射。</p><blockquote><p>创建映射举例</p></blockquote><p><img src="'+x+'" alt=""></p><blockquote><p>说明：type分类如下</p></blockquote><ul><li>字符串类型：text（支持分词）、keyword（不支持分词） <ul><li>text：字符串类型。该类型被用来索引长文本，在创建索引前就会将这些文本进行分词，转化为词的组合，建立索引；允许es来检索这些词，text类型不能用来排序和聚合。</li><li>keyword：字符串类型。该类型不能分词，可以被用来检索过滤、排序和聚合。keyword不可用text进行分词模糊检索。</li></ul></li><li>数值型：long、integer、short、byte、double、float</li><li>日期型：date</li><li>布尔型：boolean</li></ul>',70),f=[k];function y(E,j){return s(),a("div",null,f)}const D=e(q,[["render",y],["__file","04_Elasticsearch基本操作.html.vue"]]),N=JSON.parse('{"path":"/static/tang/Elasticsearch/04_Elasticsearch%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C.html","title":"4 es基本操作","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"4.1 分词器","slug":"_4-1-分词器","link":"#_4-1-分词器","children":[]},{"level":2,"title":"4.2 索引操作","slug":"_4-2-索引操作","link":"#_4-2-索引操作","children":[{"level":3,"title":"4.2.1 创建索引","slug":"_4-2-1-创建索引","link":"#_4-2-1-创建索引","children":[]},{"level":3,"title":"4.2.2 查看索引","slug":"_4-2-2-查看索引","link":"#_4-2-2-查看索引","children":[]},{"level":3,"title":"4.2.3 删除索引","slug":"_4-2-3-删除索引","link":"#_4-2-3-删除索引","children":[]}]},{"level":2,"title":"4.3 文档操作","slug":"_4-3-文档操作","link":"#_4-3-文档操作","children":[{"level":3,"title":"4.3.1 创建文档","slug":"_4-3-1-创建文档","link":"#_4-3-1-创建文档","children":[]},{"level":3,"title":"4.3.2 查看文档","slug":"_4-3-2-查看文档","link":"#_4-3-2-查看文档","children":[]},{"level":3,"title":"4.3.3 修改文档","slug":"_4-3-3-修改文档","link":"#_4-3-3-修改文档","children":[]},{"level":3,"title":"4.3.4 修改局部属性","slug":"_4-3-4-修改局部属性","link":"#_4-3-4-修改局部属性","children":[]},{"level":3,"title":"4.3.5 删除文档","slug":"_4-3-5-删除文档","link":"#_4-3-5-删除文档","children":[]},{"level":3,"title":"4.3.6 批量操作","slug":"_4-3-6-批量操作","link":"#_4-3-6-批量操作","children":[]}]},{"level":2,"title":"4.4 映射","slug":"_4-4-映射","link":"#_4-4-映射","children":[{"level":3,"title":"4.4.1 查看映射","slug":"_4-4-1-查看映射","link":"#_4-4-1-查看映射","children":[]},{"level":3,"title":"4.4.2 动态映射","slug":"_4-4-2-动态映射","link":"#_4-4-2-动态映射","children":[]},{"level":3,"title":"4.4.3 静态映射","slug":"_4-4-3-静态映射","link":"#_4-4-3-静态映射","children":[]}]}],"git":{"updatedTime":1720499771000,"contributors":[{"name":"文铁铁~","email":"1179131421@qq.com","commits":1}]},"filePathRelative":"static/tang/Elasticsearch/04_Elasticsearch基本操作.md"}');export{D as comp,N as data};
