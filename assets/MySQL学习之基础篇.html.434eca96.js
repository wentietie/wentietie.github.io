import{_ as n,c as e}from"./app.222641c0.js";var s="/assets/image-20230113100055254.5d30d3cc.png",a="/assets/image-20230113153631711.0526aeec.png",l="/assets/image-20230113160401254.328dda2b.png",r="/assets/image-20230113164704996.e95347bb.png";const i={},t=e(`<h1 id="mysql\u5B66\u4E60\u4E4B\u57FA\u7840\u7BC7" tabindex="-1"><a class="header-anchor" href="#mysql\u5B66\u4E60\u4E4B\u57FA\u7840\u7BC7" aria-hidden="true">#</a> MySQL\u5B66\u4E60\u4E4B\u57FA\u7840\u7BC7</h1><h2 id="_1-mysql\u6570\u636E\u5E93\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_1-mysql\u6570\u636E\u5E93\u6982\u8FF0" aria-hidden="true">#</a> 1 MySQL\u6570\u636E\u5E93\u6982\u8FF0</h2><p>==MySQL\u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u3001\u5173\u7CFB\u578B\u6570\u636E\u5E93==</p><h3 id="_1-1-\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_1-1-\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528\u6570\u636E\u5E93" aria-hidden="true">#</a> 1.1 \u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528\u6570\u636E\u5E93</h3><ul><li>\u6301\u4E45\u5316(persistence)\uFF1A\u628A\u6570\u636E\u4FDD\u5B58\u5230\u53EF\u6389\u7535\u5F0F\u5B58\u50A8\u8BBE\u5907\u4E2D\u4EE5\u4F9B\u4E4B\u540E\u4F7F\u7528\u3002\u5927\u591A\u6570\u60C5\u51B5\u4E0B\uFF0C\u7279\u522B\u662F\u4F01 \u4E1A\u7EA7\u5E94\u7528\uFF0C\u6570\u636E\u6301\u4E45\u5316\u610F\u5473\u7740\u5C06\u5185\u5B58\u4E2D\u7684\u6570\u636E\u4FDD\u5B58\u5230\u786C\u76D8\u4E0A\u52A0\u4EE5\u201D\u56FA\u5316\u201D\uFF0C\u800C\u6301\u4E45\u5316\u7684\u5B9E\u73B0\u8FC7\u7A0B\u5927\u591A \u901A\u8FC7\u5404\u79CD\u5173\u7CFB\u6570\u636E\u5E93\u6765\u5B8C\u6210\u3002</li><li>\u6301\u4E45\u5316\u7684\u4E3B\u8981\u4F5C\u7528\u662F\u5C06\u5185\u5B58\u4E2D\u7684\u6570\u636E\u5B58\u50A8\u5728\u5173\u7CFB\u578B\u6570\u636E\u5E93\u4E2D\uFF0C\u5F53\u7136\u4E5F\u53EF\u4EE5\u5B58\u50A8\u5728\u78C1\u76D8\u6587\u4EF6\u3001XML\u6570 \u636E\u6587\u4EF6\u4E2D\u3002</li></ul><h3 id="_1-2-\u6570\u636E\u5E93\u76F8\u5173\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_1-2-\u6570\u636E\u5E93\u76F8\u5173\u6982\u5FF5" aria-hidden="true">#</a> 1.2 \u6570\u636E\u5E93\u76F8\u5173\u6982\u5FF5</h3><ul><li>==DB==\uFF1A<code>\u6570\u636E\u5E93</code>\uFF08Database\uFF09 \u5373\u5B58\u50A8\u6570\u636E\u7684\u201C\u4ED3\u5E93\u201D\uFF0C\u5176\u672C\u8D28\u662F\u4E00\u4E2A\u6587\u4EF6\u7CFB\u7EDF\u3002\u5B83\u4FDD\u5B58\u4E86\u4E00\u7CFB\u5217\u6709\u7EC4\u7EC7\u7684\u6570\u636E\u3002</li><li>==DBMS==\uFF1A\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF\uFF08Database Management System\uFF09 \u662F\u4E00\u79CD\u64CD\u7EB5\u548C\u7BA1\u7406\u6570\u636E\u5E93\u7684\u5927\u578B\u8F6F\u4EF6\uFF0C\u7528\u4E8E\u5EFA\u7ACB\u3001\u4F7F\u7528\u548C\u7EF4\u62A4\u6570\u636E\u5E93\uFF0C\u5BF9\u6570\u636E\u5E93\u8FDB\u884C\u7EDF\u4E00\u7BA1\u7406\u548C\u63A7 \u5236\u3002\u7528\u6237\u901A\u8FC7\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF\u8BBF\u95EE\u6570\u636E\u5E93\u4E2D\u8868\u5185\u7684\u6570\u636E\u3002</li><li>==SQL==\uFF1A\u7ED3\u6784\u5316\u67E5\u8BE2\u8BED\u8A00\uFF08Structured Query Language\uFF09 \u4E13\u95E8\u7528\u6765\u4E0E\u6570\u636E\u5E93\u901A\u4FE1\u7684\u8BED\u8A00\u3002</li></ul><h3 id="_1-3-sql\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#_1-3-sql\u5206\u7C7B" aria-hidden="true">#</a> 1.3 SQL\u5206\u7C7B</h3><p>SQL\u8BED\u8A00\u5728<strong>\u529F\u80FD</strong>\u4E0A\u4E3B\u8981\u5206\u4E3A\u5982\u4E0B3\u5927\u7C7B\uFF1A</p><ul><li><p><code>DDL</code>\uFF1A\u6570\u636E\u5B9A\u4E49\u8BED\u8A00\u3002\u8FD9\u4E9B\u8BED\u53E5\u5B9A\u4E49\u4E86\u4E0D\u540C\u7684\u6570\u636E\u5E93\u3001\u8868\u3001\u89C6\u56FE\u3001\u7D22 \u5F15\u7B49\u6570\u636E\u5E93\u5BF9\u8C61\uFF0C\u8FD8\u53EF\u4EE5\u7528\u6765\u521B\u5EFA\u3001\u5220\u9664\u3001\u4FEE\u6539\u6570\u636E\u5E93\u548C\u6570\u636E\u8868\u7684\u7ED3\u6784\u3002</p><p>\u4E3B\u8981\u7684\u8BED\u53E5\u5173\u952E\u5B57\u5305\u62EC <strong>CREATE</strong> \u3001 <strong>DROP</strong> \u3001 <strong>ALTER</strong>\u3001<strong>TURNCATE</strong> \u7B49\u3002</p></li><li><p><code>DML</code>\uFF1A\u6570\u636E\u64CD\u4F5C\u8BED\u8A00\u3002\u7528\u4E8E\u6DFB\u52A0\u3001\u5220\u9664\u3001\u66F4\u65B0\u548C\u67E5\u8BE2\u6570\u636E\u5E93\u8BB0 \u5F55\uFF0C\u5E76\u68C0\u67E5\u6570\u636E\u5B8C\u6574\u6027\u3002</p><p>\u4E3B\u8981\u7684\u8BED\u53E5\u5173\u952E\u5B57\u5305\u62EC <strong>INSERT</strong> \u3001 <strong>DELETE</strong> \u3001 <strong>UPDATE</strong> \u3001 <strong>SELECT</strong> \u7B49\u3002 SELECT\u662FSQL\u8BED\u8A00\u7684\u57FA\u7840\uFF0C\u6700\u4E3A\u91CD\u8981\u3002</p></li><li><p><code>DCL</code>\uFF1A\u6570\u636E\u63A7\u5236\u8BED\u8A00\u3002\u7528\u4E8E\u5B9A\u4E49\u6570\u636E\u5E93\u3001\u8868\u3001\u5B57\u6BB5\u3001\u7528\u6237\u7684\u8BBF\u95EE\u6743\u9650\u548C \u5B89\u5168\u7EA7\u522B\u3002</p><p>\u4E3B\u8981\u7684\u8BED\u53E5\u5173\u952E\u5B57\u5305\u62EC <strong>GRANT</strong> \uFF08\u8D4B\u4E88\u6743\u9650\uFF09\u3001 <strong>REVOKE</strong>\uFF08\u56DE\u6536\u6743\u9650\uFF09\u3001 <strong>COMMIT</strong> \u3001 <strong>ROLLBACK</strong> \u3001 <strong>SAVEPOINT</strong> \u7B49\u3002</p></li></ul><h3 id="_1-4-mysql\u7279\u70B9" tabindex="-1"><a class="header-anchor" href="#_1-4-mysql\u7279\u70B9" aria-hidden="true">#</a> 1.4 MySQL\u7279\u70B9</h3><ul><li>\u5F00\u653E\u6E90\u4EE3\u7801\uFF0C\u4F7F\u7528\u6210\u672C\u4F4E\u3002</li><li>\u6027\u80FD\u5353\u8D8A\uFF0C\u670D\u52A1\u7A33\u5B9A\u3002</li><li>\u8F6F\u4EF6\u4F53\u79EF\u5C0F\uFF0C\u4F7F\u7528\u7B80\u5355\uFF0C\u5E76\u4E14\u6613\u4E8E\u7EF4\u62A4\u3002</li><li>\u5386\u53F2\u60A0\u4E45\uFF0C\u793E\u533A\u7528\u6237\u975E\u5E38\u6D3B\u8DC3\uFF0C\u9047\u5230\u95EE\u9898\u53EF\u4EE5\u5BFB\u6C42\u5E2E\u52A9\u3002</li><li>\u8BB8\u591A\u4E92\u8054\u7F51\u516C\u53F8\u5728\u7528\uFF0C\u7ECF\u8FC7\u4E86\u65F6\u95F4\u7684\u9A8C\u8BC1\u3002</li></ul><h3 id="_1-5-oracle-vs-mysql" tabindex="-1"><a class="header-anchor" href="#_1-5-oracle-vs-mysql" aria-hidden="true">#</a> 1.5 Oracle vs MySQL</h3><ul><li>Oracle \u66F4\u9002\u5408\u5927\u578B\u8DE8\u56FD\u4F01\u4E1A\u7684\u4F7F\u7528\uFF0C\u56E0\u4E3A\u4ED6\u4EEC\u5BF9\u8D39\u7528\u4E0D\u654F\u611F\uFF0C\u4F46\u662F\u5BF9\u6027\u80FD\u8981\u6C42\u4EE5\u53CA\u5B89\u5168\u6027\u6709\u66F4\u9AD8\u7684\u8981 \u6C42\u3002</li><li>MySQL \u7531\u4E8E\u5176\u4F53\u79EF\u5C0F\u3001\u901F\u5EA6\u5FEB\u3001\u603B\u4F53\u62E5\u6709\u6210\u672C\u4F4E\uFF0C\u53EF\u5904\u7406\u4E0A\u5343\u4E07\u6761\u8BB0\u5F55\u7684\u5927\u578B\u6570\u636E\u5E93\uFF0C\u5C24\u5176\u662F\u5F00\u653E\u6E90\u7801 \u8FD9\u4E00\u7279\u70B9\uFF0C\u4F7F\u5F97\u5F88\u591A\u4E92\u8054\u7F51\u516C\u53F8\u3001\u4E2D\u5C0F\u578B\u7F51\u7AD9\u9009\u62E9\u4E86MySQL\u4F5C\u4E3A\u7F51\u7AD9\u6570\u636E\u5E93</li></ul><h2 id="_2-\u5173\u7CFB\u578B\u6570\u636E\u5E93\u4E0E\u975E\u5173\u7CFB\u578B\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_2-\u5173\u7CFB\u578B\u6570\u636E\u5E93\u4E0E\u975E\u5173\u7CFB\u578B\u6570\u636E\u5E93" aria-hidden="true">#</a> 2 \u5173\u7CFB\u578B\u6570\u636E\u5E93\u4E0E\u975E\u5173\u7CFB\u578B\u6570\u636E\u5E93</h2><h3 id="_2-1-\u5173\u7CFB\u578B\u6570\u636E\u5E93rdbms" tabindex="-1"><a class="header-anchor" href="#_2-1-\u5173\u7CFB\u578B\u6570\u636E\u5E93rdbms" aria-hidden="true">#</a> 2.1 \u5173\u7CFB\u578B\u6570\u636E\u5E93RDBMS</h3><blockquote><p>\u5B9A\u4E49</p></blockquote><p>\u5173\u7CFB\u578B\u6570\u636E\u5E93\u6A21\u578B\u662F\u628A\u590D\u6742\u7684\u6570\u636E\u7ED3\u6784\u5F52\u7ED3\u4E3A\u7B80\u5355\u7684 \u4E8C\u5143\u5173\u7CFB \uFF08\u5373\u4E8C\u7EF4\u8868\u683C\u5F62\u5F0F\uFF09\u3002</p><ul><li>\u5173\u7CFB\u578B\u6570\u636E\u5E93\u4EE5 <strong>\u884C(row)</strong> \u548C <strong>\u5217(column)</strong> \u7684\u5F62\u5F0F\u5B58\u50A8\u6570\u636E\uFF0C\u4EE5\u4FBF\u4E8E\u7528\u6237\u7406\u89E3\u3002\u8FD9\u4E00\u7CFB\u5217\u7684\u884C\u548C\u5217\u88AB\u79F0\u4E3A <strong>\u8868(table)</strong> \uFF0C\u4E00\u7EC4\u8868\u7EC4\u6210\u4E86\u4E00\u4E2A<strong>\u5E93(database)</strong>\u3002</li><li>\u8868\u4E0E\u8868\u4E4B\u95F4\u7684\u6570\u636E\u8BB0\u5F55\u6709<strong>\u5173\u7CFB(relationship)</strong>\u3002\u73B0\u5B9E\u4E16\u754C\u4E2D\u7684\u5404\u79CD\u5B9E\u4F53\u4EE5\u53CA\u5B9E\u4F53\u4E4B\u95F4\u7684\u5404\u79CD\u8054\u7CFB\u5747\u7528 <strong>\u5173\u7CFB\u6A21\u578B</strong> \u6765\u8868\u793A\u3002<strong>\u5173\u7CFB\u578B\u6570\u636E\u5E93</strong>\uFF0C\u5C31\u662F\u5EFA\u7ACB\u5728\u5173\u7CFB\u6A21\u578B\u57FA\u7840\u4E0A\u7684\u6570\u636E\u5E93</li></ul><blockquote><p>\u4F18\u52BF</p></blockquote><ul><li><strong>\u590D\u6742\u67E5\u8BE2</strong>\uFF1A \u53EF\u4EE5\u7528SQL\u8BED\u53E5\u65B9\u4FBF\u7684\u5728\u4E00\u4E2A\u8868\u4EE5\u53CA\u591A\u4E2A\u8868\u4E4B\u95F4\u505A\u975E\u5E38\u590D\u6742\u7684\u6570\u636E\u67E5\u8BE2\u3002</li><li><strong>\u4E8B\u52A1\u652F\u6301</strong>\uFF1A \u4F7F\u5F97\u5BF9\u4E8E\u5B89\u5168\u6027\u80FD\u5F88\u9AD8\u7684\u6570\u636E\u8BBF\u95EE\u8981\u6C42\u5F97\u4EE5\u5B9E\u73B0\u3002</li></ul><h3 id="_2-2-\u975E\u5173\u7CFB\u578B\u6570\u636E\u5E93nosql" tabindex="-1"><a class="header-anchor" href="#_2-2-\u975E\u5173\u7CFB\u578B\u6570\u636E\u5E93nosql" aria-hidden="true">#</a> 2.2 \u975E\u5173\u7CFB\u578B\u6570\u636E\u5E93NoSQL</h3><blockquote><p>\u5B9A\u4E49</p></blockquote><p><strong>\u975E\u5173\u7CFB\u578B\u6570\u636E\u5E93</strong>\uFF0C\u53EF\u770B\u6210\u4F20\u7EDF\u5173\u7CFB\u578B\u6570\u636E\u5E93\u7684\u529F\u80FD <strong>\u9609\u5272\u7248\u672C</strong> \uFF0C\u57FA\u4E8E\u952E\u503C\u5BF9\u5B58\u50A8\u6570\u636E\uFF0C\u4E0D\u9700\u8981\u7ECF\u8FC7SQL\u5C42 \u7684\u89E3\u6790\uFF0C <strong>\u6027\u80FD\u975E\u5E38\u9AD8</strong> \u3002\u540C\u65F6\uFF0C\u901A\u8FC7\u51CF\u5C11\u4E0D\u5E38\u7528\u7684\u529F\u80FD\uFF0C\u8FDB\u4E00\u6B65\u63D0\u9AD8\u6027\u80FD\u3002</p><blockquote><p>\u5206\u7C7B</p></blockquote><ul><li><strong>\u952E\u503C\u578B\u6570\u636E\u5E93</strong><ul><li>\u5B9A\u4E49\uFF1A\u952E\u503C\u578B\u6570\u636E\u5E93\u901A\u8FC7 Key-Value \u952E\u503C\u7684\u65B9\u5F0F\u6765\u5B58\u50A8\u6570\u636E\uFF0C\u5176\u4E2D Key \u548C Value \u53EF\u4EE5\u662F\u7B80\u5355\u7684\u5BF9\u8C61\uFF0C\u4E5F\u53EF\u4EE5\u662F\u590D\u6742\u7684\u5BF9\u8C61\u3002Key \u4F5C\u4E3A\u552F\u4E00\u7684\u6807\u8BC6\u7B26</li><li>\u4F18\u70B9\uFF1A\u67E5\u627E\u901F\u5EA6\u5FEB</li><li>\u7F3A\u70B9\uFF1A\u65E0\u6CD5 \u50CF\u5173\u7CFB\u578B\u6570\u636E\u5E93\u4E00\u6837\u4F7F\u7528\u6761\u4EF6\u8FC7\u6EE4\uFF08\u6BD4\u5982 WHERE\uFF09\uFF0C\u5982\u679C\u4F60\u4E0D\u77E5\u9053\u53BB\u54EA\u91CC\u627E\u6570\u636E\uFF0C\u5C31\u8981\u904D\u5386\u6240\u6709\u7684\u952E\uFF0C \u8FD9\u5C31\u4F1A\u6D88\u8017\u5927\u91CF\u7684\u8BA1\u7B97</li><li>\u4F7F\u7528\u573A\u666F\uFF1A\u5185\u5B58\u7F13\u5B58</li><li>\u4E3E\u4F8B\uFF1ARedis</li></ul></li><li><strong>\u6587\u6863\u578B\u6570\u636E\u5E93</strong><ul><li>\u5B9A\u4E49\uFF1A\u5728\u6570\u636E\u5E93\u4E2D\u6587\u6863\u4F5C\u4E3A\u5904\u7406\u4FE1\u606F\u7684\u57FA\u672C\u5355\u4F4D\uFF0C \u4E00\u4E2A\u6587\u6863\u5C31\u76F8\u5F53\u4E8E\u4E00\u6761\u8BB0\u5F55\u3002\u6587\u6863\u6570\u636E\u5E93\u6240\u5B58\u653E\u7684\u6587\u6863\uFF0C\u5C31\u76F8\u5F53\u4E8E\u952E\u503C\u6570\u636E\u5E93\u6240\u5B58\u653E\u7684\u201C\u503C\u201D\u3002</li><li>\u4F7F\u7528\u573A\u666F\uFF1A\u5B58\u653E\u5E76\u83B7\u53D6\u6587\u6863\uFF0C\u53EF\u4EE5\u662FXML\u3001JSON\u7B49\u683C\u5F0F</li><li>\u4E3E\u4F8B\uFF1AMongoDB</li></ul></li><li><strong>\u641C\u7D22\u5F15\u64CE\u6570\u636E\u5E93</strong><ul><li>\u5B9A\u4E49\uFF1A\u641C\u7D22\u5F15\u64CE\u6570\u636E\u5E93\u662F\u5E94\u7528\u5728\u641C\u7D22\u5F15\u64CE\u9886\u57DF\u7684\u6570\u636E\u5B58\u50A8\u5F62\u5F0F\uFF0C\u7531\u4E8E\u641C\u7D22\u5F15\u64CE\u4F1A\u722C\u53D6\u5927\u91CF\u7684\u6570\u636E\uFF0C\u5E76\u4EE5\u7279\u5B9A\u7684\u683C\u5F0F\u8FDB\u884C\u5B58\u50A8\uFF0C\u8FD9\u6837\u5728\u68C0 \u7D22\u7684\u65F6\u5019\u624D\u80FD\u4FDD\u8BC1\u6027\u80FD\u6700\u4F18</li><li>\u4F7F\u7528\u573A\u666F\uFF1A\u641C\u7D22\u5F15\u64CE\u9886\u57DF</li><li>\u4E3E\u4F8B\uFF1ASolr\u3001Elasticsearch\u3001Splunk</li></ul></li><li><strong>\u5217\u5F0F\u6570\u636E\u5E93</strong><ul><li>\u5B9A\u4E49\uFF1A\u5217\u5F0F\u6570\u636E\u5E93\u662F\u5C06\u6570\u636E\u6309\u7167\u5217\u5B58\u50A8\u5230\u6570\u636E\u5E93\u4E2D</li><li>\u4F18\u70B9\uFF1A\u53EF\u4EE5\u5927\u91CF\u964D\u4F4E\u7CFB\u7EDF\u7684 I/O</li><li>\u7F3A\u70B9\uFF1A\u529F\u80FD\u76F8\u5BF9\u884C\u5F0F\u6570\u636E\u5E93\u6709\u9650</li><li>\u4F7F\u7528\u573A\u666F\uFF1A\u5206\u5E03\u5F0F\u6587\u4EF6\u7CFB\u7EDF</li><li>\u4E3E\u4F8B\uFF1AHBase</li></ul></li><li><strong>\u56FE\u5F62\u6570\u636E\u5E93</strong>\uFF1A <ul><li>\u5B9A\u4E49\uFF1A\u662F\u4E00\u79CD\u5B58\u50A8\u56FE\u5F62\u5173\u7CFB\u7684\u6570\u636E\u5E93\u3002\u5B83\u5229\u7528\u4E86\u56FE\u8FD9\u79CD\u6570\u636E\u7ED3\u6784\u5B58\u50A8\u4E86\u5B9E\u4F53\uFF08\u5BF9\u8C61\uFF09 \u4E4B\u95F4\u7684\u5173\u7CFB</li><li>\u4F18\u70B9\uFF1A\u80FD\u9AD8\u6548\u5730\u89E3\u51B3\u590D\u6742\u7684\u5173\u7CFB\u95EE\u9898</li><li>\u4F7F\u7528\u573A\u666F\uFF1A\u5B58\u50A8\u590D\u6742\u7684\u5B9E\u4F53\u5173\u7CFB\uFF0C\u5982\u793E\u4EA4\u7F51\u7EDC\u4E2D\u4EBA\u4E0E\u4EBA\u7684\u5173\u7CFB</li><li>\u4E3E\u4F8B\uFF1ANeo4J\u3001InfoGrid</li></ul></li></ul><h2 id="_3-\u5173\u7CFB\u578B\u6570\u636E\u5E93\u8BBE\u8BA1\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-\u5173\u7CFB\u578B\u6570\u636E\u5E93\u8BBE\u8BA1\u539F\u5219" aria-hidden="true">#</a> 3 \u5173\u7CFB\u578B\u6570\u636E\u5E93\u8BBE\u8BA1\u539F\u5219</h2><blockquote><p>\u524D\u8A00</p></blockquote><ul><li>\u5173\u7CFB\u578B\u6570\u636E\u5E93\u7684\u5178\u578B\u6570\u636E\u7ED3\u6784\u5C31\u662F <strong>\u6570\u636E\u8868</strong> \uFF0C\u8FD9\u4E9B\u6570\u636E\u8868\u7684\u7EC4\u6210\u90FD\u662F<strong>\u7ED3\u6784\u5316\u7684\uFF08Structured\uFF09</strong>\u3002</li><li>\u5C06\u6570\u636E\u653E\u5230\u8868\u4E2D\uFF0C\u8868\u518D\u653E\u5230\u5E93\u4E2D\u3002</li><li>\u4E00\u4E2A\u6570\u636E\u5E93\u4E2D\u53EF\u4EE5\u6709\u591A\u4E2A\u8868\uFF0C\u6BCF\u4E2A\u8868\u90FD\u6709\u4E00\u4E2A\u540D\u5B57\uFF0C\u7528\u6765\u6807\u8BC6\u81EA\u5DF1\u3002</li><li>\u8868\u540D\u5177\u6709\u552F\u4E00\u6027\u3002 \u8868\u5177\u6709\u4E00\u4E9B\u7279\u6027\uFF0C\u8FD9\u4E9B\u7279\u6027\u5B9A\u4E49\u4E86\u6570\u636E\u5728\u8868\u4E2D\u5982\u4F55\u5B58\u50A8\uFF0C\u7C7B\u4F3CJava\u548CPython\u4E2D \u201C\u7C7B\u201D\u7684\u8BBE\u8BA1\u3002</li></ul><h3 id="_3-1-\u8868\u3001\u8BB0\u5F55\u3001\u5B57\u6BB5" tabindex="-1"><a class="header-anchor" href="#_3-1-\u8868\u3001\u8BB0\u5F55\u3001\u5B57\u6BB5" aria-hidden="true">#</a> 3.1 \u8868\u3001\u8BB0\u5F55\u3001\u5B57\u6BB5</h3><ul><li><strong>E-R</strong>\uFF08entity-relationship\uFF0C\u5B9E\u4F53-\u8054\u7CFB\uFF09\u6A21\u578B\u4E2D\u6709\u4E09\u4E2A\u4E3B\u8981\u6982\u5FF5\u662F\uFF1A <code>\u5B9E\u4F53\u96C6</code> \u3001 <code>\u5C5E\u6027</code> \u3001 <code>\u8054\u7CFB\u96C6 </code>\u3002</li><li>\u4E00\u4E2A\u5B9E\u4F53\u96C6\uFF08class\uFF09\u5BF9\u5E94\u4E8E\u6570\u636E\u5E93\u4E2D\u7684\u4E00\u4E2A<strong>\u8868\uFF08table</strong>\uFF09\uFF0C\u4E00\u4E2A\u5B9E\u4F53\uFF08instance\uFF09\u5219\u5BF9\u5E94\u4E8E\u6570\u636E\u5E93\u8868 \u4E2D\u7684\u4E00<strong>\u884C\uFF08row\uFF09</strong>\uFF0C\u4E5F\u79F0\u4E3A\u4E00\u6761<strong>\u8BB0\u5F55\uFF08record\uFF09</strong>\u3002\u4E00\u4E2A\u5C5E\u6027\uFF08attribute\uFF09\u5BF9\u5E94\u4E8E\u6570\u636E\u5E93\u8868\u4E2D\u7684\u4E00<strong>\u5217 \uFF08column\uFF09</strong>\uFF0C\u4E5F\u79F0\u4E3A\u4E00\u4E2A<strong>\u5B57\u6BB5\uFF08field\uFF09</strong>\u3002</li><li>ORM\u601D\u60F3 (Object Relational Mapping)\u4F53\u73B0\uFF1A <ul><li>\u6570\u636E\u5E93\u4E2D\u7684\u4E00\u4E2A\u8868 &lt;---&gt; Java\u6216Python\u4E2D\u7684\u4E00\u4E2A\u7C7B</li><li>\u8868\u4E2D\u7684\u4E00\u6761\u6570\u636E &lt;---&gt; \u7C7B\u4E2D\u7684\u4E00\u4E2A\u5BF9\u8C61\uFF08\u6216\u5B9E\u4F8B\uFF09</li><li>\u8868\u4E2D\u7684\u4E00\u4E2A\u5217 &lt;----&gt; \u7C7B\u4E2D\u7684\u4E00\u4E2A\u5B57\u6BB5\u3001\u5C5E\u6027(field)</li></ul></li></ul><h3 id="_3-2-\u8868\u7684\u5173\u8054\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_3-2-\u8868\u7684\u5173\u8054\u5173\u7CFB" aria-hidden="true">#</a> 3.2 \u8868\u7684\u5173\u8054\u5173\u7CFB</h3><blockquote><p>\u6982\u8FF0</p></blockquote><ul><li>\u8868\u4E0E\u8868\u4E4B\u95F4\u7684\u6570\u636E\u8BB0\u5F55\u6709\u5173\u7CFB(relationship)\u3002\u73B0\u5B9E\u4E16\u754C\u4E2D\u7684\u5404\u79CD\u5B9E\u4F53\u4EE5\u53CA\u5B9E\u4F53\u4E4B\u95F4\u7684\u5404\u79CD\u8054\u7CFB\u5747\u7528 \u5173\u7CFB\u6A21\u578B\u6765\u8868\u793A\u3002</li><li>\u5206\u7C7B\uFF1A\u4E00\u5BF9\u4E00\u5173\u8054\u3001\u4E00\u5BF9\u591A\u5173\u8054\u3001\u591A\u5BF9\u591A\u5173\u8054\u3001\u81EA\u6211\u5F15\u7528</li></ul><blockquote><p>\u4E00\u5BF9\u4E00\u5173\u8054\uFF08one-to-one\uFF09</p></blockquote><ul><li>\u5728\u5B9E\u9645\u7684\u5F00\u53D1\u4E2D\u5E94\u7528\u4E0D\u591A\uFF0C\u56E0\u4E3A\u4E00\u5BF9\u4E00\u53EF\u4EE5\u521B\u5EFA\u6210\u4E00\u5F20\u8868\u3002</li><li>\u4E3E\u4F8B\uFF1A\u8BBE\u8BA1 <code>\u5B66\u751F\u8868</code> \uFF1A\u5B66\u53F7\u3001\u59D3\u540D\u3001\u624B\u673A\u53F7\u7801\u3001\u73ED\u7EA7\u3001\u7CFB\u522B\u3001\u8EAB\u4EFD\u8BC1\u53F7\u7801\u3001\u5BB6\u5EAD\u4F4F\u5740\u3001\u7C4D\u8D2F\u3001\u7D27\u6025 \u8054\u7CFB\u4EBA\u3001... <ul><li>\u62C6\u4E3A\u4E24\u4E2A\u8868\uFF1A\u4E24\u4E2A\u8868\u7684\u8BB0\u5F55\u662F\u4E00\u4E00\u5BF9\u5E94\u5173\u7CFB\u3002</li><li>\u57FA\u7840\u4FE1\u606F\u8868 \uFF08\u5E38\u7528\u4FE1\u606F\uFF09\uFF1A\u5B66\u53F7\u3001\u59D3\u540D\u3001\u624B\u673A\u53F7\u7801\u3001\u73ED\u7EA7\u3001\u7CFB\u522B</li><li>\u6863\u6848\u4FE1\u606F\u8868 \uFF08\u4E0D\u5E38\u7528\u4FE1\u606F\uFF09\uFF1A\u5B66\u53F7\u3001\u8EAB\u4EFD\u8BC1\u53F7\u7801\u3001\u5BB6\u5EAD\u4F4F\u5740\u3001\u7C4D\u8D2F\u3001\u7D27\u6025\u8054\u7CFB\u4EBA\u3001...</li></ul></li><li>==\u4E24\u79CD\u5EFA\u8868\u539F\u5219==\uFF1A <ul><li>\u5916\u952E\u552F\u4E00\uFF1A\u4E3B\u8868\u7684\u4E3B\u952E\u548C\u4ECE\u8868\u7684\u5916\u952E\uFF08\u552F\u4E00\uFF09\uFF0C\u5F62\u6210\u4E3B\u5916\u952E\u5173\u7CFB\uFF0C\u5916\u952E\u552F\u4E00\u3002</li><li>\u5916\u952E\u662F\u4E3B\u952E\uFF1A\u4E3B\u8868\u7684\u4E3B\u952E\u548C\u4ECE\u8868\u7684\u4E3B\u952E\uFF0C\u5F62\u6210\u4E3B\u5916\u952E\u5173\u7CFB\u3002</li></ul></li></ul><blockquote><p>\u4E00\u5BF9\u591A\u5173\u7CFB\uFF08one-to-many\uFF09</p></blockquote><ul><li>\u5E38\u89C1\u5B9E\u4F8B\u573A\u666F\uFF1A \u5BA2\u6237\u8868\u548C\u8BA2\u5355\u8868 \uFF0C \u5206\u7C7B\u8868\u548C\u5546\u54C1\u8868 \uFF0C \u90E8\u95E8\u8868\u548C\u5458\u5DE5\u8868 \u3002</li><li>\u4E3E\u4F8B\uFF1A \u5458\u5DE5\u8868\uFF1A\u7F16\u53F7\u3001\u59D3\u540D\u3001...\u3001\u6240\u5C5E\u90E8\u95E8 \u90E8\u95E8\u8868\uFF1A\u7F16\u53F7\u3001\u540D\u79F0\u3001\u7B80\u4ECB</li><li>==\u4E00\u5BF9\u591A\u5EFA\u8868\u539F\u5219==\uFF1A\u5728\u4ECE\u8868(\u591A\u65B9)\u521B\u5EFA\u4E00\u4E2A\u5B57\u6BB5\uFF0C\u5B57\u6BB5\u4F5C\u4E3A\u5916\u952E\u6307\u5411\u4E3B\u8868(\u4E00\u65B9)\u7684\u4E3B\u952E</li></ul><blockquote><p>\u591A\u5BF9\u591A\uFF08many-to-many\uFF09</p></blockquote><ul><li>\u5B9A\u4E49\uFF1A\u8981\u8868\u793A\u591A\u5BF9\u591A\u5173\u7CFB\uFF0C\u5FC5\u987B\u521B\u5EFA\u7B2C\u4E09\u4E2A\u8868\uFF0C\u8BE5\u8868\u901A\u5E38\u79F0\u4E3A <strong>\u8054\u63A5\u8868</strong> \uFF0C\u5B83\u5C06\u591A\u5BF9\u591A\u5173\u7CFB\u5212\u5206\u4E3A\u4E24\u4E2A\u4E00\u5BF9\u591A\u5173 \u7CFB\u3002\u5C06\u8FD9\u4E24\u4E2A\u8868\u7684\u4E3B\u952E\u90FD\u63D2\u5165\u5230\u7B2C\u4E09\u4E2A\u8868\u4E2D\u3002</li><li>\u4E3E\u4F8B\uFF1A <ul><li>\u5B66\u751F\u548C\u8BFE\u7A0B\uFF08\u4E00\u4E2A\u5B66\u751F\u53EF\u4EE5\u9009\u591A\u95E8\u8BFE\u7A0B\uFF0C\u4E00\u4E2A\u8BFE\u7A0B\u53EF\u4EE5\u88AB\u591A\u540D\u5B66\u751F\u9009\u62E9\uFF09\uFF1A\u5B66\u751F\u8868\u3001\u8BFE\u7A0B\u8868\u3001\u5B66\u751F\u9009\u8BFE\u4FE1\u606F\u8868</li><li>\u4EA7\u54C1\u548C\u8BA2\u5355\uFF08\u4E00\u4E2A\u4EA7\u54C1\u53EF\u4EE5\u51FA\u73B0\u5728\u591A\u4E2A\u8BA2\u5355\u4E2D\uFF0C\u4E00\u4E2A\u8BA2\u5355\u53EF\u4EE5\u6709\u591A\u4E2A\u4EA7\u54C1\uFF09\uFF1A\u4EA7\u54C1\u8868\u3001\u8BA2\u5355\u8868\u3001\u8BA2\u5355\u660E\u7EC6\u8868</li></ul></li></ul><blockquote><p>\u81EA\u6211\u5F15\u7528(Self reference)</p></blockquote><ul><li>\u4E3E\u4F8B\uFF1A\u5458\u5DE5\u8868\u4E2D\u5C5E\u6027\uFF1A\u5458\u5DE5\u7F16\u53F7\uFF0C\u5458\u5DE5\u59D3\u540D\uFF0C\u5458\u5DE5\u4E3B\u7BA1\u7F16\u53F7\uFF0C...\u3002\u5176\u4E2D\u5458\u5DE5\u4E3B\u7BA1\u7F16\u53F7\u5C31\u662F\u5458\u5DE5\u4E3B\u7BA1\u7684\u5458\u5DE5\u7F16\u53F7\u3002\u8868\u4E2D\u5B57\u6BB5\u6307\u5411\u4E86\u53E6\u4E00\u4E2A\u5B57\u6BB5\u3002</li></ul><h2 id="_4-mysql\u7684\u767B\u5F55" tabindex="-1"><a class="header-anchor" href="#_4-mysql\u7684\u767B\u5F55" aria-hidden="true">#</a> 4 MySQL\u7684\u767B\u5F55</h2><h3 id="_4-1-\u670D\u52A1\u7684\u542F\u52A8\u4E0E\u505C\u6B62" tabindex="-1"><a class="header-anchor" href="#_4-1-\u670D\u52A1\u7684\u542F\u52A8\u4E0E\u505C\u6B62" aria-hidden="true">#</a> 4.1 \u670D\u52A1\u7684\u542F\u52A8\u4E0E\u505C\u6B62</h3><ul><li><p>\u65B9\u5F0F1\uFF1A\u4F7F\u7528\u56FE\u5F62\u754C\u9762\u5DE5\u5177</p><ul><li>\u6B65\u9AA41\uFF1A\u6253\u5F00windows\u670D\u52A1</li><li>\u6B65\u9AA42\uFF1A\u627E\u5230MySQL\uFF08\u70B9\u51FB\u9F20\u6807\u53F3\u952E\uFF09\u2192 \u542F\u52A8\u6216\u505C\u6B62\uFF08\u70B9\u51FB\uFF09</li></ul></li><li><p>\u65B9\u5F0F2\uFF1A\u4F7F\u7528\u547D\u4EE4\u884C\u5DE5\u5177\uFF08\u9700\u8981\u7BA1\u7406\u5458\u6743\u9650\uFF09</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u542F\u52A8 MySQL \u670D\u52A1\u547D\u4EE4\uFF1A</span>
net start MySQL\u670D\u52A1\u540D
<span class="token comment"># \u505C\u6B62 MySQL \u670D\u52A1\u547D\u4EE4\uFF1A</span>
net stop MySQL\u670D\u52A1\u540D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul><h3 id="_4-2-\u4F7F\u7528\u547D\u4EE4\u884C\u767B\u5F55mysql" tabindex="-1"><a class="header-anchor" href="#_4-2-\u4F7F\u7528\u547D\u4EE4\u884C\u767B\u5F55mysql" aria-hidden="true">#</a> 4.2 \u4F7F\u7528\u547D\u4EE4\u884C\u767B\u5F55MySQL</h3><blockquote><p>\u767B\u5F55MySQL</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mysql -h\u4E3B\u673A\u540D -P\u7AEF\u53E3\u53F7 -u\u7528\u6237\u540D -p\u5BC6\u7801
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u8FDE\u63A5\u6210\u529F\u540E\uFF0C\u6709\u5173\u4E8EMySQL Server\u670D\u52A1\u7248\u672C\u7684\u4FE1\u606F\uFF0C\u8FD8\u6709\u7B2C\u51E0\u6B21\u8FDE\u63A5\u7684id\u6807\u8BC6</p><blockquote><p>\u67E5\u770BMySQL Server\u670D\u52A1\u7248\u672C\u4FE1\u606F</p></blockquote><ul><li><p>\u767B\u5F55\u524D\uFF1A</p><p><code>c:\\&gt; mysql -V</code>\u6216<code>c:\\&gt; mysql --version</code></p></li><li><p>\u767B\u5F55\u540E</p><p><code>mysql&gt; select version();</code></p></li></ul><blockquote><p>\u9000\u51FA\u767B\u5F55</p></blockquote><p><code>exit</code>\u6216<code>quit</code></p><h2 id="_5-\u4E00\u4E9B\u5E38\u7528\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_5-\u4E00\u4E9B\u5E38\u7528\u547D\u4EE4" aria-hidden="true">#</a> 5 \u4E00\u4E9B\u5E38\u7528\u547D\u4EE4</h2><h3 id="_5-1-\u67E5\u770B\u6240\u6709\u7684\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_5-1-\u67E5\u770B\u6240\u6709\u7684\u6570\u636E\u5E93" aria-hidden="true">#</a> 5.1 \u67E5\u770B\u6240\u6709\u7684\u6570\u636E\u5E93</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>show databases;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>\u201Cinformation_schema\u201D\u662F MySQL \u7CFB\u7EDF\u81EA\u5E26\u7684\u6570\u636E\u5E93\uFF0C\u4E3B\u8981\u4FDD\u5B58 MySQL \u6570\u636E\u5E93\u670D\u52A1\u5668\u7684\u7CFB\u7EDF\u4FE1\u606F\uFF0C \u6BD4\u5982\u6570\u636E\u5E93\u7684\u540D\u79F0\u3001\u6570\u636E\u8868\u7684\u540D\u79F0\u3001\u5B57\u6BB5\u540D\u79F0\u3001\u5B58\u53D6\u6743\u9650\u3001\u6570\u636E\u6587\u4EF6 \u6240\u5728\u7684\u6587\u4EF6\u5939\u548C\u7CFB\u7EDF\u4F7F\u7528\u7684 \u6587\u4EF6\u5939\uFF0C\u7B49\u7B49</li><li>\u201Cperformance_schema\u201D\u662F MySQL \u7CFB\u7EDF\u81EA\u5E26\u7684\u6570\u636E\u5E93\uFF0C\u53EF\u4EE5\u7528\u6765\u76D1\u63A7 MySQL \u7684\u5404\u7C7B\u6027\u80FD\u6307\u6807\u3002</li><li>\u201Csys\u201D\u6570\u636E\u5E93\u662F MySQL \u7CFB\u7EDF\u81EA\u5E26\u7684\u6570\u636E\u5E93\uFF0C\u4E3B\u8981\u4F5C\u7528\u662F\u4EE5\u4E00\u79CD\u66F4\u5BB9\u6613\u88AB\u7406\u89E3\u7684\u65B9\u5F0F\u5C55\u793A MySQL \u6570\u636E \u5E93\u670D\u52A1\u5668\u7684\u5404\u7C7B\u6027\u80FD\u6307\u6807\uFF0C\u5E2E\u52A9\u7CFB\u7EDF\u7BA1\u7406\u5458\u548C\u5F00\u53D1\u4EBA\u5458\u76D1\u63A7 MySQL \u7684\u6280\u672F\u6027\u80FD\u3002</li><li>\u201Cmysql\u201D\u6570\u636E\u5E93\u4FDD\u5B58\u4E86 MySQL \u6570\u636E\u5E93\u670D\u52A1\u5668\u8FD0\u884C\u65F6\u9700\u8981\u7684\u7CFB\u7EDF\u4FE1\u606F\uFF0C\u6BD4\u5982\u6570\u636E\u6587\u4EF6\u5939\u3001\u5F53\u524D\u4F7F\u7528\u7684 \u5B57\u7B26\u96C6\u3001\u7EA6\u675F\u68C0\u67E5\u4FE1\u606F\uFF0C\u7B49\u7B49</li></ul><h3 id="_5-2-\u67E5\u770B\u5E93\u3001\u8868\u7684\u521B\u5EFA\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#_5-2-\u67E5\u770B\u5E93\u3001\u8868\u7684\u521B\u5EFA\u4FE1\u606F" aria-hidden="true">#</a> 5.2 \u67E5\u770B\u5E93\u3001\u8868\u7684\u521B\u5EFA\u4FE1\u606F</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u67E5\u770B\u5E93\u7684\u521B\u5EFA\u4FE1\u606F
show create database \u5E93\u540D;
# \u67E5\u770B\u8868\u7684\u521B\u5EFA\u4FE1\u606F
show create table \u8868\u540D\u79F0;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_5-3-\u663E\u793A\u8868\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-3-\u663E\u793A\u8868\u7ED3\u6784" aria-hidden="true">#</a> 5.3 \u663E\u793A\u8868\u7ED3\u6784</h3><p><code>describe \u8868\u540D</code>\u6216<code>desc \u8868\u540D</code></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; describe dw_project; #\u4E5F\u53EF\u4EE5\u4F7F\u7528d
+-------------+--------------+------+-----+---------+-------+
| Field       | Type         | Null | Key | Default | Extra |
+-------------+--------------+------+-----+---------+-------+
| id          | int          | NO   | PRI | NULL    |       |
| Source_Name | varchar(255) | YES  |     | NULL    |       |
| Fund_Usd    | varchar(100) | YES  |     | NULL    |       |
+-------------+--------------+------+-----+---------+-------+
3 rows in set (0.01 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_5-4-\u5206\u9875" tabindex="-1"><a class="header-anchor" href="#_5-4-\u5206\u9875" aria-hidden="true">#</a> 5.4 \u5206\u9875</h3><p><code>limit</code></p><ul><li>\u8BED\u6CD5\uFF1A <code>limit \u4F4D\u7F6E\u504F\u79FB\u91CF, \u884C\u6570</code>\uFF0C\u5176\u4E2D\u4F4D\u7F6E\u504F\u79FB\u91CF\u53EF\u7701\uFF08\u7701\u7565\u65F6\u8868\u793A\u4ECE0\u5F00\u59CB\uFF09</li><li><strong>limit\u5B57\u53E5\u5FC5\u987B\u653E\u5728select\u8BED\u53E5\u7684\u6700\u540E\uFF01</strong></li><li>==MySQL8.0\u65B0\u7279\u6027==\uFF1A<code>limit \u884C\u6570 offset \u4F4D\u7F6E\u504F\u79FB\u91CF</code> \u548C <code>limit \u4F4D\u7F6E\u504F\u79FB\u91CF, \u884C\u6570</code>\u6548\u679C\u4E00\u81F4</li><li>\u4F7F\u7528limit\u7684\u4F18\u70B9\uFF1A <ul><li>\u51CF\u5C11\u8868\u7684\u7F51\u683C\u4F20\u8F93\u91CF\uFF0C\u63D0\u5347\u67E5\u8BE2\u6548\u7387\u3002</li><li>\u5F53\u77E5\u9053\u8FD4\u56DE\u7ED3\u679C\u53EA\u67091\u6761\u65F6\uFF0C\u5C31\u53EF\u4EE5\u4F7F\u7528<code>limit 1</code>\uFF0C\u8FD9\u6837\u4E0D\u9700\u626B\u63CF\u6574\u5F20\u8868\uFF0C\u4ECE\u800C\u63D0\u5347\u6548\u7387</li></ul></li></ul><h3 id="_5-5-\u591A\u8868\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_5-5-\u591A\u8868\u67E5\u8BE2" aria-hidden="true">#</a> 5.5 \u591A\u8868\u67E5\u8BE2</h3><p><img src="`+s+`" alt="image-20230113100055254"></p><ul><li><p><code>inner join ... on</code>\u6216<code>join ... on</code>\uFF1A\u5185\u8FDE\u63A5\u3002<code>A inner join B ... on</code>\u8868\u793A\u53D6A\u548CB\u7684\u4EA4\u96C6</p></li><li><p><code>left outer join ... on</code>\u6216<code>left join ... on</code>\uFF1A\u5DE6\u5916\u8FDE\u63A5\u3002<code>A left join B ... on</code>\u8868\u793A\u53D6\u6240\u6709\u6EE1\u8DB3\u6761\u4EF6\u7684A\u4E2D\u5143\u7D20</p></li><li><p><code>right outer join ... on</code>\u6216<code>right join ... on</code>\uFF1A\u5DE6\u5916\u8FDE\u63A5\u3002<code>A right join B ... on</code>\u8868\u793A\u53D6\u6240\u6709\u6EE1\u8DB3\u6761\u4EF6\u7684B\u4E2D\u5143\u7D20</p></li><li><p><code>union</code>\u6216<code>union all</code>\uFF1A\u5408\u5E76\u67E5\u8BE2\u7ED3\u679C\u3002\u5373\u5C06\u591A\u6761select\u7684\u7ED3\u679C\u96C6\u7EC4\u5408\u6210\u4E00\u4E2A\u7ED3\u679C\u96C6\u3002</p><ul><li><p><code>union</code>\uFF1A\u8FD4\u56DE\u4E24\u4E2A\u67E5\u8BE2\u7ED3\u679C\u96C6\u7684\u5E76\u96C6\uFF0C\u5E76<strong>\u53BB\u9664\u91CD\u590D\u8BB0\u5F55</strong>\u3002</p></li><li><p><code>union all</code>\uFF1A\u8FD4\u56DE\u4E24\u4E2A\u67E5\u8BE2\u7ED3\u679C\u96C6\u7684\u5E76\u96C6\uFF0C<strong>\u4E0D\u53BB\u91CD\uFF0C\u6548\u7387\u9AD8</strong></p><p>\u5F53\u660E\u77E5\u9053\u5408\u5E76\u6570\u636E\u540E\u7684\u7ED3\u679C\u4E0D\u5B58\u5728\u91CD\u590D\u6570\u636E\uFF0C\u6216\u8005\u4E0D\u9700\u8981\u53BB\u91CD\u7684\u60C5\u51B5\u4E0B\uFF0C\u5C3D\u91CF\u4F7F\u7528<code>union all</code>\u3002</p></li></ul></li><li><p><code>natural join</code>\uFF1A\u81EA\u7136\u8FDE\u63A5\u3002==SQL99\u65B0\u7279\u6027==\u3002\u4F1A\u81EA\u52A8\u67E5\u8BE2\u4E24\u5F20\u8868\u4E2D<strong>\u6240\u6709\u540C\u540D\u7684\u5B57\u6BB5</strong>\uFF0C\u5E76\u5BF9\u5B83\u4EEC\u8FDB\u884C<strong>\u7B49\u503C\u8FDE\u63A5</strong></p><p>\u5728SQL92\u6807\u51C6\u4E2D\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT employee_id,last_name,department_name
FROM employees e 
JOIN departments d ON e.\`department_id\` = d.\`department_id\` AND e.\`manager_id\` = d.\`manager_id\`;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u5728 SQL99 \u4E2D\u53EF\u4EE5\u5199\u6210\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT employee_id,last_name,department_name
FROM employees e 
NATURAL JOIN departments d;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p><code>join ... using(\u5B57\u6BB5\u540D)</code>\uFF1A==SQL99\u65B0\u7279\u6027==\u3002<strong>\u6307\u5B9A\u6570\u636E\u8868\u91CC\u7684\u540C\u540D\u5B57\u6BB5</strong>\u8FDB\u884C<strong>\u7B49\u503C\u8FDE\u63A5</strong>\uFF0C<strong>\u53EA\u80FD\u914D\u5408join\u4F7F\u7528</strong>\u3002</p><p>\u5728SQL92\u6807\u51C6\u4E2D\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT employee_id,last_name,department_name
FROM employees e 
JOIN departments d ON e.\`department_id\` = d.\`department_id\`;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u5728 SQL99 \u4E2D\u53EF\u4EE5\u5199\u6210\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT employee_id,last_name,department_name
FROM employees e 
JOIN departments d USING (department_id);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul><blockquote><p>\u6CE8\u610F</p></blockquote><p>\u8981<strong>\u63A7\u5236\u8FDE\u63A5\u8868\u7684\u6570\u91CF</strong> \u3002\u591A\u8868\u8FDE\u63A5\u5C31\u76F8\u5F53\u4E8E\u5D4C\u5957 for \u5FAA\u73AF\u4E00\u6837\uFF0C\u975E\u5E38\u6D88\u8017\u8D44\u6E90\uFF0C\u4F1A\u8BA9 SQL \u67E5\u8BE2\u6027\u80FD\u4E0B \u964D\u5F97\u5F88\u4E25\u91CD\uFF0C\u56E0\u6B64\u4E0D\u8981\u8FDE\u63A5\u4E0D\u5FC5\u8981\u7684\u8868\u3002</p><p>\u963F\u91CC\u5DF4\u5DF4\u300AJava\u5F00\u53D1\u624B\u518C\u300B\u4E2D\uFF0C<strong>\u8D85\u8FC7\u4E09\u4E2A\u8868\u7981\u6B62 join</strong>\u3002</p><h3 id="_5-6-\u7F16\u7801\u96C6\u8BBE\u7F6E" tabindex="-1"><a class="header-anchor" href="#_5-6-\u7F16\u7801\u96C6\u8BBE\u7F6E" aria-hidden="true">#</a> 5.6 \u7F16\u7801\u96C6\u8BBE\u7F6E</h3><p>\u5728<strong>MySQL 8.0\u7248\u672C\u4E4B\u524D</strong>\uFF0C\u9ED8\u8BA4\u5B57\u7B26\u96C6\u4E3Alatin1\uFF0Cutf8\u5B57\u7B26\u96C6\u6307\u5411\u7684\u662Futf8mb3\uFF0C\u5982\u679C\u6CA1\u6709\u4FEE\u6539\u7F16\u7801\uFF0C<strong>\u4F1A\u51FA\u73B0\u4E71\u7801\u95EE\u9898</strong>\u3002\u4F46\u662F\u4ECEMySQL 8.0 \u5F00\u59CB\uFF0C\u6570\u636E\u5E93\u7684\u9ED8\u8BA4\u7F16\u7801\u6539\u4E3A utf8mb4\uFF0C\u4ECE\u800C\u907F\u514D\u4E86\u4E71\u7801\u95EE\u9898\u3002\u56E0\u6B64\uFF0C\u6B64\u5904\u7F16\u7801\u96C6\u8BBE\u7F6E\u662F<strong>\u9488\u5BF9MySQL5.7\u7248\u672C</strong>\u3002</p><blockquote><p>\u95EE\u9898\u518D\u73B0</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; INSERT INTO t_stu VALUES(1,&#39;\u5F20\u4E09&#39;,&#39;\u7537&#39;);
ERROR 1366 (HY000): Incorrect string value: &#39;\\xD5\\xC5\\xC8\\xFD&#39; for column &#39;sname&#39; at
row 1
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>\u95EE\u9898\u89E3\u51B3</p></blockquote><ul><li><p>\u6B65\u9AA41\uFF1A\u67E5\u770B\u7F16\u7801\u547D\u4EE4</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>show variables like &#39;character_%&#39;;
show variables like &#39;collation_%&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>\u6B65\u9AA42\uFF1A\u4FEE\u6539mysql\u7684\u6570\u636E\u76EE\u5F55\u4E0B\u7684my.ini\u914D\u7F6E\u6587\u4EF6</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysql</span><span class="token punctuation">]</span></span> #\u5927\u6982\u572863\u884C\u5DE6\u53F3\uFF0C\u5728\u5176\u4E0B\u6DFB\u52A0
...
<span class="token key attr-name">default-character-set</span><span class="token punctuation">=</span><span class="token value attr-value">utf8 #\u9ED8\u8BA4\u5B57\u7B26\u96C6</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysqld</span><span class="token punctuation">]</span></span> # \u5927\u6982\u572876\u884C\u5DE6\u53F3\uFF0C\u5728\u5176\u4E0B\u6DFB\u52A0
...
<span class="token key attr-name">character-set-server</span><span class="token punctuation">=</span><span class="token value attr-value">utf8</span>
<span class="token key attr-name">collation-server</span><span class="token punctuation">=</span><span class="token value attr-value">utf8_general_ci</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li><li><p>\u6B65\u9AA43\uFF1A\u91CD\u542F\u670D\u52A1</p></li><li><p>\u6B65\u9AA44\uFF1A\u67E5\u770B\u7F16\u7801\u4FE1\u606F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; show variables like &#39;character_%&#39;;
+--------------------------+---------------------------------------------+
| Variable_name            | Value                                       |
+--------------------------+---------------------------------------------+
| character_set_client     | utf8                                        |
| character_set_connection | utf8                                        |
| character_set_database   | utf8                                        |
| character_set_filesystem | binary                                      |
| character_set_results    | utf8                                        |
| character_set_server     | utf8                                        |
| character_set_system     | utf8                                        |
| character_sets_dir       | D:\\soft\\mysql-8.0.23-winx64\\share\\charsets\\ |
+--------------------------+---------------------------------------------+
8 rows in set, 1 warning (0.03 sec)

mysql&gt; show variables like &#39;collation_%&#39;;
+----------------------+--------------------+
| Variable_name        | Value              |
+----------------------+--------------------+
| collation_connection | utf8               |
| collation_database   | utf8               |
| collation_server     | utf8               |
+----------------------+--------------------+
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></li></ul><h2 id="_6-mysql\u56FE\u5F62\u5316\u7BA1\u7406\u5DE5\u5177" tabindex="-1"><a class="header-anchor" href="#_6-mysql\u56FE\u5F62\u5316\u7BA1\u7406\u5DE5\u5177" aria-hidden="true">#</a> 6 MySQL\u56FE\u5F62\u5316\u7BA1\u7406\u5DE5\u5177</h2><h3 id="_6-1-\u5DE5\u5177\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#_6-1-\u5DE5\u5177\u5206\u7C7B" aria-hidden="true">#</a> 6.1 \u5DE5\u5177\u5206\u7C7B</h3><ul><li><p>MySQL Workbench\uFF1AMySQL \u5B98\u65B9\u63D0\u4F9B\u7684\u56FE\u5F62\u5316\u7BA1\u7406\u5DE5\u5177</p><p>\u4E0B\u8F7D\u5730\u5740\uFF1Ahttps://dev.mysql.com/downloads/workbench/</p></li><li><p>Navicat Preminum\uFF1A</p><p>\u4E0B\u8F7D\u5730\u5740\uFF1Ahttp://www.navicat.com/</p></li><li><p>SQLyog\uFF1A</p><p>\u4E0B\u8F7D\u5730 \u5740\uFF1Ahttp://www.webyog.com/</p></li></ul><h3 id="_6-2-\u5E38\u89C1\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_6-2-\u5E38\u89C1\u95EE\u9898" aria-hidden="true">#</a> 6.2 \u5E38\u89C1\u95EE\u9898</h3><blockquote><p>Authentication plugin &#39;caching_sha2_password&#39; cannot be loaded</p></blockquote><p>\u6709\u4E9B\u56FE\u5F62\u754C\u9762\u5DE5\u5177\uFF0C\u7279\u522B\u662F\u65E7\u7248\u672C\u7684\u56FE\u5F62\u754C\u9762\u5DE5\u5177\uFF0C\u5728\u8FDE\u63A5MySQL8\u65F6\u51FA\u73B0\u201CAuthentication plugin &#39;caching_sha2_password&#39; cannot be loaded\u201D\u9519\u8BEF\u3002</p><p><code>\u5206\u6790</code>:</p><p>\u51FA\u73B0\u8FD9\u4E2A\u539F\u56E0\u662FMySQL8\u4E4B\u524D\u7684\u7248\u672C\u4E2D\u52A0\u5BC6\u89C4\u5219\u662Fmysql_native_password\uFF0C\u800C\u5728MySQL8\u4E4B\u540E\uFF0C\u52A0\u5BC6\u89C4\u5219 \u662Fcaching_sha2_password\u3002</p><p><code>\u89E3\u51B3</code>:</p><ul><li><p>\u65B9\u6CD51\uFF1A\u5347\u7EA7\u56FE\u5F62\u754C\u9762\u5DE5\u5177\u7248\u672C</p></li><li><p>\u65B9\u6CD52\uFF1A\u628AMySQL8 \u7528\u6237\u767B\u5F55\u5BC6\u7801\u52A0\u5BC6\u89C4\u5219\u8FD8\u539F\u6210mysql_native_password\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u4F7F\u7528mysql\u6570\u636E\u5E93
USE mysql;
#\u4FEE\u6539&#39;root&#39;@&#39;localhost&#39;\u7528\u6237\u7684\u5BC6\u7801\u89C4\u5219\u548C\u5BC6\u7801
ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;\u5BC6\u7801&#39;;
#\u5237\u65B0\u6743\u9650
FLUSH PRIVILEGES;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul><blockquote><p>root\u7528\u6237\u5BC6\u7801\u5FD8\u8BB0--\u91CD\u7F6E\u7528\u6237\u5BC6\u7801</p></blockquote><ul><li><p>\u901A\u8FC7\u4EFB\u52A1\u7BA1\u7406\u5668\u6216\u8005\u670D\u52A1\u7BA1\u7406\uFF0C\u5173\u6389mysqld(\u670D\u52A1\u8FDB\u7A0B)</p></li><li><p>\u901A\u8FC7\u547D\u4EE4\u884C+\u7279\u6B8A\u53C2\u6570\u5F00\u542Fmysqld mysqld -- defaults-file=&quot;D:\\ProgramFiles\\mysql\\MySQLServer5.7Data\\my.ini&quot; --skip-grant-tables \u3002\u6B64\u65F6\uFF0Cmysqld\u670D\u52A1\u8FDB\u7A0B\u5DF2\u7ECF\u6253\u5F00\u3002\u5E76\u4E14\u4E0D\u9700\u8981\u6743\u9650\u68C0\u67E5</p></li><li><p>\u53E6\u542F\u52A8\u4E00 \u4E2A\u5BA2\u6237\u7AEF\u8FDB\u884C\uFF0C\u901A\u8FC7mysql -uroot \u65E0\u5BC6\u7801\u767B\u9646\u670D\u52A1\u5668\u3002</p></li><li><p>\u4FEE\u6539\u5BC6\u7801</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>use mysql; 
update user set authentication_string=password(&#39;\u65B0\u5BC6\u7801&#39;) where user=&#39;root&#39; and Host=&#39;localhost&#39;; 
flush privileges;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>\u91CD\u542Fmysql\u540E\uFF0C\u5373\u53EF\u4F7F\u7528\u65B0\u5BC6\u7801\u767B\u5F55root\u7528\u6237</p></li></ul><h2 id="_6-\u8FD0\u7B97\u7B26" tabindex="-1"><a class="header-anchor" href="#_6-\u8FD0\u7B97\u7B26" aria-hidden="true">#</a> 6 \u8FD0\u7B97\u7B26</h2><h3 id="_6-1-\u7B97\u672F\u8FD0\u7B97\u7B26" tabindex="-1"><a class="header-anchor" href="#_6-1-\u7B97\u672F\u8FD0\u7B97\u7B26" aria-hidden="true">#</a> 6.1 \u7B97\u672F\u8FD0\u7B97\u7B26</h3><p>==\u52A0 \uFF08+\uFF09\u3001\u51CF\uFF08-\uFF09\u3001\u4E58\uFF08*\uFF09\u3001\u9664\uFF08/\u6216DIV\uFF09\u548C\u53D6\u6A21\uFF08%\u6216MOD\uFF09==</p><blockquote><p>\u52A0\u6CD5\u4E0E\u51CF\u6CD5</p></blockquote><ul><li>\u6574\u578B <code>+(-)</code> \u6574\u578B = \u6574\u578B</li><li>\u6574\u578B <code>+(-) </code>\u6D6E\u70B9\u578B = \u6D6E\u70B9\u578B</li><li><code>+</code>\u53EA\u8868\u793A\u6570 \u503C\u76F8\u52A0\u3002\u5982\u679C\u9047\u5230\u975E\u6570\u503C\u7C7B\u578B\uFF0C\u5148\u5C1D\u8BD5\u8F6C\u6210\u6570\u503C\uFF0C\u5982\u679C\u8F6C\u5931\u8D25\uFF0C\u5C31\u63090\u8BA1\u7B97\u3002\uFF08\u8865\u5145\uFF1AMySQL \u4E2D\u5B57\u7B26\u4E32\u62FC\u63A5\u8981\u4F7F\u7528\u5B57\u7B26\u4E32\u51FD\u6570CONCAT()\u5B9E\u73B0\uFF09</li></ul><blockquote><p>\u4E58\u6CD5\u4E0E\u9664\u6CD5</p></blockquote><ul><li>\u4E00\u4E2A\u6570 <code>*(/)</code> \u6574\u65701 = \u539F\u6570</li><li>\u4E00\u4E2A\u6570 <code>*(/)</code>\u6D6E\u70B9\u65701 = \u6D6E\u70B9\u6570\uFF0C\u4E14\u6570\u503C\u4E0E\u539F\u6570\u76F8\u7B49</li><li>\u4E00\u4E2A\u6570 <code>/</code> \u6574\u6570 = \u6D6E\u70B9\u6570</li><li>\u4E00\u4E2A\u6570 <code>/</code> \u53E6\u4E00\u4E2A\u6570 = \u6D6E\u70B9\u6570\uFF0C\u4E14\u5F53\u9664\u4E0D\u5C3D\u65F6\uFF0C\u4FDD\u7559\u5230\u5C0F\u6570\u70B9\u540E4\u4F4D</li><li>\u4E00\u4E2A\u6570 <code>/</code> 0 = null</li></ul><h3 id="_6-2-\u6BD4\u8F83\u8FD0\u7B97\u7B26" tabindex="-1"><a class="header-anchor" href="#_6-2-\u6BD4\u8F83\u8FD0\u7B97\u7B26" aria-hidden="true">#</a> 6.2 \u6BD4\u8F83\u8FD0\u7B97\u7B26</h3><p>\u6BD4\u8F83\u8FD0\u7B97\u7B26\u7528\u6765\u5BF9\u8868\u8FBE\u5F0F\u5DE6\u8FB9\u7684\u64CD\u4F5C\u6570\u548C\u53F3\u8FB9\u7684\u64CD\u4F5C\u6570\u8FDB\u884C\u6BD4\u8F83\uFF0C\u6BD4\u8F83\u7684<strong>\u7ED3\u679C\u4E3A\u771F\u5219\u8FD4\u56DE1</strong>\uFF0C\u6BD4\u8F83\u7684<strong>\u7ED3\u679C\u4E3A\u5047\u5219\u8FD4\u56DE0</strong>\uFF0C\u5176\u4ED6\u60C5\u51B5\u5219\u8FD4\u56DENULL\u3002</p><ul><li><p><code>=</code>\uFF1A\u5224\u65AD\u7B49\u53F7\u4E24\u8FB9\u7684\u503C\u3001\u5B57\u7B26\u4E32\u6216\u8868\u8FBE\u5F0F\u662F\u5426\u76F8\u7B49</p><ul><li>\u5982\u679C\u7B49\u53F7\u4E24\u904D\u90FD\u4E3A<strong>\u5B57\u7B26\u4E32</strong>\uFF0C\u5219MySQL\u4F1A\u6309\u7167\u5B57\u7B26\u4E32\u8FDB\u884C\u6BD4\u8F83\uFF0C\u5176<strong>\u6BD4\u8F83\u7684\u662F\u6BCF\u4E2A\u5B57\u7B26\u4E32\u4E2D\u5B57\u7B26\u7684ANSI\u7F16\u7801\u662F\u5426\u76F8\u7B49</strong>\u3002</li><li>\u5982\u679C\u7B49\u53F7\u4E24\u8FB9\u90FD\u662F<strong>\u6574\u6570</strong>\uFF0C\u5219MySQL\u4F1A\u6309\u7167\u6574\u6570\u6765\u6BD4\u8F83\u4E24\u4E2A\u503C\u7684\u5927\u5C0F\u3002</li><li>\u5982\u679C\u7B49\u53F7\u4E24\u8FB9\u4E00\u4E2A\u662F\u6574\u6570\uFF0C\u4E00\u4E2A\u662F\u5B57\u7B26\u4E32\uFF0C\u5219MySQL\u4F1A\u5C06\u5B57\u7B26\u4E32\u8F6C\u5316\u4E3A\u6570\u5B57\u8FDB\u884C\u6BD4\u8F83\u3002</li><li>\u5982\u679C\u7B49\u53F7\u4E24\u8FB9\u6709\u4E00\u4E2A\u4E3ANULL\uFF0C\u5219\u6BD4\u8F83\u7ED3\u679C\u4E3ANULL</li></ul></li><li><p><code>&lt;=&gt;</code>\uFF1A\u5B89\u5168\u7B49\u4E8E\u8FD0\u7B97\u7B26\uFF08&lt;=&gt;\uFF09\u4E0E\u7B49\u4E8E\u8FD0\u7B97\u7B26\uFF08=\uFF09\u7684\u4F5C\u7528\u662F\u76F8\u4F3C\u7684\uFF0C<strong>\u552F\u4E00\u7684\u533A\u522B</strong>\u662F<code>&lt;=&gt;</code>\u53EF \u4EE5\u7528\u6765<strong>\u5BF9NULL\u8FDB\u884C\u5224\u65AD</strong>\u3002\u5728\u4E24\u4E2A\u64CD\u4F5C\u6570\u5747\u4E3ANULL\u65F6\uFF0C\u5176\u8FD4\u56DE\u503C\u4E3A1\uFF1B\u5F53\u4E00\u4E2A\u64CD\u4F5C\u6570\u4E3ANULL \u65F6\uFF0C\u5176\u8FD4\u56DE\u503C\u4E3A0\u3002</p></li><li><p><code>&lt;&gt;</code>\u6216<code>!=</code>\uFF1A\u4E0D\u7B49\u4E8E\u8FD0\u7B97\u7B26\u3002</p><ul><li>\u4E0D\u7B49\u4E8E\u8FD0\u7B97\u7B26\u4E0D\u80FD\u5224\u65ADNULL\u503C\u3002\u5982\u679C\u4E24\u8FB9\u7684\u503C\u6709\u4EFB\u610F\u4E00\u4E2A\u4E3ANULL\uFF0C \u6216\u4E24\u8FB9\u90FD\u4E3ANULL\uFF0C\u5219\u7ED3\u679C\u4E3ANULL</li></ul></li><li><p><code>IS NULL</code>\u6216<code>ISNULL(\u503C)</code>\uFF1A\u5224\u65AD\u4E00\u4E2A\u503C\u662F\u5426\u4E3Anull</p></li><li><p><code>IS NOT NULL</code>\uFF1A\u5224\u65AD\u4E00\u4E2A\u503C\u662F\u5426\u4E0D\u4E3Anull</p></li><li><p><code>LEAST(\u503C1, \u503C2, ..., \u503Cn)</code>\uFF1A\u8FD4\u56DE\u6700\u5C0F\u503C</p></li><li><p><code>GREATEST(\u503C1, \u503C2, ..., \u503Cn)</code>\uFF1A\u8FD4\u56DE\u6700\u5927\u503C</p></li><li><p><code>BETWEEN \u503C1 AND \u503C2</code>\uFF1A\u5224\u65AD\u4E00\u4E2A\u503C\u662F\u5426\u5728\u95ED\u533A\u95F4[\u503C1, \u503C2]\u4E4B\u95F4</p></li><li><p><code>IN(\u503C1, \u503C2, ..., \u503Cn)</code>\uFF1A\u5224\u65AD\u4E00\u4E2A\u503C\u662F\u5426\u662F\uFF08\u503C1, \u503C2, ..., \u503Cn\uFF09\u4E2D\u7684\u4E00\u4E2A\u503C</p></li><li><p><code>NOT IN(\u503C1, \u503C2, ..., \u503Cn)</code>\uFF1A\u5224\u65AD\u4E00\u4E2A\u503C\u662F\u5426\u4E0D\u662F\uFF08\u503C1, \u503C2, ..., \u503Cn\uFF09\u4E2D\u7684\u4EFB\u610F\u4E00\u4E2A\u503C</p></li><li><p><code>LIKE</code>\uFF1A\u6A21\u7CCA\u5339\u914D</p><ul><li>\u5E38\u548C\u5982\u4E0B\u901A\u914D\u7B26\u914D\u5408\u4F7F\u7528\uFF1A <ul><li><code>%</code>\uFF1A\u5339\u914D0\u4E2A\u6216\u591A\u4E2A\u5B57\u7B26</li><li><code>_</code>\uFF1A\u5339\u914D\u5355\u4E2A\u5B57\u7B26</li></ul></li></ul></li><li><p><code>ESCAPE</code>\uFF1A\u6307\u5B9A\u4E00\u4E2A\u5B57\u7B26\u53BB\u66FF\u4EE3\u8F6C\u4E49\u5B57\u7B26(&quot;<code>\\</code>&quot;)</p><p>\u5728mysql\u4E2D\uFF0C\u5982\u679C\u8868\u4E2D\u67D0\u4E2A\u5B57\u6BB5\u5B58\u50A8\u4E86\u4E00\u4E9B\u7279\u6B8A\u7B26\u53F7\uFF08\u5982%\u3001_\u7B49\uFF09\uFF0C\u5728\u4F7F\u7528<code>LIKE</code>\u8FDB\u884C\u6A21\u7CCA\u67E5\u8BE2\u65F6\uFF0C\u9700\u8981\u5BF9\u7279\u6B8A\u5B57\u7B26\u8FDB\u884C\u8F6C\u4E49\u3002</p><p>\u5BF9\u7279\u6B8A\u5B57\u7B26\u7684\u8F6C\u4E49\u6709\u4E24\u79CD\u65B9\u6CD5\uFF1A\u2460\u4F7F\u7528\u8F6C\u4E49\u5B57\u7B26<code>\\</code> \u2461\u4F7F\u7528\u5173\u952E\u5B57<code>ESCAPE</code>\u3002\u4F7F\u7528\u65B9\u6CD5\u5982\u4E0B</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>### \u67E5\u8BE2\u540D\u5B57\u5E26\u6709%\u5B57\u7B26\u7684\u7528\u6237---\u4F7F\u7528\u8F6C\u4E49\u5B57\u7B26&#39;\\&#39;
-- % \u8F6C\u4E49\u524D\uFF0C%\u5168\u67E5
SELECT * FROM escape_test WHERE NAME LIKE CONCAT(&quot;%&quot;, &quot;%&quot;, &quot;%&quot;);
-- % \u8F6C\u4E49\u540E \u53EA\u5339\u914D\u542B\u6709%\u7684
SELECT * FROM escape_test WHERE NAME LIKE CONCAT(&quot;%&quot;, &quot;\\%&quot;, &quot;%&quot;);


### \u4F7F\u7528\u5173\u952E\u5B57escape
### \u5047\u8BBE\u5B58\u5728\u540D\u5B57\u4E3A %a \u548C %_ \u4E24\u4E2A\u7684\u7528\u6237
SELECT * FROM escape_test WHERE NAME LIKE &quot;a%_&quot; ESCAPE &quot;a&quot; ;    ### \u67E5\u8BE2\u5230\u7684\u7ED3\u679C\u5305\u542B %a %_ 
SELECT * FROM escape_test WHERE NAME LIKE &quot;a%a&quot; ESCAPE &quot;a&quot; ;    ### \u67E5\u8BE2\u5230\u7684\u7ED3\u679C\u53EA\u6709 %a 
SELECT * FROM escape_test WHERE NAME LIKE &quot;a%a_&quot; ESCAPE &quot;a&quot; ;   ### \u67E5\u8BE2\u5230\u7684\u7ED3\u679C\u53EA\u6709\uFF1A%_
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li><li><p><code>REGEXP</code>\uFF1A\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F\u6765\u5339\u914D\u5B57\u7B26\u4E32\uFF0C\u8BED\u6CD5\u683C\u5F0F<code>\u5B57\u7B26\u4E32 regexp \u6B63\u5219\u8868\u8FBE\u5F0F</code></p><p>\u5E38\u7528\u901A\u914D\u7B26\u5982\u4E0B\uFF1A</p><table><thead><tr><th>\u901A\u914D\u7B26</th><th>\u8BF4\u660E</th><th>\u4F8B\u5B50</th><th>\u5339\u914D\u503C\u793A\u4F8B</th></tr></thead><tbody><tr><td><code>^</code></td><td>\u5339\u914D\u4EE5\u8BE5\u5B57\u7B26\u540E\u9762\u7684\u5B57\u7B26<strong>\u5F00\u5934</strong>\u7684\u5B57\u7B26\u4E32</td><td>^b</td><td><u>b</u>ig\uFF0C <u>b</u>anana</td></tr><tr><td><code>$</code></td><td>\u5339\u914D\u4EE5\u8BE5\u5B57\u7B26\u524D\u9762\u7684\u5B57\u7B26<strong>\u7ED3\u5C3E</strong>\u7684\u5B57\u7B26\u4E32</td><td>st$</td><td>te<u>st</u>\uFF0C persi<u>st</u></td></tr><tr><td><code>.</code></td><td>\u5339\u914D\u4EFB\u4F55\u4E00\u4E2A<strong>\u5355\u5B57\u7B26</strong></td><td>b.t</td><td>b<u>i</u>t\uFF0C b<u>a</u>t</td></tr><tr><td><code>*</code></td><td>\u5339\u914D<strong>\u96F6\u4E2A\u6216\u591A\u4E2A</strong>\u5728\u5B83<strong>\u524D\u9762</strong>\u7684\u5B57\u7B26\u3002<br>\u5982\u679C\u524D\u9762\u6CA1\u6709\u5B57\u7B26\uFF0C\u8868\u793A\u5339\u914D\u4EFB\u4F55\u6570\u91CF\u7684\u4EFB\u4F55\u5B57\u7B26\u4E32</td><td>f*n</td><td>fn\uFF0C f<u>a</u>n\uFF0Cf<u>aa</u>n\uFF0Cf<u>abc</u>n</td></tr><tr><td><code>+</code></td><td>\u5339\u914D<strong>1\u6B21\u6216\u591A\u6B21</strong>\u5728\u5B83<strong>\u524D\u9762</strong>\u7684\u5B57\u7B26</td><td>ba+</td><td>ba\uFF0Cbay\uFF0Cbare\uFF0Cbattle</td></tr><tr><td><code>&lt;\u5B57\u7B26\u4E32&gt;</code></td><td>\u5339\u914D<strong>\u5305\u542B\u6307\u5B9A\u5B57\u7B26\u4E32</strong>\u7684\u6587\u672C</td><td>&lt;fa&gt;</td><td><u>fa</u>n\uFF0C a<u>fa</u>\uFF0Caaa<u>fa</u>bbb</td></tr><tr><td><code>[\u5B57\u7B26\u4E32\u96C6\u5408]</code></td><td>\u5339\u914D\u5B57\u7B26\u4E32\u96C6\u5408\u4E2D<strong>\u4EFB\u610F\u4E00\u4E2A\u5B57\u7B26</strong>\u3002<br>\u53EF\u4EE5\u4F7F\u7528\u4E00 \u4E2A<code>-</code>\u8868\u660E\u547D\u540D\u5B57\u7B26\u7684\u8303\u56F4\uFF1A<br><code>[a-z]</code>\u5339\u914D\u4EFB\u4F55\u5B57\u6BCD,<code>[0-9]</code>\u5339\u914D\u4EFB\u4F55\u6570\u5B57</td><td>[xz]</td><td>di<u>z</u><u>z</u>y\uFF0C<u>x</u>-ray</td></tr><tr><td><code>[^\u5B57\u7B26\u4E32\u96C6\u5408]</code></td><td>\u5339\u914D<strong>\u4E0D\u5305\u542B\u5B57\u7B26\u4E32\u96C6\u5408\u4E2D\u4EFB\u610F\u5B57\u7B26</strong>\u7684\u6587\u672C</td><td>[^abc]</td><td>desk\uFF0C k8s</td></tr><tr><td><code>\u5B57\u7B26\u4E32{n,}</code></td><td>\u5339\u914D<strong>\u81F3\u5C11n\u6B21</strong>\u5B83<strong>\u524D\u9762\u7684\u5B57\u7B26\u4E32</strong></td><td>b{2}</td><td>bb\uFF0Cbbb\uFF0Cbbbb\uFF0Cbbbbbbb</td></tr><tr><td><code>\u5B57\u7B26\u4E32{n,m}</code></td><td>\u5339\u914D**[n, m]\u6B21<strong>\u5B83</strong>\u524D\u9762\u7684\u5B57\u7B26\u4E32**\u3002<br>\u5982\u679Cn\u4E3A0\uFF0Cn\u53EF\u7701</td><td>b{2, 4}</td><td>bb\uFF0Cbbb\uFF0Cbbbb</td></tr></tbody></table></li></ul><h3 id="_6-3-\u903B\u8F91\u8FD0\u7B97\u7B26" tabindex="-1"><a class="header-anchor" href="#_6-3-\u903B\u8F91\u8FD0\u7B97\u7B26" aria-hidden="true">#</a> 6.3 \u903B\u8F91\u8FD0\u7B97\u7B26</h3><ul><li><p><code>NOT</code>\u6216<code>!</code>\uFF1A\u903B\u8F91\u975E</p><ul><li>\u5F53\u7ED9\u5B9A\u7684\u503C\u4E3A0\u65F6\u8FD4\u56DE1\uFF1B</li><li>\u5F53\u7ED9\u5B9A\u7684\u503C\u4E3A\u975E0\u503C\u65F6\u8FD4\u56DE0\uFF1B</li><li>\u5F53\u7ED9\u5B9A\u7684\u503C\u4E3ANULL\u65F6\uFF0C\u8FD4\u56DENULL</li></ul></li><li><p><code>AND</code>\u6216<code>&amp;&amp;</code>\uFF1A\u903B\u8F91\u4E0E\u3002</p><ul><li>\u5F53\u7ED9\u5B9A\u7684\u6240\u6709\u503C\u5747\u4E3A\u975E0\u503C\uFF0C\u5E76\u4E14\u90FD\u4E0D\u4E3ANULL\u65F6\uFF0C\u8FD4\u56DE 1\uFF1B</li><li>\u5F53\u7ED9\u5B9A\u7684\u4E00\u4E2A\u503C\u6216\u8005\u591A\u4E2A\u503C\u4E3A0\u65F6\u5219\u8FD4\u56DE0\uFF1B</li><li>\u5426\u5219\u8FD4\u56DENULL</li></ul></li><li><p><code>OR</code>\u6216<code>||</code>\uFF1A\u903B\u8F91\u6216\u3002</p><ul><li>\u5F53\u7ED9\u5B9A\u7684\u503C\u90FD\u4E0D\u4E3ANULL\uFF0C\u5E76\u4E14\u4EFB\u4F55\u4E00\u4E2A\u503C\u4E3A\u975E0\u503C\u65F6\uFF0C\u5219\u8FD4\u56DE1\uFF0C\u5426\u5219\u8FD4\u56DE0\uFF1B</li><li>\u5F53\u4E00\u4E2A\u503C\u4E3ANULL\uFF0C\u5E76\u4E14\u53E6\u4E00\u4E2A\u503C\u4E3A\u975E0\u503C\u65F6\uFF0C\u8FD4\u56DE1\uFF0C\u5426\u5219\u8FD4\u56DENULL\uFF1B</li><li>\u5F53\u4E24\u4E2A\u503C\u90FD\u4E3A NULL\u65F6\uFF0C\u8FD4\u56DENULL</li></ul><p>==<code>AND</code>\u7684\u4F18\u5148\u7EA7\u9AD8\u4E8E<code>OR</code>==</p></li><li><p><code>XOR</code>\uFF1A\u903B\u8F91\u5F02\u6216\u3002</p><ul><li>\u5F53\u7ED9\u5B9A\u7684\u503C\u4E2D\u4EFB\u610F\u4E00\u4E2A\u662Fnull\u65F6\uFF0C\u8FD4\u56DEnull</li><li>\u5F53\u4E24\u4E2A\u975Enull\u7684\u503C\u90FD\u662F0\u6216\u8005\u90FD\u4E0D\u662F0\u65F6\uFF0C\u8FD4\u56DE0</li><li>\u5F53\u4E00\u4E2A\u503C\u4E3A0\uFF0C\u53E6\u4E00\u4E2A\u4E0D\u4E3A0\u65F6\uFF0C\u8FD4\u56DE1</li></ul></li></ul><h3 id="_6-4-\u4F4D\u8FD0\u7B97\u7B26" tabindex="-1"><a class="header-anchor" href="#_6-4-\u4F4D\u8FD0\u7B97\u7B26" aria-hidden="true">#</a> 6.4 \u4F4D\u8FD0\u7B97\u7B26</h3><ul><li><code>&amp;</code>\uFF1A\u6309\u4F4D\u4E0E\u3002\u5C06\u7ED9\u5B9A\u503C\u5BF9\u5E94\u7684\u4E8C\u8FDB\u5236\u6570\u8FDB\u884C\u903B\u8F91\u4E0E\u8FD0\u7B97\uFF08\u903B\u8F91\u4E0E\uFF1A\u4E24\u4E2A\u4E8C\u8FDB\u5236\u4F4D\u90FD\u662F1\u65F6\u8FD4\u56DE1\uFF0C\u5176\u4ED6\u8FD4\u56DE0\uFF09\u3002</li><li><code>|</code>\uFF1A\u6309\u4F4D\u6216\u3002\u5C06\u7ED9\u5B9A\u503C\u5BF9\u5E94\u7684\u4E8C\u8FDB\u5236\u6570\u8FDB\u884C\u903B\u8F91\u6216\u8FD0\u7B97\uFF08\u903B\u8F91\u6216\uFF1A\u4E24\u4E2A\u4E8C\u8FDB\u5236\u4F4D\u5168\u4E3A0\u65F6\u8FD4\u56DE0\uFF0C\u5176\u4ED6\u8FD4\u56DE1\uFF09\u3002</li><li><code>^</code>\uFF1A\u6309\u4F4D\u5F02\u6216\u3002\u5C06\u7ED9\u5B9A\u503C\u5BF9\u5E94\u7684\u4E8C\u8FDB\u5236\u6570\u8FDB\u884C\u903B\u8F91\u5F02\u6216\u8FD0\u7B97\uFF08\u903B\u8F91\u5F02\u6216\uFF1A\u4E24\u4E2A\u4E8C\u8FDB\u5236\u4F4D\u6570\u503C\u76F8\u540C\u65F6\u8FD4\u56DE1\uFF0C\u5426\u5219\u8FD4\u56DE0\uFF09\u3002</li><li><code>~</code>\uFF1A\u6309\u4F4D\u53D6\u53CD\u3002\u5C06\u7ED9\u5B9A\u503C\u5BF9\u5E94\u7684\u4E8C\u8FDB\u5236\u6570\u8FDB\u884C\u53D6\u53CD\u64CD\u4F5C\uFF08\u53D6\u53CD\uFF1A0\u53D81\uFF0C1\u53D80\uFF09\u3002</li><li><code>&gt;&gt;</code>\uFF1A\u6309\u4F4D\u53F3\u79FB\uFF0C\u8BED\u6CD5<code>\u6570\u503C &gt;&gt; \u4F4D\u6570</code>\u3002</li><li><code>&lt;&lt;</code>\uFF1A\u6309\u4F4D\u5DE6\u79FB\uFF0C\u8BED\u6CD5<code>\u6570\u503C &lt;&lt; \u4F4D\u6570</code>\u3002</li></ul><h2 id="_7-\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_7-\u51FD\u6570" aria-hidden="true">#</a> 7 \u51FD\u6570</h2><h3 id="_7-1-\u5355\u884C\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_7-1-\u5355\u884C\u51FD\u6570" aria-hidden="true">#</a> 7.1 \u5355\u884C\u51FD\u6570</h3><h4 id="_7-1-1-\u6570\u503C\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_7-1-1-\u6570\u503C\u51FD\u6570" aria-hidden="true">#</a> 7.1.1 \u6570\u503C\u51FD\u6570</h4><table><thead><tr><th>\u51FD\u6570</th><th>\u7528\u6CD5</th></tr></thead><tbody><tr><td><code>SIGN(X) </code></td><td>\u8FD4\u56DEX\u7684\u7B26\u53F7\u3002\u6B63\u6570\u8FD4\u56DE1\uFF0C\u8D1F\u6570\u8FD4\u56DE-1\uFF0C0\u8FD4\u56DE0</td></tr><tr><td><code>CEIL(x)</code>\uFF0C<code>CEILING(x) </code></td><td>\u5BF9x\u5411\u4E0A\u53D6\u6574</td></tr><tr><td><code>FLOOR(x)</code></td><td>\u5BF9x\u5411\u4E0B\u53D6\u6574</td></tr><tr><td><code>LEAST(e1,e2,e3\u2026)</code></td><td>\u8FD4\u56DE\u5217\u8868\u4E2D\u7684\u6700\u5C0F\u503C</td></tr><tr><td><code>GREATEST(e1,e2,e3\u2026) </code></td><td>\u8FD4\u56DE\u5217\u8868\u4E2D\u7684\u6700\u5927\u503C</td></tr><tr><td><code>RAND() </code></td><td>\u8FD4\u56DE0~1\u7684\u968F\u673A\u6570</td></tr><tr><td><code>RAND(x)</code></td><td>\u8FD4\u56DE0~1\u7684\u968F\u673A\u6570\u3002x\u662F\u79CD\u5B50\uFF0C\u76F8\u540C\u7684x\u503C\u4F1A\u4EA7\u751F\u76F8\u540C\u7684\u968F\u673A\u6570</td></tr><tr><td><code>ROUND(x) </code></td><td>\u5BF9x\u56DB\u820D\u4E94\u5165\uFF0C\u5F97\u5230\u4E00\u4E2A\u6574\u6570</td></tr><tr><td><code>ROUND(x,y)</code></td><td>\u5BF9x\u8FDB\u884C\u56DB\u820D\u4E94\u5165\uFF0C\u5E76\u4FDD\u7559y\u4F4D\u5C0F\u6570</td></tr><tr><td><code>TRUNCATE(x,y) </code></td><td>\u5BF9x\u622A\u65AD\uFF0C\u4FDD\u7559y\u4F4D\u5C0F\u6570</td></tr><tr><td><code>SQRT(x)</code></td><td>\u8FD4\u56DEx\u7684\u5E73\u65B9\u6839\u3002\u5F53X\u7684\u503C\u4E3A\u8D1F\u6570\u65F6\uFF0C\u8FD4\u56DENULL</td></tr><tr><td><code>POW(x,y)</code>\uFF0C<code>POWER(X,Y) </code></td><td>\u8FD4\u56DEx\u7684y\u6B21\u65B9</td></tr><tr><td><code>EXP(X) </code></td><td>\u8FD4\u56DEe\u7684x\u6B21\u65B9</td></tr><tr><td><code>CONV(x,f1,f2) </code></td><td>\u5C06x\u7531f1\u8FDB\u5236\u6570\u8F6C\u4E3Af2\u8FDB\u5236\u6570\u3002f1\u6307\u660E\u5F53\u524Dx\u662F\u4EC0\u4E48\u8FDB\u5236\uFF0Cf2\u6307\u660E\u60F3\u8F6C\u6210\u4EC0\u4E48\u8FDB\u5236</td></tr><tr><td>...</td><td>...</td></tr></tbody></table><h4 id="_7-1-2-\u5B57\u7B26\u4E32\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_7-1-2-\u5B57\u7B26\u4E32\u51FD\u6570" aria-hidden="true">#</a> 7.1.2 \u5B57\u7B26\u4E32\u51FD\u6570</h4><p>==MySQL\u4E2D\uFF0C\u5B57\u7B26\u4E32\u7684\u4F4D\u7F6E\u662F\u4ECE1\u5F00\u59CB\u7684==</p><table><thead><tr><th>\u51FD\u6570</th><th>\u7528\u6CD5</th></tr></thead><tbody><tr><td><code>CHAR_LENGTH(s) </code>,<code>\u4E0ECHARACTER_LENGTH(s)</code></td><td>\u8FD4\u56DE\u5B57\u7B26\u4E32s\u7684\u5B57\u7B26\u6570\u3002</td></tr><tr><td><code>LENGTH(s)</code></td><td>\u8FD4\u56DE\u5B57\u7B26\u4E32s\u7684\u5B57\u8282\u6570\uFF0C\u548C\u5B57\u7B26\u96C6\u6709\u5173</td></tr><tr><td><code>CONCAT(s1,s2,......,sn) </code></td><td>\u8FDE\u63A5s1,s2,......,sn\u4E3A\u4E00\u4E2A\u5B57\u7B26\u4E32</td></tr><tr><td><code>CONCAT_WS(x, s1,s2,......,sn)</code></td><td>\u540CCONCAT(s1,s2,...)\u51FD\u6570\uFF0C\u4F46\u662F\u6BCF\u4E2A\u5B57\u7B26\u4E32\u4E4B\u95F4\u8981\u52A0\u4E0Ax</td></tr><tr><td><code>INSERT(str, idx, len, replacestr)</code></td><td>\u5C06\u5B57\u7B26\u4E32str\u4ECE\u7B2Cidx\u4F4D\u7F6E\u5F00\u59CB\uFF0Clen\u4E2A\u5B57\u7B26\u957F\u7684\u5B50\u4E32\u66FF\u6362\u4E3A\u5B57\u7B26\u4E32replacestr</td></tr><tr><td><code>REPLACE(str, a, b)</code></td><td>\u7528\u5B57\u7B26\u4E32b\u66FF\u6362\u5B57\u7B26\u4E32str\u4E2D\u6240\u6709\u51FA\u73B0\u7684\u5B57\u7B26\u4E32a</td></tr><tr><td><code>UPPER(s)</code> \uFF0C<code> UCASE(s)</code></td><td>\u5C06\u5B57\u7B26\u4E32s\u7684\u6240\u6709\u5B57\u6BCD\u8F6C\u6210\u5927\u5199\u5B57\u6BCD</td></tr><tr><td><code> LOWER(s)</code> \uFF0C<code>LCASE(s)</code></td><td>\u5C06\u5B57\u7B26\u4E32s\u7684\u6240\u6709\u5B57\u6BCD\u8F6C\u6210\u5C0F\u5199\u5B57\u6BCD</td></tr><tr><td><code>LEFT(str,n)</code>\u6216<code>RIGHT(str,n)</code></td><td>\u8FD4\u56DE\u5B57\u7B26\u4E32str\u6700\u5DE6\u8FB9\u6216\u6700\u53F3\u8FB9\u7684n\u4E2A\u5B57\u7B26</td></tr><tr><td><code>LPAD(str, len, pad)</code>\u6216<code>RPAD(str ,len, pad)</code></td><td>\u7528\u5B57\u7B26\u4E32pad\u5BF9str\u6700\u5DE6\u8FB9\u6216\u6700\u53F3\u8FB9\u8FDB\u884C\u586B\u5145\uFF0C\u76F4\u5230str\u7684\u957F\u5EA6\u4E3Alen\u4E2A\u5B57\u7B26</td></tr><tr><td><code>LTRIM(s)</code>\u6216<code>RTRIM(s) </code></td><td>\u53BB\u6389\u5B57\u7B26\u4E32s\u5DE6\u4FA7\u6216\u53F3\u7684\u7A7A\u683C</td></tr><tr><td><code>TRIM(s)</code></td><td>\u53BB\u6389\u5B57\u7B26\u4E32s\u5F00\u59CB\u4E0E\u7ED3\u5C3E\u7684\u7A7A\u683C</td></tr><tr><td><code>TRIM(s1 FROM s)</code></td><td>\u53BB\u6389\u5B57\u7B26\u4E32s\u5F00\u59CB\u4E0E\u7ED3\u5C3E\u7684s1</td></tr><tr><td><code>TRIM(LEADING s1 FROM s)</code></td><td>\u53BB\u6389\u5B57\u7B26\u4E32s\u5F00\u59CB\u5904\u7684s1</td></tr><tr><td><code>TRIM(TRAILING s1 FROM s)</code></td><td>\u53BB\u6389\u5B57\u7B26\u4E32s\u7ED3\u5C3E\u5904\u7684s1</td></tr><tr><td><code>REPEAT(str, n)</code></td><td>\u8FD4\u56DEstr\u91CD\u590Dn\u6B21\u7684\u7ED3\u679C</td></tr><tr><td><code>SPACE(n)</code></td><td>\u8FD4\u56DEn\u4E2A\u7A7A\u683C</td></tr><tr><td><code>STRCMP(s1,s2)</code></td><td>\u6BD4\u8F83\u5B57\u7B26\u4E32s1,s2\u7684ASCII\u7801\u503C\u7684\u5927\u5C0F</td></tr><tr><td><code>SUBSTR(s,index,len)</code>,<code>SUBSTRING(s,n,len)</code>,<code>MID(s,n,len)</code></td><td>\u8FD4\u56DE\u4ECE\u5B57\u7B26\u4E32s\u7684index\u4F4D\u7F6E\u5176len\u4E2A\u5B57\u7B26</td></tr><tr><td><code> LOCATE(substr,str)</code>,<code>POSITION(substr IN str)</code>,<code>INSTR(str,substr)</code></td><td>\u8FD4\u56DE\u5B57\u7B26\u4E32substr\u5728\u5B57\u7B26\u4E32str\u4E2D\u9996\u6B21\u51FA\u73B0\u7684\u4F4D\u7F6E\u3002\u672A\u627E\u5230\uFF0C\u8FD4\u56DE0</td></tr><tr><td><code>ELT(m,s1,s2,\u2026,sn)</code></td><td>\u8FD4\u56DE\u6307\u5B9A\u4F4D\u7F6E\u7684\u5B57\u7B26\u4E32\u3002\u5982 \u679Cm=n\uFF0C\u5219\u8FD4\u56DEsn</td></tr><tr><td><code>FIELD(s,s1,s2,\u2026,sn) </code></td><td>\u8FD4\u56DE\u5B57\u7B26\u4E32s\u5728\u5B57\u7B26\u4E32\u5217\u8868\u4E2D\u7B2C\u4E00\u6B21\u51FA\u73B0\u7684\u4F4D\u7F6E</td></tr><tr><td><code>FIND_IN_SET(s1,s2)</code></td><td>\u8FD4\u56DE\u5B57\u7B26\u4E32s1\u5728\u5B57\u7B26\u4E32s2\u4E2D\u51FA\u73B0\u7684\u4F4D\u7F6E\u3002\u5176\u4E2D\uFF0C\u5B57\u7B26\u4E32s2\u662F\u4E00\u4E2A\u4EE5\u9017\u53F7\u5206 \u9694\u7684\u5B57\u7B26\u4E32\u3002\u5B8C\u5168\u5339\u914D\u4E0D\u662F\u6A21\u7CCA\u5339\u914D</td></tr><tr><td><code>REVERSE(s) </code></td><td>\u53CD\u8F6Cs</td></tr><tr><td><code>NULLIF(value1,value2)</code></td><td>\u6BD4\u8F83\u4E24\u4E2A\u5B57\u7B26\u4E32\uFF0C\u5982\u679Cvalue1\u4E0Evalue2\u76F8\u7B49\uFF0C\u5219\u8FD4\u56DENULL\uFF0C\u5426\u5219\u8FD4\u56DE value1</td></tr></tbody></table><h4 id="_7-1-3-\u65E5\u671F\u548C\u65F6\u95F4" tabindex="-1"><a class="header-anchor" href="#_7-1-3-\u65E5\u671F\u548C\u65F6\u95F4" aria-hidden="true">#</a> 7.1.3 \u65E5\u671F\u548C\u65F6\u95F4</h4><blockquote><p>\u83B7\u53D6\u65E5\u671F\u3001\u65F6\u95F4</p></blockquote><table><thead><tr><th>\u51FD\u6570</th><th>\u7528\u6CD5</th></tr></thead><tbody><tr><td><code>CURDATE()</code> \uFF0C<code>CURRENT_DATE()</code></td><td>\u8FD4\u56DE\u5F53\u524D\u65E5\u671F\uFF0C\u53EA\u5305\u542B\u5E74\u3001 \u6708\u3001\u65E5</td></tr><tr><td><code>CURTIME()</code> \uFF0C<code> CURRENT_TIME()</code></td><td>\u8FD4\u56DE\u5F53\u524D\u65F6\u95F4\uFF0C\u53EA\u5305\u542B\u65F6\u3001 \u5206\u3001\u79D2</td></tr><tr><td><code>NOW()</code>,<code>SYSDATE()</code>,<code>CURRENT_TIMESTAMP()</code>, <code>LOCALTIME()</code>, <code>LOCALTIMESTAMP()</code></td><td>\u8FD4\u56DE\u5F53\u524D\u7CFB\u7EDF\u65E5\u671F\u548C\u65F6\u95F4</td></tr></tbody></table><blockquote><p>\u65E5\u671F\u4E0E\u65F6\u95F4\u6233\u7684\u8F6C\u6362</p></blockquote><table><thead><tr><th>\u51FD\u6570</th><th>\u7528\u6CD5</th></tr></thead><tbody><tr><td><code>UNIX_TIMESTAMP()</code></td><td>\u5C06\u5F53\u524D\u65F6\u95F4\u4EE5UNIX\u65F6\u95F4\u6233\u7684\u5F62\u5F0F\u8FD4\u56DE</td></tr><tr><td><code>UNIX_TIMESTAMP(date)</code></td><td>\u5C06\u65F6\u95F4date\u4EE5UNIX\u65F6\u95F4\u6233\u7684\u5F62\u5F0F\u8FD4\u56DE</td></tr><tr><td><code>FROM_UNIXTIME(timestamp)</code></td><td>\u5C06UNIX\u65F6\u95F4\u6233\u8F6C\u6362\u4E3A\u666E\u901A\u683C\u5F0F\u7684\u65F6\u95F4</td></tr></tbody></table><blockquote><p>\u65E5\u671F\u7684\u64CD\u4F5C\u51FD\u6570</p></blockquote><table><thead><tr><th>\u51FD\u6570</th><th>\u7528\u6CD5</th></tr></thead><tbody><tr><td><code>EXTRACT(type FROM date)</code></td><td>\u8FD4\u56DE\u6307\u5B9A\u65E5\u671F\u4E2D\u7279\u5B9A\u7684\u90E8\u5206\uFF0Ctype\u6307\u5B9A\u8FD4\u56DE\u7684\u503C\uFF0C\u5176\u53D6\u503C\u4E0E\u542B\u4E49\u89C1\u4E0B\u56FE</td></tr></tbody></table><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT now() curr, EXTRACT(MINUTE FROM NOW()) curr_minute, EXTRACT( WEEK FROM NOW()) curr_week, EXTRACT( QUARTER FROM NOW()) curr_quarter, EXTRACT( MINUTE_SECOND FROM NOW()) curr_minute_second;

+---------------------+-------------+-----------+--------------+--------------------+
| curr                | curr_minute | curr_week | curr_quarter | curr_minute_second |
+---------------------+-------------+-----------+--------------+--------------------+
| 2023-01-13 15:54:35 |          54 |         2 |            1 |               5435 |
+---------------------+-------------+-----------+--------------+--------------------+
1 row in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><img src="`+a+`" alt="image-20230113153631711"></p><blockquote><p>\u8BA1\u7B97\u65E5\u671F\u548C\u65F6\u95F4\u7684\u51FD\u6570--\u7B2C1\u7EC4</p></blockquote><table><thead><tr><th>\u51FD\u6570</th><th>\u7528\u6CD5</th></tr></thead><tbody><tr><td><code>DATE_ADD(datetime, INTERVAL expr type)</code></td><td>\u5728\u5F53\u524D\u65E5\u671F\u6216\u65F6\u95F4\u4E0A\u589E\u52A0expr\u5BF9\u5E94\u7684\u65F6\u95F4\uFF08\u65F6\u95F4\u683C\u5F0F\u7531type\u6307\u5B9A\uFF09</td></tr><tr><td><code>DATE_SUB(datetime,INTERVAL expr type)</code></td><td>\u5728\u5F53\u524D\u65E5\u671F\u6216\u65F6\u95F4\u4E0A\u51CF\u53BBexpr\u5BF9\u5E94\u7684\u65F6\u95F4\uFF08\u65F6\u95F4\u683C\u5F0F\u7531type\u6307\u5B9A\uFF09</td></tr></tbody></table><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT NOW() \`now\`,
    -&gt; DATE_ADD(NOW(), INTERVAL 1 DAY) AS add_1_day,
    -&gt; DATE_ADD(NOW(),INTERVAL 1 SECOND) AS add_1_second,
    -&gt; DATE_ADD(NOW(),INTERVAL &#39;1_1&#39; MINUTE_SECOND) AS add_1_minute_1_second,
    -&gt; DATE_ADD(NOW(), INTERVAL -1 YEAR) AS sub_1_year #\u53EF\u4EE5\u662F\u8D1F\u6570\uFF0C\u76F8\u5F53\u4E8E\u51CF
    -&gt; ;
    
+---------------------+---------------------+---------------------+-----------------------+---------------------+
| now                 | add_1_day           | add_1_second        | add_1_minute_1_second | sub_1_year          |
+---------------------+---------------------+---------------------+-----------------------+---------------------+
| 2023-01-13 16:11:58 | 2023-01-14 16:11:58 | 2023-01-13 16:11:59 | 2023-01-13 16:12:59   | 2022-01-13 16:11:58 |
+---------------------+---------------------+---------------------+-----------------------+---------------------+
1 row in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><img src="`+l+`" alt="image-20230113160401254"></p><blockquote><p>\u8BA1\u7B97\u65E5\u671F\u548C\u65F6\u95F4\u7684\u51FD\u6570--\u7B2C2\u7EC4</p></blockquote><table><thead><tr><th>\u51FD\u6570</th><th>\u7528\u6CD5</th></tr></thead><tbody><tr><td><code>ADDTIME(time1,time2)</code>\u6216<code>SUBTIME(time1,time2) </code></td><td>\u8FD4\u56DEtime1\u52A0\u4E0A\u6216\u51CF\u6389time2\u540E\u7684\u65F6\u95F4\u3002\u5F53time2\u4E3A\u4E00\u4E2A\u6570\u5B57\u65F6\uFF0C\u4EE3\u8868\u7684\u662F <strong>\u79D2</strong> \uFF0C\u53EF\u4EE5\u4E3A\u8D1F\u6570</td></tr><tr><td><code>DATEDIFF(date1,date2)</code></td><td>\u8FD4\u56DEdate1 - date2\u7684\u65E5\u671F\u95F4\u9694\u5929\u6570</td></tr><tr><td><code> TIMEDIFF(time1, time2)</code></td><td>\u8FD4\u56DEtime1 - time2\u7684\u65F6\u95F4\u95F4\u9694</td></tr><tr><td><code>FROM_DAYS(N)</code></td><td>\u8FD4\u56DE\u4ECE0000\u5E741\u67081\u65E5\u8D77\uFF0CN\u5929\u4EE5\u540E\u7684\u65E5\u671F</td></tr><tr><td><code>TO_DAYS(date)</code></td><td>\u8FD4\u56DE\u65E5\u671Fdate\u8DDD\u79BB0000\u5E741\u67081\u65E5\u7684\u5929\u6570</td></tr><tr><td><code>LAST_DAY(date)</code></td><td>\u8FD4\u56DEdate\u6240\u5728\u6708\u4EFD\u7684\u6700\u540E\u4E00\u5929\u7684\u65E5\u671F</td></tr><tr><td><code>MAKEDATE(year,n) </code></td><td>\u9488\u5BF9\u7ED9\u5B9A\u5E74\u4EFD\u4E0E\u6240\u5728\u5E74\u4EFD\u4E2D\u7684\u5929\u6570\u8FD4\u56DE\u4E00\u4E2A\u65E5\u671F</td></tr><tr><td><code>MAKETIME(hour,minute,second)</code></td><td>\u5C06\u7ED9\u5B9A\u7684\u5C0F\u65F6\u3001\u5206\u949F\u548C\u79D2\u7EC4\u5408\u6210\u65F6\u95F4\u5E76\u8FD4\u56DE</td></tr><tr><td><code>PERIOD_ADD(time,n)</code></td><td>\u8FD4\u56DEtime\u52A0\u4E0An\u4E2A\u6708\u540E\u7684\u65F6\u95F4\u3002<strong>\u5176\u4E2Dtime\u4E3AYYMM\u6216\u8005YYYYMM</strong></td></tr></tbody></table><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT NOW() \`now\`,
    -&gt; ADDTIME(NOW(),20) add_20_second,
    -&gt; SUBTIME(NOW(),&#39;1:1:3&#39;) sub_1h_1m_3s,
    -&gt; DATEDIFF(NOW(),&#39;2021-10-01&#39;) diff_date,
    -&gt; TIMEDIFF(NOW(),&#39;2021-10-25 22:10:10&#39;) diff_time
    -&gt; ;
+---------------------+---------------------+---------------------+-----------+-----------+
| now                 | add_20_second       | sub_1h_1m_3s        | diff_date | diff_time |
+---------------------+---------------------+---------------------+-----------+-----------+
| 2023-01-13 16:36:13 | 2023-01-13 16:36:33 | 2023-01-13 15:35:10 |       469 | 838:59:59 |
+---------------------+---------------------+---------------------+-----------+-----------+
1 row in set, 1 warning (0.00 sec)

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT NOW() \`now\`,
    -&gt; FROM_DAYS(368) 368_date,
    -&gt; TO_DAYS(&#39;0000-12-25&#39;) to_days,
    -&gt; LAST_DAY(NOW()) curr_month_last_day,
    -&gt; MAKEDATE(YEAR(NOW()),369) make_date,
    -&gt; MAKETIME(52,21,23) make_time
    -&gt; ;
+---------------------+------------+---------+---------------------+------------+-----------+
| now                 | 368_date   | to_days | curr_month_last_day | make_date  | make_time |
+---------------------+------------+---------+---------------------+------------+-----------+
| 2023-01-13 16:36:36 | 0001-01-03 |     359 | 2023-01-31          | 2024-01-04 | 52:21:23  |
+---------------------+------------+---------+---------------------+------------+-----------+
1 row in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT PERIOD_ADD(201703, 5) ;
+-----------------------+
| PERIOD_ADD(201703, 5) |
+-----------------------+
|                201708 |
+-----------------------+
1 row in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>\u65E5\u671F\u7684\u683C\u5F0F\u5316\u4E0E\u89E3\u6790</p></blockquote><table><thead><tr><th>\u51FD\u6570</th><th>\u7528\u6CD5</th></tr></thead><tbody><tr><td><code>DATE_FORMAT(date,fmt)</code></td><td>\u6309\u7167\u5B57\u7B26\u4E32fmt\u683C\u5F0F\u5316\u65E5\u671Fdate</td></tr><tr><td><code>TIME_FORMAT(time,fmt) </code></td><td>\u6309\u7167\u5B57\u7B26\u4E32fmt\u683C\u5F0F\u5316\u65F6\u95F4time</td></tr><tr><td><code>GET_FORMAT(date_type,format_type)</code></td><td>\u8FD4\u56DE\u65E5\u671F\u5B57\u7B26\u4E32\u7684\u663E\u793A\u683C\u5F0F</td></tr><tr><td><code>STR_TO_DATE(str, fmt)</code></td><td>\u6309\u7167\u5B57\u7B26\u4E32fmt\u5BF9str\u8FDB\u884C\u89E3\u6790\uFF0C\u89E3\u6790\u4E3A\u4E00\u4E2A\u65E5\u671F</td></tr></tbody></table><p><img src="`+r+`" alt="image-20230113164704996"></p><h4 id="_7-1-4-\u6D41\u7A0B\u63A7\u5236\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_7-1-4-\u6D41\u7A0B\u63A7\u5236\u51FD\u6570" aria-hidden="true">#</a> 7.1.4 \u6D41\u7A0B\u63A7\u5236\u51FD\u6570</h4><table><thead><tr><th>\u51FD\u6570</th><th>\u7528\u6CD5</th></tr></thead><tbody><tr><td><code>IF(value,value1,value2) </code></td><td>\u5982\u679Cvalue\u7684\u503C\u4E3ATRUE\uFF0C\u8FD4\u56DEvalue1\uFF0C \u5426\u5219\u8FD4\u56DEvalue2</td></tr><tr><td><code>IFNULL(value1, value2) </code></td><td>\u5982\u679Cvalue1\u4E0D\u4E3ANULL\uFF0C\u8FD4\u56DEvalue1\uFF0C\u5426 \u5219\u8FD4\u56DEvalue2</td></tr><tr><td><code>CASE WHEN \u6761\u4EF61 THEN \u7ED3\u679C1 WHEN \u6761\u4EF62 THEN \u7ED3\u679C2 .... [ELSE resultn] END</code></td><td>\u76F8\u5F53\u4E8EJava\u7684if...else if...else...</td></tr><tr><td><code>CASE expr WHEN \u5E38\u91CF\u503C1 THEN \u503C1 WHEN \u5E38\u91CF\u503C1 THEN \u503C1 .... [ELSE \u503Cn] END</code></td><td>\u76F8\u5F53\u4E8EJava\u7684switch...case...</td></tr></tbody></table><h4 id="_7-1-5-\u52A0\u5BC6\u4E0E\u89E3\u5BC6\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_7-1-5-\u52A0\u5BC6\u4E0E\u89E3\u5BC6\u51FD\u6570" aria-hidden="true">#</a> 7.1.5 \u52A0\u5BC6\u4E0E\u89E3\u5BC6\u51FD\u6570</h4><table><thead><tr><th>\u51FD\u6570</th><th>\u7528\u6CD5</th></tr></thead><tbody><tr><td><code>PASSWORD(str) </code></td><td>\u7528\u6237\u5BC6\u7801\u52A0\u5BC6\u3002\u52A0\u5BC6\u7ED3\u679C<strong>\u4E0D\u53EF\u9006</strong> \uFF0C\u5E38\u7528\u4E8E\u7528\u6237\u7684\u5BC6\u7801\u52A0\u5BC6 \u3002==MySQL8.0\u4E2D\u5DF2\u79FB\u9664\u8BE5\u65B9\u6CD5==</td></tr><tr><td><code>MD5(str) </code></td><td>MD5\u52A0\u5BC6\u3002\u82E5\u53C2\u6570\u4E3A NULL\uFF0C\u5219\u4F1A\u8FD4\u56DENULL</td></tr><tr><td><code>SHA(str) </code></td><td>SHA\u52A0\u5BC6\u3002\u5F53\u53C2\u6570\u4E3A NULL\u65F6\uFF0C\u8FD4\u56DENULL\u3002 SHA\u52A0\u5BC6\u7B97\u6CD5\u6BD4MD5\u66F4\u52A0\u5B89\u5168 \u3002</td></tr><tr><td><code>ENCODE(value,password_seed)</code></td><td>\u8FD4\u56DE\u4F7F\u7528password_seed\u4F5C\u4E3A\u52A0\u5BC6\u5BC6\u7801<strong>\u52A0\u5BC6</strong>value ==MySQL8.0\u4E2D\u5DF2\u79FB\u9664\u8BE5\u65B9\u6CD5==</td></tr><tr><td><code>DECODE(value,password_seed) </code></td><td>\u8FD4\u56DE\u4F7F\u7528password_seed\u4F5C\u4E3A\u52A0\u5BC6\u5BC6\u7801<strong>\u89E3\u5BC6</strong>value==MySQL8.0\u4E2D\u5DF2\u79FB\u9664\u8BE5\u65B9\u6CD5==</td></tr></tbody></table><h4 id="_7-1-6-mysql\u4FE1\u606F\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_7-1-6-mysql\u4FE1\u606F\u51FD\u6570" aria-hidden="true">#</a> 7.1.6 MySQL\u4FE1\u606F\u51FD\u6570</h4><table><thead><tr><th>\u51FD\u6570</th><th>\u7528\u6CD5</th></tr></thead><tbody><tr><td><code>VERSION() </code></td><td>\u8FD4\u56DE\u5F53\u524DMySQL\u7684\u7248\u672C\u53F7</td></tr><tr><td><code>CONNECTION_ID() </code></td><td>\u8FD4\u56DE\u5F53\u524DMySQL\u670D\u52A1\u5668\u7684\u8FDE\u63A5\u6570</td></tr><tr><td><code> DATABASE()</code>\uFF0C<code>SCHEMA()</code></td><td>\u8FD4\u56DEMySQL\u547D\u4EE4\u884C\u5F53\u524D\u6240\u5728\u7684\u6570\u636E\u5E93</td></tr><tr><td><code>USER()</code>\uFF0C<code>CURRENT_USER()</code>\u3001<code>SYSTEM_USER()</code>\uFF0C <code>SESSION_USER()</code></td><td>\u8FD4\u56DE\u5F53\u524D\u8FDE\u63A5MySQL\u7684\u7528\u6237\u540D\uFF0C\u8FD4\u56DE\u7ED3\u679C\u683C\u5F0F\u4E3A \u201C\u4E3B\u673A\u540D@\u7528\u6237\u540D\u201D</td></tr><tr><td><code>CHARSET(value) </code></td><td>\u8FD4\u56DE\u5B57\u7B26\u4E32value\u81EA\u53D8\u91CF\u7684\u5B57\u7B26\u96C6</td></tr><tr><td><code>COLLATION(value)</code></td><td>\u8FD4\u56DE\u5B57\u7B26\u4E32value\u7684\u6BD4\u8F83\u89C4\u5219</td></tr></tbody></table><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT CHARSET(&#39;ABC&#39;), COLLATION(&#39;ABC&#39;);

+----------------+--------------------+
| CHARSET(&#39;ABC&#39;) | COLLATION(&#39;ABC&#39;)   |
+----------------+--------------------+
| utf8mb4        | utf8mb4_0900_ai_ci |
+----------------+--------------------+
1 row in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_7-1-7-\u5176\u4ED6\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_7-1-7-\u5176\u4ED6\u51FD\u6570" aria-hidden="true">#</a> 7.1.7 \u5176\u4ED6\u51FD\u6570</h4><table><thead><tr><th>\u51FD\u6570</th><th>\u7528\u6CD5</th></tr></thead><tbody><tr><td><code>FORMAT(value,n)</code></td><td>\u8FD4\u56DE\u5BF9\u6570\u5B57value\u8FDB\u884C\u683C\u5F0F\u5316\u540E\u7684\u7ED3\u679C\u6570\u636E\u3002n\u8868\u793A <strong>\u56DB\u820D\u4E94\u5165</strong> \u540E\u4FDD\u7559 \u5230\u5C0F\u6570\u4F4D\u6570</td></tr><tr><td><code>INET_ATON(ipvalue) </code></td><td>\u5C06\u4EE5\u70B9\u5206\u9694\u7684IP\u5730\u5740\u8F6C\u5316\u4E3A\u4E00\u4E2A\u6570\u5B57</td></tr><tr><td><code>INET_NTOA(value) </code></td><td>\u5C06\u6570\u5B57\u5F62\u5F0F\u7684IP\u5730\u5740\u8F6C\u5316\u4E3A\u4EE5\u70B9\u5206\u9694\u7684IP\u5730\u5740</td></tr><tr><td><code>BENCHMARK(n,expr) </code></td><td>\u5C06\u8868\u8FBE\u5F0Fexpr\u91CD\u590D\u6267\u884Cn\u6B21\u3002\u7528\u4E8E\u6D4B\u8BD5MySQL\u5904\u7406expr\u8868\u8FBE\u5F0F\u6240\u8017\u8D39\u7684\u65F6\u95F4</td></tr><tr><td><code>CONVERT(value USING char_code) </code></td><td>\u5C06value\u6240\u4F7F\u7528\u7684\u5B57\u7B26\u7F16\u7801\u4FEE\u6539\u4E3Achar_code</td></tr></tbody></table><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT CHARSET(&#39;mysql&#39;), CHARSET(CONVERT(&#39;mysql&#39; USING &#39;utf8&#39;));

+------------------+----------------------------------------+
| CHARSET(&#39;mysql&#39;) | CHARSET(CONVERT(&#39;mysql&#39; USING &#39;utf8&#39;)) |
+------------------+----------------------------------------+
| utf8mb4          | utf8                                   |
+------------------+----------------------------------------+
1 row in set, 1 warning (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_7-2-\u805A\u5408\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_7-2-\u805A\u5408\u51FD\u6570" aria-hidden="true">#</a> 7.2 \u805A\u5408\u51FD\u6570</h3><blockquote><p>\u805A\u5408\u51FD\u6570\u7C7B\u578B</p></blockquote><ul><li><p><code>AVG()</code>\uFF1AAVG(column)\u6C42column\u5217\u7684\u5E73\u5747\u503C\u3002\u53EA\u80FD\u5BF9<strong>\u6570\u503C\u578B\u6570\u636E</strong>\u4F7F\u7528</p></li><li><p><code>SUM()</code>\uFF1ASUM(column)\u6C42column\u5217\u7684\u548C\u3002\u53EA\u80FD\u5BF9<strong>\u6570\u503C\u578B\u6570\u636E</strong>\u4F7F\u7528</p></li><li><p><code>MAX()</code>\uFF1AMAX(column)\u6C42column\u5217\u7684\u6700\u5927\u503C\u3002\u53EF\u4EE5\u5BF9<strong>\u4EFB\u610F\u6570\u636E\u7C7B\u578B</strong>\u7684\u6570\u636E\u4F7F\u7528</p></li><li><p><code>MIN()</code>\uFF1AMIN(column)\u6C42column\u5217\u7684\u6700\u5C0F\u503C\u3002\u53EF\u4EE5\u5BF9<strong>\u4EFB\u610F\u6570\u636E\u7C7B\u578B</strong>\u7684\u6570\u636E\u4F7F\u7528</p></li><li><p><code>COUNT()</code>\uFF1A\u8FD4\u56DE\u8868\u4E2D\u8BB0\u5F55\u603B\u6570\u3002\u53EF\u4EE5\u5BF9<strong>\u4EFB\u610F\u6570\u636E\u7C7B\u578B</strong>\u7684\u6570\u636E\u4F7F\u7528</p><ul><li><p>==\u7528count(*)\uFF0Ccount(1)\uFF0Ccount(\u5217\u540D)\u8C01\u597D\u5462?==</p><p><code>\u7B54\uFF1A</code>\u5BF9\u4E8E<strong>MyISAM\u5F15\u64CE</strong>\u7684\u8868\u662F\u6CA1\u6709\u533A\u522B\u7684\u3002\u8FD9\u79CD\u5F15\u64CE\u5185\u90E8\u6709\u4E00\u8BA1\u6570\u5668\u5728\u7EF4\u62A4\u7740\u884C\u6570\u3002 <strong>Innodb\u5F15\u64CE</strong>\u7684\u8868\u7528count(*),count(1)\u76F4\u63A5\u8BFB\u884C\u6570\uFF0C\u590D\u6742\u5EA6\u662FO(n)\uFF0C\u56E0\u4E3Ainnodb\u771F\u7684\u8981\u53BB\u6570\u4E00\u904D\u3002\u4F46\u597D\u4E8E\u5177\u4F53\u7684count(\u5217\u540D)\u3002</p></li><li><p>==\u80FD\u4E0D\u80FD\u4F7F\u7528count(\u5217\u540D)\u66FF\u6362count(*)?==</p><p><code>\u7B54\uFF1A</code>\u4E0D\u8981\u4F7F\u7528 count(\u5217\u540D)\u6765\u66FF\u4EE3 count(*) \u3002<strong>count(*)\u4F1A\u7EDF\u8BA1\u503C\u4E3A NULL \u7684\u884C\uFF0C\u800C count(\u5217\u540D)\u4E0D\u4F1A\u7EDF\u8BA1\u6B64\u5217\u4E3A NULL \u503C\u7684\u884C</strong>\u3002</p></li></ul></li></ul><blockquote><p>\u8BED\u6CD5</p></blockquote><p>==\u7528\u5728select\u5B50\u53E5\u4E2D==</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT column, \u805A\u5408\u51FD\u6570(column)
FROM table
[WHERE condition]
[GROUP BY group_by_expression]
[ORDER BY column];
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>\u6CE8\u610F</p></blockquote><ul><li>==\u805A\u5408\u51FD\u6570\u4E0D\u80FD\u5D4C\u5957\u4F7F\u7528==</li><li>==\u4E0D\u80FD\u5728where\u8BED\u53E5\u4E2D\u4F7F\u7528\u805A\u5408\u51FD\u6570==</li></ul><h3 id="_7-3-group-by" tabindex="-1"><a class="header-anchor" href="#_7-3-group-by" aria-hidden="true">#</a> 7.3 GROUP BY</h3><blockquote><p>\u8BED\u6CD5</p></blockquote><p>==\u7528\u5728where\u540Eorder by\u524D==</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT column, group_function(column)
FROM table
[WHERE condition]
[GROUP BY group_by_expression]
[ORDER BY column];
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>\u6CE8\u610F\u4E8B\u9879</p></blockquote><p>==\u5728SELECT\u5217\u8868\u4E2D\u6240\u6709\u672A\u5305\u542B\u5728\u7EC4\u51FD\u6570\u4E2D\u7684\u5217\u90FD\u5E94\u8BE5\u5305\u542B\u5728 GROUP BY\u5B50\u53E5\u4E2D==\uFF0C\u4F46\u662F\u5305\u542B\u5728 GROUP BY \u5B50\u53E5\u4E2D\u7684\u5217\u4E0D\u5FC5\u5305\u542B\u5728SELECT \u5217\u8868\u4E2D</p><blockquote><p>GROUP BY\u4E2D\u4F7F\u7528WITH ROLLUP</p></blockquote><ul><li>\u4F7F\u7528 <code>WITH ROLLUP</code> \u5173\u952E\u5B57\u4E4B\u540E\uFF0C\u5728\u6240\u6709\u67E5\u8BE2\u51FA\u7684\u5206\u7EC4\u8BB0\u5F55\u4E4B\u540E<strong>\u589E\u52A0\u4E00\u6761\u8BB0\u5F55</strong>\uFF0C\u8BE5\u8BB0\u5F55\u7528\u6765\u6C42\u5168\u90E8\u6570\u636E\u7684sum\u3001avg\u3001count\u7B49</li><li>\u5F53\u4F7F\u7528ROLLUP\u65F6\uFF0C\u4E0D\u80FD\u540C\u65F6\u4F7F\u7528ORDER BY\u5B50\u53E5\u8FDB\u884C\u7ED3\u679C\u6392\u5E8F\uFF0C\u5373<strong>ROLLUP\u548CORDER BY\u662F\u4E92\u76F8\u6392\u65A5 \u7684</strong></li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT department_id, SUM(salary),AVG(salary),count(*)
    -&gt; FROM employee
    -&gt; GROUP BY department_id WITH ROLLUP;
    
+---------------+-------------+-------------+----------+
| department_id | SUM(salary) | AVG(salary) | count(*) |
+---------------+-------------+-------------+----------+
|             1 |    19600.00 | 9800.000000 |        2 |
|             2 |     3433.00 | 3433.000000 |        1 |
|          NULL |    23033.00 | 7677.666667 |        3 |
+---------------+-------------+-------------+----------+
3 rows in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_7-4-having" tabindex="-1"><a class="header-anchor" href="#_7-4-having" aria-hidden="true">#</a> 7.4 HAVING</h3><blockquote><p>\u4F5C\u7528</p></blockquote><p>\u8FC7\u6EE4\u5206\u7EC4</p><blockquote><p>\u8BED\u6CD5</p></blockquote><ul><li>\u4F7F\u7528\u65F6\uFF0C\u786E\u4FDD\u884C\u5DF2\u88AB\u5206\u7EC4</li><li>==\u4F7F\u7528\u4E86\u805A\u5408\u51FD\u6570==</li><li>==\u548CGROUP BY\u642D\u914D\u4F7F\u7528\uFF0C\u7528\u5728GROUP BY\u540Eorder by\u524D==</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT column, group_function(column)
FROM table
[WHERE condition]
[GROUP BY group_by_expression]
[HAVING group_condition]
[ORDER BY column];
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>\u4F8B\u5B50</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT department_id, MAX(salary)
    -&gt; FROM employee
    -&gt; GROUP BY department_id
    -&gt; HAVING MAX(salary) &gt; 2222
    -&gt; ORDER BY department_id desc;
    
    
+---------------+-------------+
| department_id | MAX(salary) |
+---------------+-------------+
|             2 |     3433.00 |
|             1 |    10000.00 |
+---------------+-------------+
2 rows in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_7-5-select\u6267\u884C\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#_7-5-select\u6267\u884C\u8FC7\u7A0B" aria-hidden="true">#</a> 7.5 SELECT\u6267\u884C\u8FC7\u7A0B</h3><blockquote><p>SELECT\u8BED\u53E5\u7684\u7ED3\u6784</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT ...,....,...
FROM ...[, ..., ...]
[INNER / LEFT / RIGHT] JOIN ... ON ...\u591A\u8868\u7684\u8FDE\u63A5\u6761\u4EF6
WHERE \u4E0D\u5305\u542B\u7EC4\u51FD\u6570\u7684\u8FC7\u6EE4\u6761\u4EF6 [AND / OR \u4E0D\u5305\u542B\u7EC4\u51FD\u6570\u7684\u8FC7\u6EE4\u6761\u4EF6]
GROUP BY ...,...
HAVING \u5305\u542B\u7EC4\u51FD\u6570\u7684\u8FC7\u6EE4\u6761\u4EF6
ORDER BY ..., ..., ... ASC / DESC
LIMIT ...,...
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>SELECT\u8BED\u53E5\u7684\u6267\u884C\u987A\u5E8F</p></blockquote><p>FROM \uFF08---&gt; ON ---&gt; JOIN \uFF09---&gt; WHERE ---&gt; GROUP BY ---&gt; HAVING ---&gt; SELECT ---&gt; DISTINCT ---&gt; ORDER BY ---&gt; LIMIT</p><blockquote><p>SELECT\u6267\u884C\u539F\u7406</p></blockquote><ul><li><strong>\u6267\u884CFROM\u5B50\u53E5</strong>\uFF0C\u751F\u6210\u865A\u62DF\u8868<strong>vt1</strong>\u3002\u5982\u679C\u662F\u591A\u8868\u8054\u67E5\uFF0C\u8FD8\u4F1A\u7ECF\u5386\u5982\u4E0B\u51E0\u4E2A\u6B65\u9AA4\uFF1A <ul><li>\u5148<strong>\u6C42\u4E24\u4E2A\u8868\u7684\u7B1B\u5361\u5C14\u79EF</strong>\uFF0C\u751F\u6210\u865A\u62DF\u8868<strong>vt1.1</strong></li><li><strong>\u6267\u884CON\u8BED\u53E5</strong>\uFF0C\u5BF9\u8868vt1\u7684\u6570\u636E\u8FDB\u884C\u7B5B\u9009\uFF0C\u751F\u6210\u8868<strong>vt1.2</strong></li><li>\u5982\u679C\u662F\u5916\u8FDE\u63A5\uFF08\u5DE6\u8FDE\u63A5/\u53F3\u8FDE\u63A5/\u5168\u8FDE\u63A5\uFF09\uFF0C\u5219\u5BF9\u8868vt1.2<strong>\u6DFB\u52A0\u5916\u90E8\u884C</strong>\uFF0C\u751F\u6210\u865A\u62DF\u8868<strong>vt1.3</strong></li></ul></li><li><strong>\u6267\u884CWHERE\u8BED\u53E5</strong>\uFF0C\u5BF9FROM\u8BED\u53E5\u4E2D\u751F\u6210\u7684\u865A\u62DF\u8868\u8FDB\u884C\u7B5B\u9009\uFF0C\u751F\u6210\u865A\u62DF\u8868<strong>vt2</strong></li><li><strong>\u6267\u884CGROUP BY\u8BED\u53E5</strong>\uFF0C\u5BF9\u8868vt2\u4E2D\u7684\u6570\u636E\u8FDB\u884C\u5206\u7EC4\uFF0C\u751F\u6210\u865A\u62DF\u8868<strong>vt3</strong></li><li><strong>\u6267\u884CHAVING\u8BED\u53E5</strong>\uFF0C\u5BF9\u8868vt3\u4E2D\u7684\u6570\u636E\u518D\u6B21\u8FDB\u884C\u7B5B\u9009\uFF0C\u751F\u6210\u865A\u62DF\u8868<strong>vt4</strong>\u3002==HAVING\u8BED\u53E5\u4E2D\u53EF\u4EE5\u4F7F\u7528SELECT\u8BED\u53E5\u4E2D\u7684\u5217\u4EE5\u53CA\u5217\u7684\u522B\u540D==</li><li><strong>\u6267\u884CSELECT\u8BED\u53E5</strong>\uFF0C\u5728\u8868vt4\u4E2D\u9009\u53D6\u9700\u8981\u7684\u5217\uFF0C\u751F\u6210\u865A\u62DF\u8868<strong>vt5</strong>\u3002</li><li><strong>\u6267\u884CDISTINCT\u8BED\u53E5</strong>\uFF0C\u5BF9\u8868vt5\u4E2D\u7684\u6570\u636E\u53BB\u91CD\uFF0C\u751F\u6210\u865A\u62DF\u8868<strong>vt6</strong>\u3002</li><li><strong>\u6267\u884CORDER BY\u8BED\u53E5</strong>\uFF0C\u5BF9\u8868vt6\u4E2D\u7684\u6570\u636E\u8FDB\u884C\u6392\u5E8F\uFF0C\u751F\u6210\u865A\u62DF\u8868<strong>vt7</strong>\u3002==ORDER BY\u8BED\u53E5\u4E2D\u53EF\u4EE5\u4F7F\u7528SELECT\u8BED\u53E5\u4E2D\u7684\u5217\u4EE5\u53CA\u5217\u7684\u522B\u540D==</li><li><strong>\u6267\u884CLIMIT\u8BED\u53E5</strong>\uFF0C\u5728\u8868vt7\u4E2D\u53D6\u51FA\u6307\u5B9A\u7684\u884C\u8BB0\u5F55\uFF0C\u751F\u6210\u865A\u62DF\u8868<strong>vt8</strong>\u3002</li></ul><h2 id="_8-\u5B50\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_8-\u5B50\u67E5\u8BE2" aria-hidden="true">#</a> 8 \u5B50\u67E5\u8BE2</h2><h3 id="_8-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_8-1-\u6982\u8FF0" aria-hidden="true">#</a> 8.1 \u6982\u8FF0</h3><h4 id="_8-1-1-\u5B9A\u4E49\u4E0E\u8BED\u6CD5" tabindex="-1"><a class="header-anchor" href="#_8-1-1-\u5B9A\u4E49\u4E0E\u8BED\u6CD5" aria-hidden="true">#</a> 8.1.1 \u5B9A\u4E49\u4E0E\u8BED\u6CD5</h4><blockquote><p>\u5B9A\u4E49</p></blockquote><p>\u5B50\u67E5\u8BE2\u662F\u6307\u4E00\u4E2A\u67E5\u8BE2\u8BED\u53E5\u5D4C\u5957\u5728\u53E6\u5916\u4E00\u4E2A\u67E5\u8BE2\u8BED\u53E5\u5185\u90E8</p><blockquote><p>\u8BED\u6CD5</p></blockquote><p>\u5B50\u67E5\u8BE2\u53EF\u4EE5\u5728<code>SELECT</code>\u3001<code>WHERE</code>\u3001<code>HAVING</code>\u3001<code>CASE</code> \u8BED\u53E5\u4E2D\u4F7F\u7528\u3002\u57FA\u672C\u8BED\u6CD5\u5982\u4E0B</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT ..., ..., ...
FROM ...
WHERE \u8868\u8FBE\u5F0F\u5DE6\u4FA7\u5185\u5BB9 \u64CD\u4F5C\u7B26 (\u5B50\u67E5\u8BE2)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>==\u8BF4\u660E\u5982\u4E0B\uFF1A==</p><ul><li>\u5B50\u67E5\u8BE2\u7684\u7ED3\u679C\u88AB\u4E3B\u67E5\u8BE2\u4F7F\u7528</li></ul><p>==\u6CE8\u610F\u4E8B\u9879\uFF1A==</p><ul><li>\u5B50\u67E5\u8BE2\u8981\u5305\u542B\u5728\u4E00\u5BF9\u5C0F\u62EC\u53F7\u5185</li><li>\u5C06\u5B50\u67E5\u8BE2\u653E\u5728\u6BD4\u8F83\u6761\u4EF6\u7684\u53F3\u4FA7 ===&gt; \u7F8E\u89C2</li><li>\u5355\u884C\u64CD\u4F5C\u7B26\u5BF9\u5E94\u5355\u884C\u5B50\u67E5\u8BE2\uFF0C\u591A\u884C\u64CD\u4F5C\u7B26\u5BF9\u5E94\u591A\u884C\u5B50\u67E5\u8BE2\uFF0C\u6B64\u5916\uFF0C\u591A\u884C\u5B50\u67E5\u8BE2\u4E2D\u4E5F\u53EF\u4EE5\u5355\u884C\u64CD\u4F5C\u7B26\u548C\u591A\u884C\u64CD\u4F5C\u7B26\u4E00\u8D77\u4F7F\u7528\u3002</li></ul><h4 id="_8-1-2-\u5B50\u67E5\u8BE2\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#_8-1-2-\u5B50\u67E5\u8BE2\u5206\u7C7B" aria-hidden="true">#</a> 8.1.2 \u5B50\u67E5\u8BE2\u5206\u7C7B</h4><blockquote><p>\u5206\u7C7B\u65B9\u5F0F1\uFF1A==\u6309\u7167\u5B50\u67E5\u8BE2\u7684\u8FD4\u56DE\u7ED3\u679C\u662F\u4E00\u6761\u548C\u591A\u6761\u8BB0\u5F55\u5206==</p></blockquote><ul><li><strong>\u5355\u884C\u5B50\u67E5\u8BE2</strong>\uFF1A\u5B50\u67E5\u8BE2\u7684\u8FD4\u56DE\u7ED3\u679C\u662F\u4E00\u6761\u8BB0\u5F55</li><li><strong>\u591A\u884C\u5B50\u67E5\u8BE2</strong>\uFF1A\u5B50\u67E5\u8BE2\u7684\u8FD4\u56DE\u7ED3\u679C\u662F\u591A\u6761\u8BB0\u5F55</li></ul><blockquote><p>\u5206\u7C7B\u65B9\u5F0F2\uFF1A==\u6309\u7167\u5B50\u67E5\u8BE2\u7684\u6267\u884C\u662F\u5426\u4F9D\u8D56\u4E3B\u67E5\u8BE2\u5206==</p></blockquote><ul><li><strong>\u76F8\u5173\u5B50\u67E5\u8BE2</strong>\uFF1A\u5B50\u67E5\u8BE2\u7684\u6267\u884C\u4F9D\u8D56\u5916\u90E8\u60C5\u51B5\uFF0C\u901A\u5E38\u662F\u6307<strong>\u5B50\u67E5\u8BE2\u4F7F\u7528\u4E86\u5916\u90E8\u7684\u8868\uFF0C\u5E76\u8FDB\u884C\u4E86\u6761\u4EF6\u5173\u8054</strong>\u3002\u6BCF\u6267\u884C\u4E00\u6B21\u5916\u90E8\u67E5\u8BE2\uFF0C\u5B50\u67E5\u8BE2\u90FD\u8981\u91CD\u65B0\u8BA1\u7B97\u4E00\u6B21\u3002</li><li><strong>\u4E0D\u76F8\u5173\u5B50\u67E5\u8BE2</strong></li></ul><h3 id="_8-2-\u5355\u884C\u5B50\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_8-2-\u5355\u884C\u5B50\u67E5\u8BE2" aria-hidden="true">#</a> 8.2 \u5355\u884C\u5B50\u67E5\u8BE2</h3><h4 id="_8-2-1-\u5355\u884C\u6BD4\u8F83\u64CD\u4F5C\u7B26" tabindex="-1"><a class="header-anchor" href="#_8-2-1-\u5355\u884C\u6BD4\u8F83\u64CD\u4F5C\u7B26" aria-hidden="true">#</a> 8.2.1 \u5355\u884C\u6BD4\u8F83\u64CD\u4F5C\u7B26</h4><table><thead><tr><th>\u64CD\u4F5C\u7B26</th><th>\u542B\u4E49</th></tr></thead><tbody><tr><td>=</td><td>\u7B49\u4E8E</td></tr><tr><td>&gt;</td><td>\u5927\u4E8E</td></tr><tr><td>&gt;=</td><td>\u5927\u4E8E\u7B49\u4E8E</td></tr><tr><td>&lt;</td><td>\u5C0F\u4E8E</td></tr><tr><td>&lt;=</td><td>\u5C0F\u4E8E\u7B49\u4E8E</td></tr><tr><td>&lt;&gt;</td><td>\u4E0D\u7B49\u4E8E</td></tr></tbody></table><h4 id="_8-2-2-\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#_8-2-2-\u793A\u4F8B" aria-hidden="true">#</a> 8.2.2 \u793A\u4F8B</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u67E5\u8BE2\u5DE5\u8D44\u6BD4\u516C\u53F8\u5E73\u5747\u5DE5\u8D44\u9AD8\u7684\u5458\u5DE5\u7684\u5458\u5DE5\u53F7\uFF0C\u59D3\u540D\u548C\u5DE5\u8D44\u3002
SELECT employee_id, last_name, salary
FROM employees
WHERE salary &gt; (
                    SELECT AVG(salary)
                    FROM employees
                )
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_8-2-3-\u5176\u4ED6\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#_8-2-3-\u5176\u4ED6\u8BF4\u660E" aria-hidden="true">#</a> 8.2.3 \u5176\u4ED6\u8BF4\u660E</h4><ul><li>\u5982\u679C\u5B50\u67E5\u8BE2\u7684\u7ED3\u679C\u4E3A\u7A7A\uFF0C\u4E3B\u67E5\u8BE2\u4E5F\u4E0D\u4F1A\u62A5\u9519</li><li>\u5F53\u5B50\u67E5\u8BE2\u8FD4\u56DE\u591A\u884C\u8BB0\u5F55\u65F6\uFF0C\u5982\u679C\u53EA\u4F7F\u7528\u5355\u884C\u6BD4\u8F83\u64CD\u4F5C\u7B26\uFF0C\u4F1A\u62A5\u9519</li></ul><h3 id="_8-2-\u591A\u884C\u5B50\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_8-2-\u591A\u884C\u5B50\u67E5\u8BE2" aria-hidden="true">#</a> 8.2 \u591A\u884C\u5B50\u67E5\u8BE2</h3><h4 id="_8-2-1-\u591A\u884C\u6BD4\u8F83\u64CD\u4F5C\u7B26" tabindex="-1"><a class="header-anchor" href="#_8-2-1-\u591A\u884C\u6BD4\u8F83\u64CD\u4F5C\u7B26" aria-hidden="true">#</a> 8.2.1 \u591A\u884C\u6BD4\u8F83\u64CD\u4F5C\u7B26</h4><table><thead><tr><th>\u64CD\u4F5C\u7B26</th><th>\u542B\u4E49</th></tr></thead><tbody><tr><td>IN</td><td>\u7B49\u4E8E\u5217\u8868\u4E2D\u7684<strong>\u4EFB\u610F\u4E00\u4E2A</strong></td></tr><tr><td>ANY</td><td><u>\u9700\u8981\u548C\u5355\u884C\u6BD4\u8F83\u64CD\u4F5C\u7B26\u4E00\u8D77\u4F7F\u7528</u>\uFF0C\u548C\u5B50\u67E5\u8BE2\u8FD4\u56DE\u7684<strong>\u67D0\u4E00\u4E2A\u503C</strong>\u6BD4\u8F83</td></tr><tr><td>ALL</td><td><u>\u9700\u8981\u548C\u5355\u884C\u6BD4\u8F83\u64CD\u4F5C\u7B26\u4E00\u8D77\u4F7F\u7528</u>\uFF0C\u548C\u5B50\u67E5\u8BE2\u8FD4\u56DE\u7684<strong>\u6240\u6709\u503C</strong>\u6BD4\u8F83</td></tr><tr><td>SOME</td><td>\u5B9E\u9645\u4E0A\u662FANY\u7684\u522B\u540D\uFF0C\u4F5C\u7528\u76F8\u540C\uFF0C\u4E00\u822C\u5E38\u4F7F\u7528ANY</td></tr></tbody></table><h4 id="_8-2-2-\u793A\u4F8B-1" tabindex="-1"><a class="header-anchor" href="#_8-2-2-\u793A\u4F8B-1" aria-hidden="true">#</a> 8.2.2 \u793A\u4F8B</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u9009\u62E9\u5DE5\u8D44\u5927\u4E8E\u6240\u6709JOB_ID = &#39;SA_MAN&#39;\u7684\u5458\u5DE5\u7684\u5DE5\u8D44\u7684\u5458\u5DE5\u7684last_name, job_id, salary
SELECT last_name, job_id, salary
FROM employees
WHERE salary &gt; ALL (
                        SELECT salary
                        FROM employees
                        WHERE job_id = &#39;SA_MAN&#39;
                    )
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_8-2-3-\u5176\u4ED6\u8BF4\u660E-1" tabindex="-1"><a class="header-anchor" href="#_8-2-3-\u5176\u4ED6\u8BF4\u660E-1" aria-hidden="true">#</a> 8.2.3 \u5176\u4ED6\u8BF4\u660E</h4><p>\u65E0</p><h3 id="_8-3-\u76F8\u5173\u5B50\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_8-3-\u76F8\u5173\u5B50\u67E5\u8BE2" aria-hidden="true">#</a> 8.3 \u76F8\u5173\u5B50\u67E5\u8BE2</h3><h4 id="_8-3-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_8-3-1-\u6982\u8FF0" aria-hidden="true">#</a> 8.3.1 \u6982\u8FF0</h4><blockquote><p>\u76F8\u5173\u5B50\u67E5\u8BE2\u4E0E\u4E0D\u76F8\u5173\u5B50\u67E5\u8BE2</p></blockquote><p>\u76F8\u5173\u5B50\u67E5\u8BE2\u548C\u4E0D\u76F8\u5173\u5B50\u67E5\u8BE2\u7684\u533A\u522B\u662F\uFF0C<strong>\u76F8\u5173\u5B50\u67E5\u8BE2\u4E2D\u7684\u5B50\u67E5\u8BE2\u4F7F\u7528\u4E86\u5916\u90E8\u7684\u8868\uFF0C\u5E76\u8FDB\u884C\u4E86\u6761\u4EF6\u5173\u8054</strong>\u3002</p><p>\u6BD4\u5982\uFF1A\u67E5\u8BE2\u5458\u5DE5\u5DE5\u8D44\u9AD8\u4E8E<strong>\u90E8\u95E8\u5E73\u5747\u5DE5\u8D44</strong>\u7684\u5458\u5DE5\u4FE1\u606F\uFF0C\u662F\u76F8\u5173\u5B50\u67E5\u8BE2\uFF1B\u67E5\u8BE2\u5458\u5DE5\u5DE5\u8D44\u9AD8\u4E8E<strong>\u516C\u53F8\u5E73\u5747\u5DE5\u8D44</strong>\u7684\u5458\u5DE5\u4FE1\u606F\uFF0C\u662F\u4E0D\u76F8\u5173\u67E5\u8BE2\u3002</p><h4 id="_8-3-2-\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#_8-3-2-\u793A\u4F8B" aria-hidden="true">#</a> 8.3.2 \u793A\u4F8B</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u67E5\u8BE2\u5458\u5DE5\u4E2D\u5DE5\u8D44\u5927\u4E8E\u672C\u90E8\u95E8\u5E73\u5747\u5DE5\u8D44\u7684\u5458\u5DE5\u7684last_name,salary\u548C\u5176department_id
SELECT last_name, salary, department_id
FROM employees o
WHERE department_id IS NOT NULL
AND salary &gt; (
                SELECT AVG(salary)
                FROM employees i
                WHERE i.department_id = o.department_id
            ) 
							
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_8-3-3-exists-\u4E0E-not-exists\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_8-3-3-exists-\u4E0E-not-exists\u5173\u952E\u5B57" aria-hidden="true">#</a> 8.3.3 EXISTS \u4E0E NOT EXISTS\u5173\u952E\u5B57</h4><blockquote><p>\u6982\u8FF0</p></blockquote><p>\u76F8\u5173\u5B50\u67E5\u8BE2\u901A\u5E38\u4F1A\u548C<strong>EXISTS</strong>\u64CD\u4F5C\u7B26\u4E00\u8D77\u6765\u4F7F\u7528\uFF0C\u7528\u6765\u68C0\u67E5\u5728\u5B50\u67E5\u8BE2\u4E2D\u662F\u5426\u5B58\u5728\u6EE1\u8DB3\u6761\u4EF6\u7684\u884C\uFF1A</p><ul><li><strong>\u5982\u679C\u5F53\u524D\u67E5\u8BE2\u4E0D\u6EE1\u8DB3\u6761\u4EF6</strong>\uFF0C\u6B64\u65F6\u8FD4\u56DEfalse\uFF0C\u5E76\u7EE7\u7EED\u5728\u5B50\u67E5\u8BE2\u4E2D\u67E5\u627E\uFF1B</li><li><strong>\u5982\u679C\u627E\u5230\u4E86\u6EE1\u8DB3\u6761\u4EF6\u7684\u884C</strong>\uFF0C\u6B64\u65F6\u8FD4\u56DEtrue\uFF0C\u7ED3\u675F\u67E5\u627E</li></ul><p>==\u6CE8\u610F\uFF1A==EXISTS\u64CD\u4F5C\u7B26\u540E\u7684\u5B50\u67E5\u8BE2\u4E2DSELECT\u8BED\u53E5\u4E2D\u7684\u5217\uFF0C\u4E0D\u4F1A\u8FD4\u56DE\uFF0C\u53EA\u4F1A\u8FD4\u56DEtrue\u6216\u8005false\u3002\u5177\u4F53\u8BF4\u660E\u89C1\u793A\u4F8B\u4EE3\u7801\u3002</p><blockquote><p>\u793A\u4F8B</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u67E5\u8BE2departments\u8868\u4E2D\uFF0C\u4E0D\u5B58\u5728\u4E8Eemployees\u8868\u4E2D\u7684\u90E8\u95E8\u7684department_id\u548Cdepartment_name
SELECT d.department_id, d.department_name
FROM departments d
WHERE NOT EXISTS (
                    SELECT e.department_id 
                    FROM employees e
                    WHERE e.department_id = d.department_id
                ) 
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\u5982\u4E0A<strong>\u5B50\u67E5\u8BE2</strong>\u7684<code>SELECT e.department_id</code>\uFF0C\u4E5F\u53EF\u4EE5\u5199\u6210<code>SELECT *</code> \u3001 <code>SELECT &#39;x&#39;</code>\u7B49\u3002<strong>\u53EA\u8981\u6EE1\u8DB3\u5B50\u67E5\u8BE2\u6761\u4EF6\u5C31\u4F1A\u8FD4\u56DEtrue\uFF0C\u4E0D\u4F1A\u8FD4\u56DESELECT\u4E2D\u7684\u5217</strong>\u3002</p><h3 id="_8-4-\u76F8\u5173\u66F4\u65B0" tabindex="-1"><a class="header-anchor" href="#_8-4-\u76F8\u5173\u66F4\u65B0" aria-hidden="true">#</a> 8.4 \u76F8\u5173\u66F4\u65B0</h3><h4 id="_8-4-1-\u57FA\u672C\u8BED\u6CD5" tabindex="-1"><a class="header-anchor" href="#_8-4-1-\u57FA\u672C\u8BED\u6CD5" aria-hidden="true">#</a> 8.4.1 \u57FA\u672C\u8BED\u6CD5</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>UPDATE \u6570\u636E\u5E93\u88681 \u8868\u522B\u540D1
SET column = (SELECT \u5B57\u6BB5\u540D
FROM \u6570\u636E\u5E93\u88682 \u8868\u522B\u540D2
WHERE \u8868\u522B\u540D1.\u5217\u540D = \u8868\u522B\u540D2.\u5217\u540D);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_8-4-2-\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#_8-4-2-\u793A\u4F8B" aria-hidden="true">#</a> 8.4.2 \u793A\u4F8B</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u5728employees\u4E2D\u589E\u52A0\u4E00\u4E2Adepartment_name\u5B57\u6BB5\uFF0C\u6570\u636E\u4E3A\u5458\u5DE5\u5BF9\u5E94\u7684\u90E8\u95E8\u540D\u79F0
# 1\uFF09
ALTER TABLE employees ADD(department_name VARCHAR2(14));
# 2\uFF09
UPDATE employees e
SET department_name = (
    SELECT department_name
	FROM departments d
	WHERE e.department_id = d.department_id
);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_8-5-\u76F8\u5173\u5220\u9664" tabindex="-1"><a class="header-anchor" href="#_8-5-\u76F8\u5173\u5220\u9664" aria-hidden="true">#</a> 8.5 \u76F8\u5173\u5220\u9664</h3><h4 id="_8-5-1-\u57FA\u672C\u8BED\u6CD5" tabindex="-1"><a class="header-anchor" href="#_8-5-1-\u57FA\u672C\u8BED\u6CD5" aria-hidden="true">#</a> 8.5.1 \u57FA\u672C\u8BED\u6CD5</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DELETE FROM \u6570\u636E\u5E93\u88681 \u8868\u522B\u540D1
WHERE \u5217\u540D \u64CD\u4F5C\u7B26 (
    SELECT expression
	FROM \u6570\u636E\u5E93\u88682 \u8868\u522B\u540D2
	WHERE \u8868\u522B\u540D1.\u5217\u540D = \u8868\u522B\u540D2.\u5217\u540D
);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_8-5-2-\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#_8-5-2-\u793A\u4F8B" aria-hidden="true">#</a> 8.5.2 \u793A\u4F8B</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u5220\u9664\u8868employees\u4E2D\uFF0C\u5176\u4E0Eemp_history\u8868\u7686\u6709\u7684\u6570\u636E
DELETE FROM employees e
WHERE employee_id in (
    SELECT employee_id
	FROM emp_history
	WHERE employee_id = e.employee_id
);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_9-\u521B\u5EFA\u548C\u7BA1\u7406\u6570\u636E\u5E93\u3001\u6570\u636E\u5E93\u8868" tabindex="-1"><a class="header-anchor" href="#_9-\u521B\u5EFA\u548C\u7BA1\u7406\u6570\u636E\u5E93\u3001\u6570\u636E\u5E93\u8868" aria-hidden="true">#</a> 9 \u521B\u5EFA\u548C\u7BA1\u7406\u6570\u636E\u5E93\u3001\u6570\u636E\u5E93\u8868</h2><h3 id="_9-1-\u521B\u5EFA\u548C\u7BA1\u7406\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_9-1-\u521B\u5EFA\u548C\u7BA1\u7406\u6570\u636E\u5E93" aria-hidden="true">#</a> 9.1 \u521B\u5EFA\u548C\u7BA1\u7406\u6570\u636E\u5E93</h3><h4 id="_9-1-1-\u521B\u5EFA\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_9-1-1-\u521B\u5EFA\u6570\u636E\u5E93" aria-hidden="true">#</a> 9.1.1 \u521B\u5EFA\u6570\u636E\u5E93</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE DATABASE IF NOT EXISTS \u6570\u636E\u5E93\u540D CHARACTER SET &#39;utf8mb4&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>==\u8BF4\u660E==\uFF1A</p><ul><li><strong>IF NOT EXISTS</strong>\uFF0C\u8868\u793A\u5982\u679C\u8981\u521B\u5EFA\u7684\u6570\u636E\u5E93\u4E0D\u5B58\u5728\uFF0C\u624D\u4F1A\u521B\u5EFA\u6210\u529F\u3002\u5982\u679C\u5B58\u5728\uFF0C\u4E0D\u4F1A\u521B\u5EFA\uFF0C\u4E5F\u4E0D\u4F1A\u62A5\u9519\u3002</li><li>\u5982\u679C\u4E0D\u6307\u660E\u5B57\u7B26\u7F16\u7801\u96C6CHARACTER\uFF0C\u4F1A\u4F7F\u7528\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF\u9ED8\u8BA4\u5B57\u7B26\u7F16\u7801\u96C6</li></ul><h4 id="_9-1-2-\u4FEE\u6539\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_9-1-2-\u4FEE\u6539\u6570\u636E\u5E93" aria-hidden="true">#</a> 9.1.2 \u4FEE\u6539\u6570\u636E\u5E93</h4><p><strong>\u4F01\u4E1A\u5F00\u53D1\u4E2D\u4E00\u822C\u4E0D\u4F1A\u4FEE\u6539\u3002\u6539\u7684\u8BDD\uFF0C\u4E5F\u662F\u53EA\u80FD\u6539\u5B57\u7B26\u96C6\uFF0C\u6570\u636E\u5E93\u540D\u65E0\u6CD5\u4FEE\u6539\u3002</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u66F4\u6539\u6570\u636E\u5E93\u5B57\u7B26\u96C6
ALTER DATABASE \u6570\u636E\u5E93\u540D CHARACTER SET &#39;gbk&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_9-1-3-\u5220\u9664\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_9-1-3-\u5220\u9664\u6570\u636E\u5E93" aria-hidden="true">#</a> 9.1.3 \u5220\u9664\u6570\u636E\u5E93</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u5220\u9664\u6570\u636E\u5E93\uFF08IF EXISTS\uFF1A\u5982\u679C\u8981\u5220\u9664\u7684\u6570\u636E\u5E93\u5B58\u5728\uFF0C\u5219\u5220\u9664\u6210\u529F\u3002\u5982\u679C\u4E0D\u5B58\u5728\uFF0C\u4E5F\u4E0D\u4F1A\u62A5\u9519\uFF09
DROP DATABASE IF EXISTS \u6570\u636E\u5E93\u540D;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_9-1-4-\u6570\u636E\u5E93\u5176\u4ED6\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#_9-1-4-\u6570\u636E\u5E93\u5176\u4ED6\u64CD\u4F5C" aria-hidden="true">#</a> 9.1.4 \u6570\u636E\u5E93\u5176\u4ED6\u64CD\u4F5C</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u67E5\u770B\u5F53\u524D\u8FDE\u63A5\u4E2D\u7684\u6240\u6709\u6570\u636E\u5E93
SHOW DATABASES;

# \u67E5\u770B\u521B\u5EFA\u6570\u636E\u5E93\u7684\u8BED\u53E5\u7684\u7ED3\u6784
SHOW CREATE DATABASE \u6570\u636E\u5E93\u540D;

# \u5207\u6362\u6570\u636E\u5E93
USE \u6570\u636E\u5E93\u540D;

# \u67E5\u770B\u5F53\u524D\u6570\u636E\u5E93\u4E2D\u6240\u6709\u7684\u8868
SHOW TABLES;

# \u67E5\u770B\u6307\u5B9A\u6570\u636E\u5E93\u4E2D\u6240\u6709\u7684\u8868
SHOW TABLES FROM \u6570\u636E\u5E93\u540D;

# \u67E5\u770B\u5F53\u524D\u4F7F\u7528\u7684\u6570\u636E\u5E93
SELECT DATABASE();
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_9-2-\u521B\u5EFA\u548C\u7BA1\u7406\u6570\u636E\u5E93\u8868" tabindex="-1"><a class="header-anchor" href="#_9-2-\u521B\u5EFA\u548C\u7BA1\u7406\u6570\u636E\u5E93\u8868" aria-hidden="true">#</a> 9.2 \u521B\u5EFA\u548C\u7BA1\u7406\u6570\u636E\u5E93\u8868</h3><h4 id="_9-2-1-\u521B\u5EFA\u8868" tabindex="-1"><a class="header-anchor" href="#_9-2-1-\u521B\u5EFA\u8868" aria-hidden="true">#</a> 9.2.1 \u521B\u5EFA\u8868</h4><ul><li><p>\u65B9\u5F0F1\uFF1A\u201C\u767D\u624B\u8D77\u5BB6\u201D\u5F0F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE [IF NOT EXISTS] \u8868\u540D(
	\u5B57\u6BB51, \u6570\u636E\u7C7B\u578B [\u7EA6\u675F\u6761\u4EF6] [\u9ED8\u8BA4\u503C],
    \u5B57\u6BB52, \u6570\u636E\u7C7B\u578B [\u7EA6\u675F\u6761\u4EF6] [\u9ED8\u8BA4\u503C],
    \u5B57\u6BB53, \u6570\u636E\u7C7B\u578B [\u7EA6\u675F\u6761\u4EF6] [\u9ED8\u8BA4\u503C],
    \u2026\u2026
    [\u8868\u7EA6\u675F\u6761\u4EF6]
);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>==\u8BF4\u660E\uFF1A==</p><ul><li><strong>IF NOT EXISTS</strong>\uFF0C\u8868\u793A\u5982\u679C\u8981\u521B\u5EFA\u7684\u8868\u4E0D\u5B58\u5728\uFF0C\u624D\u4F1A\u521B\u5EFA\u6210\u529F\u3002\u5982\u679C\u5B58\u5728\uFF0C\u4E0D\u4F1A\u521B\u5EFA\uFF0C\u4E5F\u4E0D\u4F1A\u62A5\u9519\u3002</li><li>\u5982\u679C\u4E0D\u6307\u660E\u5B57\u7B26\u7F16\u7801\u96C6CHARACTER\uFF0C\u4F1A\u4F7F\u7528\u5F53\u524D\u6570\u636E\u5E93\u9ED8\u8BA4\u7684\u5B57\u7B26\u7F16\u7801\u96C6</li></ul></li><li><p>\u65B9\u5F0F2\uFF1A\u57FA\u4E8E\u5DF2\u6709\u7684\u8868\u521B\u5EFA</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE \u8868\u540D
AS 
SELECT \u5217\u540D1, \u5217\u540D2, \u5217\u540D3, ...
FROM \u5DF2\u5B58\u5728\u7684\u8868\u540D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>==\u8BF4\u660E\uFF1A==</p><ul><li>\u8FD9\u79CD\u65B9\u5F0F\u662F\u57FA\u4E8E\u5DF2\u6709\u7684\u8868\u521B\u5EFA\uFF0C\u6216\u8005\u662F\u57FA\u4E8E\u5DF2\u6709\u7684\u8868\u7ECF\u8FC7\u4E00\u7CFB\u5217\u7684\u67E5\u8BE2\u51FA\u6765\u7684\u6570\u636E\u6765\u521B\u5EFA\u3002<strong>AS</strong>\u540E\u8FB9\u52A0\u4E0A\u4E00\u4E2ASELECT\u67E5\u8BE2\u8BED\u53E5\u5373\u53EF\u3002\u67E5\u8BE2\u8BED\u53E5\u4E2D\u7684\u5217\u540D\u6216\u8005\u5217\u7684\u522B\u540D\u5C31\u4F5C\u4E3A\u65B0\u8868\u7684\u5217\u540D\u3002</li><li>\u8FD9\u79CD\u65B9\u5F0F\u5728\u521B\u5EFA\u8868\u65F6\uFF0C\u8FD8\u4F1A\u5728\u65B0\u8868\u4E2D\u5BFC\u5165\u7B26\u5408\u6761\u4EF6\u7684\u6570\u636E\u3002</li><li>\u9664\u4E86\u975E\u7A7A\u7EA6\u675F\uFF0C\u5176\u4ED6\u7EA6\u675F\u4E0D\u80FD\u88AB\u8D4B\u503C\u8FC7\u6765</li></ul></li></ul><h4 id="_9-2-2-\u4FEE\u6539\u8868" tabindex="-1"><a class="header-anchor" href="#_9-2-2-\u4FEE\u6539\u8868" aria-hidden="true">#</a> 9.2.2 \u4FEE\u6539\u8868</h4><p><strong>\u4FEE\u6539\u8868\u6307\u7684\u662F\u4FEE\u6539\u6570\u636E\u5E93\u4E2D\u5DF2\u7ECF\u5B58\u5728\u7684\u6570\u636E\u8868\u7684\u7ED3\u6784</strong>\uFF0C\u5206\u4E3A\u5982\u4E0B4\u4E2D\u60C5\u51B5\uFF1A</p><ul><li>\u6DFB\u52A0\u65B0\u7684\u5217</li><li>\u4FEE\u6539\u5DF2\u6709\u7684\u5217</li><li>\u5220\u9664\u5DF2\u6709\u7684\u5217</li><li>\u91CD\u547D\u540D\u5DF2\u6709\u7684\u5217</li></ul><p>\u5B9E\u73B0\u4EE5\u4E0A\u529F\u80FD\u7684\u5173\u952E\u5B57\uFF0C<strong>ALTER TABLE</strong>\u3002</p><blockquote><p>\u6DFB\u52A0\u65B0\u7684\u5217</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D ADD \u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B [\u7EA6\u675F\u6761\u4EF6] [\u5B57\u6BB5\u4F4D\u7F6E\uFF1A FIRST \u6216 AFTER \u5B57\u6BB5\u540D];
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>==\u8BF4\u660E==\uFF1A</p><ul><li>\u5173\u952E\u5B57\uFF1A<strong>ALTER TABLE</strong> \u548C <strong>ADD</strong></li><li>\u7EA6\u675F\u6761\u4EF6\u662F\u53EF\u9009\u7684\uFF0C\u7528\u6765\u5BF9\u6DFB\u52A0\u7684\u5B57\u6BB5\u8FDB\u884C\u7EA6\u675F\u3002</li><li>\u5B57\u6BB5\u4F4D\u7F6E\uFF0C\u4E5F\u662F\u53EF\u9009\u7684\u3002\u4E0D\u540C\u7684\u503C\u4EE3\u8868\u7684\u610F\u4E49\u5982\u4E0B\uFF1A <ul><li><code>\u4E0D\u5199</code>\uFF1A\u8868\u793A\u5728\u8868\u7684\u672B\u5C3E\u8FFD\u52A0\u65B0\u7684\u5217</li><li><code>FIRST</code>\uFF1A\u5728\u8868\u7684\u5F00\u5934\u6DFB\u52A0\u65B0\u7684\u5217</li><li><code>AFTER \u5B57\u6BB5\u540D</code>\uFF1A\u5728\u201C\u5B57\u6BB5\u540D\u201D<strong>\u4E4B\u540E</strong>\u63D2\u5165\u65B0\u7684\u5217</li></ul></li></ul><blockquote><p>\u4FEE\u6539\u5DF2\u6709\u7684\u5217</p></blockquote><p><strong>\u4FEE\u6539\u5217\u6307\u7684\u662F\u4FEE\u6539\u5217\u7684\u5B57\u6BB5\u7C7B\u578B\u3001\u9ED8\u8BA4\u503C\u3001\u5728\u8868\u4E2D\u7684\u4F4D\u7F6E\u3002</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D MODIFY \u5B57\u6BB5\u540D1 \u5B57\u6BB5\u7C7B\u578B [DEFAULT \u9ED8\u8BA4\u503C][FIRST|AFTER \u5B57\u6BB5\u540D2]
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>==\u8BF4\u660E\uFF1A==</p><ul><li>\u5173\u952E\u5B57\uFF1A<strong>ALTER TABLE</strong> \u548C <strong>MODIFY</strong></li><li>\u9ED8\u8BA4\u503C\u662F\u53EF\u9009\u7684\u3002</li><li>\u5B57\u6BB5\u4F4D\u7F6E\uFF0C\u4E5F\u662F\u53EF\u9009\u7684\u3002\u4E0D\u540C\u7684\u503C\u4EE3\u8868\u7684\u610F\u4E49\u5982\u4E0B\uFF1A <ul><li><code>\u4E0D\u5199</code>\uFF1A\u8868\u793A\u8FD8\u5728\u539F\u6765\u4F4D\u7F6E\u4E0D\u53D8</li><li><code>FIRST</code>\uFF1A\u8868\u793A\u5C06\u8BE5\u5217\u79FB\u5230\u8868\u7684\u5F00\u5934</li><li><code>AFTER \u5B57\u6BB5\u540D</code>\uFF1A\u8868\u793A\u5C06\u8BE5\u5217\u79FB\u52A8\u5230\u201C\u5B57\u6BB5\u540D2\u201D<strong>\u4E4B\u540E</strong></li></ul></li></ul><blockquote><p>\u91CD\u547D\u540D\u5DF2\u6709\u7684\u5217</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D CHANGE \u5217\u540D \u65B0\u5217\u540D \u65B0\u6570\u636E\u7C7B\u578B;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>==\u8BF4\u660E\uFF1A==</p><ul><li>\u5173\u952E\u5B57\uFF1A<strong>ALTER TABLE</strong> \u548C <strong>CHANGE</strong></li></ul><blockquote><p>\u5220\u9664\u5DF2\u6709\u7684\u5217</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D DROP \u5217\u540D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>==\u8BF4\u660E\uFF1A==</p><ul><li>\u5173\u952E\u5B57\uFF1A<strong>ALTER TABLE</strong> \u548C <strong>DROP</strong></li></ul><h4 id="_9-2-3-\u91CD\u547D\u540D\u8868" tabindex="-1"><a class="header-anchor" href="#_9-2-3-\u91CD\u547D\u540D\u8868" aria-hidden="true">#</a> 9.2.3 \u91CD\u547D\u540D\u8868</h4><ul><li><p>\u65B9\u5F0F1\uFF1A<strong>RENAME</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>RENAME TABLE \u8868\u540D TO \u65B0\u8868\u540D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>\u65B9\u5F0F2\uFF1A<strong>ALTER</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D RENAME [TO] \u65B0\u8868\u540D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h4 id="_9-2-4-\u5220\u9664\u8868" tabindex="-1"><a class="header-anchor" href="#_9-2-4-\u5220\u9664\u8868" aria-hidden="true">#</a> 9.2.4 \u5220\u9664\u8868</h4><blockquote><p>\u8BF4\u660E</p></blockquote><ul><li>\u5F53\u4E00\u5F20\u8868<strong>\u6CA1\u6709\u4E0E\u5176\u4ED6\u4EFB\u4F55\u6570\u636E\u8868\u5F62\u6210\u5173\u8054\u5173\u7CFB</strong>\u65F6\uFF0C\u624D\u53EF\u5220\u9664</li><li>\u5220\u9664\u8868\u65F6\uFF0C\u6240\u6709\u6B63\u5728\u8FD0\u884C\u7684\u76F8\u5173\u4E8B\u52A1\u88AB\u63D0\u4EA4</li><li>\u5220\u9664\u8868\u65F6\uFF0C\u6240\u6709\u76F8\u5173\u7D22\u5F15\u88AB\u5220\u9664</li></ul><blockquote><p>\u8BED\u6CD5</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DROP TABLE [IF EXISTS] \u6570\u636E\u88681 [, \u6570\u636E\u88682, \u2026, \u6570\u636E\u8868n];
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>==\u8BF4\u660E\uFF1A==</p><ul><li>**DROP TABLE \u8BED\u53E5\u4E0D\u80FD\u56DE\u6EDA\uFF01\uFF01\uFF01**\u5220\u8868\u524D\uFF0C\u505A\u597D\u5907\u4EFD\u5DE5\u4F5C\u3002</li><li>DROP\u4E4B\u540E\uFF0C\u5220\u9664\u8868\u6570\u636E\u3001\u8868\u7ED3\u6784\uFF0C\u91CA\u653E\u8868\u7A7A\u95F4</li></ul><h4 id="_9-2-5-\u6E05\u7A7A\u8868" tabindex="-1"><a class="header-anchor" href="#_9-2-5-\u6E05\u7A7A\u8868" aria-hidden="true">#</a> 9.2.5 \u6E05\u7A7A\u8868</h4><blockquote><p>\u8BED\u6CD5</p></blockquote><ul><li><p>\u65B9\u5F0F1\uFF1A\u4F7F\u7528<strong>TRUNCATE</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>TRUNCATE \u8868\u540D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>\u65B9\u5F0F2\uFF1A\u4F7F\u7528\u4E0D\u5E26WHERE\u7684<strong>DELETE</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DELETE FROM \u8868\u540D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><blockquote><p>DROP\u3001DELETE\u548CTRUNCATE\u7684\u533A\u522B</p></blockquote><ul><li>DROP\u4F1A\u5220\u6389\u8868\u7ED3\u6784\uFF0CDELETE\u548CTRUNCATE\u662F\u5220\u9664\u8868\u6570\u636E\uFF0C\u4FDD\u7559\u8868\u7ED3\u6784</li><li>DELETE\u662FDML\uFF08\u6570\u636E\u5E93\u64CD\u4F5C\u8BED\u8A00\uFF09\uFF0CTRUNCATE\u662FDDL\uFF08\u6570\u636E\u5E93\u5B9A\u4E49\u8BED\u8A00\uFF09\u3002\u56E0\u6B64<strong>DELETE\u53EF\u4EE5\u56DE\u6EDA\uFF0CTRUNCATE\u4E0D\u53EF\u4EE5\u56DE\u6EDA</strong></li><li><strong>\u4F7F\u7528DELETE\uFF0C\u5220\u9664\u6570\u636E\u540E\u8868\u7A7A\u95F4\u8FD8\u5728</strong>\uFF08\u5728\u7CFB\u7EDF\u91CD\u542F\u524D\uFF0C\u8FD8\u53EF\u4EE5\u6062\u590D\uFF09\uFF0C<strong>TRUNCATE\u662F\u5C06\u6570\u636E\u548C\u8868\u7A7A\u95F4\u90FD\u5220\u9664\u4E86</strong></li><li><strong>DELETE\u53EF\u4EE5\u64CD\u4F5Ctable\u3001view\uFF0CTRUNCATE\u53EA\u80FD\u64CD\u4F5Ctable</strong></li><li>\u5982\u679C\u8868\u4E2Did\u662F\u81EA\u589E\u578B\u4E14\u6B65\u957F\u4E3A1\uFF0C\u4F7F\u7528<strong>delete</strong>\u540E\uFF0C<strong>\u65B0\u63D2\u5165\u7684\u6570\u636E\u7684id\u4F1A\u539F\u6570\u6570\u636E\u7684id\u4E0A\u7EE7\u7EED\u7D2F\u52A0</strong>\u3002\u4F7F\u7528<strong>TRUNCATE</strong>\u540E\uFF0C\u65B0<strong>\u63D2\u5165\u7684\u6570\u636E\u7684id\u4F1A\u4ECE1\u5F00\u59CB</strong></li></ul><h4 id="_9-2-7-dcl\u4E2D\u7684commit\u548Crollback" tabindex="-1"><a class="header-anchor" href="#_9-2-7-dcl\u4E2D\u7684commit\u548Crollback" aria-hidden="true">#</a> 9.2.7 DCL\u4E2D\u7684COMMIT\u548CROLLBACK</h4><ul><li>==COMMIT==\uFF1A\u63D0\u4EA4\u6570\u636E\u3002\u4E00\u65E6\u6267\u884CCOMMIT\uFF0C\u5219\u6570\u636E\u5C31\u88AB\u6C38\u4E45\u7684\u4FDD\u5B58\u5728\u4E86\u6570\u636E\u5E93\u4E2D\uFF0C\u610F\u4E3A\u7740\u6570\u636E\u4E0D\u53EF\u4EE5\u56DE\u6EDA</li><li>==ROLLBACK==\uFF1A\u56DE\u6EDA\u6570\u636E\u3002\u4E00\u65E6ROLLBACK\uFF0C\u5219\u53EF\u4EE5\u5B9E\u73B0\u6570\u636E\u7684\u56DE\u6EDA\u3002<strong>\u56DE\u6EDA\u5230\u6700\u8FD1\u7684\u4E00\u6B21COMMIT\u4E4B\u540E</strong>\u3002</li></ul><h4 id="_9-2-8-ddl\u548Cdml\u7684\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#_9-2-8-ddl\u548Cdml\u7684\u8BF4\u660E" aria-hidden="true">#</a> 9.2.8 DDL\u548CDML\u7684\u8BF4\u660E</h4><ul><li>\u2460 DDL\u7684\u64CD\u4F5C\u4E00\u65E6\u6267\u884C\uFF0C\u5C31\u4E0D\u53EF\u4EE5\u56DE\u6EDA\u3002DDL\u64CD\u4F5C\u6267\u884C\u5B8C\u6210\u540E\uFF0C\u4F1A\u81EA\u52A8\u6267\u884CCOMMIT\u64CD\u4F5C\uFF0C\u56E0\u6B64\u6307\u4EE4<code>SET autocommit= FALSE</code>\u5BF9DML\u65E0\u6548\u3002</li><li>\u2461 DML\u7684\u64CD\u4F5C\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u4E00\u65E6\u6267\u884C\uFF0C\u4E5F\u662F\u4E0D\u53EF\u56DE\u6EDA\u3002\u4F46\u662F\u5982\u679C\u5728\u6267\u884CDML\u4E4B\u524D\uFF0C\u6267\u884C\u4E86<code>SET autocommit= FALSE</code>\uFF0C\u5219\u6267\u884C\u7684DML\u64CD\u4F5C\u5C31\u53EF\u4EE5\u5B9E\u73B0\u56DE\u6EDA</li></ul><h4 id="_9-2-9-\u8868\u7684\u5176\u4ED6\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#_9-2-9-\u8868\u7684\u5176\u4ED6\u64CD\u4F5C" aria-hidden="true">#</a> 9.2.9 \u8868\u7684\u5176\u4ED6\u64CD\u4F5C</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u67E5\u770B\u8868\u7ED3\u6784
DESC \u8868\u540D;

# \u67E5\u770B\u521B\u5EFA\u8868\u7684\u8BED\u53E5\u7ED3\u6784
SHOW CREATE TABLE \u8868\u540D;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_9-2-10-mysql8-0\u65B0\u7279\u6027-ddl\u7684\u539F\u5B50\u5316" tabindex="-1"><a class="header-anchor" href="#_9-2-10-mysql8-0\u65B0\u7279\u6027-ddl\u7684\u539F\u5B50\u5316" aria-hidden="true">#</a> 9.2.10 MySQL8.0\u65B0\u7279\u6027\uFF1ADDL\u7684\u539F\u5B50\u5316</h4><blockquote><p>\u6982\u8FF0</p></blockquote><ul><li>\u5728MySQL 8.0\u7248\u672C\u4E2D\uFF0C<strong>InnoDB</strong>\u8868\u7684DDL\u652F\u6301\u4E8B\u52A1\u5B8C\u6574\u6027\uFF0C\u5373 <code>DDL\u64CD\u4F5C\u8981\u4E48\u6210\u529F\u8981\u4E48\u56DE\u6EDA</code> \u3002</li><li>DDL\u64CD\u4F5C\u56DE\u6EDA\u65E5\u5FD7\u5199\u5165\u5230data dictionary\u6570\u636E\u5B57\u5178\u8868mysql.innodb_ddl_log\uFF08\u8BE5\u8868\u662F\u9690\u85CF\u7684\u8868\uFF0C\u901A\u8FC7show tables\u65E0\u6CD5\u770B\u5230\uFF09\u4E2D\uFF0C\u7528\u4E8E\u56DE\u6EDA\u64CD\u4F5C\u3002\u901A\u8FC7\u8BBE\u7F6E\u53C2\u6570\uFF0C\u53EF\u5C06DDL\u64CD\u4F5C\u65E5\u5FD7\u6253\u5370\u8F93\u51FA\u5230MySQL\u9519\u8BEF\u65E5\u5FD7\u4E2D\u3002</li><li>\u539F\u5B50DDL\u64CD\u4F5C\u8FD9\u4E00\u7279\u6027\uFF0C\u652F\u6301\u8868\u76F8\u5173\u64CD\u4F5C\uFF0C\u4E5F\u652F\u6301\u975E\u8868\u76F8\u5173\u64CD\u4F5C\u3002 <ul><li>**\u8868\u76F8\u5173\u64CD\u4F5C\uFF1A**drop\u3001create\u3001alter(\u64CD\u4F5C\u5BF9\u8C61\u662Fdatabases, tablespaces, tables, and indexes)\u8BED\u6CD5\u3001truncate\u8BED\u6CD5</li><li><strong>\u975E\u8868\u76F8\u5173\u64CD\u4F5C</strong>\uFF1Acreate\u3001drop\u3001alter(\u64CD\u4F5C\u5BF9\u8C61\u662Ftrigger\u3001event\u3001views)</li></ul></li></ul><blockquote><p>\u4F8B\u5B501\uFF1ADROP\u8868</p></blockquote><p>\u5728\u6570\u636E\u5E93\u4E2D\u521B\u5EFA\u8868book1\uFF0C\u540C\u65F6\u4FDD\u8BC1\u5F53\u524D\u6570\u636E\u5E93\u4E2D\u6CA1\u6709book2\u8868\u3002\u6267\u884C<code>DROP TABLE book1, book2;</code>\uFF0C\u89C2\u5BDF\u5728MySQL5.7\u548CMySQL8.0\u4E2D\u7684\u7ED3\u679C\u3002</p><p><code>\u7ED3\u679C\uFF1A</code>MySQL5.7\u4E2Dbook1\u88AB\u5220\u9664\uFF0CMySQL8.0\u4E2Dbook1\u4ECD\u7136\u5B58\u5728\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u521B\u5EFA\u6570\u636E\u5E93
CREATE DATABASE mytest;

# \u4F7F\u7528\u6570\u636E\u5E93
USE mytest;

# \u521B\u5EFAbook1\u8868
CREATE TABLE book1 (
	id INT,
	\`name\` VARCHAR(30) 
);

# \u663E\u793A\u6570\u636E\u5E93\u4E2D\u7684\u8868
SHOW TABLES; # \u7ED3\u679C\u4E3Abook1\uFF0C\u8868book1\u521B\u5EFA\u6210\u529F

# \u5220\u9664book1\uFF0Cbook2\u3002\u5176\u4E2Dbook2\u4E0D\u5B58\u5728\uFF0C\u5220\u9664\u4F1A\u62A5\u9519
DROP TABLE book1, book2; # Unknown table &#39;mytest.book2&#39;

# \u518D\u6B21\u663E\u793A\u6570\u636E\u5E93\u4E2D\u7684\u8868
SHOW TABLES; # NySQL5.7\u4E2D\uFF0C\u663E\u793A\u4E3A\u7A7A\uFF0C\u8868book1\u6210\u529F\u5220\u9664 
			 # NySQL8.0\u4E2D\uFF0C\u7ED3\u679C\u4E3Abook1\uFF0C\u8868book1\u5220\u9664\u5931\u8D25
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><blockquote><p>\u4F8B\u5B502\uFF1A\u4F7F\u7528\u5B50\u67E5\u8BE2\u521B\u5EFA\u8868CREATE TABLE ... SELECT ...</p></blockquote><p>\u4ECE<strong>MySQL8.0.21</strong>\u5F00\u59CB\uFF0C\u5728\u652F\u6301\u539F\u5B50DDL\u7684\u5B58\u50A8\u5F15\u64CE\u4E0A\uFF0C\u5F53\u4F7F\u7528\u57FA\u4E8Erow\u7684\u590D\u5236\u6A21\u5F0F\u65F6\uFF0C<strong>CREATE TABLE...SELECT...\uFF0C\u8BE5\u8BED\u53E5\u4F5C\u4E3A\u4E00\u4E2A\u4E8B\u52A1\u8BB0\u5F55\u5728\u4E8C\u8FDB\u5236\u65E5\u5FD7\u4E2D</strong>\u3002<strong>\u4E4B\u524D\u7684\u7248\u672C\u4E2D\uFF0C\u5B83\u88AB\u8BB0\u5F55\u4E3A\u4E24\u4E2A\u4E8B\u52A1</strong>\uFF0C\u4E00\u4E2A\u7528\u4E8Ecreate\u8868\uFF0C\u53E6\u4E00\u4E2A\u7528\u4E8Einsert\u6570\u636E\u3002\u4E24\u4E2A\u4E8B\u52A1\u4E4B\u95F4\u6216\u63D2\u5165\u6570\u636E\u65F6\u53D1\u751F\u670D\u52A1\u5668\u6545\u969C<strong>\u53EF\u80FD\u5BFC\u81F4\u590D\u5236\u4E86\u4E00\u5F20\u7A7A\u8868</strong>\u3002\u901A\u8FC7\u5F15\u5165\u539F\u5B50DDL\u652F\u6301\uFF0CCREATE TABLE ...SELECT\u8BED\u53E5\u73B0\u5728\u5BF9\u4E8E\u57FA\u4E8E\u884C\u7684\u590D\u5236\u662F\u5B89\u5168\u7684\uFF0C\u5E76\u4E14\u5141\u8BB8\u4E0E\u57FA\u4E8EGTID\u7684\u590D\u5236\u4E00\u8D77\u4F7F\u7528\u3002</p><h2 id="_10-\u6570\u636E\u5904\u7406\u4E4B\u589E\u5220\u6539" tabindex="-1"><a class="header-anchor" href="#_10-\u6570\u636E\u5904\u7406\u4E4B\u589E\u5220\u6539" aria-hidden="true">#</a> 10 \u6570\u636E\u5904\u7406\u4E4B\u589E\u5220\u6539</h2><h3 id="_10-1-\u63D2\u5165\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_10-1-\u63D2\u5165\u6570\u636E" aria-hidden="true">#</a> 10.1 \u63D2\u5165\u6570\u636E</h3><blockquote><p>\u4E3A\u8868\u7684\u6240\u6709\u5B57\u6BB5\u63D2\u5165\u6570\u636E</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>INSERT INTO \u8868\u540D
VALUES (value1, value2, value3, ...);  
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>\u503C\u5217\u8868\u4E2D\u503C\u7684\u987A\u5E8F\u5FC5\u987B\u548C\u8868\u4E2D\u5B57\u6BB5\u5B9A\u4E49\u7684\u987A\u5E8F\u4FDD\u6301\u4E00\u81F4</strong></p><blockquote><p>\u4E3A\u8868\u4E2D\u6307\u5B9A\u7684\u5B57\u6BB5\u63D2\u5165\u6570\u636E</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>INSERT INTO \u8868\u540D(column1 [, column2, column3, ...])
VALUES (value1 [, value2, value3, ...]);  
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>INSERT\u5B57\u53E5\u4E2D\u7684\u5217\u540D\u987A\u5E8F\u53EF\u4EE5\u968F\u610F\uFF0C\u4F46\u503C\u5217\u8868\u4E2D\u503C\u7684\u987A\u5E8F\u5FC5\u987B\u548C\u5176\u4FDD\u6301\u4E00\u81F4</strong></p><blockquote><p>\u540C\u65F6\u63D2\u5165\u591A\u6761\u6570\u636E</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>INSERT INTO \u8868\u540D
VALUES 
	(value1, value2, value3, ...),
	(value1, value2, value3, ...),
	(value1, value2, value3, ...),
	...
	;  
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u6216</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>INSERT INTO \u8868\u540D(column1 [, column2, column3, ...])
VALUES 
	(value1 [, value2, value3, ...]),
	(value1 [, value2, value3, ...]),
	(value1 [, value2, value3, ...]),
	...
	;  
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>\u5C06\u67E5\u8BE2\u7ED3\u679C\u63D2\u5165\u5230\u8868\u4E2D</p></blockquote><p><strong>\u4E0D\u5FC5\u5199VALUES\u5B57\u53E5</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>INSERT INTO \u88681(column1 [, column2, column3, ...])
SELECT column1 [, column2, column3, ...] # \u67E5\u8BE2\u7684\u5B57\u6BB5\u4E00\u5B9A\u8981\u4E0E\u6DFB\u52A0\u5230\u7684\u8868\u7684\u5B57\u6BB5\u4E00\u4E00\u5BF9\u5E94
FROM \u88682
WHERE ...
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u8BF4\u660E\uFF1A\u88681\u4E2D\u8981\u6DFB\u52A0\u6570\u636E\u7684\u5B57\u6BB5\u7684\u957F\u5EA6\u4E0D\u80FD\u4F4E\u4E8E\u88682\u4E2D\u67E5\u8BE2\u7684\u5B57\u6BB5\u7684\u957F\u5EA6\u3002\u5426\u5219\uFF0C\u5C31\u6709\u6DFB\u52A0\u4E0D\u6210\u529F\u7684\u98CE\u9669\u3002</p><blockquote><p>\u5C0F\u7ED3\uFF1A\u63D2\u5165\u591A\u6761\u6570\u636E VS \u591A\u4E2A\u5355\u884C\u63D2\u5165</p></blockquote><p>\u540C\u65F6\u63D2\u5165\u591A\u6761\u6570\u636E\u6BD4\u591A\u4E2A\u5355\u884C\u63D2\u5165<strong>\u6548\u7387\u66F4\u9AD8</strong>\u3002\u56E0\u4E3AMySQL\u5728\u6267\u884C\u5355\u6761\u63D2\u5165\u8BED\u53E5\u65F6\u6BD4\u4F7F\u7528\u591A\u6761\u63D2\u5165\u8BED\u53E5\u5FEB\uFF0C\u6240\u4EE5<strong>\u5728\u63D2\u5165\u591A\u6761\u8BB0\u5F55\u65F6\uFF0C\u6700\u597D\u9009\u62E9\u4F7F\u7528\u4E00\u4E2AINSERT\u8BED\u53E5\u540C\u65F6\u63D2\u5165\u591A\u6761\u6570\u636E</strong>\u3002</p><h3 id="_10-2-\u66F4\u65B0\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_10-2-\u66F4\u65B0\u6570\u636E" aria-hidden="true">#</a> 10.2 \u66F4\u65B0\u6570\u636E</h3><p>\u5982\u679C\u9700\u8981\u56DE\u6EDA\u6570\u636E\uFF0C\u9700\u8981\u4FDD\u8BC1\u5728DML\u4E4B\u524D\uFF0C\u8FDB\u884C\u8BBE\u7F6E\uFF1A<strong>SET AUTOCOMMIT = FALSE;</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>UPDATE \u8868\u540D
SET \u5217\u540D1 = \u65B0\u503C1 [, \u5217\u540D2 = \u65B0\u503C2, ...]
[WHERE \u67E5\u8BE2\u6761\u4EF6];
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u4FEE\u6539\u6570\u636E\u65F6\uFF0C\u662F\u53EF\u80FD\u5B58\u5728\u4E0D\u6210\u529F\u7684\u60C5\u51B5\u7684\u3002\uFF08\u53EF\u80FD\u662F\u7531\u4E8E\u7EA6\u675F\u7684\u5F71\u54CD\u9020\u6210\u7684\uFF09</p><h3 id="_10-3-\u5220\u9664\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_10-3-\u5220\u9664\u6570\u636E" aria-hidden="true">#</a> 10.3 \u5220\u9664\u6570\u636E</h3><p>\u5982\u679C\u9700\u8981\u56DE\u6EDA\u6570\u636E\uFF0C\u9700\u8981\u4FDD\u8BC1\u5728DML\u4E4B\u524D\uFF0C\u8FDB\u884C\u8BBE\u7F6E\uFF1A<strong>SET AUTOCOMMIT = FALSE;</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DELETE 
FROM \u8868\u540D
[WHERE \u67E5\u8BE2\u6761\u4EF6];
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>\u5982\u679C\u7701\u7565\u67E5\u8BE2\u6761\u4EF6\uFF0C\u8868\u793A\u5C06\u8868\u4E2D\u7684\u6570\u636E\u5168\u90E8\u5220\u9664\u3002</strong></p><p>\u5728\u5220\u9664\u6570\u636E\u65F6\uFF0C\u4E5F\u6709\u53EF\u80FD\u56E0\u4E3A\u7EA6\u675F\u7684\u5F71\u54CD\uFF0C\u5BFC\u81F4\u5220\u9664\u5931\u8D25\u3002</p><h3 id="_10-4-mysql8\u65B0\u7279\u6027-\u8BA1\u7B97\u5217" tabindex="-1"><a class="header-anchor" href="#_10-4-mysql8\u65B0\u7279\u6027-\u8BA1\u7B97\u5217" aria-hidden="true">#</a> 10.4 MySQL8\u65B0\u7279\u6027\uFF1A\u8BA1\u7B97\u5217</h3><blockquote><p>\u5B9A\u4E49</p></blockquote><p>\u8BA1\u7B97\u5217\uFF0C\u5C31\u662F\u6307\u67D0\u4E00\u5217\u7684\u503C\u662F\u901A\u8FC7\u522B\u7684\u5217\u8BA1\u7B97\u5F97\u6765\u7684\u3002\u662F\u5728\u521B\u5EFA\u8868\u7684\u65F6\u5019\u6765\u5B9A\u4E49\u8BA1\u7B97\u5217</p><blockquote><p>\u4E3E\u4F8B</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE tb1(
id INT,
a INT,
b INT,
c INT GENERATED ALWAYS AS (a + b) VIRTUAL # \u5B57\u6BB5c\u5373\u4E3A\u8BA1\u7B97\u5217
);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_11-mysql\u4E2D\u7684\u6570\u636E\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#_11-mysql\u4E2D\u7684\u6570\u636E\u7C7B\u578B" aria-hidden="true">#</a> 11 MySQL\u4E2D\u7684\u6570\u636E\u7C7B\u578B</h2><h3 id="_11-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_11-1-\u6982\u8FF0" aria-hidden="true">#</a> 11.1 \u6982\u8FF0</h3><blockquote><p>MySQL\u4E2D\u7684\u6570\u636E\u7C7B\u578B\u5206\u7C7B</p></blockquote><table><thead><tr><th>\u7C7B\u578B</th><th>\u7C7B\u578B\u4E3E\u4F8B</th></tr></thead><tbody><tr><td>\u6574\u6570\u7C7B\u578B</td><td>TINYINT\u3001SMALLINT\u3001MEDIUMINT\u3001INT(\u6216INTEGER)\u3001BIGINT</td></tr><tr><td>\u6D6E\u70B9\u7C7B\u578B</td><td>FLOAT\u3001DOUBLE</td></tr><tr><td>\u5B9A\u70B9\u7C7B\u578B</td><td>DECIMAL</td></tr><tr><td>\u4F4D\u7C7B\u578B</td><td>BIT</td></tr><tr><td>\u65E5\u671F\u65F6\u95F4\u7C7B\u578B</td><td>YEAR\u3001TIME\u3001DATE\u3001DATETIME\u3001TIMESTAMP</td></tr><tr><td>\u6587\u672C\u5B57\u7B26\u4E32\u7C7B\u578B</td><td>CHAR\u3001VARCHAR\u3001TINYTEXT\u3001TEXT\u3001MEDIUMTEXT\u3001LONGTEXT</td></tr><tr><td>\u679A\u4E3E\u7C7B\u578B</td><td>ENUM</td></tr><tr><td>\u96C6\u5408\u7C7B\u578B</td><td>SET</td></tr><tr><td>\u4E8C\u8FDB\u5236\u5B57\u7B26\u4E32\u7C7B\u578B</td><td>BINARY\u3001VARBINARY\u3001TINYBLOB\u3001BLOB\u3001MEDIUMBLOB\u3001LONGBLOB</td></tr><tr><td>JSON\u7C7B\u578B</td><td>JSON\u5BF9\u8C61\u3001JSON\u6570\u7EC4</td></tr><tr><td>\u7A7A\u95F4\u6570\u636E\u7C7B\u578B</td><td>\u5355\u503C\u7C7B\u578B\uFF1AGEOMETRY\u3001POINT\u3001LINESTRING\u3001POLYGON\uFF1B <br>\u96C6\u5408\u7C7B\u578B\uFF1AMULTIPOINT\u3001MULTILINESTRING\u3001MULTIPOLYGON\u3001 GEOMETRYCOLLECTION</td></tr></tbody></table><blockquote><p>\u5E38\u89C1\u6570\u636E\u7C7B\u578B\u7684\u5C5E\u6027</p></blockquote><table><thead><tr><th>MySQL\u5173\u952E\u5B57</th><th>\u542B\u4E49</th></tr></thead><tbody><tr><td>NULL</td><td>\u6570\u636E\u5217\u53EF\u4EE5\u5305\u542BNULL\u503C</td></tr><tr><td>NOT NULL</td><td>\u6570\u636E\u5217\u4E0D\u5141\u8BB8\u6709NULL\u503C</td></tr><tr><td>DEFAULT</td><td>\u9ED8\u8BA4\u503C</td></tr><tr><td>PRIMARY KEY</td><td>\u4E3B\u952E</td></tr><tr><td>AUTO_INCREMENT</td><td>\u81EA\u52A8\u9012\u589E\uFF0C\u9002\u7528\u4E8E\u6574\u6570\u7C7B\u578B</td></tr><tr><td>UNSIGNED</td><td>\u65E0\u7B26\u53F7</td></tr><tr><td>CHARACTER SET &#39;\u5B57\u7B26\u96C6&#39;</td><td>\u6307\u5B9A\u4E00\u4E2A\u5B57\u7B26\u96C6</td></tr></tbody></table><h3 id="_11-2-\u6574\u578B" tabindex="-1"><a class="header-anchor" href="#_11-2-\u6574\u578B" aria-hidden="true">#</a> 11.2 \u6574\u578B</h3><h4 id="_11-2-1-\u7C7B\u578B\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#_11-2-1-\u7C7B\u578B\u4ECB\u7ECD" aria-hidden="true">#</a> 11.2.1 \u7C7B\u578B\u4ECB\u7ECD</h4><table><thead><tr><th><strong>\u7C7B\u578B</strong></th><th><strong>\u5B57\u8282</strong></th><th>\u6709\u7B26\u53F7\u6570\u53D6\u503C\u8303\u56F4</th><th>\u65E0\u7B26\u53F7\u6570\u53D6\u503C\u8303\u56F4</th></tr></thead><tbody><tr><td>TINYINT</td><td>1</td><td>-128~127</td><td>0~255</td></tr><tr><td>SMALLINT</td><td>2</td><td>-32768~32767</td><td>0~65535</td></tr><tr><td>MEDIUMINT</td><td>3</td><td>-8388608~8388607</td><td>0~16777215</td></tr><tr><td>INT\u3001INTEGER</td><td>4</td><td>-2147483648~2147483647</td><td>0~4294967295</td></tr><tr><td>BIGINT</td><td>8</td><td>-9223372036854775808~9223372036854775807</td><td>0~18446744073709551615</td></tr></tbody></table><h4 id="_11-2-2-\u53EF\u9009\u5C5E\u6027" tabindex="-1"><a class="header-anchor" href="#_11-2-2-\u53EF\u9009\u5C5E\u6027" aria-hidden="true">#</a> 11.2.2 \u53EF\u9009\u5C5E\u6027</h4><ul><li><p><code>M</code>\uFF1A\u8868\u793A\u663E\u793A\u5BBD\u5EA6\uFF0C\u9700\u8981\u914D\u5408<code>ZEROFILL</code>\u4F7F\u7528\uFF0C\u8868\u793A\u5F53\u5B58\u50A8\u7684\u6570\u503C\u4E0D\u8DB3M\u4F4D\u65F6\uFF0C\u75280\u8FDB\u884C\u586B\u5145</p><ul><li><p>\u5982\u679C\u8BBE\u7F6E\u4E86\u663E\u793A\u5BBD\u5EA6\uFF0C\u63D2\u5165\u7684\u6570\u636E\u8D85\u8FC7\u4E86\u5BBD\u5EA6\u8303\u56F4\uFF0C\u4F46\u662F\u4ECD\u5728\u5F53\u524D\u7C7B\u578B\u7684\u53D6\u503C\u8303\u56F4\u5185\uFF0C\u8BE5\u6570\u503C\u4E0D\u4F1A\u88AB\u622A\u65AD\u6216\u63D2\u5165\u5931\u8D25\uFF0C\u800C\u662F\u80FD\u591F\u6B63\u5E38\u63D2\u5165\u3002\u5982\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u521B\u5EFA\u8868
create table int_test1(
	f1 int(3)
);

# \u63D2\u5165\u6570\u636E
insert into int_test1(f1)
values (1), (123), (1234); # \u63D2\u5165\u6210\u529F

# \u67E5\u8BE2
select * from int_test1;
# \u7ED3\u679C\u663E\u793A\uFF1A
+---------------|
|      f1       |
+---------------|
|             1 |
|           123 |
|          1234 |---------- \u8D85\u8FC7\u5BBD\u5EA63\u4F4D\uFF0C\u4E0D\u4F1A\u88AB\u622A\u65AD
+---------------|
3 rows in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li><li><p><strong>\u4ECEMySQL8.0.17\u5F00\u59CB\uFF0C\u6574\u6570\u6570\u636E\u7C7B\u578B\u4E0D\u63A8\u8350\u4F7F\u7528\u663E\u793A\u5BBD\u5EA6\u5C5E\u6027\u3002</strong></p></li></ul></li><li><p><code>UNSIGNED</code>\uFF1A\u65E0\u7B26\u53F7\u7C7B\u578B\uFF08\u8868\u793A\u975E\u8D1F\u6570\uFF09\u3002</p><p>\u4F7F\u7528\u4E3E\u4F8B</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>create table int_test2(
	f1 int unsigned
)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p><code>ZEROFILL</code>\uFF1A0\u586B\u5145\uFF0C\u9700\u8981\u914D\u5408<code>M</code>\u5C5E\u6027\u4F7F\u7528\uFF0C\u8868\u793A\u5F53\u4E0D\u591F<code>M</code>\u4F4D\u65F6\uFF0C\u75280\u5728\u5DE6\u4FA7\u586B\u5145\u3002</p><p>\u5982\u679C\u6307\u5B9A\u4E86\u67D0\u5217\u662FZEROFILL\uFF0C<strong>MySQL\u4F1A\u81EA\u52A8\u4E3A\u5F53\u524D\u5217\u6DFB\u52A0UNSIGNED\u5C5E\u6027</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u521B\u5EFA\u8868
create table int_test3(
	f1 int(3) ZEROFILL
);

# \u63D2\u5165\u6570\u636E
insert into int_test3(f1)
values (1), (123), (1234); # \u63D2\u5165\u6210\u529F

# \u67E5\u8BE2
select * from int_test3;
# \u7ED3\u679C\u663E\u793A\uFF1A
+---------------|
|      f1       |
+---------------|
|           001 |---------- \u4E0D\u8DB3\u5BBD\u5EA63\u4F4D\uFF0C\u5728\u6700\u5DE6\u8FB9\u5F00\u59CB\u75280\u586B\u5145
|           123 |
|          1234 |---------- \u8D85\u8FC7\u5BBD\u5EA63\u4F4D\uFF0C\u4E0D\u4F1A\u88AB\u622A\u65AD
+---------------|
3 rows in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li></ul><h4 id="_11-2-3-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_11-2-3-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 11.2.3 \u4F7F\u7528\u573A\u666F</h4><ul><li><code>TINYINT</code>\uFF1A\u4E00\u822C\u7528\u4E8E\u679A\u4E3E\u6570\u636E\uFF0C\u6BD4\u5982\u7CFB\u7EDF\u8BBE\u5B9A\u53D6\u503C\u8303\u56F4\u5F88\u5C0F\u4E14\u56FA\u5B9A\u7684\u573A\u666F</li><li><code>SMALLINT</code>\uFF1A\u53EF\u4EE5\u7528\u4E8E\u8F83\u5C0F\u8303\u56F4\u7684\u7EDF\u8BA1\u6570\u636E</li><li><code>MEDIUMINT</code>\uFF1A\u7528\u4E8E\u8F83\u5927\u6574\u6570\u7684\u8BA1\u7B97</li><li><code>INT\u3001INTEGER</code>\uFF1A\u53D6\u503C\u8303\u56F4\u8DB3\u591F\u5927\uFF0C\u4E00\u822C\u60C5\u51B5\u4E0B\u4E0D\u7528\u8003\u8651\u671D\u9C9C\u95EE\u9898\uFF0C\u7528\u7684\u6700\u591A\u3002\u6BD4\u5982\u5546\u54C1\u7684\u7F16\u53F7</li><li><code>BIGINT</code>\uFF1A\u5904\u7406\u7279\u522B\u5DE8\u5927\u7684\u6574\u6570\u65F6\u7528\u5230\u3002\u5982\u53CC\u5341\u4E00\u7684\u4EA4\u6613\u91CF\uFF0C\u5927\u578B\u95E8\u6237\u7F51\u7AD9\u7684\u70B9\u51FB\u91CF\uFF0C\u8BC1\u5238\u516C\u53F8\u884D\u751F\u4EA7\u54C1\u6301\u4ED3\u7B49</li></ul><p><code>\u5C0F\u7ED3</code>\uFF1A\u5728\u8BC4\u4F30\u4F7F\u7528\u54EA\u79CD\u6574\u6570\u7C7B\u578B\u7684\u65F6\u5019\uFF0C\u9700\u8981\u8003\u8651<strong>\u5B58\u50A8\u7A7A\u95F4</strong>\u548C<strong>\u53EF\u9760\u6027</strong>\u7684\u5E73\u8861\u95EE\u9898\u3002<strong>\u9996\u5148\u5728\u786E\u4FDD\u6570\u636E\u4E0D\u4F1A\u8D85\u8FC7\u53D6\u503C\u8303\u56F4\u7684\u524D\u63D0\u4E0B\uFF0C\u518D\u53BB\u8003\u8651\u5982\u4F55\u8282\u7701\u5185\u5B58\u7A7A\u95F4</strong>\u3002</p><h3 id="_11-3-\u6D6E\u70B9\u578B" tabindex="-1"><a class="header-anchor" href="#_11-3-\u6D6E\u70B9\u578B" aria-hidden="true">#</a> 11.3 \u6D6E\u70B9\u578B</h3><h4 id="_11-3-1-\u7C7B\u578B\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#_11-3-1-\u7C7B\u578B\u4ECB\u7ECD" aria-hidden="true">#</a> 11.3.1 \u7C7B\u578B\u4ECB\u7ECD</h4><table><thead><tr><th><strong>\u7C7B\u578B</strong></th><th><strong>\u5B57\u8282\u6570</strong></th><th>\u6709\u7B26\u53F7\u53D6\u503C\u8303\u56F4</th><th>\u65E0\u7B26\u53F7\u53D6\u503C\u8303\u56F4</th></tr></thead><tbody><tr><td>FLOAT</td><td>4</td><td>-3.402823466E+38\uFF5E-1.175494351E-38\uFF0C<br>0\uFF0C<br>1.175494351E-38\uFF5E3.402823466E+38</td><td>0\uFF0C<br>1.175494351E-38\uFF5E3.402823466E+38</td></tr><tr><td>DOUBLE</td><td>8</td><td>-1.7976931348623157E+308\uFF5E-2.2250738585072014E-308\uFF0C<br>0\uFF0C<br>2.2250738585072014E-308~1.7976931348623157E+308</td><td>0\uFF0C<br>2.2250738585072014E-308~1.7976931348623157E+308</td></tr></tbody></table><p>==\u8BF4\u660E==\uFF1A</p><ul><li><p>\u9664\u4E86FLOAT\u548CDOUBLE\u4E4B\u5916\uFF0C\u8FD8\u6709\u4E00\u79CD\u6D6E\u70B9\u7C7B\u578B--<code>REAL</code>\u3002REAL\u9ED8\u8BA4\u4E3ADOUBLE\u3002\u5982\u679C\u628ASQL\u6A21\u5F0F\u8BBE\u5B9A\u4F4D\u542F\u7528<code>REAL_AS_FLOAT</code>\u6A21\u5F0F\uFF0CREAL\u7684\u9ED8\u8BA4\u503C\u5C31\u53D8\u6210\u4E86FLOAT\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u542F\u7528REAL_AS_FLOAT\u6A21\u5F0F
SET sql_mode = &quot;REAL_AS_FLOAT&quot;;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p><strong>\u6D6E\u70B9\u6570\u65E0\u7B26\u53F7\u6570\u53D6\u503C\u8303\u56F4\u76F8\u5F53\u4E8E\u6709\u7B26\u53F7\u6570\u53D6\u503C\u8303\u56F4\u7684\u4E00\u534A\uFF0C\u5373\u76F8\u5F53\u4E8E\u6709\u7B26\u53F7\u6570\u53D6\u503C\u8303\u56F4\u4E2D\u5927\u4E8E\u7B49\u4E8E0\u7684\u90E8\u5206</strong>\u3002\u8FD9\u662F\u56E0\u4E3A\u5728MySQL\u4E2D\u5B58\u50A8\u6D6E\u70B9\u6570\u7684\u683C\u5F0F\u4E3A\uFF1A<code>\u7B26\u53F7\uFF08S\uFF09</code>\u3001<code>\u5C3E\u6570\uFF08M\uFF09</code>\u3001<code>\u9636\u7801\uFF08E\uFF09</code>\uFF0C\u65E0\u8BBA\u6709\u6CA1\u6709\u7B26\u53F7\uFF0CMySQL\u7684\u6D6E\u70B9\u6570\u5728\u5B58\u50A8\u65F6\u90FD\u4F1A\u4FDD\u7559\u51FA\u7B26\u53F7\u4F4D\u3002</p></li><li><p><strong>FLOAT\u548CDOUBLE\u4E0D\u7528\u7279\u610F\u7684\u58F0\u660E\u4E3AUNSIGNED</strong>\uFF0C\u56E0\u4E3A\u6D6E\u70B9\u6570\u65E0\u7B26\u53F7\u6570\u53D6\u503C\u8303\u56F4\u76F8\u5F53\u4E8E\u6709\u7B26\u53F7\u6570\u53D6\u503C\u8303\u56F4\u7684\u4E00\u534A\u3002</p></li></ul><h4 id="_11-3-2-\u6570\u636E\u7CBE\u5EA6\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#_11-3-2-\u6570\u636E\u7CBE\u5EA6\u8BF4\u660E" aria-hidden="true">#</a> 11.3.2 \u6570\u636E\u7CBE\u5EA6\u8BF4\u660E</h4><ul><li><p>MySQL\u5141\u8BB8\u4F7F\u7528<strong>\u975E\u6807\u51C6\u8BED\u6CD5</strong>\uFF08\u5176\u4ED6\u6570\u636E\u5E93\u672A\u5FC5\u652F\u6301\uFF0C\u56E0\u6B64\u5982\u679C\u6D89\u53CA\u5230\u6570\u636E\u8FC1\u79FB\uFF0C\u5219\u6700\u597D\u4E0D\u8981\u8FD9\u4E48 \u7528\uFF09\uFF1A<code> FLOAT(M,D)</code> \u6216<code>DOUBLE(M,D)</code>\u3002\u8FD9\u91CC\uFF0C<strong>M\u79F0\u4E3A\u7CBE\u5EA6</strong> \uFF0C<strong>D\u79F0\u4E3A\u6807\u5EA6</strong> \u3002(M,D)\u4E2D <strong>M=\u6574\u6570\u4F4D+\u5C0F\u6570\u4F4D\uFF0CD=\u5C0F\u6570\u4F4D</strong>\u3002 D&lt;=M&lt;=255\uFF0C0&lt;=D&lt;=30\u3002</p></li><li><p>FLOAT\u548CDOUBLE\u7C7B\u578B\u5728\u4E0D\u6307\u5B9A(M,D)\u65F6\uFF0C\u9ED8\u8BA4\u4F1A\u6309\u7167\u5B9E\u9645\u7684\u7CBE\u5EA6\uFF08\u7531\u5B9E\u9645\u7684\u786C\u4EF6\u548C\u64CD\u4F5C\u7CFB\u7EDF\u51B3\u5B9A\uFF09 \u6765\u663E\u793A</p></li><li><p>\u4E0D\u7BA1\u662F\u5426\u663E\u5F0F\u8BBE\u7F6E\u4E86\u7CBE\u5EA6(M,D)\uFF0C\u8FD9\u91CCMySQL\u7684\u5904\u7406\u65B9\u6848\u5982\u4E0B\uFF1A</p><ul><li><p>\u5982\u679C\u5B58\u50A8\u65F6\uFF0C<strong>\u6574\u6570\u90E8\u5206\u8D85\u51FA\u4E86\u8303\u56F4\uFF0CMySQL\u5C31\u4F1A\u62A5\u9519</strong>\uFF0C\u4E0D\u5141\u8BB8\u5B58\u8FD9\u6837\u7684\u503C</p></li><li><p>\u5982\u679C\u5B58\u50A8\u65F6\uFF0C<strong>\u5C0F\u6570\u70B9\u90E8\u5206\u82E5\u8D85\u51FA\u8303\u56F4</strong>\uFF0C\u5C31\u5206\u4EE5\u4E0B\u60C5\u51B5\uFF1A</p><ul><li><p><strong>\u82E5\u56DB\u820D\u4E94\u5165\u540E\uFF0C\u6574\u6570\u90E8\u5206\u6CA1\u6709\u8D85\u51FA\u8303\u56F4\uFF0C\u5219\u53EA\u8B66\u544A\uFF0C\u4F46\u80FD\u6210\u529F\u64CD\u4F5C\u5E76\u56DB\u820D\u4E94\u5165\u5220\u9664\u591A\u4F59\u7684\u5C0F\u6570\u4F4D\u540E\u4FDD\u5B58</strong>\u3002</p><p>\u4F8B\u5982\u5728FLOAT(5,2)\u5217\u5185\u63D2\u5165999.009\uFF0C\u8FD1\u4F3C\u7ED3\u679C\u662F999.01\u3002</p></li><li><p><strong>\u82E5\u56DB\u820D\u4E94\u5165\u540E\uFF0C\u6574\u6570\u90E8\u5206\u8D85\u51FA\u8303\u56F4\uFF0C\u5219MySQL\u62A5\u9519\uFF0C\u5E76\u62D2\u7EDD\u5904\u7406</strong>\u3002</p><p>\u5982FLOAT(5,2)\u5217\u5185\u63D2\u5165 999.995\u548C-999.995\u90FD\u4F1A\u62A5\u9519\u3002</p></li></ul></li></ul></li><li><p><strong>\u4ECEMySQL 8.0.17\u5F00\u59CB\uFF0CFLOAT(M,D) \u548CDOUBLE(M,D)\u7528\u6CD5\u5728\u5B98\u65B9\u6587\u6863\u4E2D\u5DF2\u7ECF\u660E\u786E\u4E0D\u63A8\u8350\u4F7F\u7528</strong>\uFF0C\u5C06\u6765\u53EF\u80FD\u88AB\u79FB\u9664\u3002</p></li><li><p><strong>\u4ECEMySQL 8.0.17\u5F00\u59CB\uFF0C\u5173\u4E8E\u6D6E\u70B9\u578BFLOAT\u548CDOUBLE\u7684UNSIGNED\u4E5F\u4E0D\u63A8\u8350\u4F7F\u7528\u4E86</strong>\uFF0C\u5C06\u6765\u4E5F\u53EF\u80FD\u88AB\u79FB\u9664\u3002</p></li></ul><h4 id="_11-3-3-\u7CBE\u5EA6\u8BEF\u5DEE\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#_11-3-3-\u7CBE\u5EA6\u8BEF\u5DEE\u8BF4\u660E" aria-hidden="true">#</a> 11.3.3 \u7CBE\u5EA6\u8BEF\u5DEE\u8BF4\u660E</h4><p><strong>\u6D6E\u70B9\u6570\u7C7B\u578B\u6709\u4E2A\u7F3A\u9677\uFF0C\u5C31\u662F\u4E0D\u7CBE\u51C6</strong>\uFF0C\u8BE6\u60C5\u89C1\u5982\u4E0B\u4F8B\u5B50\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u521B\u5EFA\u8868
CREATE TABLE test_double2(
f1 DOUBLE
);

# \u63D2\u5165\u6570\u636E
INSERT INTO test_double2
VALUES(0.47),(0.44),(0.19);

# \u67E5\u8BE2\u4EE5\u4E0A\u6570\u636E\u7684\u548C
mysql&gt; SELECT SUM(f1)
-&gt; FROM test_double2;
# \u7ED3\u679C\u5982\u4E0B\uFF1A
+--------------------+
| SUM(f1) |
+--------------------+
| 1.0999999999999999 |
+--------------------+
1 row in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>\u4F8B\u5B50\u4E2D\uFF0C\u5BF90.47\u3001 0.44\u3001 0.19\u4E09\u4E2A\u6570\u8FDB\u884CSUM()\u64CD\u4F5C\uFF0C\u7ED3\u679C\u8FD4\u56DE1.0999999999999999\uFF0C\u4F46\u662F\u5B9E\u96450.47 + 0.44 + 0.19 = 1.1\uFF0C\u6B64\u65F6\u5C31\u4EA7\u751F\u4E86\u8BEF\u5DEE\u3002</p><p>**\u4E3A\u4EC0\u4E48\u4F1A\u5B58\u5728\u8FD9\u6837\u7684\u8BEF\u5DEE\u5462\uFF1F**\u95EE\u9898\u8FD8\u662F\u51FA\u5728 MySQL \u5BF9\u6D6E\u70B9\u7C7B\u578B\u6570\u636E\u7684\u5B58\u50A8\u65B9\u5F0F\u4E0A\u3002 MySQL \u7528 4 \u4E2A\u5B57\u8282\u5B58\u50A8 FLOAT \u7C7B\u578B\u6570\u636E\uFF0C\u7528 8 \u4E2A\u5B57\u8282\u6765\u5B58\u50A8 DOUBLE \u7C7B\u578B\u6570\u636E\u3002\u65E0\u8BBA\u54EA\u4E2A\uFF0C\u90FD\u662F\u91C7\u7528\u4E8C \u8FDB\u5236\u7684\u65B9\u5F0F\u6765\u8FDB\u884C\u5B58\u50A8\u7684\u3002\u6BD4\u5982 9.625\uFF0C\u7528\u4E8C\u8FDB\u5236\u6765\u8868\u8FBE\uFF0C\u5C31\u662F 1001.101\uFF0C\u6216\u8005\u8868\u8FBE\u62101.001101\xD72^3\u3002\u5982 \u679C\u5C3E\u6570\u4E0D\u662F 0 \u6216 5\uFF08\u6BD4\u5982 9.624\uFF09\uFF0C\u4F60\u5C31\u65E0\u6CD5\u7528\u4E00\u4E2A\u4E8C\u8FDB\u5236\u6570\u6765\u7CBE\u786E\u8868\u8FBE\u3002\u8FDB\u800C\uFF0C\u5C31\u53EA\u597D\u5728\u53D6\u503C\u5141\u8BB8\u7684\u8303 \u56F4\u5185\u8FDB\u884C\u56DB\u820D\u4E94\u5165\u3002</p><p>\u56E0\u6B64\uFF0C\u5728\u7F16\u7A0B\u4E2D\uFF0C\u5982\u679C\u7528\u5230\u6D6E\u70B9\u6570\uFF0C\u8981\u7279\u522B\u6CE8\u610F\u8BEF\u5DEE\u95EE\u9898\uFF0C<strong>\u56E0\u4E3A\u6D6E\u70B9\u6570\u662F\u4E0D\u51C6\u786E\u7684\uFF0C\u6240\u4EE5\u6211\u4EEC\u8981\u907F\u514D\u4F7F\u7528\u201C=\u201D\u6765 \u5224\u65AD\u4E24\u4E2A\u6570\u662F\u5426\u76F8\u7B49</strong>\u3002\u540C\u65F6\uFF0C<strong>\u5728\u4E00\u4E9B\u5BF9\u7CBE\u786E\u5EA6\u8981\u6C42\u8F83\u9AD8\u7684\u9879\u76EE\u4E2D\uFF0C\u5343\u4E07\u4E0D\u8981\u4F7F\u7528\u6D6E\u70B9\u6570</strong>\uFF0C\u4E0D\u7136\u4F1A\u5BFC\u81F4\u7ED3 \u679C\u9519\u8BEF\uFF0C\u751A\u81F3\u662F\u9020\u6210\u4E0D\u53EF\u633D\u56DE\u7684\u635F\u5931\u3002\u90A3\u4E48\uFF0CMySQL \u6709\u6CA1\u6709\u7CBE\u51C6\u7684\u6570\u636E\u7C7B\u578B\u5462\uFF1F\u5F53\u7136\u6709\uFF0C\u8FD9\u5C31\u662F\u5B9A\u70B9\u6570 \u7C7B\u578B\uFF1A <code>DECIMAL</code> \u3002</p><h3 id="_11-4-\u5B9A\u70B9\u6570" tabindex="-1"><a class="header-anchor" href="#_11-4-\u5B9A\u70B9\u6570" aria-hidden="true">#</a> 11.4 \u5B9A\u70B9\u6570</h3><h4 id="_11-4-1-\u7C7B\u578B\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#_11-4-1-\u7C7B\u578B\u4ECB\u7ECD" aria-hidden="true">#</a> 11.4.1 \u7C7B\u578B\u4ECB\u7ECD</h4><table><thead><tr><th>\u7C7B\u578B</th><th>\u5B57\u8282\u6570</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>DECIMAL(M,D)</td><td>M+2\u5B57\u8282</td><td>\u6709\u6548\u8303\u56F4\u7531M\u548CD\u51B3\u5B9A\u3002\u672A\u6307\u5B9AM\u548CD\u65F6\uFF0C\u9ED8\u8BA4M=10\uFF0CD=0</td></tr></tbody></table><p>==\u8BF4\u660E==\uFF1A</p><ul><li>DECIMAL(M,D)\uFF0CM=\u6574\u6570\u4F4D\u6570+\u5C0F\u6570\u4F4D\u6570\uFF0CD=\u5C0F\u6570\u4F4D\u6570\u3002M\u53D6\u503C\u8303\u56F4\u662F[0,65]\uFF0CD\u53D6\u503C\u8303\u56F4\u662F[0,30]\uFF0C\u4E14D&lt;M\u3002</li><li>DECIMAL \u7684\u5B58\u50A8\u7A7A\u95F4\u5E76\u4E0D\u662F\u56FA\u5B9A\u7684\uFF0C\u7531\u7CBE\u5EA6\u503CM\u51B3\u5B9A\uFF0C\u603B\u5171\u5360\u7528\u7684\u5B58\u50A8\u7A7A\u95F4\u4E3AM+2\u4E2A\u5B57\u8282\u3002</li><li>\u5B9A\u70B9\u6570\u5728MySQL\u5185\u90E8\u662F\u4EE5<strong>\u5B57\u7B26\u4E32</strong>\u7684\u5F62\u5F0F\u8FDB\u884C\u5B58\u50A8\uFF0C\u8FD9\u5C31\u51B3\u5B9A\u4E86\u5B83\u4E00\u5B9A\u662F\u7CBE\u51C6\u7684\u3002</li><li>\u5B58\u50A8\u6570\u503C\u65F6\uFF1A <ul><li>\u5C0F\u6570\u4F4D\u4E0D\u8DB3\u4F1A\u81EA\u52A8\u88650</li><li>\u9996\u4F4D\u6570\u5B57\u4E3A0\u81EA\u52A8\u5FFD\u7565</li><li>\u6574\u6570\u8D85\u51FA\u5B58\u50A8\u8303\u56F4\u4F1A\u62A5\u9519</li><li>\u5C0F\u6570\u8D85\u51FA\u4F1A\u622A\u65AD\uFF0C\u53D1\u51FA\u8B66\u544A\uFF0C\u5E76\u6309\u56DB\u820D\u4E94\u5165\u5904\u7406</li></ul></li></ul><h4 id="_11-4-2-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_11-4-2-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 11.4.2 \u4F7F\u7528\u573A\u666F</h4><p>\u5728\u6D89\u53CA\u5BF9\u5C0F\u6570\u6C42\u548C\uFF0C\u7279\u522B\u662F\u6D89\u53CA\u5230\u91D1\u989D\u7684\u65F6\u5019\uFF0C\u63A8\u8350\u4F7F\u7528DECIMAL\u3002</p><h2 id="_11-5-\u4F4D\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#_11-5-\u4F4D\u7C7B\u578B" aria-hidden="true">#</a> 11.5 \u4F4D\u7C7B\u578B</h2><h4 id="_11-5-1-\u7C7B\u578B\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#_11-5-1-\u7C7B\u578B\u4ECB\u7ECD" aria-hidden="true">#</a> 11.5.1 \u7C7B\u578B\u4ECB\u7ECD</h4><table><thead><tr><th>\u7C7B\u578B</th><th>\u5B57\u8282\u6570</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>BIT(M)</td><td>\u7EA6(M+7)/8\u4E2A\u5B57\u8282</td><td>M\u8868\u793A\u4E8C\u8FDB\u5236\u7684\u4F4D\u6570\uFF0C\u53D6\u503C\u8303\u56F4\u662F[1,64]\u3002\u672A\u6307\u5B9AM\u65F6\uFF0C\u9ED8\u8BA4M=1</td></tr></tbody></table><p>==\u8BF4\u660E==\uFF1A</p><ul><li>BIT\u7C7B\u578B\u4E2D\u5B58\u50A8\u7684\u662F\u4E8C\u8FDB\u5236\u503C</li></ul><h4 id="_11-5-2-\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_11-5-2-\u4F7F\u7528" aria-hidden="true">#</a> 11.5.2 \u4F7F\u7528</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u521B\u5EFA\u8868
CREATE TABLE test_bit1(
f1 BIT,		# \u9ED8\u8BA4M\u4E3A1\uFF0C\u53EA\u80FD1\u4F4D\u4E8C\u8FDB\u5236\u6570\uFF0C\u8F6C\u4E3A\u5341\u8FDB\u5236\u53EA\u80FD\u5B58\u50A80\u548C1\uFF0C\u6BD41\u5927\u65F6\u8981\u62A5\u9519
f2 BIT(5),	# \u80FD\u5B58\u50A85\u4F4D\u4E8C\u8FDB\u5236\u6570\uFF0C\u8F6C\u4E3A\u5341\u8FDB\u5236\uFF0C\u6700\u5927\u80FD\u5B58\u50A831\uFF0C\u6BD431\u5927\u65F6\u8981\u62A5\u9519
f3 BIT(64)	# \u80FD\u5B58\u50A864\u4F4D\u4E8C\u8FDB\u5236\u6570\u3002\u4E14M\u6700\u5927\u53EA\u80FD\u662F64
);

# \u63D2\u5165\u6570\u636E
INSERT INTO test_bit1(f1) VALUES(1);

# \u63D2\u5165\u6570\u636E\u62A5\u9519\uFF1AData too long for column &#39;f1&#39; at row 1
INSERT INTO test_bit1(f1) VALUES(2);

# \u63D2\u5165\u6570\u636E
INSERT INTO test_bit1(f2)VALUES(30);

# \u67E5\u8BE2\u6570\u636E
SELECT * FROM test_bit1;
# \u5728cmd\u63A7\u5236\u53F0\u4E2D\uFF0C\u7528\u5341\u516D\u8FDB\u5236\u7684\u6570\u793A
+------------+------------+------------+
| f1         | f2         | f3         |
+------------+------------+------------+
| 0x01       | NULL       | NULL       |
| NULL       | 0x1E       | NULL       |
+------------+------------+------------+
2 rows in set (0.00 sec)

# \u67E5\u8BE2\u6570\u636E\uFF0C\u5206\u522B\u4F7F\u7528\u4E8C\u8FDB\u5236\u3001\u5341\u516D\u8FDB\u5236\u3001\u5341\u8FDB\u5236\u7684\u6570\u6765\u663E\u793A
mysql&gt; SELECT BIN(f2) &#39;\u4E8C\u8FDB\u5236&#39;,HEX(f2) &#39;\u5341\u516D\u8FDB\u5236&#39;, f2+0 &#39;\u5341\u8FDB\u5236&#39; FROM test_bit1;
+-----------+--------------+-----------+
| \u4E8C\u8FDB\u5236    | \u5341\u516D\u8FDB\u5236     | \u5341\u8FDB\u5236    |
+-----------+--------------+-----------+
| NULL      | NULL         |      NULL |
| 11110     | 1E           |        30 |
+-----------+--------------+-----------+
2 rows in set (0.00 sec)

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="_11-6-\u65E5\u671F\u4E0E\u65F6\u95F4" tabindex="-1"><a class="header-anchor" href="#_11-6-\u65E5\u671F\u4E0E\u65F6\u95F4" aria-hidden="true">#</a> 11.6 \u65E5\u671F\u4E0E\u65F6\u95F4</h2><h4 id="_11-6-1-\u7C7B\u578B\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#_11-6-1-\u7C7B\u578B\u4ECB\u7ECD" aria-hidden="true">#</a> 11.6.1 \u7C7B\u578B\u4ECB\u7ECD</h4><table><thead><tr><th>\u7C7B\u578B</th><th>\u5B57\u8282</th><th>\u63CF\u8FF0</th><th>\u683C\u5F0F</th><th>\u6700\u5C0F\u503C</th><th>\u6700\u5927\u503C</th></tr></thead><tbody><tr><td>YEAR</td><td>1</td><td>\u5E74</td><td>YYYY\u6216YY</td><td>1901</td><td>2155</td></tr><tr><td>TIME</td><td>3</td><td>\u65F6\u5206\u79D2</td><td>HH:MM:SS</td><td>-838:59:59</td><td>838:59:59</td></tr><tr><td>DATE</td><td>3</td><td>\u5E74\u6708\u65E5</td><td>YYYY-MM-DD</td><td>1000-01-01</td><td>9999-12-03</td></tr><tr><td>DATETIME</td><td>8</td><td>\u5E74\u6708\u65E5\u65F6\u5206\u79D2</td><td>YYYY-MM-DD HH:MM:SS</td><td>1000-01-01 00:00:00</td><td>9999-12-31 23:59:59</td></tr><tr><td>TIMESTAMP</td><td>4</td><td>\u5E26\u65F6\u533A\u7684\u5E74\u6708\u65E5\u65F6\u5206\u79D2</td><td>YYYY-MM-DD HH:MM:SS</td><td>1970-01-01 00:00:00 UTC</td><td>2038-01-19 03:14:07UTC</td></tr></tbody></table><h4 id="_11-6-2-year" tabindex="-1"><a class="header-anchor" href="#_11-6-2-year" aria-hidden="true">#</a> 11.6.2 YEAR</h4><p>==YEAR\u7528\u6765\u8868\u793A\u5E74\u4EFD==\uFF0C\u5728MySQL\u4E2D\u6709\u5982\u4E0B\u51E0\u79CD\u5B58\u50A8\u683C\u5F0F\uFF1A</p><ul><li>\u4EE5<strong>4\u4F4D</strong>\u5B57\u7B26\u4E32\u6216\u6570\u5B57\u683C\u5F0F\u8868\u793A\uFF0C\u683C\u5F0F\u4E3A<code>YYYY</code>\uFF0C\u6700\u5C0F\u503C\u4E3A1901\uFF0C\u6700\u5927\u503C\u4E3A2155</li><li>\u4EE5<strong>2\u4F4D</strong>\u5B57\u7B26\u4E32\u6216\u6570\u5B57\u683C\u5F0F\u8868\u793A\uFF0C\u6700\u5C0F\u503C\u4E3A00\uFF0C\u6700\u5927\u503C\u4E3A99 <ul><li>\u5F53\u53D6\u503C\u4E3A<code>01~69</code>\uFF0C\u8868\u793A<code>2001~2069</code></li><li>\u5F53\u53D6\u503C\u4E3A<code>70~99</code>\uFF0C\u8868\u793A<code>1970~1999</code></li><li>\u5F53\u53D6\u503C\u4E3A<strong>\u6574\u6570</strong>\u7684<code>0</code>\u6216\u8005<code>00</code>\uFF0C\u8868\u793A\u662F<code>0000</code></li><li>\u5F53\u53D6\u503C\u662F<strong>\u5B57\u7B26\u4E32</strong><code>0</code>\u6216\u8005<code>00</code>\uFF0C\u8868\u793A\u662F<code>2000</code></li></ul></li></ul><h4 id="_11-6-3-time" tabindex="-1"><a class="header-anchor" href="#_11-6-3-time" aria-hidden="true">#</a> 11.6.3 TIME</h4><p>==TIME\u7528\u6765\u8868\u793A\u65F6\u5206\u79D2==\uFF0C\u5728MySQL\u4E2D\u6709\u5982\u4E0B\u51E0\u79CD\u5B58\u50A8\u683C\u5F0F\uFF1A</p><ul><li><strong>\u4F7F\u7528\u5E26\u6709\u5192\u53F7\u7684\u5B57\u7B26\u4E32</strong>\uFF0C\u5982<code>D HH:MM:SS</code>\u3001<code>HH:MM:SS</code>\u3001<code>HH:MM</code>\u3001<code>D HH:MM</code>\u3001<code>D HH</code>\u3001<code>SS</code>\u683C\u5F0F\u3002\u5176\u4E2DD\u8868\u793A\u5929\uFF0C\u53D6\u503C\u8303\u56F4\u662F[0,34]\uFF0C\u63D2\u5165\u65F6\uFF0CD\u4F1A\u88AB\u8F6C\u5316\u4E3A\u5C0F\u65F6</li><li><strong>\u4F7F\u7528\u4E0D\u5E26\u5192\u53F7\u7684\u5B57\u7B26\u4E32\u6216\u8005\u6570\u5B57</strong>\uFF0C\u5982<code>HHMMSS</code>\u3002 <ul><li>\u5982\u679C\u63D2\u5165\u7684\u5B57\u7B26\u4E32\u6216\u8005\u6570\u5B57\u4E0D\u5408\u6CD5\uFF0C\u4F1A\u5C06\u5176\u8F6C\u5316\u4E3A00:00:00\u5B58\u50A8</li><li>\u5047\u5982\u63D2\u5165\u7684\u662F1210\uFF0C\u5B58\u50A8\u540E\u7684\u65F6\u95F4\u662F<strong>00:12:10</strong>\uFF0C\u800C\u4E0D\u662F12:10:00</li></ul></li><li>\u4F7F\u7528<code>CURRENT_TIME()</code> \u3001<code>CURTIME()</code>\u6216\u8005<code> NOW()</code>\u7B49\uFF0C\u53EF\u4EE5<strong>\u63D2\u5165\u5F53\u524D\u7CFB\u7EDF\u65F6\u95F4</strong></li></ul><h4 id="_11-6-4-date" tabindex="-1"><a class="header-anchor" href="#_11-6-4-date" aria-hidden="true">#</a> 11.6.4 DATE</h4><p>==DATE\u8868\u793A\u5E74\u6708\u65E5==\uFF0C\u5728MySQL\u4E2D\u6709\u5982\u4E0B\u51E0\u79CD\u5B58\u50A8\u683C\u5F0F\uFF1A</p><ul><li><code>YYYY-MM-DD</code>\u6216<code>YYYYMMDD</code>\u683C\u5F0F\u3002\u6700\u5C0F\u53D6\u503C1000-01-01\uFF0C\u6700\u5927\u53D6\u503C9999-12-03\u3002YYYYMMDD\u683C\u5F0F\u4F1A\u88AB\u8F6C\u5316\u4E3AYYYY-MM-DD</li><li><code>YY-MM-DD</code>\u6216<code>YYMMDD</code>\u683C\u5F0F\u3002 <ul><li>\u5F53\u5E74\u4EFD(YY)\u53D6\u503C\u4E3A[00,69]\uFF0C\u4F1A\u88AB\u8F6C\u5316\u4E3A[2000,2069]</li><li>\u5F53\u5E74\u4EFD(YY)\u53D6\u503C\u4E3A[70,99]\uFF0C\u4F1A\u88AB\u8F6C\u5316\u4E3A[1970,1999]</li></ul></li><li>\u4F7F\u7528<code>CURRENT_DATE()</code> \u3001<code>CURDATE()</code>\u6216\u8005<code> NOW()</code>\u7B49\uFF0C\u53EF\u4EE5<strong>\u63D2\u5165\u5F53\u524D\u7CFB\u7EDF\u65E5\u671F</strong></li></ul><h4 id="_11-6-5-datetime" tabindex="-1"><a class="header-anchor" href="#_11-6-5-datetime" aria-hidden="true">#</a> 11.6.5 DATETIME</h4><p>==DATETIME\u8868\u793A\u5E74\u6708\u65E5 \u65F6\u5206\u79D2==\uFF0C\u5728MySQL\u4E2D\u6709\u5982\u4E0B\u51E0\u79CD\u5B58\u50A8\u683C\u5F0F\uFF1A</p><ul><li><code>YYYY-MM-DD HH:MM:SS</code>\u6216<code>YYYYMMDDHHMMSS</code>\u683C\u5F0F\u3002\u6700\u5C0F\u53D6\u503C1000-01-01 00:00:00\uFF0C\u6700\u5927\u53D6\u503C9999-12-03 23:59:59</li><li>\u4F7F\u7528\u51FD\u6570<code>CURRENT_TIMESTAMP()</code>\u548C<code>NOW()</code>\u7B49\uFF0C\u53EF\u4EE5<strong>\u63D2\u5165\u7CFB\u7EDF\u7684\u5F53\u524D\u65E5\u671F\u548C \u65F6\u95F4</strong>\u3002</li></ul><h4 id="_11-6-6-timestamp" tabindex="-1"><a class="header-anchor" href="#_11-6-6-timestamp" aria-hidden="true">#</a> 11.6.6 TIMESTAMP</h4><p>==TIMESTAMP\u8868\u793A<strong>\u5E26\u65F6\u533A\u7684</strong>\u5E74\u6708\u65E5 \u65F6\u5206\u79D2==\uFF0C\u5B58\u50A8\u683C\u5F0F\u4E0EDATETIME\u76F8\u540C\u3002</p><blockquote><p>TIMESTAMP VS DATETIME</p></blockquote><ul><li>TIMESTAMP\u53EA\u9700\u89814\u4E2A\u5B57\u8282\uFF0C\u5B58\u50A8\u7684\u65F6\u95F4\u8303\u56F4\u6BD4DATETIME\u5C0F\u5F88\u591A\u3002\u53EA\u80FD\u5B58\u50A8 \u201C1970-01-01 00:00:01 UTC\u201D\u5230\u201C2038-01-19 03:14:07 UTC\u201D\u4E4B\u95F4\u7684\u65F6\u95F4\u3002\u5176\u4E2D\uFF0CUTC\u8868\u793A\u4E16\u754C\u7EDF\u4E00\u65F6\u95F4\uFF0C\u4E5F\u53EB \u4F5C\u4E16\u754C\u6807\u51C6\u65F6\u95F4\u3002</li><li>\u5E95\u5C42\u5B58\u50A8\u65B9\u5F0F\u4E0D\u540C\uFF0CTIMESTAMP\u5E95\u5C42\u5B58\u50A8\u7684\u662F\u6BEB\u79D2\u503C\uFF0C\u8DDD\u79BB1970-1-1 0:0:0 0\u6BEB\u79D2\u7684\u6BEB\u79D2\u503C\u3002</li><li>\u4E24\u4E2A\u65E5\u671F\u6BD4\u8F83\u5927\u5C0F\u6216\u65E5\u671F\u8BA1\u7B97\u65F6\uFF0CTIMESTAMP\u66F4\u65B9\u4FBF\u3001\u66F4\u5FEB\u3002</li><li>**\u4F7F\u7528TIMESTAMP\u5B58\u50A8\u7684\u540C\u4E00\u4E2A\u65F6\u95F4\u503C\uFF0C\u5728\u4E0D\u540C\u7684\u65F6\u533A\u67E5\u8BE2\u65F6\u4F1A\u663E\u793A\u4E0D\u540C\u7684\u65F6\u95F4\u3002**\u800CDATETIME\u4E0D\u540C\u65F6\u533A\u663E\u793A\u7684\u662F\u540C\u4E00\u65F6\u95F4\u3002</li></ul><h3 id="_11-7-\u6587\u672C\u5B57\u7B26\u4E32\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#_11-7-\u6587\u672C\u5B57\u7B26\u4E32\u7C7B\u578B" aria-hidden="true">#</a> 11.7 \u6587\u672C\u5B57\u7B26\u4E32\u7C7B\u578B</h3><h4 id="_11-7-1-\u7C7B\u578B\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#_11-7-1-\u7C7B\u578B\u4ECB\u7ECD" aria-hidden="true">#</a> 11.7.1 \u7C7B\u578B\u4ECB\u7ECD</h4><table><thead><tr><th>\u7C7B\u578B</th><th>\u957F\u5EA6\u8303\u56F4</th><th>\u957F\u5EA6\u5355\u4F4D</th><th>\u5360\u7528\u7684\u5B58\u50A8\u7A7A\u95F4</th></tr></thead><tbody><tr><td>CHAR(M)</td><td>[0, 255]</td><td>\u5B57\u7B26</td><td>M\u4E2A\u5B57\u7B26</td></tr><tr><td>VARCHAR(M)</td><td>[0, 65535]</td><td>\u5B57\u8282</td><td>MySQL4.0\u4E4B\u524D\uFF0CM\u7684\u5355\u4F4D\u662F\u5B57\u8282\uFF1B<br><br>MySQL5.0\u4E4B\u540E\uFF0CM\u7684\u5355\u4F4D\u662F\u5B57\u7B26\u3002<br>\u6700\u5927\u7684\u5B57\u7B26\u6570\u9700\u8981\u901A\u8FC7\u7F16\u7801\u6765\u7B97\uFF0C\u6309\u7167\u4E0D\u8D85\u8FC7\u884C65535\u4E2A\u5B57\u8282</td></tr><tr><td>TINYTEXT</td><td>[0, 255]</td><td>\u5B57\u8282</td><td>L+2\u4E2A\u5B57\u8282\uFF0C\u6700\u591A\u80FD\u5B58255/3=85\u4E2AUTF8\u7F16\u7801\u7684\u5B57\u7B26</td></tr><tr><td>TEXT</td><td>[0, 65535]</td><td>\u5B57\u8282</td><td>L+2\u4E2A\u5B57\u8282\uFF0C\u6700\u591A\u80FD\u5B5865535/3\u4E2AUTF8\u7F16\u7801\u7684\u5B57\u7B26</td></tr><tr><td>MEDIUMTEXT</td><td>[0, 16777215]</td><td>\u5B57\u8282</td><td>L+3\u4E2A\u5B57\u8282\uFF0C\u6700\u591A\u80FD\u5B5816777215/3\u4E2AUTF8\u7F16\u7801\u7684\u5B57\u7B26</td></tr><tr><td>LONGTEXT</td><td>[0, 4294967295]</td><td>\u5B57\u8282</td><td>L+4\u4E2A\u5B57\u8282\uFF0C\u6700\u591A\u80FD\u5B584294967295/3\u4E2AUTF8\u7F16\u7801\u7684\u5B57\u7B26</td></tr></tbody></table><h4 id="_11-7-2-char\u4E0Evarchar" tabindex="-1"><a class="header-anchor" href="#_11-7-2-char\u4E0Evarchar" aria-hidden="true">#</a> 11.7.2 CHAR\u4E0EVARCHAR</h4><p>CHAR\u548CVARCHAR\u7C7B\u578B\u90FD\u53EF\u4EE5\u5B58\u50A8\u6BD4\u8F83\u77ED\u7684\u5B57\u7B26\u4E32\u3002</p><blockquote><p>CHAR\u7C7B\u578B</p></blockquote><ul><li>CHAR(M)\u662F\u56FA\u5B9A\u957F\u5EA6\uFF0C\u4E00\u822C\u9700\u8981\u5148\u6307\u5B9A\u5B57\u7B26\u4E32\u7684\u957F\u5EA6\u3002\u5982\u679C\u4E0D\u6307\u5B9A\uFF0C\u9ED8\u8BA4\u957F\u5EA6\u662F1\u4E2A\u5B57\u7B26</li><li>\u5982\u679C\u4FDD\u5B58\u65F6\uFF0C\u6570\u636E\u7684\u5B9E\u9645\u957F\u5EA6\u6BD4CHAR\u7C7B\u578B\u58F0\u660E\u7684\u957F\u5EA6\u5C0F\uFF0C\u5219\u4F1A\u5728<strong>\u53F3\u4FA7\u586B\u5145\u7A7A\u683C</strong>\u5DF2\u8FBE\u5230\u6307\u5B9A\u7684\u957F\u5EA6\u3002</li><li><strong>\u5F53\u68C0\u7D22\u65F6\uFF0CCHAR\u7C7B\u578B\u7684\u5B57\u6BB5\u4F1A\u53BB\u9664\u5C3E\u90E8\u7684\u7A7A\u683C\u3002</strong></li><li>\u5B9A\u4E49CHAR\u7C7B\u578B\u7684\u5B57\u6BB5\u65F6\uFF0C\u58F0\u660E\u7684<strong>\u5B57\u6BB5\u957F\u5EA6\u5373\u4E3A</strong>CHAR\u7C7B\u578B\u5B57\u6BB5\u6240\u5360\u7684\u5B58\u50A8\u7A7A\u95F4\u7684<strong>\u5B57\u7B26\u6570</strong>\u3002</li></ul><blockquote><p>VARCHAR\u7C7B\u578B</p></blockquote><ul><li><p>VARCHAR(M) \u5B9A\u4E49\u65F6\uFF0C<strong>\u5FC5\u987B\u6307\u5B9A\u957F\u5EA6M</strong>\uFF0C\u5426\u5219\u62A5\u9519\u3002</p></li><li><p>MySQL4.0\u7248\u672C\u4EE5\u4E0B\uFF0Cvarchar(20)\uFF1A\u6307\u7684\u662F20\u5B57\u8282\uFF0C\u5982\u679C\u5B58\u653EUTF8\u6C49\u5B57\u65F6\uFF0C\u53EA\u80FD\u5B586\u4E2A\uFF08\u6BCF\u4E2A\u6C49\u5B573\u5B57 \u8282\uFF09 \uFF1BMySQL5.0\u7248\u672C\u4EE5\u4E0A\uFF0Cvarchar(20)\uFF1A\u6307\u7684\u662F20\u5B57\u7B26\u3002</p></li><li><p><strong>\u68C0\u7D22VARCHAR\u7C7B\u578B\u7684\u5B57\u6BB5\u6570\u636E\u65F6\uFF0C\u4F1A\u4FDD\u7559\u6570\u636E\u5C3E\u90E8\u7684\u7A7A\u683C</strong>\u3002</p></li><li><p>VARCHAR\u7C7B\u578B\u7684\u5B57\u6BB5\u6240\u5360\u7528\u7684\u5B58\u50A8\u7A7A\u95F4\u4E3A\u5B57\u7B26\u4E32\u5B9E\u9645\u957F\u5EA6\u52A01\u62162\u4E2A\u5B57\u8282\u3002</p></li><li><p>==VARCHAR\u6700\u5927\u5B58\u50A8\u957F\u5EA6\u7684\u8BA1\u7B97\u7406\u8BBA\uFF1A==</p><p>\u867D\u7136VARCHAR\u7C7B\u578B\u6700\u5927\u957F\u5EA6\u662F65535\u4E2A\u5B57\u8282\uFF0C\u4F46\u662F\u771F\u5B9E\u5B58\u50A8\u7684\u65F6\u5019\uFF0C\u5E76\u4E0D\u80FD\u5B58\u8FD9\u4E48\u591A\u6570\u636E\u3002VARCHAR\u7684\u771F\u5B9E\u5B58\u50A8\u957F\u5EA6\uFF0C\u9700\u8981\u6309\u7167\u5982\u4E0B\u89C4\u5219\u8BA1\u7B97\uFF1A</p><ul><li><p><strong>\u2460\u4E00\u884C\u8BB0\u5F55\u7684\u6700\u5927\u5B57\u8282\u6570\u4E0D\u5F97\u8D85\u8FC765535\u5B57\u8282</strong>\uFF1B</p></li><li><p><strong>\u2461VARCHAR\u672C\u8EAB\u9700\u89811\u52302\u4E2A\u5B57\u8282\u6765\u5B58\u50A8\u6570\u636E\u957F\u5EA6</strong>\uFF08\u5982\u679C\u5217\u58F0\u660E\u7684\u957F\u5EA6\u8D85\u8FC7255\uFF0C\u5219\u4F7F\u75282\u4E2A\u5B57\u8282\u6765\u5B58\u50A8\u957F\u5EA6\uFF0C\u5426\u52191\u4E2A\uFF09\uFF1B</p></li><li><p><strong>\u2462VARCHAR\u5B57\u6BB5\u5141\u8BB8\u4E3A\u7A7A\u65F6\uFF0CNULL\u503C\u6807\u8BC6\u9700\u89811\u4E2A\u5B57\u8282</strong>\u3002</p></li></ul></li><li><p>==VARCHAR\u6700\u5927\u5B58\u50A8\u957F\u5EA6\u7684\u8BA1\u7B97\u4F8B\u5B50\uFF1A==</p><p>\u4EE5MySQL8.0\u4E3A\u4F8B\uFF0C\u4EE5\u4E0B\u8868\u90FD\u4F7F\u7528 <strong>utf8mb4 \u7F16\u7801\uFF0C\u4E00\u4E2A\u5B57\u7B26\u6700\u5927\u80FD\u5360\u7528 4 \u4E2A\u5B57\u8282</strong>\u3002</p><ul><li><p>\u4F8B\u5B501\uFF1A<code>CREATE TABLE t1 (name varchar(M) NULL) CHARSET=utf8mb4;</code>\uFF0C\u5176\u4E2DM\u6700\u5927\u662F\u591A\u5C11\uFF1F</p><p>M = (\u884C\u6700\u5927\u5B57\u8282\u6570 - \u6570\u636E\u7684\u957F\u5EA6 - NULL\u6807\u8BC6) / utf8mb4 \u7F16\u7801\u6700\u5927\u5B57\u8282\u6570</p><p>\u200B = (65535 - 2 - 1) / 4 = 16383</p><p>**\u7ED3\u8BBA\uFF1A**M\u6700\u5927\u4E3A16383</p></li><li><p>\u4F8B\u5B502\uFF1A<code>CREATE TABLE t2 (name varchar(M) NOT NULL) CHARSET=utf8mb4;</code>\uFF0C\u5176\u4E2DM\u6700\u5927\u662F\u591A\u5C11\uFF1F</p><p>M = (\u884C\u6700\u5927\u5B57\u8282\u6570 - \u6570\u636E\u7684\u957F\u5EA6) / utf8mb4 \u7F16\u7801\u6700\u5927\u5B57\u8282\u6570</p><p>\u200B = (65535 - 2) / 4 = 16383.25</p><p>\u200B \u5BF916383.25\u5411\u4E0B\u53D6\u6574\uFF0C\u5F97M=16383</p><p>**\u7ED3\u8BBA\uFF1A**M\u6700\u5927\u4E3A16383</p></li><li><p>\u4F8B\u5B503\uFF1A<code>CREATE TABLE t3 (name varchar(M) NULL, age int) CHARSET=utf8mb4;</code>\uFF0C\u5176\u4E2DM\u6700\u5927\u662F\u591A\u5C11\uFF1F</p><p>M = (\u884C\u6700\u5927\u5B57\u8282\u6570 - \u6570\u636E\u7684\u957F\u5EA6 - NULL\u6807\u8BC6 - int\u5B57\u6BB5\u6240\u5360\u5B57\u8282) / utf8mb4 \u7F16\u7801\u6700\u5927\u5B57\u8282\u6570</p><p>\u200B = (65535 - 2 - 1 - 4) / 4 = 16382</p><p>**\u7ED3\u8BBA\uFF1A**M\u6700\u5927\u4E3A16382</p></li></ul></li></ul><blockquote><p>CHAR \u548C VARCHAR \u7684\u5BF9\u6BD4\uFF08MySQL5.0\u4EE5\u4E0A\uFF09</p></blockquote><table><thead><tr><th></th><th>char(M)</th><th>varchar(M)</th></tr></thead><tbody><tr><td>\u6700\u5927\u957F\u5EA6</td><td>M\u6700\u5927\u662F255\u4E2A\u5B57\u7B26</td><td>M\u6700\u5927\u503C\u9700\u8981\u6309\u7167\u4E00\u5B9A\u89C4\u5219\u8BA1\u7B97\uFF08\u89C1\u4E0A\uFF09</td></tr><tr><td>\u662F\u5426\u5B9A\u957F</td><td>\u5B9A\u957F\uFF0C\u4E0D\u8DB3\u7684\u90E8\u5206\u5C3E\u90E8\u7528\u7A7A\u683C\u8865\u9F50</td><td>\u4E0D\u5B9A\u957F\uFF0C\u4FDD\u7559\u5B9E\u9645\u5B57\u7B26</td></tr><tr><td>\u7A7A\u95F4\u4F7F\u7528</td><td>\u53EF\u80FD\u6D6A\u8D39</td><td>\u66F4\u52A0\u8282\u7701</td></tr><tr><td>\u67E5\u627E\u6548\u7387</td><td>\u9AD8</td><td>\u4F4E</td></tr><tr><td>\u5C3E\u90E8\u7A7A\u683C</td><td>\u63D2\u5165\u65F6\u4F1A\u88AB\u5FFD\u7565</td><td>\u53EF\u4EE5\u6B63\u5E38\u63D2\u5165</td></tr></tbody></table><blockquote><p>CHAR \u548C VARCHAR \u7684\u9002\u7528\u573A\u666F\uFF1A</p></blockquote><ul><li><p>\u5B58\u50A8\u5F88\u77ED\u7684\u4FE1\u606F\uFF0C\u5EFA\u8BAE\u4F7F\u7528char\u3002\u5982\u95E8\u724C\u53F7</p><p>\u5047\u5982\u4F7F\u7528varchar\uFF0C\u8FD8\u9700\u8981\u4F7F\u75281\u4E2A\u5B57\u8282\u5B58\u50A8\u4FE1\u606F\u957F\u5EA6\uFF0C\u5F97\u4E0D\u507F\u5931</p></li><li><p>\u5B58\u50A8\u56FA\u5B9A\u957F\u5EA6\u7684\u4FE1\u606F\uFF0C\u5EFA\u8BAE\u4F7F\u7528char\u3002\u5982uuid</p></li><li><p>\u5B58\u50A8\u9700\u8981\u9891\u7E41\u6539\u53D8\u7684\u4FE1\u606F\uFF0C\u5EFA\u8BAE\u4F7F\u7528char\u3002</p><p>varchar\u6BCF\u6B21\u5B58\u50A8\u90FD\u9700\u8981\u989D\u5916\u7684\u8BA1\u7B97\u957F\u5EA6\u7B49\u4FE1\u606F\uFF0C\u5982\u679C\u9891\u7E41\u6539\u53D8\uFF0C\u9700\u8981\u5F88\u591A\u7684\u7CBE\u529B\u7528\u4E8E\u8BA1\u7B97</p></li><li><p>\u8003\u8651\u5177\u4F53\u5B58\u50A8\u5F15\u64CE\u4E2D\u7684\u60C5\u51B5\uFF1A</p><ul><li><code>MyISAM</code>\uFF1A<strong>\u6700\u597D\u4F7F\u7528char</strong>\u3002\u8FD9\u6837\u4F7F\u5F97\u6574\u4E2A\u8868\u9759\u6001\u5316\uFF0C\u4ECE\u800C\u4F7F\u6570\u636E\u68C0\u7D22\u66F4\u5FEB\uFF0C\u7528\u7A7A\u95F4\u6362\u65F6\u95F4</li><li><code>MEMORY</code>\uFF1A\u65E0\u8BBA\u4F7F\u7528char\u548Cvarchar\uFF0C<strong>\u5E95\u5C42\u90FD\u662F\u4F5C\u4E3Achar\u7C7B\u578B\u5904\u7406\u7684</strong></li><li><code>InnoDB</code>\uFF1A\u5EFA\u8BAE\u4F7F\u7528varchar\u3002InnoDB\u6570\u636E\u8868\uFF0C\u5185\u90E8\u7684\u884C\u5B58\u50A8\u683C\u5F0F\u5E76\u6CA1\u6709\u533A\u5206\u56FA\u5B9A\u957F\u5EA6\u548C\u53EF\u53D8\u957F\u5EA6\u5217\uFF0C\u6240\u6709\u6570\u636E\u884C\u90FD\u662F\u7528\u6307\u5411\u6570\u636E\u5217\u503C\u7684\u5934\u6307\u9488\uFF0C\u800C\u4E14\u4E3B\u8981\u5F71\u54CD\u6027\u80FD\u7684\u56E0\u7D20\u662F\u6570\u636E\u884C\u4F7F\u7528\u7684\u5B58\u50A8\u603B\u91CF\u3002\u7531\u4E8Echar\u5E73\u5747\u5360\u7528\u7684\u7A7A\u95F4\u591A\u4E8Evarchar\uFF0C\u6240\u4EE5<strong>\u5904\u7406\u7B80\u77ED\u5E76\u4E14\u56FA\u5B9A\u957F\u5EA6\u7684\u4F7F\u7528char\uFF0C\u5176\u4ED6\u8003\u8651varchar</strong>\u3002\u8FD9\u6837\u8282\u7701\u7A7A\u95F4\uFF0C\u5BF9\u78C1\u76D8I/O\u548C\u6570\u636E\u5B58\u50A8\u603B\u91CF\u6BD4\u8F83\u597D</li></ul></li></ul><blockquote><p>\u9644\uFF1A\u5B57\u7B26\u3001\u5B57\u8282\u3001\u4F4D\u4E4B\u95F4\u7684\u5173\u7CFB</p></blockquote><ul><li><p>**\u4F4D\uFF1A**\u6570\u636E\u5B58\u50A8\u7684\u6700\u5C0F\u5355\u4F4D\u3002\u6BCF\u4E2A\u4E8C\u8FDB\u5236\u6570\u5B570\u6216\u80051\u5C31\u662F1\u4E2A\u4F4D\uFF1B</p></li><li><p>**\u5B57\u8282\uFF1A**8\u4E2A\u4F4D\u6784\u6210\u4E00\u4E2A\u5B57\u8282\uFF1B</p><p>\u5373\uFF1A1 byte (\u5B57\u8282)= 8 bit(\u4F4D)\uFF1B</p><p>\u200B 1 KB = 1024 B(\u5B57\u8282)\uFF1B</p><p>\u200B 1 MB = 1024 KB; (2^10 B) \u200B 1 GB = 1024 MB; (2^20 B) \u200B 1 TB = 1024 GB; (2^30 B)</p></li><li><p><strong>\u5B57\u7B26\uFF1A</strong></p><ul><li>a\u3001A\u3001\u4E2D\u3001+\u3001*\u3001\u306E......\u5747\u8868\u793A1\u4E2A\u5B57\u7B26</li><li>\u4E00\u822C <strong>utf-8</strong> \u7F16\u7801\u4E0B\uFF0C\u4E00\u4E2A<strong>\u6C49\u5B57\u5B57\u7B26</strong>\u5360\u7528 <strong>3 \u4E2A \u5B57\u8282</strong>\uFF1B<strong>\u6570\u5B57</strong>\u5C5E\u4E8E\u6C49\u5B57\uFF0C\u548C\u6C49\u5B57\u5360\u7528\u4E00\u6837\u5B57\u8282</li><li>\u4E00\u822C <strong>utf8mb4 ** \u7F16\u7801\u4E0B\uFF0C\u4E00\u4E2A</strong>\u6C49\u5B57\u5B57\u7B26**\u5360\u7528 <strong>4 \u4E2A \u5B57\u8282</strong></li><li>\u4E00\u822C <strong>gbk</strong> \u7F16\u7801\u4E0B\uFF0C\u4E00\u4E2A<strong>\u6C49\u5B57\u5B57\u7B26</strong>\u5360\u7528 <strong>2 \u4E2A \u5B57\u8282</strong></li></ul></li></ul><h4 id="_11-7-3-text\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#_11-7-3-text\u7C7B\u578B" aria-hidden="true">#</a> 11.7.3 TEXT\u7C7B\u578B</h4><ul><li>TEXT\u7C7B\u578B\u5206\u4E3A4\u79CD\uFF0C\u5206\u522B\u4E3ATINYTEXT\u3001TEXT\u3001MEDIUMTEXT\u3001LONGTEXT</li><li>\u5728\u5411TEXT\u7C7B\u578B\u7684\u5B57\u6BB5\u4FDD\u5B58\u548C\u67E5\u8BE2\u6570\u636E\u65F6\uFF0C\u7CFB\u7EDF\u81EA\u52A8\u6309\u7167\u5B9E\u9645\u957F\u5EA6\u5B58\u50A8\uFF0C\u4E0D\u9700\u8981\u9884\u5148\u5B9A\u4E49\u957F\u5EA6\u3002\u4E0EVARCHAR\u7C7B\u578B\u76F8\u540C</li><li>\u7531\u4E8E\u5B9E\u9645\u5B58\u50A8\u7684\u957F\u5EA6\u4E0D\u786E\u5B9A\uFF0C<strong>MySQL \u4E0D\u5141\u8BB8 TEXT \u7C7B\u578B\u7684\u5B57\u6BB5\u505A\u4E3B\u952E</strong></li><li>\u5F00\u53D1\u4E2D\u7684\u7ECF\u9A8C\uFF1A <ul><li>TEXT\u6587\u672C\u7C7B\u578B\uFF0C\u53EF\u4EE5\u5B58\u6BD4\u8F83\u5927\u7684\u6587\u672C\u6BB5\uFF0C<strong>\u641C\u7D22\u901F\u5EA6\u7A0D\u6162</strong>\uFF0C\u56E0\u6B64\u5982\u679C\u4E0D\u662F\u7279\u522B\u5927\u7684\u5185\u5BB9\uFF0C\u5EFA\u8BAE\u4F7F\u7528CHAR\uFF0C VARCHAR\u6765\u4EE3\u66FF</li><li>TEXT\u7C7B\u578B<strong>\u4E0D\u7528\u52A0\u9ED8\u8BA4\u503C</strong>\uFF0C\u52A0\u4E86\u4E5F\u6CA1\u7528</li><li>text\u548Cblob\u7C7B\u578B\u7684\u6570\u636E\u5220\u9664\u540E\u5BB9\u6613\u5BFC\u81F4 \u201C\u7A7A\u6D1E\u201D\uFF0C\u4F7F\u5F97\u6587\u4EF6\u788E\u7247\u6BD4\u8F83\u591A\uFF0C\u6240\u4EE5<strong>\u9891\u7E41\u4F7F\u7528\u7684\u8868\u4E0D\u5EFA\u8BAE\u5305\u542BTEXT\u7C7B\u578B\u5B57\u6BB5</strong>\uFF0C\u5EFA\u8BAE\u5355\u72EC\u5206\u51FA\u53BB\uFF0C\u5355\u72EC\u7528 \u4E00\u4E2A\u8868</li></ul></li></ul><h3 id="_11-8-enum\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#_11-8-enum\u7C7B\u578B" aria-hidden="true">#</a> 11.8 ENUM\u7C7B\u578B</h3><h4 id="_11-8-1-\u7C7B\u578B\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#_11-8-1-\u7C7B\u578B\u4ECB\u7ECD" aria-hidden="true">#</a> 11.8.1 \u7C7B\u578B\u4ECB\u7ECD</h4><table><thead><tr><th>\u7C7B\u578B</th><th>\u957F\u5EA6</th><th>\u957F\u5EA6\u8303\u56F4</th><th>\u5360\u7528\u7684\u5B58\u50A8\u7A7A\u95F4</th></tr></thead><tbody><tr><td>ENUM</td><td>L</td><td>1&lt;=L&lt;=65535</td><td>1\u62162\u4E2A\u5B57\u8282</td></tr></tbody></table><p>==\u8BF4\u660E\uFF1A==</p><ul><li>ENUM\u7C7B\u578B\u7684<strong>\u53D6\u503C\u8303\u56F4\u9700\u8981\u5728\u5B9A\u4E49\u5B57\u6BB5\u65F6\u8FDB\u884C\u6307\u5B9A</strong>\u3002</li><li>\u8BBE\u7F6E\u5B57\u6BB5\u503C\u65F6\uFF0CENUM \u7C7B\u578B<strong>\u53EA\u5141\u8BB8\u4ECE\u6210\u5458\u4E2D\u9009\u53D6\u5355\u4E2A\u503C</strong>\uFF0C\u4E0D\u80FD\u4E00\u6B21\u9009\u53D6\u591A\u4E2A\u503C\u3002</li><li>\u5F53ENUM\u7C7B\u578B\u5305\u542B1\uFF5E255\u4E2A\u6210\u5458\u65F6\uFF0C\u9700\u89811\u4E2A\u5B57\u8282\u7684\u5B58\u50A8\u7A7A\u95F4</li><li>\u5F53ENUM\u7C7B\u578B\u5305\u542B256\uFF5E65535\u4E2A\u6210\u5458\u65F6\uFF0C\u9700\u89812\u4E2A\u5B57\u8282\u7684\u5B58\u50A8\u7A7A\u95F4\u3002</li><li>ENUM\u7C7B\u578B\u7684\u6210\u5458\u4E2A\u6570\u7684\u4E0A\u9650\u4E3A65535\u4E2A\u3002</li></ul><h4 id="_11-8-2-\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_11-8-2-\u4F7F\u7528" aria-hidden="true">#</a> 11.8.2 \u4F7F\u7528</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u521B\u5EFA\u8868
CREATE TABLE test_enum(
season ENUM(&#39;\u6625&#39;,&#39;\u590F&#39;,&#39;\u79CB&#39;,&#39;\u51AC&#39;,&#39;unknow&#39;)
);

# \u63D2\u5165\u6570\u636E--\u6210\u529F
INSERT INTO test_enum VALUES(&#39;\u6625&#39;),(&#39;\u79CB&#39;);

# \u5141\u8BB8\u6309\u7167\u89D2\u6807\u7684\u65B9\u5F0F\u83B7\u53D6\u6307\u5B9A\u7D22\u5F15\u4F4D\u7F6E\u7684\u679A\u4E3E\u503C
INSERT INTO test_enum VALUES(&#39;1&#39;),(3);

# \u5FFD\u7565\u5927\u5C0F\u5199\u3002\u6700\u7EC8\u63D2\u5165\u7684\u662F\u5927\u5199\u8FD8\u662F\u5C0F\u5199\uFF0C\u4EE5\u5B9A\u4E49\u5B57\u6BB5\u65F6\u5019\u7684\u503C\u4E3A\u51C6
INSERT INTO test_enum VALUES(&#39;UNKNOW&#39;);

# \u5F53ENUM\u7C7B\u578B\u7684\u5B57\u6BB5\u6CA1\u6709\u58F0\u660E\u4E3ANOT NULL\u65F6\uFF0C\u63D2\u5165NULL\u4E5F\u662F\u6709\u6548\u7684
INSERT INTO test_enum VALUES(NULL);

# \u4E0D\u5141\u8BB8\u63D2\u5165\u4E0D\u5728\u5B9A\u4E49\u65F6\u6307\u5B9A\u7684\u5B57\u6BB5\u3002Data truncated for column &#39;season&#39; at row 1
INSERT INTO test_enum VALUES(&#39;ab&#39;);

# \u53EA\u80FD\u63D2\u5165\u5355\u4E2A\u503C\u3002Data truncated for column &#39;season&#39; at row 1
INSERT INTO test_enum VALUES(&#39;\u6625,\u79CB&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_11-9-set\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#_11-9-set\u7C7B\u578B" aria-hidden="true">#</a> 11.9 SET\u7C7B\u578B</h3><h4 id="_11-9-1-\u7C7B\u578B\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#_11-9-1-\u7C7B\u578B\u4ECB\u7ECD" aria-hidden="true">#</a> 11.9.1 \u7C7B\u578B\u4ECB\u7ECD</h4><p>\u5F53SET\u7C7B\u578B\u5305\u542B\u7684\u6210\u5458\u4E2A\u6570\u4E0D\u540C\u65F6\uFF0C\u5176\u6240\u5360\u7528\u7684\u5B58\u50A8\u7A7A\u95F4\u4E5F\u662F\u4E0D\u540C\u7684\uFF0C\u5177\u4F53\u5982\u4E0B\uFF1A</p><table><thead><tr><th>\u6210\u5458\u4E2A\u6570\u8303\u56F4\uFF08L\u8868\u793A\u5B9E\u9645\u6210\u5458\u4E2A\u6570\uFF09</th><th>\u5360\u7528\u7684\u5B58\u50A8\u7A7A\u95F4</th></tr></thead><tbody><tr><td>1 &lt;= L &lt;= 8</td><td>1\u4E2A\u5B57\u8282</td></tr><tr><td>9 &lt;= L &lt;= 16</td><td>2\u4E2A\u5B57\u8282</td></tr><tr><td>17 &lt;= L &lt;= 24</td><td>3\u4E2A\u5B57\u8282</td></tr><tr><td>25 &lt;= L &lt;= 32</td><td>4\u4E2A\u5B57\u8282</td></tr><tr><td>33 &lt;= L &lt;= 64</td><td>8\u4E2A\u5B57\u8282</td></tr></tbody></table><p>==\u8BF4\u660E\uFF1A==</p><ul><li>SET\u8868\u793A\u4E00\u4E2A\u5B57\u7B26\u4E32\u5BF9\u8C61\uFF0C\u53EF\u4EE5\u5305\u542B0\u4E2A\u6216\u591A\u4E2A\u6210\u5458\uFF0C\u6210\u5458\u4E0A\u7EBF\u4E3A64</li><li>SET\u5B58\u50A8\u591A\u4E2A\u6210\u5458\u65F6\uFF0C\u6210\u5458\u4E4B\u95F4\u7528\u82F1\u6587\u9017\u53F7\u9694\u5F00</li><li>SET\u7C7B\u578B\u5728\u5B58\u50A8\u6570\u636E\u65F6\u6210\u5458\u4E2A\u6570\u8D8A\u591A\uFF0C\u5176\u5360\u7528\u7684\u5B58\u50A8\u7A7A\u95F4\u8D8A\u5927\u3002</li></ul><h4 id="_11-9-2-\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_11-9-2-\u4F7F\u7528" aria-hidden="true">#</a> 11.9.2 \u4F7F\u7528</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u521B\u5EFA\u8868
CREATE TABLE test_set(
	s SET (&#39;A&#39;, &#39;B&#39;, &#39;C&#39;)
);

# \u53EF\u4EE5\u63D2\u51650\u4E2A\u6216\u591A\u4E2A\u6570\u636E
INSERT INTO test_set (s) VALUES (&#39;A&#39;), (&#39;A,B&#39;);
# \u63D2\u5165\u65F6\uFF0C\u5FFD\u7565\u5927\u5C0F\u5199\u3002\u6700\u7EC8\u63D2\u5165\u7ED3\u679C\u4EE5\u5B9A\u4E49\u7684\u65F6\u5019\u4E3A\u51C6
INSERT INTO test_set (s) VALUES (&#39;a&#39;)

#\u63D2\u5165\u91CD\u590D\u7684SET\u7C7B\u578B\u6210\u5458\u65F6\uFF0CMySQL\u4F1A\u81EA\u52A8\u5220\u9664\u91CD\u590D\u7684\u6210\u5458
INSERT INTO test_set (s) VALUES (&#39;A,B,C,A&#39;);

#\u5411SET\u7C7B\u578B\u7684\u5B57\u6BB5\u63D2\u5165SET\u6210\u5458\u4E2D\u4E0D\u5B58\u5728\u7684\u503C\u65F6\uFF0CMySQL\u4F1A\u629B\u51FA\u9519\u8BEF\u3002Data truncated for column &#39;s&#39; at row 1
INSERT INTO test_set (s) VALUES (&#39;A,B,C,D&#39;);

# \u5F53SET\u7C7B\u578B\u7684\u5B57\u6BB5\u6CA1\u6709\u58F0\u660E\u4E3ANOT NULL\u65F6\uFF0C\u63D2\u5165NULL\u4E5F\u662F\u6709\u6548\u7684
INSERT INTO test_set (s) VALUES (NULL);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_11-10-\u4E8C\u8FDB\u5236\u5B57\u7B26\u4E32\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#_11-10-\u4E8C\u8FDB\u5236\u5B57\u7B26\u4E32\u7C7B\u578B" aria-hidden="true">#</a> 11.10 \u4E8C\u8FDB\u5236\u5B57\u7B26\u4E32\u7C7B\u578B</h3><h4 id="_11-10-1-\u7C7B\u578B\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#_11-10-1-\u7C7B\u578B\u4ECB\u7ECD" aria-hidden="true">#</a> 11.10.1 \u7C7B\u578B\u4ECB\u7ECD</h4><ul><li>MySQL\u4E2D\u7684\u4E8C\u8FDB\u5236\u5B57\u7B26\u4E32\u7C7B\u578B\u4E3B\u8981\u5B58\u50A8\u4E00\u4E9B\u4E8C\u8FDB\u5236\u6570\u636E\uFF0C\u6BD4\u5982\u53EF\u4EE5\u5B58\u50A8\u56FE\u7247\u3001\u97F3\u9891\u548C\u89C6\u9891\u7B49\u4E8C\u8FDB\u5236\u6570 \u636E\u3002</li><li>MySQL\u4E2D\u652F\u6301\u7684\u4E8C\u8FDB\u5236\u5B57\u7B26\u4E32\u7C7B\u578B\u4E3B\u8981\u5305\u62EC<code>BINARY</code>\u3001<code>VARBINARY</code>\u3001<code>TINYBLOB</code>\u3001<code>BLOB</code>\u3001<code>MEDIUMBLOB</code> \u548C<code> LONGBLOB</code>\u7C7B\u578B\u3002</li></ul><h4 id="_11-10-2-binary\u4E0Evarbinary" tabindex="-1"><a class="header-anchor" href="#_11-10-2-binary\u4E0Evarbinary" aria-hidden="true">#</a> 11.10.2 BINARY\u4E0EVARBINARY</h4><blockquote><p>\u7C7B\u578B\u4ECB\u7ECD</p></blockquote><table><thead><tr><th>\u7C7B\u578B</th><th>\u7279\u70B9</th><th>\u503C\u7684\u957F\u5EA6</th><th>\u5360\u7528\u7A7A\u95F4</th></tr></thead><tbody><tr><td>BINARY(M)</td><td>\u56FA\u5B9A\u957F\u5EA6</td><td>M \uFF080 &lt;= M &lt;= 255\uFF09</td><td>M\u4E2A\u5B57\u8282</td></tr><tr><td>VARBINARY(M)</td><td>\u53EF\u53D8\u957F\u5EA6</td><td>M\uFF080 &lt;= M &lt;= 65535\uFF09</td><td>M+1\u4E2A\u5B57\u8282</td></tr></tbody></table><p>==\u8BF4\u660E\uFF1A==</p><ul><li>BINARY\u548CVARBINARY\u7C7B\u4F3C\u4E8ECHAR\u548CVARCHAR\uFF0C\u53EA\u662F\u5B83\u4EEC\u5B58\u50A8\u7684\u662F\u4E8C\u8FDB\u5236\u5B57\u7B26\u4E32</li><li>BINARY (M)\u4E3A\u56FA\u5B9A\u957F\u5EA6\u7684\u4E8C\u8FDB\u5236\u5B57\u7B26\u4E32\uFF0CM\u8868\u793A\u6700\u591A\u80FD\u5B58\u50A8\u7684\u5B57\u8282\u6570\u3002\u5982\u679C\u672A \u6307\u5B9A(M)\uFF0C\u8868\u793A\u53EA\u80FD\u5B58\u50A8 1\u4E2A\u5B57\u8282</li><li>BINARY(M)\u5982\u679C\u5B57\u6BB5\u503C\u4E0D\u8DB3(M)\u4E2A\u5B57 \u8282\uFF0C\u5C06\u5728\u53F3\u8FB9\u586B\u5145&#39;\\0&#39;\u4EE5\u8865\u9F50\u6307\u5B9A\u957F\u5EA6</li><li>VARBINARY (M)\u4E3A\u53EF\u53D8\u957F\u5EA6\u7684\u4E8C\u8FDB\u5236\u5B57\u7B26\u4E32\uFF0CM\u8868\u793A\u6700\u591A\u80FD\u5B58\u50A8\u7684\u5B57\u8282\u6570\uFF0C<strong>\u603B\u5B57\u8282\u6570\u4E0D\u80FD\u8D85\u8FC7\u884C\u7684\u5B57\u8282\u957F \u5EA6\u9650\u523665535</strong>\uFF0C\u53E6\u5916<strong>\u8FD8\u8981\u8003\u8651\u989D\u5916\u5B57\u8282\u5F00\u9500</strong>\uFF0CVARBINARY\u7C7B\u578B\u7684\u6570\u636E\u9664\u4E86\u5B58\u50A8\u6570\u636E\u672C\u8EAB\u5916\uFF0C\u8FD8\u9700\u89811\u62162\u4E2A\u5B57\u8282\u6765\u5B58\u50A8\u6570\u636E\u7684\u5B57\u8282\u6570</li><li>VARBINARY\u7C7B\u578B<strong>\u5FC5\u987B\u6307\u5B9A(M)</strong></li></ul><blockquote><p>\u4F7F\u7528</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u521B\u5EFA\u8868
CREATE TABLE test_binary1(
	f1 BINARY,
	f2 BINARY(3),
#	f3 VARBINARY,
	f4 VARBINARY(10)
);

# \u63D2\u5165\u6210\u529F
INSERT INTO test_binary1(f1,f2) VALUES(&#39;a&#39;,&#39;a&#39;);

# \u63D2\u5165\u6210\u529F\uFF0C\u4F46\u662F\u67E5\u8BE2\u51FA\u6765\u662F\u4E71\u7801
INSERT INTO test_binary1(f2) VALUES(&#39;\u4E00&#39;);

# \u63D2\u5165\u6210\u529F
INSERT INTO test_binary1(f2,f4) VALUES(&#39;ab&#39;,&#39;ab&#39;);

# \u5728f2\u3001f4\u63D2\u5165&#39;ab&#39;\u65F6\uFF0C\u5BF9\u5E94\u7684LENGTH(f2) = 3, LENGTH(f4) = 2
SELECT LENGTH(f2), LENGTH(f4) FROM test_binary1;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="_11-10-3-blob" tabindex="-1"><a class="header-anchor" href="#_11-10-3-blob" aria-hidden="true">#</a> 11.10.3 BLOB</h4><blockquote><p>\u7C7B\u578B\u4ECB\u7ECD</p></blockquote><table><thead><tr><th>\u7C7B\u578B</th><th>\u957F\u5EA6\u8303\u56F4</th><th>\u5360\u7528\u7A7A\u95F4</th></tr></thead><tbody><tr><td>TINYBLOB</td><td>0 &lt;= L &lt;= 255</td><td>L + 1 \u4E2A\u5B57\u8282</td></tr><tr><td>BLOB</td><td>0 &lt;= L &lt;= 65535\uFF08\u76F8\u5F53\u4E8E64KB\uFF09</td><td>L + 2 \u4E2A\u5B57\u8282</td></tr><tr><td>MEDIUMBLOB</td><td>0 &lt;= L &lt;= 16777215 \uFF08\u76F8\u5F53\u4E8E16MB\uFF09</td><td>L + 3 \u4E2A\u5B57\u8282</td></tr><tr><td>LONGBLOB</td><td>0 &lt;= L &lt;= 4294967295\uFF08\u76F8\u5F53\u4E8E4GB\uFF09</td><td>L + 4\u4E2A\u5B57\u8282</td></tr></tbody></table><p>==\u8BF4\u660E\uFF1A==</p><ul><li>BLOB\u662F\u4E00\u4E2A<strong>\u4E8C\u8FDB\u5236\u5927\u5BF9\u8C61</strong> \uFF0C\u53EF\u4EE5\u5BB9\u7EB3\u53EF\u53D8\u6570\u91CF\u7684\u6570\u636E\u3002</li><li>BLOB\u7C7B\u578B\u53EF\u4EE5\u5B58\u50A8\u4E00\u4E2A\u4E8C\u8FDB\u5236\u7684\u5927\u5BF9\u8C61\uFF0C\u6BD4\u5982<strong>\u56FE\u7247</strong> \u3001<strong>\u97F3\u9891</strong>\u548C<strong>\u89C6\u9891</strong>\u7B49</li><li>\u4F46\u662F\u5B9E\u9645\u5DE5\u4F5C\u4E2D\uFF0C\u56FE\u7247\u7B49\u4E00\u822C\u90FD\u4FDD\u5B58\u5728\u670D\u52A1\u5668\u7684\u78C1\u76D8\u4E0A\uFF0C\u6570\u636E\u5E93\u5B58\u50A8\u7684\u662F\u56FE\u7247\u7B49\u7684\u8BBF\u95EE\u8DEF\u5F84</li></ul><blockquote><p>\u4F7F\u7528</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u521B\u5EFA\u8868
CREATE TABLE test_blob1(
    id INT,
    img MEDIUMBLOB
);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>TEXT\u548CBLOB\u7684\u4F7F\u7528\u6CE8\u610F\u4E8B\u9879</p></blockquote><p>\u5728\u4F7F\u7528text\u548Cblob\u5B57\u6BB5\u7C7B\u578B\u65F6\u8981\u6CE8\u610F\u4EE5\u4E0B\u51E0\u70B9\uFF0C\u4EE5\u4FBF\u66F4\u597D\u7684\u53D1\u6325\u6570\u636E\u5E93\u7684\u6027\u80FD\u3002</p><ul><li>\u2460 \u5728\u6267\u884C\u4E86\u5927\u91CF\u7684\u5220\u9664\u6216\u66F4\u65B0\u64CD\u4F5C\u7684\u65F6\u5019\uFF0C\u5220\u9664text\u548Cblob\u7C7B\u578B\u7684\u503C\u4F1A\u5728\u6570\u636E\u8868\u4E2D\u7559\u4E0B\u5F88\u5927\u7684&quot;<code>\u7A7A\u6D1E</code>&quot;\uFF0C\u4EE5\u540E\u586B\u5165\u8FD9\u4E9B&quot;\u7A7A\u6D1E&quot;\u7684\u8BB0\u5F55\u53EF\u80FD\u957F\u5EA6\u4E0D\u540C\u3002\u4E3A\u4E86\u63D0\u9AD8\u6027\u80FD\uFF0C\u5EFA\u8BAE\u5B9A\u671F\u4F7F\u7528<code>OPTIMIZE TABLE</code>\u529F\u80FD\u5BF9\u8FD9\u7C7B\u8868\u8FDB\u884C<strong>\u788E\u7247\u6574\u7406</strong> \u3002</li><li>\u2461 \u5C3D\u91CF<strong>\u907F\u514D\u68C0\u7D22\u5927\u578B\u7684BLOB\u6216TEXT\u503C</strong>\u3002\u5982\u679C\u9700\u8981\u5BF9\u5927\u6587\u672C\u5B57\u6BB5\u8FDB\u884C\u6A21\u7CCA\u67E5\u8BE2\uFF0CMySQL \u63D0\u4F9B\u4E86<code>\u524D\u7F00\u7D22\u5F15</code> \u3002</li><li>\u2462 \u628ABLOB\u6216TEXT\u5217<strong>\u5206\u79BB\u5230\u5355\u72EC\u7684\u8868</strong> \u4E2D\u3002\u8FD9\u6837\u505A\u7684\u597D\u5904\u662F\uFF1A\u51CF\u5C11\u4E3B\u8868\u4E2D\u7684\u788E\u7247 \uFF0C\u5E76\u4E14\u5F53\u4E3B\u6570\u636E\u8868\u4E0A\u8FD0\u884C SELECT * \u67E5\u8BE2\u7684\u65F6\u5019\u4E0D\u4F1A\u901A\u8FC7 \u7F51\u7EDC\u4F20\u8F93\u5927\u91CF\u7684BLOB\u6216TEXT\u503C\u3002</li></ul><h3 id="_11-11-json\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#_11-11-json\u7C7B\u578B" aria-hidden="true">#</a> 11.11 JSON\u7C7B\u578B</h3><blockquote><p>\u4F7F\u7528</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u521B\u5EFA\u8868
CREATE TABLE test_json (
	f1 JSON
);

# \u63D2\u5165\u6570\u636E
INSERT INTO test_json VALUES (&#39;{&quot;name&quot;: &quot;tth&quot;, &quot;age&quot;: 18, &quot;address&quot;: {&quot;province&quot;: &quot;\u5C71\u4E1C&quot;, &quot;city&quot;: &quot;\u6D4E\u5357&quot;}}&#39;)
# \u67E5\u8BE2
SELECT * FROM test_json;

# \u67E5\u8BE2json\u7C7B\u578B\u5B57\u6BB5\u4E2D\u7684\u5177\u4F53\u5C5E\u6027\u7684\u503C
# \u65B9\u6CD5\u4E00\uFF1A\u4F7F\u7528-&gt;
SELECT f1 -&gt; &#39;$.name&#39; NAME, f1 -&gt; &#39;$.age&#39; age, f1 -&gt; &#39;$.address.province&#39; province, f1 -&gt;&#39;$.address.city&#39; city
FROM test_json; # NAME\u3001province\u3001city\u4E2D\u5E26\u6709&quot;&quot;
# \u65B9\u6CD5\u4E8C\uFF1A\u4F7F\u7528-&gt;&gt;
SELECT f1 -&gt;&gt; &#39;$.name&#39; NAME, f1 -&gt;&gt; &#39;$.age&#39; age, f1 -&gt;&gt; &#39;$.address.province&#39; province, f1 -&gt;&gt;&#39;$.address.city&#39; city
FROM test_json; # NAME\u3001province\u3001city\u4E2D\u4E0D\u5E26&quot;&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_11-12-\u7A7A\u95F4\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#_11-12-\u7A7A\u95F4\u7C7B\u578B" aria-hidden="true">#</a> 11.12 \u7A7A\u95F4\u7C7B\u578B</h3><p>\u7565</p><h3 id="_11-13-\u5C0F\u7ED3" tabindex="-1"><a class="header-anchor" href="#_11-13-\u5C0F\u7ED3" aria-hidden="true">#</a> 11.13 \u5C0F\u7ED3</h3><p><strong>\u963F\u91CC\u5DF4\u5DF4\u300AJava\u5F00\u53D1\u624B\u518C\u300B\u4E4BMySQL\u6570\u636E\u5E93\uFF1A</strong></p><ul><li>\u4EFB\u4F55\u5B57\u6BB5\u5982\u679C\u4E3A\u975E\u8D1F\u6570\uFF0C\u5FC5\u987B\u662F UNSIGNED</li><li>\u3010 <strong>\u5F3A\u5236</strong> \u3011\u5C0F\u6570\u7C7B\u578B\u4E3A DECIMAL\uFF0C\u7981\u6B62\u4F7F\u7528 FLOAT \u548C DOUBLE\u3002 <ul><li>\u8BF4\u660E\uFF1A\u5728\u5B58\u50A8\u7684\u65F6\u5019\uFF0CFLOAT \u548C DOUBLE \u90FD\u5B58\u5728\u7CBE\u5EA6\u635F\u5931\u7684\u95EE\u9898\uFF0C\u5F88\u53EF\u80FD\u5728\u6BD4\u8F83\u503C\u7684\u65F6\u5019\uFF0C\u5F97 \u5230\u4E0D\u6B63\u786E\u7684\u7ED3\u679C\u3002</li><li>\u5982\u679C\u5B58\u50A8\u7684\u6570\u636E\u8303\u56F4\u8D85\u8FC7 DECIMAL \u7684\u8303\u56F4\uFF0C\u5EFA\u8BAE\u5C06\u6570\u636E\u62C6\u6210\u6574\u6570\u548C\u5C0F\u6570\u5E76 \u5206\u5F00\u5B58\u50A8\u3002</li></ul></li><li>\u3010 <strong>\u5F3A\u5236</strong> \u3011\u5982\u679C\u5B58\u50A8\u7684\u5B57\u7B26\u4E32\u957F\u5EA6\u51E0\u4E4E\u76F8\u7B49\uFF0C\u4F7F\u7528 CHAR \u5B9A\u957F\u5B57\u7B26\u4E32\u7C7B\u578B\u3002</li><li>\u3010 <strong>\u5F3A\u5236</strong> \u3011VARCHAR \u662F\u53EF\u53D8\u957F\u5B57\u7B26\u4E32\uFF0C\u4E0D\u9884\u5148\u5206\u914D\u5B58\u50A8\u7A7A\u95F4\uFF0C\u957F\u5EA6\u4E0D\u8981\u8D85\u8FC7 5000\u3002\u5982\u679C\u5B58\u50A8\u957F\u5EA6\u5927 \u4E8E\u6B64\u503C\uFF0C\u5B9A\u4E49\u5B57\u6BB5\u7C7B\u578B\u4E3A TEXT\uFF0C\u72EC\u7ACB\u51FA\u6765\u4E00\u5F20\u8868\uFF0C\u7528\u4E3B\u952E\u6765\u5BF9\u5E94\uFF0C\u907F\u514D\u5F71\u54CD\u5176\u5B83\u5B57\u6BB5\u7D22\u5F15\u6548\u7387\u3002</li></ul><h2 id="_12-\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-\u7EA6\u675F" aria-hidden="true">#</a> 12 \u7EA6\u675F</h2><h3 id="_12-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_12-1-\u6982\u8FF0" aria-hidden="true">#</a> 12.1 \u6982\u8FF0</h3><h4 id="_12-1-1-\u4E3A\u4EC0\u4E48\u9700\u8981\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-1-1-\u4E3A\u4EC0\u4E48\u9700\u8981\u7EA6\u675F" aria-hidden="true">#</a> 12.1.1 \u4E3A\u4EC0\u4E48\u9700\u8981\u7EA6\u675F</h4><p><code>\u6570\u636E\u5B8C\u6574\u6027\uFF08Data Integrity\uFF09</code>\u662F\u6307\u6570\u636E\u7684\u7CBE\u786E\u6027\uFF08Accuracy\uFF09\u548C\u53EF\u9760\u6027\uFF08Reliability\uFF09\u3002\u5B83\u662F\u9632\u6B62\u6570\u636E\u5E93\u4E2D\u5B58\u5728\u4E0D\u7B26\u5408\u8BED\u4E49\u89C4\u5B9A\u7684\u6570\u636E\u548C\u9632\u6B62\u56E0\u9519\u8BEF\u4FE1\u606F\u7684\u8F93\u5165\u8F93\u51FA\u9020\u6210\u65E0\u6548\u64CD\u4F5C\u6216\u9519\u8BEF\u4FE1\u606F\u800C\u63D0\u51FA\u7684\u3002</p><p>\u4E3A\u4E86\u4FDD\u8BC1\u6570\u636E\u7684\u5B8C\u6574\u6027\uFF0CSQL\u89C4\u8303\u4EE5\u7EA6\u675F\u7684\u65B9\u5F0F\u5BF9<strong>\u8868\u6570\u636E\u8FDB\u884C\u989D\u5916\u7684\u6761\u4EF6\u9650\u5236</strong>\uFF0C\u4ECE\u4EE5\u4E0B4\u4E2A\u65B9\u9762\u8003\u8651\uFF1A</p><ul><li><code>\u5B9E\u4F53\u5B8C\u6574\u6027\uFF08Entity Integrity\uFF09</code>\uFF1A\u4F8B\u5982\uFF0C\u540C\u4E00\u4E2A\u8868\u4E2D\u4E0D\u80FD\u5B58\u5728\u4E24\u6761\u5B8C\u5168\u76F8\u540C\u65E0\u6CD5\u533A\u5206\u7684\u6570\u636E</li><li><code>\u57DF\u5B8C\u6574\u6027\uFF08Domain Integrity\uFF09</code>\uFF1A\u4F8B\u5982\uFF0C\u5E74\u9F84\u8303\u56F40~120\uFF1B\u518D\u5982\uFF0C\u6027\u522B\u8303\u56F4\u201C\u7537/\u5973\u201D</li><li><code>\u5F15\u7528\u5B8C\u6574\u6027\uFF08Referential Integrity\uFF09</code>\uFF1A\u4F8B\u5982\uFF0C\u5458\u5DE5\u6240\u5728\u90E8\u95E8\uFF0C\u8981\u5728\u90E8\u95E8\u8868\u4E2D\u80FD\u627E\u5230\u8FD9\u4E2A\u90E8\u95E8</li><li><code>\u7528\u6237\u81EA\u5B9A\u4E49\u5B8C\u6574\u6027\uFF08User-defined Integrity\uFF09</code>\uFF1A\u4F8B\u5982\uFF0C\u7528\u6237\u540D\u552F\u4E00\u3001\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A\u7B49\uFF1B\u518D\u5982\uFF0C\u672C\u90E8\u95E8\u7ECF\u5386\u7684\u5DE5\u8D44\u4E0D\u5F97\u9AD8\u4E8E\u672C\u90E8\u95E8\u804C\u5DE5\u7684\u5E73\u5747\u5DE5\u8D44\u76845\u500D</li></ul><p>==\u9700\u8981\u7EA6\u675F\u7684\u539F\u56E0\uFF1A==\u4FDD\u8BC1\u6570\u636E\u7684\u5B8C\u6574\u6027</p><h4 id="_12-1-2-\u4EC0\u4E48\u662F\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-1-2-\u4EC0\u4E48\u662F\u7EA6\u675F" aria-hidden="true">#</a> 12.1.2 \u4EC0\u4E48\u662F\u7EA6\u675F</h4><p>\u7EA6\u675F\u662F\u5BF9\u8868\u4E2D\u5B57\u6BB5\u7684\u9650\u5236\uFF0C\u662F\u8868\u7EA7\u7684\u5F3A\u5236\u89C4\u5B9A\u3002</p><p>\u53EF\u4EE5\u5728<strong>\u521B\u5EFA\u8868\u65F6\u89C4\u5B9A\u7EA6\u675F\uFF08\u901A\u8FC7CREATE TABLE\u8BED\u53E5\uFF09</strong>\uFF0C\u6216\u8005<strong>\u5728\u8868\u521B\u5EFA\u4E4B\u540E\u901A\u8FC7ALTER TABLE\u8BED\u53E5\u89C4\u5B9A\u7EA6\u675F</strong>\u3002</p><h4 id="_12-1-3-\u7EA6\u675F\u7684\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#_12-1-3-\u7EA6\u675F\u7684\u5206\u7C7B" aria-hidden="true">#</a> 12.1.3 \u7EA6\u675F\u7684\u5206\u7C7B</h4><ul><li>\u6309\u7167<code>\u7EA6\u675F\u6570\u636E\u5217\u7684\u9650\u5236</code>\u5206\uFF1A <ul><li><strong>\u5355\u5217\u7EA6\u675F</strong>\uFF1A\u6BCF\u4E2A\u7EA6\u675F\u53EA\u7EA6\u675F\u4E00\u5217</li><li><strong>\u591A\u5217\u7EA6\u675F</strong>\uFF1A\u6BCF\u4E2A\u7EA6\u675F\u53EF\u7EA6\u675F\u591A\u5217</li></ul></li><li>\u6309\u7167<code>\u7EA6\u675F\u7684\u4F5C\u7528\u8303\u56F4</code>\u5206\uFF1A <ul><li><strong>\u5217\u7EA7\u7EA6\u675F</strong>\uFF1A\u53EA\u80FD\u4F5C\u7528\u5728\u4E00\u4E2A\u5217\u4E0A\u3002\u5728\u5217\u7684\u5B9A\u4E49\u540E\u9762\u6307\u660E\u7EA6\u675F</li><li><strong>\u8868\u7EA7\u7EA6\u675F</strong>\uFF1A\u53EF\u4EE5\u4F5C\u7528\u5728\u591A\u4E2A\u5217\u4E0A\u3002\u4E0D\u4E0E\u5217\u7684\u5B9A\u4E49\u5728\u4E00\u8D77\uFF0C\u800C\u662F\u5355\u72EC\u5B9A\u4E49</li></ul></li><li>\u6309\u7167<code>\u7EA6\u675F\u7684\u4F5C\u7528</code>\u5206\uFF1A <ul><li><strong>NOT NULL</strong>\uFF1A\u975E\u7A7A\u7EA6\u675F\u3002\u89C4\u5B9A\u5B57\u6BB5\u503C\u4E0D\u80FD\u4E3A\u7A7A</li><li><strong>UNIQUE</strong>\uFF1A\u552F\u4E00\u7EA6\u675F\u3002\u89C4\u5B9A\u5B57\u6BB5\u503C\u5728\u6574\u4E2A\u8868\u4E2D\u662F\u552F\u4E00\u7684</li><li><strong>PRIMARY KEY</strong>\uFF1A\u4E3B\u952E\u7EA6\u675F\u3002\u662F\u975E\u7A7A\u548C\u552F\u4E00\u7EA6\u675F\u7684\u7EC4\u5408</li><li><strong>FOREIGN KEY</strong>\uFF1A\u5916\u952E\u7EA6\u675F</li><li><strong>CHECK</strong>\uFF1A\u68C0\u67E5\u7EA6\u675F</li><li><strong>DEFAULT</strong>\uFF1A\u9ED8\u8BA4\u503C\u7EA6\u675F</li></ul></li></ul><h4 id="_12-1-4-\u67E5\u770B\u6307\u5B9A\u8868\u5DF2\u6709\u7684\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-1-4-\u67E5\u770B\u6307\u5B9A\u8868\u5DF2\u6709\u7684\u7EA6\u675F" aria-hidden="true">#</a> 12.1.4 \u67E5\u770B\u6307\u5B9A\u8868\u5DF2\u6709\u7684\u7EA6\u675F</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#information_schema\u6570\u636E\u5E93\u540D\uFF08\u7CFB\u7EDF\u5E93\uFF09
#table_constraints\u8868\u540D\u79F0\uFF08\u4E13\u95E8\u5B58\u50A8\u5404\u4E2A\u8868\u7684\u7EA6\u675F\uFF09
SELECT * 
FROM information_schema.table_constraints
WHERE table_name = &#39;\u8868\u540D\u79F0&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_12-2\u975E\u7A7A\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-2\u975E\u7A7A\u7EA6\u675F" aria-hidden="true">#</a> 12.2\u975E\u7A7A\u7EA6\u675F</h3><h4 id="_12-2-1-\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#_12-2-1-\u4F5C\u7528" aria-hidden="true">#</a> 12.2.1 \u4F5C\u7528</h4><p><strong>\u9650\u5B9A\u67D0\u4E2A\u5B57\u6BB5\u7684\u503C\u4E0D\u5141\u8BB8\u4E3A\u7A7A</strong></p><h4 id="_12-2-2-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_12-2-2-\u5173\u952E\u5B57" aria-hidden="true">#</a> 12.2.2 \u5173\u952E\u5B57</h4><p><strong>NOT NUL</strong></p><h4 id="_12-2-3-\u7279\u70B9" tabindex="-1"><a class="header-anchor" href="#_12-2-3-\u7279\u70B9" aria-hidden="true">#</a> 12.2.3 \u7279\u70B9</h4><ul><li>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6240\u6709\u7684\u7C7B\u578B\u90FD\u662F\u53EF\u4EE5\u4E3ANULL\u7684\u3002\u5305\u62ECINT\u3001FLOAT\u7B49</li><li>\u975E\u7A7A\u7EA6\u675F\u53EA\u80FD\u662F\u5217\u7EA7\u7EA6\u675F\uFF0C\u4E0D\u80FD\u7EC4\u5408\u975E\u7A7A</li><li>\u4E00\u4E2A\u8868\u53EF\u4EE5\u6709\u591A\u4E2A\u5B57\u6BB5\u5206\u522B\u9650\u5236\u975E\u7A7A</li><li>\u7A7A\u5B57\u7B26\u30010\u90FD\u4E0D\u7B49\u4E8ENULL</li><li>\u5982\u679C\u67D0\u5B57\u6BB5\u539F\u6709<strong>\u9ED8\u8BA4\u503C\u7EA6\u675F</strong>\uFF0C\u5E76\u4E14\u60F3\u5728\u6DFB\u52A0\u975E\u7A7A\u7EA6\u675F\u540E\u8FD8\u60F3<strong>\u4FDD\u7559\u9ED8\u8BA4\u503C\u7EA6\u675F</strong>\uFF0C\u5219\u9700\u8981\u5728MODIFY\u8BED\u53E5\u4E2D\u4FDD\u7559\u9ED8\u8BA4\u503C\u7EA6\u675F</li></ul><h4 id="_12-2-4-\u6DFB\u52A0\u975E\u7A7A\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-2-4-\u6DFB\u52A0\u975E\u7A7A\u7EA6\u675F" aria-hidden="true">#</a> 12.2.4 \u6DFB\u52A0\u975E\u7A7A\u7EA6\u675F</h4><blockquote><p>\u65B9\u5F0F\u4E00\uFF1A\u5728\u521B\u5EFA\u8868\u65F6\u6DFB\u52A0\u975E\u7A7A\u7EA6\u675F</p></blockquote><p>==NOT NULL\u53EA\u80FD\u662F\u5217\u7EA7\u7EA6\u675F\uFF0C\u4E0D\u80FD\u6DFB\u52A0\u8868\u7EA7\u7EA6\u675F==</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE \u8868\u540D\u79F0(
\u5B57\u6BB5\u540D \u6570\u636E\u7C7B\u578B,
\u5B57\u6BB5\u540D \u6570\u636E\u7C7B\u578B NOT NULL, # \u975E\u7A7A\u7EA6\u675F\uFF0C\u5217\u7EA7
\u5B57\u6BB5\u540D \u6570\u636E\u7C7B\u578B NOT NULL, # \u975E\u7A7A\u7EA6\u675F\uFF0C\u5217\u7EA7
    ...
);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>\u65B9\u5F0F\u4E8C\uFF1A\u5728\u5EFA\u8868\u540E\u6DFB\u52A0\u975E\u7A7A\u7EA6\u675F</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D MODIFY \u5B57\u6BB5\u540D \u6570\u636E\u7C7B\u578B NOT NULL;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_12-2-5-\u5220\u9664\u975E\u7A7A\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-2-5-\u5220\u9664\u975E\u7A7A\u7EA6\u675F" aria-hidden="true">#</a> 12.2.5 \u5220\u9664\u975E\u7A7A\u7EA6\u675F</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D MODIFY \u5B57\u6BB5\u540D \u6570\u636E\u7C7B\u578B NULL; # \u5C06\u8BE5\u5B57\u6BB5\u7684NOT NULL\u6539\u4E3ANULL\uFF0C\u5141\u8BB8\u4E3A\u7A7A
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u6216</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D MODIFY \u5B57\u6BB5\u540D \u6570\u636E\u7C7B\u578B; # \u53BB\u6389\u8BE5\u5B57\u6BB5\u7684 NOT NULL\uFF0C\u9ED8\u8BA4\u8BE5\u5B57\u6BB5\u5141\u8BB8\u4E3A\u7A7A
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_12-2-6-\u9762\u8BD5\u9898" tabindex="-1"><a class="header-anchor" href="#_12-2-6-\u9762\u8BD5\u9898" aria-hidden="true">#</a> 12.2.6 \u9762\u8BD5\u9898</h4><blockquote><p>\u4E3A\u4EC0\u4E48\u5EFA\u8868\u65F6\uFF0C\u52A0 not null default &#39;&#39; \u6216 default 0</p></blockquote><p><code>\u7B54\uFF1A</code>\u4E0D\u60F3\u8BA9\u8868\u4E2D\u51FA\u73B0null\u503C\u3002</p><blockquote><p>\u4E3A\u4EC0\u4E48\u4E0D\u60F3\u8981 null \u7684\u503C</p></blockquote><p><code>\u7B54\uFF1A</code></p><ul><li><p>\u2460 \u4E0D\u597D\u6BD4\u8F83\u3002null\u662F\u4E00\u79CD\u7279\u6B8A\u503C\uFF0C\u6BD4\u8F83\u65F6\u53EA\u80FD\u7528\u4E13\u95E8\u7684is null \u548C is not null\u6765\u6BD4\u8F83\u3002\u78B0\u5230\u8FD0\u7B97\u7B26\uFF0C\u901A\u5E38\u8FD4\u56DEnull\u3002</p></li><li><p>\u2461 \u6548\u7387\u4E0D\u9AD8\u3002\u5F71\u54CD\u63D0\u9AD8\u7D22\u5F15\u6548\u679C\u3002\u56E0\u6B64\uFF0C\u6211\u4EEC\u5F80\u5F80\u5728\u5EFA\u8868\u65F6 not null default &#39;&#39; \u6216 default 0</p></li></ul><h3 id="_12-3-\u552F\u4E00\u6027\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-3-\u552F\u4E00\u6027\u7EA6\u675F" aria-hidden="true">#</a> 12.3 \u552F\u4E00\u6027\u7EA6\u675F</h3><h4 id="_12-3-1-\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#_12-3-1-\u4F5C\u7528" aria-hidden="true">#</a> 12.3.1 \u4F5C\u7528</h4><p><strong>\u7528\u6765\u9650\u5236\u67D0\u4E2A\u5B57\u6BB5\u7684\u503C\u4E0D\u80FD\u91CD\u590D\u3002</strong></p><h4 id="_12-3-2-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_12-3-2-\u5173\u952E\u5B57" aria-hidden="true">#</a> 12.3.2 \u5173\u952E\u5B57</h4><p><strong>UNIQUE</strong></p><h4 id="_12-3-3-\u7279\u70B9" tabindex="-1"><a class="header-anchor" href="#_12-3-3-\u7279\u70B9" aria-hidden="true">#</a> 12.3.3 \u7279\u70B9</h4><ul><li>\u540C\u4E00\u4E2A\u8868\u53EF\u4EE5\u6709\u591A\u4E2A\u552F\u4E00\u7EA6\u675F</li><li>\u552F\u4E00\u6027\u7EA6\u675F\u53EF\u4EE5\u662F\u4E00\u4E2A\u5217\u7684\u503C\u552F\u4E00\uFF0C\u4E5F\u53EF\u4EE5\u662F\u591A\u4E2A\u5217\u7EC4\u5408\u7684\u503C\u552F\u4E00</li><li>\u552F\u4E00\u6027\u7EA6\u675F\u5141\u8BB8\u5217\u503C\u4E3A\u7A7A\uFF0C\u4E14\u5141\u8BB8\u591A\u5217\u4E3A\u7A7A\u503C</li><li>\u5728\u521B\u5EFA\u552F\u4E00\u7EA6\u675F\u7684\u65F6\u5019\uFF0C\u5982\u679C\u4E0D\u7ED9\u552F\u4E00\u6027\u7EA6\u675F\u547D\u540D\uFF0C\u5C31\u9ED8\u8BA4\u548C\u5217\u540D\u76F8\u540C</li><li><strong>MySQL\u4F1A\u7ED9\u552F\u4E00\u6027\u7EA6\u675F\u7684\u5217\u4E0A\u9ED8\u8BA4\u521B\u5EFA\u4E00\u4E2A\u552F\u4E00\u7D22\u5F15</strong></li></ul><h4 id="_12-3-4-\u6DFB\u52A0\u552F\u4E00\u6027\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-3-4-\u6DFB\u52A0\u552F\u4E00\u6027\u7EA6\u675F" aria-hidden="true">#</a> 12.3.4 \u6DFB\u52A0\u552F\u4E00\u6027\u7EA6\u675F</h4><blockquote><p>\u65B9\u5F0F\u4E00\uFF1A\u5728\u521B\u5EFA\u8868\u662F\u6DFB\u52A0\u552F\u4E00\u6027\u7EA6\u675F</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>create table \u8868\u540D\u79F0(
	\u5B57\u6BB5\u540D \u6570\u636E\u7C7B\u578B,
	\u5B57\u6BB5\u540D \u6570\u636E\u7C7B\u578B UNIQUE, # \u5217\u7EA7\u7EA6\u675F
	\u5B57\u6BB5\u540D \u6570\u636E\u7C7B\u578B UNIQUE KEY,
	\u5B57\u6BB5\u540D \u6570\u636E\u7C7B\u578B,
    ...
    [CONSTRAINT \u7EA6\u675F\u540D] UNIQUE KEY(\u5B57\u6BB5\u540D[, \u5B57\u6BB5\u540D2, \u5B57\u6BB5\u540D3, ...]) # \u8868\u7EA7\u7EA6\u675F
);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>\u65B9\u5F0F\u4E8C\uFF1A\u5EFA\u8868\u540E\u6DFB\u52A0\u552F\u4E00\u6027\u7EA6\u675F</p></blockquote><ul><li><p>ALTER ... ADD\u65B9\u5F0F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D ADD [CONSTRAINT \u7EA6\u675F\u540D] UNIQUE KEY (\u5B57\u6BB5\u540D\u5217\u8868)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>ALTER ... MODIFY\u65B9\u5F0F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D MODIFY \u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B UNIQUE;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h4 id="_12-3-5-\u5220\u9664\u552F\u4E00\u6027\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-3-5-\u5220\u9664\u552F\u4E00\u6027\u7EA6\u675F" aria-hidden="true">#</a> 12.3.5 \u5220\u9664\u552F\u4E00\u6027\u7EA6\u675F</h4><blockquote><p>\u8BF4\u660E</p></blockquote><ul><li><p>\u6DFB\u52A0\u552F\u4E00\u6027\u7EA6\u675F\u7684\u5217\u4E5F\u4F1A<strong>\u81EA\u52A8\u521B\u5EFA\u552F\u4E00\u7D22\u5F15</strong></p></li><li><p>\u5220\u9664\u552F\u4E00\u6027\u7EA6\u675F<strong>\u53EA\u80FD\u901A\u8FC7\u5220\u9664\u552F\u4E00\u7D22\u5F15\u7684\u65B9\u5F0F\u5220\u9664</strong></p></li><li><p><strong>\u5220\u9664\u65F6\u9700\u8981\u6307\u5B9A\u552F\u4E00\u7D22\u5F15\u540D</strong>\uFF0C\u552F\u4E00\u7D22\u5F15\u540D\u548C\u552F\u4E00\u7EA6\u675F\u540D\u4E00\u6837</p></li><li><p>\u5982\u679C\u521B\u5EFA\u552F\u4E00\u7EA6\u675F\u65F6\u672A\u6307\u660E\u540D\u79F0\uFF0C\u5982\u679C\u662F\u5355\u5217\uFF0C\u5C31\u9ED8\u8BA4\u548C\u5217\u540D\u76F8\u540C\uFF1B\u5982\u679C\u662F\u7EC4\u5408\u5217\uFF0C\u9ED8\u8BA4\u4E3A\u7B2C\u4E00\u4E2A\u5217\u540D\u3002\u6B64\u5916\u4E5F\u53EF\u4EE5\u81EA\u5B9A\u4E49\u552F\u4E00\u6027\u7EA6\u675F\u540D</p></li><li><p><strong>\u67E5\u770B\u6307\u5B9A\u8868\u4E2D\u90FD\u6709\u54EA\u4E9B\u7D22\u5F15</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW INDEX FROM \u8868\u540D;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><blockquote><p>\u5220\u9664\u552F\u4E00\u6027\u7EA6\u675F</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D DROP INDEX \u552F\u4E00\u7D22\u5F15\u540D;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_12-4-\u4E3B\u952E\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-4-\u4E3B\u952E\u7EA6\u675F" aria-hidden="true">#</a> 12.4 \u4E3B\u952E\u7EA6\u675F</h3><h4 id="_12-4-1-\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#_12-4-1-\u4F5C\u7528" aria-hidden="true">#</a> 12.4.1 \u4F5C\u7528</h4><p><strong>\u975E\u7A7A\u4E14\u552F\u4E00\uFF0C\u7528\u6765\u552F\u4E00\u6807\u8BC6\u8868\u4E2D\u7684\u4E00\u884C\u8BB0\u5F55</strong></p><h4 id="_12-4-2-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_12-4-2-\u5173\u952E\u5B57" aria-hidden="true">#</a> 12.4.2 \u5173\u952E\u5B57</h4><p><strong>PRIMARY KEY</strong></p><h4 id="_12-4-3-\u7279\u70B9" tabindex="-1"><a class="header-anchor" href="#_12-4-3-\u7279\u70B9" aria-hidden="true">#</a> 12.4.3 \u7279\u70B9</h4><ul><li>\u4E3B\u952E\u7EA6\u675F<strong>\u76F8\u5F53\u4E8E\u552F\u4E00\u7EA6\u675F+\u975E\u7A7A\u7EA6\u675F\u7684\u7EC4\u5408</strong>\u3002\u4E3B\u952E\u7EA6\u675F\u5217\u4E0D\u5141\u8BB8\u91CD\u590D\uFF0C\u4E5F\u4E0D\u5141\u8BB8\u51FA\u73B0\u7A7A\u503C</li><li><strong>\u4E00\u4E2A\u8868\u6700\u591A\u53EA\u80FD\u6709\u4E00\u4E2A\u4E3B\u952E\u7EA6\u675F</strong></li><li>\u5EFA\u7ACB\u4E3B\u952E\u7EA6\u675F\uFF0C\u65E2\u53EF\u4EE5\u5728\u5217\u7EA7\u521B\u5EFA\uFF0C\u4E5F\u53EF\u4EE5\u5728\u8868\u7EA7\u521B\u5EFA</li><li><strong>\u4E3B\u952E\u7EA6\u675F\u5BF9\u5E94\u7740\u8868\u4E2D\u7684\u4E00\u5217\u6216\u8005\u591A\u5217\uFF08\u590D\u5408\u4E3B\u952E\uFF09</strong></li><li>\u5982\u679C\u662F\u591A\u5217\u7EC4\u5408\u7684<strong>\u590D\u5408\u4E3B\u952E\u7EA6\u675F</strong>\uFF0C\u90A3\u4E48<strong>\u8FD9\u4E9B\u5217\u90FD\u4E0D\u5141\u8BB8\u4E3A\u7A7A\uFF0C\u4E14<code>\u7EC4\u5408\u7684\u503C</code>\u4E0D\u5141\u8BB8\u91CD\u590D</strong></li><li><strong>MySQL\u7684\u4E3B\u952E\u7EA6\u675F\u540D\u603B\u662FPRIMARY</strong>\uFF0C\u81EA\u5DF1\u547D\u540D\u7684\u65E0\u6548</li><li>\u5F53\u521B\u5EFA\u4E3B\u952E\u7EA6\u675F\u65F6\uFF0C\u4F1A\u9ED8\u8BA4\u521B\u5EFA<strong>\u4E3B\u952E\u7D22\u5F15</strong>\u3002\u5982\u679C\u5220\u9664\u4E3B\u952E\u7EA6\u675F\u4E86\uFF0C\u90A3\u4E48\u5176\u5BF9\u5E94\u7684\u4E3B\u952E\u7D22\u5F15\u4E5F\u81EA\u52A8\u5220\u9664\u4E86</li><li><strong>\u4E0D\u8981\u4FEE\u6539\u4E3B\u952E\u5B57\u6BB5\u7684\u503C</strong>\u3002\u56E0\u4E3A\u4E3B\u952E\u662F\u6570\u636E\u8BB0\u5F55\u7684\u552F\u4E00\u6807\u8BC6\uFF0C\u5982\u679C\u4FEE\u6539\u4E86\u4E3B\u952E\u7684\u503C\uFF0C\u5C31\u6709\u53EF\u80FD\u7834\u574F\u6570\u636E\u7684\u5B8C\u6574\u6027</li></ul><h4 id="_12-4-4-\u6DFB\u52A0\u4E3B\u952E\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-4-4-\u6DFB\u52A0\u4E3B\u952E\u7EA6\u675F" aria-hidden="true">#</a> 12.4.4 \u6DFB\u52A0\u4E3B\u952E\u7EA6\u675F</h4><blockquote><p>\u65B9\u5F0F\u4E00\uFF1A\u5728\u521B\u5EFA\u8868\u65F6\u6DFB\u52A0\u4E3B\u952E\u7EA6\u675F</p></blockquote><ul><li><p>\u5217\u7EA7\u7EA6\u675F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE \u8868\u540D (
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B PRIMARY KEY, # \u5217\u7EA7\u7EA6\u675F
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B,
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B
    ...
);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li><li><p>\u8868\u7EA7\u7EA6\u675F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE \u8868\u540D (
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B,
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B,
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B
    ...
    PRIMARY KEY (\u5B57\u6BB5\u540D\u5217\u8868) # \u8868\u7EA7\u7EA6\u675F
);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul><blockquote><p>\u65B9\u5F0F\u4E8C\uFF1A\u5728\u521B\u5EFA\u8868\u540E\u6DFB\u52A0\u4E3B\u952E\u7EA6\u675F</p></blockquote><ul><li><p>ALTER ... ADD\u65B9\u5F0F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D ADD PRIMARY KEY (\u5B57\u6BB5\u540D\u5217\u8868)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>ALTER ... MODIFY\u65B9\u5F0F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D MODIFY \u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B PRIMARY KEY;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h4 id="_12-4-5-\u5220\u9664\u4E3B\u952E\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-4-5-\u5220\u9664\u4E3B\u952E\u7EA6\u675F" aria-hidden="true">#</a> 12.4.5 \u5220\u9664\u4E3B\u952E\u7EA6\u675F</h4><p>==\u5B9E\u9645\u5F00\u53D1\u4E2D\u4E0D\u4F1A\u5220\u9664\u4E3B\u952E\u7EA6\u675F\uFF01\uFF01\uFF01==</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D DROP PRIMARY KEY;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>\u4E3B\u952E\u7EA6\u675F\u88AB\u5220\u9664\u540E\uFF0C\u8BE5\u5217\u7684\u975E\u7A7A\u5C5E\u6027\u4ECD\u4FDD\u7559</strong></p><h3 id="_12-5-\u81EA\u589E\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-5-\u81EA\u589E\u7EA6\u675F" aria-hidden="true">#</a> 12.5 \u81EA\u589E\u7EA6\u675F</h3><h4 id="_12-5-1-\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#_12-5-1-\u4F5C\u7528" aria-hidden="true">#</a> 12.5.1 \u4F5C\u7528</h4><p><strong>\u4F7F\u5F97\u6307\u5B9A\u5B57\u6BB5\u7684\u503C\u8FDB\u884C\u81EA\u589E</strong></p><h4 id="_12-5-2-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_12-5-2-\u5173\u952E\u5B57" aria-hidden="true">#</a> 12.5.2 \u5173\u952E\u5B57</h4><p><strong>AUTO_INCREMENT</strong></p><h4 id="_12-5-3-\u7279\u70B9\u548C\u8981\u6C42" tabindex="-1"><a class="header-anchor" href="#_12-5-3-\u7279\u70B9\u548C\u8981\u6C42" aria-hidden="true">#</a> 12.5.3 \u7279\u70B9\u548C\u8981\u6C42</h4><ul><li>\u4E00\u4E2A\u8868<strong>\u6700\u591A\u53EA\u80FD\u6709\u4E00\u4E2A\u81EA\u589E\u957F\u7684\u5217</strong></li><li>\u5F53\u9700\u8981\u4EA7\u751F\u552F\u4E00\u6807\u8BC6\u6216\u8005\u987A\u5E8F\u503C\u65F6\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u81EA\u589E\u957F</li><li>\u8BBE\u7F6E\u4E3A\u81EA\u589E\u957F\u7684\u5217<strong>\u5FC5\u987B\u662F\u4E3B\u952E\u7EA6\u675F\u5217\u6216\u8005\u552F\u4E00\u6027\u7EA6\u675F\u5217</strong></li><li>\u81EA\u589E\u7EA6\u675F\u7684\u5217\u7684\u6570\u636E\u7C7B\u578B<strong>\u5FC5\u987B\u662F\u6574\u6570\u7C7B\u578B</strong></li><li>\u5728\u63D2\u5165\u6570\u636E\u65F6\uFF0C\u5982\u679C\u81EA\u589E\u957F\u5217\u8BBE\u7F6E\u4E3A0\u6216\u8005null\uFF0C\u4F1A\u5728\u5F53\u524D\u5217\u6700\u5927\u503C\u7684\u57FA\u7840\u4E0A\u9012\u589E\uFF1B\u5982\u679C\u624B\u52A8\u6307\u5B9A\u4E86\u975E0\u3001\u975Enull\u7684\u503C\uFF0C\u5219\u76F4\u63A5\u8D4B\u503C\u4E3A\u8BE5\u503C</li></ul><h4 id="_12-5-4-\u6DFB\u52A0\u81EA\u589E\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-5-4-\u6DFB\u52A0\u81EA\u589E\u7EA6\u675F" aria-hidden="true">#</a> 12.5.4 \u6DFB\u52A0\u81EA\u589E\u7EA6\u675F</h4><blockquote><p>\u65B9\u5F0F\u4E00\uFF1A\u5728\u521B\u5EFA\u8868\u7684\u65F6\u5019\u6DFB\u52A0\u81EA\u589E\u7EA6\u675F</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE \u8868\u540D(
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B PRIMARY KEY AUTO_INCREMENT, # \u88ABAUTO_INCREMENT\u4FEE\u9970\u7684\u5217\u5FC5\u987B\u662FPRIMARY KEY\u5217\u6216\u8005UNIQUE\u5217
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B,
    ...
)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>\u65B9\u5F0F\u4E8C\uFF1A\u5728\u5EFA\u8868\u540E\u6DFB\u52A0\u81EA\u589E\u7EA6\u675F</p></blockquote><p>\u53EA\u80FD\u4F7F\u7528ALTER...MODIFY\u65B9\u5F0F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D MODIFY \u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B  AUTO_INCREMENT;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_12-5-5-\u5220\u9664\u81EA\u589E\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-5-5-\u5220\u9664\u81EA\u589E\u7EA6\u675F" aria-hidden="true">#</a> 12.5.5 \u5220\u9664\u81EA\u589E\u7EA6\u675F</h4><p><strong>\u53BB\u6389auto_increment\u76F8\u5F53\u4E8E\u5220\u9664</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D MODIFY \u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B; 
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_12-5-6-mysql8-0\u65B0\u7279\u6027" tabindex="-1"><a class="header-anchor" href="#_12-5-6-mysql8-0\u65B0\u7279\u6027" aria-hidden="true">#</a> 12.5.6 MySQL8.0\u65B0\u7279\u6027</h4><p>==\u81EA\u589E\u53D8\u91CF\u7684\u6301\u4E45\u5316==\u3002</p><p>\u5728MySQL5.7\u548CMySQL8.0\u4E2D\u5206\u522B\u6267\u884C\u4EE5\u4E0B\u64CD\u4F5C\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u2460\u521B\u5EFA\u8868\uFF0C\u4E3B\u952E\u81EA\u589E
CREATE TABLE test(
id INT PRIMARY KEY AUTO_INCREMENT
);

# \u2461 \u63D2\u51654\u4E2A\u7A7A\u503C
INSERT INTO test9 VALUES(0),(0),(0),(0);

# \u2462 \u67E5\u8BE2\uFF0C\u6B64\u65F6id\u7684\u503C\u4E3A1,2,3,4
SELECT * FROM test9;

# \u2463 \u5220\u9664id\u4E3A4\u7684\u8BB0\u5F55\uFF0C\u6B64\u65F6id\u7684\u503C\u4E3A1,2,3
DELETE FROM test9 WHERE id = 4;

# \u2464 \u518D\u6B21\u63D2\u5165\u4E00\u6761\u8BB0\u5F55\uFF0C\u6B64\u65F6id\u7684\u503C\u4E3A1,2,3,5
INSERT INTO test9 VALUES(0);

# \u2465 \u5220\u9664id\u4E3A5\u7684\u8BB0\u5F55\uFF0C\u6B64\u65F6id\u7684\u503C\u4E3A1,2,3
DELETE FROM test9 WHERE id = 5;

# \u2466 \u91CD\u542FMySQL\u670D\u52A1\u5668

# \u2467 \u67E5\u8BE2\uFF0C\u6B64\u65F6id\u7684\u503C\u4E3A1,2,3
SELECT * FROM test9;

# \u2468 \u518D\u6B21\u63D2\u5165\u4E00\u6761\u8BB0\u5F55\u3002\u5728\u8FD9\u91CCMySQL5.7\u548CMySQL8.0\u63D2\u5165\u540E\u7684\u7ED3\u679C\u4E0D\u4E00\u6837\u4E86\u3002
INSERT INTO test9 VALUES(0);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>\u6267\u884C\u4E3A\u6B65\u9AA4\u2468\u540E\uFF0C\u518D\u6B21\u67E5\u8BE2\uFF0C<strong>MySQL5.7\u67E5\u8BE2\u5230\u7684id\u503C\u4E3A1,2,3,4\uFF0CMySQL8.0\u67E5\u8BE2\u5230\u7684id\u503C\u4E3A1,2,3,6</strong>\u3002</p><p><code>\u539F\u56E0\uFF1A</code></p><ul><li>\u5728<strong>MySQL 5.7</strong>\u7CFB\u7EDF\u4E2D\uFF0C\u5BF9\u4E8E\u81EA\u589E\u4E3B\u952E\u7684\u5206\u914D\u89C4\u5219\uFF0C\u662F\u7531InnoDB\u6570\u636E\u5B57\u5178\u5185\u90E8\u4E00\u4E2A<strong>\u8BA1\u6570\u5668</strong>\u6765\u51B3\u5B9A\u7684\uFF0C\u800C\u8BE5\u8BA1\u6570\u5668<strong>\u53EA\u5728\u5185\u5B58\u4E2D\u7EF4\u62A4</strong> \uFF0C\u5E76\u4E0D\u4F1A\u6301\u4E45\u5316\u5230\u78C1\u76D8\u4E2D\u3002<strong>\u5F53\u6570\u636E\u5E93\u91CD\u542F\u65F6\uFF0C\u8BE5\u8BA1\u6570\u5668\u4F1A\u88AB\u521D\u59CB\u5316</strong>\uFF1B</li><li><strong>MySQL 8.0\u5C06\u81EA\u589E\u4E3B\u952E\u7684\u8BA1\u6570\u5668\u6301\u4E45\u5316\u5230 <code>\u91CD\u505A\u65E5\u5FD7</code> \u4E2D</strong>\u3002\u6BCF\u6B21\u8BA1\u6570\u5668\u53D1\u751F\u6539\u53D8\uFF0C\u90FD\u4F1A\u5C06\u5176\u5199\u5165\u91CD\u505A\u65E5\u5FD7 \u4E2D\u3002<strong>\u5982\u679C\u6570\u636E\u5E93\u91CD\u542F\uFF0CInnoDB\u4F1A\u6839\u636E\u91CD\u505A\u65E5\u5FD7\u4E2D\u7684\u4FE1\u606F\u6765\u521D\u59CB\u5316\u8BA1\u6570\u5668\u7684\u5185\u5B58\u503C</strong>\u3002</li></ul><h4 id="_12-5-7-\u9762\u8BD5\u9898" tabindex="-1"><a class="header-anchor" href="#_12-5-7-\u9762\u8BD5\u9898" aria-hidden="true">#</a> 12.5.7 \u9762\u8BD5\u9898</h4><blockquote><p>\u5E26AUTO_INCREMENT\u7EA6\u675F\u7684\u5B57\u6BB5\u503C\u662F\u4ECE1\u5F00\u59CB\u7684\u5417\uFF1F</p></blockquote><p><code>\u7B54\uFF1A</code>\u5728MySQL\u4E2D\uFF0C<strong>\u9ED8\u8BA4AUTO_INCREMENT\u7684\u521D\u59CB\u503C\u662F1</strong>\uFF0C\u6BCF\u65B0\u589E\u4E00\u6761\u8BB0\u5F55\uFF0C\u5B57\u6BB5\u503C\u81EA\u52A8\u52A01\u3002\u6B64\u5916\uFF0C\u8FD8\u53EF\u4EE5\u901A\u8FC7\u5982\u4E0B\u4E24\u79CD\u65B9\u6CD5\u8BBE\u7F6E\u81EA\u589E\u5C5E\u6027\u7684\u8D77\u59CB\u503C\uFF1A</p><ul><li><p>\u2460 \u5728\u5EFA\u8868\u65F6\u6307\u5B9AAUTO_INCREMENT\u7684\u503C\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE \u8868\u540D(
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B PRIMARY KEY AUTO_INCREMENT,
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B,
    ...
)AUTO_INCREMENT = \u81EA\u5B9A\u4E49\u9ED8\u8BA4\u503C;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>\u2461 \u5728\u4F7F\u7528ALTER TABLE ... \u65F6\u4FEE\u6539\u6307\u5B9A\u8868\u7684AUTO_INCREMENT\u7684\u9ED8\u8BA4\u503C\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u9996\u5148\uFF0C\u9700\u8981\u7ED9\u6307\u5B9A\u5B57\u6BB5\u8BBE\u7F6E\u4E3A\u81EA\u589E\u5217
CREATE TABLE \u8868\u540D(
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B PRIMARY KEY AUTO_INCREMENT,
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B,
    ...
);

# \u7136\u540E\uFF0C\u4FEE\u6539\u6307\u5B9A\u8868\u7684AUTO_INCREMENT\u7684\u9ED8\u8BA4\u503C
ALTER TABLE \u8868\u540D AUTO_INCREMENT = \u9ED8\u8BA4\u503C;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li><li><p>\u2461 \u6307\u5B9A\u7B2C \u4E00\u6761\u63D2\u5165\u8BB0\u5F55\u7684\u81EA\u589E\u5B57\u6BB5\u7684\u503C\u3002\u8FD9\u6837\u65B0\u63D2\u5165\u7684\u8BB0\u5F55\u7684\u81EA\u589E\u5B57\u6BB5\u503C\u4ECE\u521D\u59CB\u503C\u5F00\u59CB\u9012\u589E\u3002</p><p>\u5982\u5728\u8868\u4E2D\u63D2\u5165\u7B2C\u4E00 \u6761\u8BB0\u5F55\uFF0C\u540C\u65F6\u6307\u5B9Aid\u503C\u4E3A5\uFF0C\u5219\u4EE5\u540E\u63D2\u5165\u7684\u8BB0\u5F55\u7684id\u503C\u5C31\u4F1A\u4ECE6\u5F00\u59CB\u5F80\u4E0A\u589E\u52A0</p></li></ul><h3 id="_12-6-\u5916\u952E\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-6-\u5916\u952E\u7EA6\u675F" aria-hidden="true">#</a> 12.6 \u5916\u952E\u7EA6\u675F</h3><h4 id="_12-6-1-\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#_12-6-1-\u4F5C\u7528" aria-hidden="true">#</a> 12.6.1 \u4F5C\u7528</h4><p><strong>\u9650\u5B9A\u67D0\u4E2A\u8868\u7684\u67D0\u4E2A\u5B57\u6BB5\u7684\u5F15\u7528\u5B8C\u6574\u6027</strong>\u3002 \u6BD4\u5982\uFF1A\u5458\u5DE5\u8868\u7684\u5458\u5DE5\u6240\u5728\u90E8\u95E8\u7684\u9009\u62E9\uFF0C\u5FC5\u987B\u5728\u90E8\u95E8\u8868\u80FD\u627E\u5230\u5BF9\u5E94\u7684\u90E8\u5206\u3002</p><h4 id="_12-6-2-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_12-6-2-\u5173\u952E\u5B57" aria-hidden="true">#</a> 12.6.2 \u5173\u952E\u5B57</h4><p><strong>FOREIGN KEY</strong></p><h4 id="_12-6-3-\u4E3B\u8868\u548C\u4ECE\u8868" tabindex="-1"><a class="header-anchor" href="#_12-6-3-\u4E3B\u8868\u548C\u4ECE\u8868" aria-hidden="true">#</a> 12.6.3 \u4E3B\u8868\u548C\u4ECE\u8868</h4><ul><li>\u4E3B\u8868\uFF08\u7236\u8868\uFF09\uFF1A\u88AB\u5F15\u7528\u7684\u8868\uFF0C\u88AB\u53C2\u8003\u7684\u8868</li><li>\u4ECE\u8868\uFF08\u5B50\u8868\uFF09\uFF1A\u5F15\u7528\u522B\u4EBA\u7684\u8868\uFF0C\u53C2\u8003\u522B\u4EBA\u7684\u8868</li></ul><h4 id="_12-6-4-\u7279\u70B9" tabindex="-1"><a class="header-anchor" href="#_12-6-4-\u7279\u70B9" aria-hidden="true">#</a> 12.6.4 \u7279\u70B9</h4><ul><li><p>\u4ECE\u8868\u7684\u5916\u952E\u5217\uFF0C\u5FC5\u987B\u5F15\u7528/\u53C2\u8003\u4E3B\u8868\u7684\u4E3B\u952E\u6216\u552F\u4E00\u7EA6\u675F\u7684\u5217</p><p><code>\u539F\u56E0\uFF1A</code>\u56E0\u4E3A\u88AB\u5F15\u7528/\u53C2\u8003\u7684\u503C\u5FC5\u987B\u662F\u552F\u4E00\u7684</p></li><li><p>\u5728\u521B\u5EFA\u5916\u952E\u7EA6\u675F\u65F6\uFF0C\u5982\u679C\u4E0D\u7ED9\u5916\u952E\u7EA6\u675F\u547D\u540D\uFF0C<strong>\u9ED8\u8BA4\u540D\u4E0D\u662F\u5217\u540D\uFF0C\u800C\u662F\u81EA\u52A8\u4EA7\u751F\u4E00\u4E2A\u5916\u952E\u540D</strong>\uFF08\u5982student_ibfk_1\uFF09</p></li><li><p>\u5982\u679C\u5728\u521B\u5EFA\u8868\u65F6\u5C31\u6307\u5B9A\u5916\u952E\uFF0C\u9700\u8981<strong>\u5148\u521B\u5EFA\u4E3B\u8868\uFF0C\u518D\u521B\u5EFA\u5B50\u8868</strong></p></li><li><p><strong>\u5220\u9664\u8868\u65F6\uFF0C\u5148\u5220\u5B50\u8868\uFF0C\u518D\u5220\u4E3B\u8868</strong></p></li><li><p><strong>\u5F53\u4E3B\u8868\u7684\u8BB0\u5F55\u88AB\u53C2\u8003\u65F6\uFF0C\u4E3B\u8868\u8BB0\u5F55\u5C06\u4E0D\u5141\u8BB8\u5220\u9664</strong>\u3002\u5982\u679C\u8981\u5220\u9664\u6570\u636E\uFF0C\u9700\u8981\u5148\u5220\u9664\u4ECE\u8868\u4E2D\u4F9D\u8D56\u8BE5\u8BB0\u5F55\u7684\u6570\u636E\uFF0C\u7136\u540E\u624D\u53EF\u5220\u9664\u4E3B\u8868\u6570\u636E</p></li><li><p><strong>\u4ECE\u8868\u4E2D\uFF0C\u4E00\u4E2A\u8868\u53EF\u4EE5\u5EFA\u7ACB\u591A\u4E2A\u5916\u952E\u7EA6\u675F</strong></p></li><li><p>\u4ECE\u8868\u7684\u5916\u952E\u5217\u4E0E\u4E3B\u8868\u88AB\u53C2\u7167\u5217<strong>\u540D\u5B57\u53EF\u4EE5\u4E0D\u540C\uFF0C\u4F46\u662F\u6570\u636E\u7C7B\u578B\u5FC5\u987B\u4E00\u6837\uFF0C\u903B\u8F91\u610F\u4E49\u4E00\u81F4</strong></p></li><li><p><strong>\u5220\u9664\u5916\u952E\u7EA6\u675F\u65F6\uFF0C\u5FC5\u987B<code>\u624B\u52A8</code>\u5220\u9664\u5BF9\u5E94\u7684\u7D22\u5F15</strong></p></li><li><p><strong>\u5916\u952E\u7EA6\u675F\u4E0D\u53EF\u4EE5\u8DE8\u5F15\u64CE\u4F7F\u7528</strong></p></li></ul><h4 id="_12-6-4-\u6DFB\u52A0\u5916\u952E\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-6-4-\u6DFB\u52A0\u5916\u952E\u7EA6\u675F" aria-hidden="true">#</a> 12.6.4 \u6DFB\u52A0\u5916\u952E\u7EA6\u675F</h4><blockquote><p>\u65B9\u5F0F\u4E00\uFF1A\u5EFA\u8868\u65F6\u6DFB\u52A0\u5916\u952E\u7EA6\u675F</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE \u4ECE\u8868\u540D(
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B,
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B,
	...
	[CONSTRAINT \u7EA6\u675F\u540D] FOREIGN KEY (\u4ECE\u8868\u5B57\u6BB5\u540D) REFERENCES \u4E3B\u8868(\u4E3B\u8868\u5B57\u6BB5\u5217\u8868)
);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>\u65B9\u5F0F\u4E8C\uFF1A\u5EFA\u8868\u540E\u6DFB\u52A0\u5916\u952E\u7EA6\u675F</p></blockquote><p>\u53EA\u80FD\u901A\u8FC7ALTER TABLE ... ADD\u65B9\u5F0F\u6DFB\u52A0</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u4ECE\u8868\u540D ADD [CONSTRAINT \u7EA6\u675F\u540D ]FOREIGN KEY (\u4ECE\u8868\u5B57\u6BB5\u540D) REFERENCES \u4E3B\u8868\u540D(\u4E3B\u8868\u5B57\u6BB5\u5217\u8868)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_12-6-5-\u5220\u9664\u5916\u952E\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-6-5-\u5220\u9664\u5916\u952E\u7EA6\u675F" aria-hidden="true">#</a> 12.6.5 \u5220\u9664\u5916\u952E\u7EA6\u675F</h4><p>==\u6D41\u7A0B\u5982\u4E0B\uFF1A==</p><ul><li><p>\u2460 \u67E5\u770B\u8868\u4E2D\u7EA6\u675F\uFF0C\u4EE5\u786E\u5B9A\u5916\u952E\u7EA6\u675F\u540D\uFF08\u5982\u679C\u5DF2\u77E5\u5916\u952E\u7EA6\u675F\u540D\uFF0C\u6B64\u6B65\u9AA4\u53EF\u7701\uFF09</p><p><strong>CONSTRAINT_NAME\u5217\u5BF9\u5E94\u7684\u662F\u7EA6\u675F\u540D</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT *
FROM information_schema.table_constraints
WHERE table_name = &quot;\u8868\u540D&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>\u2461 \u5220\u9664\u5916\u952E\u7EA6\u675F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D DROP FOREIGN KEY \u7EA6\u675F\u540D;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>\u2462 \u67E5\u770B\u5916\u952E\u7EA6\u675F\u5BF9\u5E94\u7684\u666E\u901A\u7D22\u5F15\u540D</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW INDEX FROM \u8868\u540D;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>\u2463 \u5220\u9664\u7D22\u5F15\uFF08<strong>\u5916\u952E\u7EA6\u675F\u5BF9\u5E94\u7684\u7D22\u5F15\uFF0C\u53EA\u80FD\u624B\u52A8\u5220\u9664</strong>\uFF09</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D DROP INDEX \u7D22\u5F15\u540D;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><p>==\u81F3\u6B64\uFF0C\u5916\u952E\u7EA6\u675F\u5220\u9664\u5B8C\u6210\u3002==</p><h4 id="_12-6-6-\u7EA6\u675F\u7B49\u7EA7" tabindex="-1"><a class="header-anchor" href="#_12-6-6-\u7EA6\u675F\u7B49\u7EA7" aria-hidden="true">#</a> 12.6.6 \u7EA6\u675F\u7B49\u7EA7</h4><ul><li><code>Cascade\u65B9\u5F0F</code>\uFF1A\u5728\u7236\u8868\u4E2Dupdate\u6216delete\u8BB0\u5F55\u65F6\uFF0C\u540C\u6B65update\u6216delete\u5B50\u8868\u7684\u5339\u914D\u8BB0\u5F55</li><li><code>Set null\u65B9\u5F0F</code>\uFF1A\u5728\u7236\u8868\u4E2Dupdate\u6216delete\u8BB0\u5F55\u65F6\uFF0C\u5C06\u5B50\u8868\u4E0A\u5339\u914D\u8BB0\u5F55\u7684\u5217\u8BBE\u4E3Anull\uFF0C\u6B64\u65F6\u9700\u8981\u6CE8\u610F\u5B50\u8868\u7684\u5916\u952E\u5217\u4E0D\u80FD\u662Fnot null</li><li><code>No action\u65B9\u5F0F</code>\uFF1A\u5982\u679C\u5B50\u8868\u4E2D\u6709\u5339\u914D\u7684\u8BB0\u5F55\uFF0C\u4E0D\u5141\u8BB8\u5BF9\u7236\u8868\u5BF9\u5E94\u5019\u9009\u952E\u8FDB\u884Cupdate\u6216delete\u64CD\u4F5C</li><li><code>Restrict\u65B9\u5F0F</code>\uFF1A\u540Cno action\u65B9\u5F0F\uFF0C\u90FD\u662F\u7ACB\u5373\u68C0\u67E5\u5916\u952E\u7EA6\u675F</li><li><code>Set default\u65B9\u5F0F</code>\uFF1A\u7236\u8868\u6709\u53D8\u66F4\u65F6\uFF0C\u5B50\u8868\u5C06\u5916\u952E\u5217\u8BBE\u7F6E\u6210\u4E00\u4E2A\u9ED8\u8BA4\u503C\uFF0C\u4F46InnoDB\u4E0D\u80FD\u8BC6\u522B</li></ul><p>==\u8BF4\u660E\uFF1A==</p><ul><li><p><strong>\u5982\u679C\u6CA1\u6709\u6307\u5B9A\u7B49\u7EA7\uFF0C\u76F8\u5F53\u4E8ERestrict\u65B9\u5F0F\u3002</strong></p></li><li><p><strong>\u5BF9\u4E8E\u5916\u952E\u7EA6\u675F\uFF0C\u6700\u597D\u662F\u91C7\u7528<code>ON UPDATE CASCADE ON DELETE RESTRICt</code>\u7684\u65B9\u5F0F\uFF1A</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE \u4ECE\u8868\u540D(
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B,
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B,
	...
	[CONSTRAINT \u7EA6\u675F\u540D] FOREIGN KEY (\u4ECE\u8868\u5B57\u6BB5\u540D) REFERENCES \u4E3B\u8868(\u4E3B\u8868\u5B57\u6BB5\u5217\u8868) ON UPDATE CASCADE ON DELETE RESTRICT 
);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul><h4 id="_12-6-7-\u5F00\u53D1\u4E2D\u7684\u5E38\u89C1\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_12-6-7-\u5F00\u53D1\u4E2D\u7684\u5E38\u89C1\u95EE\u9898" aria-hidden="true">#</a> 12.6.7 \u5F00\u53D1\u4E2D\u7684\u5E38\u89C1\u95EE\u9898</h4><ul><li><p><code>\u95EE\u98981</code>\uFF1A\u5982\u679C\u4E24\u4E2A\u8868\u4E4B\u95F4\u6709\u5173\u8054\u5173\u7CFB\uFF0C\u5982\u5458\u5DE5\u8868\u548C\u90E8\u95E8\u8868\uFF0C\u662F\u5426\u4E00\u5B9A\u8981\u5EFA\u5916\u952E\u7EA6\u675F\uFF1F</p><p><code>\u7B54\uFF1A</code>\u4E0D\u4E00\u5B9A</p></li><li><p><code>\u95EE\u98982</code>\uFF1A\u5EFA\u548C\u4E0D\u5EFA\u5916\u952E\u7EA6\u675F\u6709\u4EC0\u4E48\u533A\u522B\uFF1F</p><p><code>\u7B54\uFF1A</code>\u2460\u521B\u5EFA\u5916\u952E\u7EA6\u675F\uFF0C\u521B\u5EFA\u8868\u3001\u5220\u9664\u8868\u3001\u6DFB\u52A0\u8BB0\u5F55\u3001\u4FEE\u6539\u8BB0\u5F55\u3001\u5220\u9664\u8BB0\u5F55\u4F1A\u5728<strong>\u8BED\u6CD5</strong>\u65B9\u9762\u53D7\u5230\u9650\u5236\u3002\u6BD4\u5982\uFF0C\u5728\u5458\u5DE5\u8868\u4E2D\u6DFB\u52A0\u5458\u5DE5\u65F6\uFF0C\u8BE5\u5458\u5DE5\u6240\u5728\u7684\u90E8\u95E8\u4E0D\u5141\u8BB8\u5728\u90E8\u95E8\u8868\u4E2D\u627E\u4E0D\u5230\uFF1B\u2461\u4E0D\u521B\u5EFA\u5916\u952E\u7EA6\u675F\uFF0C\u521B\u5EFA\u8868\u3001\u5220\u9664\u8868\u3001\u6DFB\u52A0\u8BB0\u5F55\u3001\u4FEE\u6539\u8BB0\u5F55\u3001\u5220\u9664\u8BB0\u5F55\u4E0D\u4F1A\u53D7\u5230\u9650\u5236\u3002\u4F46\u662F\u8981\u4FDD\u8BC1\u6570\u636E\u7684<strong>\u5F15\u7528\u5B8C\u6574\u6027</strong>\uFF0C\u53EA\u80FD\u4F9D\u9760<strong>\u7A0B\u5E8F\u5458\u7684\u81EA\u89C9</strong>\uFF08\u4F46\u81EA\u89C9\u4E00\u822C\u90FD\u6CA1\u7528\uFF09\uFF0C\u6216\u8005<strong>\u5728Java\u7A0B\u5E8F\u4E2D\u8FDB\u884C\u9650\u5B9A</strong>\u3002</p></li><li><p><code>\u95EE\u98983</code>\uFF1A\u5EFA\u548C\u4E0D\u5EFA\u5916\u952E\u7EA6\u675F\u548C\u67E5\u8BE2\u6709\u6CA1\u6709\u5173\u7CFB\uFF1F</p><p><code>\u7B54\uFF1A</code>\u6CA1\u6709</p></li></ul><blockquote><p>\u5C0F\u7ED3\uFF1A</p></blockquote><p>\u5728 MySQL \u91CC\uFF0C<strong>\u5916\u952E\u7EA6\u675F</strong>\u662F\u6709\u6210\u672C\u7684\uFF0C\u9700\u8981\u6D88\u8017\u7CFB\u7EDF\u8D44\u6E90**\u3002\u5BF9\u4E8E\u5927\u5E76\u53D1\u7684 SQL \u64CD\u4F5C\uFF0C\u6709\u53EF\u80FD\u4F1A\u4E0D\u9002 \u5408**\u3002\u6BD4\u5982\u5927\u578B\u7F51\u7AD9\u7684\u4E2D\u592E\u6570\u636E\u5E93\uFF0C\u53EF\u80FD\u4F1A \u56E0\u4E3A\u5916\u952E\u7EA6\u675F\u7684\u7CFB\u7EDF\u5F00\u9500\u800C\u53D8\u5F97\u975E\u5E38\u6162 \u3002\u6240\u4EE5\uFF0C <strong>MySQL \u5141\u8BB8\u4E0D\u4F7F\u7528\u7CFB\u7EDF\u81EA\u5E26\u7684\u5916\u952E\u7EA6\u675F\uFF0C\u5728 \u5E94\u7528\u5C42\u9762\u5B8C\u6210\u68C0\u67E5\u6570\u636E\u4E00\u81F4\u6027\u7684\u903B\u8F91</strong>\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5373\u4F7F\u4F60\u4E0D \u7528\u5916\u952E\u7EA6\u675F\uFF0C\u4E5F\u8981\u60F3\u529E\u6CD5\u901A\u8FC7\u5E94\u7528\u5C42\u9762\u7684\u9644\u52A0\u903B\u8F91\uFF0C\u6765\u5B9E\u73B0\u5916\u952E\u7EA6\u675F\u7684\u529F\u80FD\uFF0C\u786E\u4FDD\u6570\u636E\u7684\u4E00\u81F4\u6027\u3002</p><h4 id="_12-6-8-\u963F\u91CC\u5F00\u53D1\u89C4\u8303" tabindex="-1"><a class="header-anchor" href="#_12-6-8-\u963F\u91CC\u5F00\u53D1\u89C4\u8303" aria-hidden="true">#</a> 12.6.8 \u963F\u91CC\u5F00\u53D1\u89C4\u8303</h4><p>\u3010<strong>\u5F3A\u5236</strong>\u3011\u4E0D\u5F97\u4F7F\u7528\u5916\u952E\u4E0E\u7EA7\u8054\uFF0C\u4E00\u5207\u5916\u952E\u6982\u5FF5\u5FC5\u987B\u5728\u5E94\u7528\u5C42\u89E3\u51B3\u3002</p><p>\u8BF4\u660E\uFF1A\uFF08\u6982\u5FF5\u89E3\u91CA\uFF09\u5B66\u751F\u8868\u4E2D\u7684 student_id \u662F\u4E3B\u952E\uFF0C\u90A3\u4E48\u6210\u7EE9\u8868\u4E2D\u7684 student_id \u5219\u4E3A\u5916\u952E\u3002\u5982\u679C\u66F4\u65B0\u5B66\u751F\u8868\u4E2D\u7684 student_id\uFF0C\u540C\u65F6\u89E6\u53D1\u6210\u7EE9\u8868\u4E2D\u7684 student_id \u66F4\u65B0\uFF0C\u5373\u4E3A<strong>\u7EA7\u8054\u66F4\u65B0</strong>\u3002\u5916\u952E\u4E0E\u7EA7\u8054\u66F4\u65B0\u9002\u7528\u4E8E<strong>\u5355\u673A\u4F4E\u5E76\u53D1</strong> \uFF0C\u4E0D\u9002\u5408<strong>\u5206\u5E03\u5F0F</strong>\u3001 <strong>\u5E76\u53D1\u96C6\u7FA4</strong>\uFF1B<em>\u7EA7\u8054</em>\u66F4\u65B0\u662F<strong>\u5F3A\u963B\u585E</strong>\uFF0C\u5B58\u5728\u6570\u636E\u5E93<strong>\u66F4\u65B0\u98CE\u66B4</strong> \u7684\u98CE\u9669\uFF1B<em>\u5916\u952E</em>\u5F71\u54CD\u6570\u636E\u5E93\u7684<strong>\u63D2\u5165\u901F\u5EA6</strong> \u3002</p><h3 id="_12-7-\u68C0\u67E5\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-7-\u68C0\u67E5\u7EA6\u675F" aria-hidden="true">#</a> 12.7 \u68C0\u67E5\u7EA6\u675F</h3><h4 id="_12-7-1-\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#_12-7-1-\u4F5C\u7528" aria-hidden="true">#</a> 12.7.1 \u4F5C\u7528</h4><p><strong>\u68C0\u67E5\u67D0\u4E2A\u5B57\u6BB5\u7684\u503C\u662F\u5426\u7B26\u5408\u6307\u5B9A\u8981\u6C42</strong>\u3002\u4E00\u822C\u6307\u7684\u662F\u503C\u7684\u8303\u56F4</p><p>\u68C0\u67E5\u7EA6\u675F\u5728MySQL8.0\u4E2D\u624D\u5F00\u59CB\u6709\u4F5C\u7528\uFF08MySQL5.7\u4E2D\u5DF2\u5B58\u5728\uFF0C\u4F46\u662F\u6CA1\u6709\u8D77\u4F5C\u7528\uFF09\u3002</p><h4 id="_12-7-2-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_12-7-2-\u5173\u952E\u5B57" aria-hidden="true">#</a> 12.7.2 \u5173\u952E\u5B57</h4><p><strong>CHECK</strong></p><h4 id="_12-7-3-\u6DFB\u52A0\u68C0\u67E5\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-7-3-\u6DFB\u52A0\u68C0\u67E5\u7EA6\u675F" aria-hidden="true">#</a> 12.7.3 \u6DFB\u52A0\u68C0\u67E5\u7EA6\u675F</h4><blockquote><p>\u65B9\u5F0F\u4E00\uFF1A\u5728\u5EFA\u8868\u65F6\u6DFB\u52A0\u7EA6\u675F</p></blockquote><ul><li><p>\u5217\u7EA7\u7EA6\u675F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE \u8868\u540D(
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B,
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B,
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B CHECK(\u5B57\u6BB5\u503C\u9700\u8981\u6EE1\u8DB3\u7684\u6761\u4EF6)
    ...
);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li><li><p>\u8868\u7EA7\u7EA6\u675F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE \u8868\u540D(
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B,
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B,
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B,
	...
	CONSTRAINT \u7EA6\u675F\u540D CHECK(\u5B57\u6BB5\u503C\u9700\u8981\u6EE1\u8DB3\u7684\u6761\u4EF6)
);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul><blockquote><p>\u65B9\u5F0F2\uFF1A\u5EFA\u8868\u540E\u6DFB\u52A0\u7EA6\u675F</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D ADD CONSTRAINT \u7EA6\u675F\u540D CHECK(\u5B57\u6BB5\u503C\u9700\u8981\u6EE1\u8DB3\u7684\u6761\u4EF6);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><code>\u4F8B1</code>\uFF1Asalary\u4E0D\u5F97\u5C0F\u4E8E2000</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE test_check1(
	id INT,
	\`name\` VARCHAR(15),
	salary DECIMAL(10, 2) CHECK(salary &gt; 2000)
);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>\u4F8B2</code>\uFF1Asex\u53EA\u80FD\u662F\u7537\u6216\u5973</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE test_check3(
	id INT,
	\`name\` VARCHAR(15),
	sex CHAR,
    CONSTRAINT ck_tc3_sex CHECK(sex in(&#39;\u7537&#39;,&#39;\u5973&#39;))
);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_12-7-4-\u5220\u9664\u68C0\u67E5\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-7-4-\u5220\u9664\u68C0\u67E5\u7EA6\u675F" aria-hidden="true">#</a> 12.7.4 \u5220\u9664\u68C0\u67E5\u7EA6\u675F</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u2460 \u67E5\u8BE2\u7EA6\u675F\u540D
SELECT * FROM information_schema.TABLE_CONSTRAINTS WHERE table_name = &#39;\u8868\u540D&#39;
# \u2461 \u5220\u9664\u68C0\u67E5\u7EA6\u675F
ALTER TABLE \u8868\u540D DROP CONSTRAINT \u7EA6\u675F\u540D;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_12-8-\u9ED8\u8BA4\u503C\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-8-\u9ED8\u8BA4\u503C\u7EA6\u675F" aria-hidden="true">#</a> 12.8 \u9ED8\u8BA4\u503C\u7EA6\u675F</h3><h4 id="_12-8-1-\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#_12-8-1-\u4F5C\u7528" aria-hidden="true">#</a> 12.8.1 \u4F5C\u7528</h4><p><strong>\u4E3A\u7ED9\u5B9A\u5B57\u6BB5\u6307\u5B9A\u9ED8\u8BA4\u503C</strong>\u3002\u63D2\u5165\u6570\u636E\u65F6\uFF0C\u5982\u679C\u8BE5\u5B57\u6BB5\u6CA1\u6709\u663E\u793A\u8D4B\u503C\uFF0C\u5219\u8D4B\u503C\u4E3A\u9ED8\u8BA4\u503C</p><h4 id="_12-8-2-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_12-8-2-\u5173\u952E\u5B57" aria-hidden="true">#</a> 12.8.2 \u5173\u952E\u5B57</h4><p><strong>DEFAULT</strong></p><h4 id="_12-8-3-\u7279\u70B9" tabindex="-1"><a class="header-anchor" href="#_12-8-3-\u7279\u70B9" aria-hidden="true">#</a> 12.8.3 \u7279\u70B9</h4><ul><li>\u5728\u5EFA\u8868\u540E\u7ED9\u5B57\u6BB5<strong>\u6DFB\u52A0</strong>\u9ED8\u8BA4\u503C\u7EA6\u675F\u65F6\uFF0C<strong>\u5982\u679C\u8BE5\u5B57\u6BB5\u539F\u6709NOT NULL\u7EA6\u675F\uFF0C\u5E76\u4E14\u4ECD\u65E7\u60F3\u4FDD\u7559NOT NULL\uFF0C\u90A3\u4E48\u9700\u8981\u5728MODIFY\u8BED\u53E5\u4E2D\u4FDD\u7559\u975E\u7A7A\u7EA6\u675F</strong></li><li>\u5728\u5EFA\u8868\u540E\u5C06\u5B57\u6BB5\u7684\u9ED8\u8BA4\u503C\u7EA6\u675F<strong>\u5220\u9664</strong>\u65F6\uFF0C<strong>\u5982\u679C\u8BE5\u5B57\u6BB5\u539F\u6709NOT NULL\u7EA6\u675F\uFF0C\u5E76\u4E14\u4ECD\u65E7\u60F3\u4FDD\u7559NOT NULL\uFF0C\u90A3\u4E48\u9700\u8981\u5728MODIFY\u8BED\u53E5\u4E2D\u4FDD\u7559\u975E\u7A7A\u7EA6\u675F</strong></li></ul><h4 id="_12-8-4-\u6DFB\u52A0\u9ED8\u8BA4\u503C\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-8-4-\u6DFB\u52A0\u9ED8\u8BA4\u503C\u7EA6\u675F" aria-hidden="true">#</a> 12.8.4 \u6DFB\u52A0\u9ED8\u8BA4\u503C\u7EA6\u675F</h4><blockquote><p>\u65B9\u5F0F1\uFF1A\u5EFA\u8868\u65F6\u6DFB\u52A0\u9ED8\u8BA4\u503C\u7EA6\u675F</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE \u8868\u540D(
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B,
	\u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B DEFAULT \u9ED8\u8BA4\u503C
    ...
);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>\u65B9\u5F0F2\uFF1A\u5EFA\u8868\u540E\u6DFB\u52A0\u9ED8\u8BA4\u503C\u7EA6\u675F</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D MODIFY \u5B57\u6BB5\u540D \u5B57\u6BB5\u7C7B\u578B DEFAULT \u9ED8\u8BA4\u503C [NOT NULL];
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>==\u8BF4\u660E\uFF1A==</p><ul><li><p>\u5982\u679C\u8BE5\u5B57\u6BB5\u539F\u6765\u6709<strong>\u975E\u7A7A\u7EA6\u675F</strong>\uFF0C\u5E76\u4E14\u5728\u6DFB\u52A0\u9ED8\u8BA4\u503C\u7EA6\u675F\u540E\u8FD8\u60F3<strong>\u4FDD\u7559\u975E\u7A7A\u7EA6\u675F</strong>\uFF0C\u5219\u9700\u8981\u5728MODIFY\u8BED\u53E5\u4E2D\u4FDD\u7559\u975E\u7A7A\u7EA6\u675F</p></li><li><p>\u540C\u7406\uFF0C\u5982\u679C\u67D0\u5B57\u6BB5\u539F\u6709<strong>\u9ED8\u8BA4\u503C\u7EA6\u675F</strong>\uFF0C\u5E76\u4E14\u60F3\u5728\u6DFB\u52A0\u975E\u7A7A\u7EA6\u675F\u540E\u8FD8\u60F3<strong>\u4FDD\u7559\u9ED8\u8BA4\u503C\u7EA6\u675F</strong>\uFF0C\u5219\u9700\u8981\u5728MODIFY\u8BED\u53E5\u4E2D\u4FDD\u7559\u9ED8\u8BA4\u503C\u7EA6\u675F\u3002</p><p>\u8FD9\u5C31\u662F\u4EE5\u5982\u4E0B\u4EE3\u7801\u62A5\u9519\u7684\u539F\u56E0\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE test_default2(
	id INT,
	\`name\` VARCHAR(15),
	sex CHAR NOT NULL
);
DESC test_default2;
# \u63D2\u5165\u62A5\u9519\uFF1AField &#39;sex&#39; doesn&#39;t have a default value
INSERT INTO test_default2(id, \`name\`) VALUES(1, &#39;Tom&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul><h4 id="_12-8-5-\u5220\u9664\u9ED8\u8BA4\u503C\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#_12-8-5-\u5220\u9664\u9ED8\u8BA4\u503C\u7EA6\u675F" aria-hidden="true">#</a> 12.8.5 \u5220\u9664\u9ED8\u8BA4\u503C\u7EA6\u675F</h4><ul><li>\u5982\u679C\u8BE5\u5B57\u6BB5\u539F\u6709\u975E\u7A7A\u7EA6\u675F\uFF0C\u53EA\u9700\u5220\u9664\u9ED8\u8BA4\u503C\u7EA6\u675F\u65F6\uFF0C\u9700\u8981\u4FDD\u7559\u539F\u6709\u975E\u7A7A\u7EA6\u675F\uFF1A</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D MODIFY \u5B57\u6BB5\u503C \u5B57\u6BB5\u7C7B\u578B NOT NULL;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>\u5220\u9664\u5B57\u6BB5\u503C\u7684\u9ED8\u8BA4\u7EA6\u675F\u7684\u540C\u65F6\uFF0C\u4E5F\u5220\u9664\u5176\u975E\u7A7A\u7EA6\u675F\uFF1A</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER TABLE \u8868\u540D MODIFY \u5B57\u6BB5\u503C \u5B57\u6BB5\u7C7B\u578B;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_13-\u89C6\u56FE" tabindex="-1"><a class="header-anchor" href="#_13-\u89C6\u56FE" aria-hidden="true">#</a> 13 \u89C6\u56FE</h2><h3 id="_13-1-\u5E38\u89C1\u7684\u6570\u636E\u5E93\u5BF9\u8C61" tabindex="-1"><a class="header-anchor" href="#_13-1-\u5E38\u89C1\u7684\u6570\u636E\u5E93\u5BF9\u8C61" aria-hidden="true">#</a> 13.1 \u5E38\u89C1\u7684\u6570\u636E\u5E93\u5BF9\u8C61</h3><table><thead><tr><th>\u5BF9\u8C61</th><th>\u63CF\u8FF0</th></tr></thead><tbody><tr><td>\u8868\uFF08TABLE\uFF09</td><td>\u8868\u662F\u5B58\u50A8\u6570\u636E\u7684\u903B\u8F91\u5355\u5143\uFF0C\u4EE5\u884C\u548C\u5217\u7684\u5F62\u5F0F\u5B58\u5728\u3002\u5217\u5C31\u662F\u5B57\u6BB5\uFF0C\u884C\u5C31\u662F\u8BB0\u5F55</td></tr><tr><td>\u6570\u636E\u5B57\u5178</td><td>\u5C31\u662F\u7CFB\u7EDF\u8868\uFF0C\u5B58\u653E\u6570\u636E\u5E93\u76F8\u5173\u4FE1\u606F\u7684\u8868\u3002\u7CFB\u7EDF\u8868\u7684\u6570\u636E\u901A\u5E38\u7531\u6570\u636E\u5E93\u7CFB\u7EDF\u7EF4\u62A4\uFF0C\u7A0B\u5E8F\u5458\u4E00\u822C\u4E0D\u53EF\u4FEE\u6539\uFF0C\u53EA\u80FD\u67E5\u770B</td></tr><tr><td>\u7EA6\u675F\uFF08CONSTRAINT\uFF09</td><td>\u6267\u884C\u6570\u636E\u6821\u9A8C\u7684\u89C4\u5219\uFF0C\u7528\u4E8E\u4FDD\u8BC1\u6570\u636E\u7684\u5B8C\u6574\u6027</td></tr><tr><td>\u89C6\u56FE\uFF08VIEW\uFF09</td><td>\u4E00\u4E2A\u6216\u8005\u591A\u4E2A\u6570\u636E\u8868\u91CC\u7684\u6570\u636E\u7684\u903B\u8F91\u663E\u793A\uFF0C\u89C6\u56FE\u672C\u8EAB\u5E76\u4E0D\u5B58\u50A8\u6570\u636E</td></tr><tr><td>\u7D22\u5F15\uFF08INDEX\uFF09</td><td>\u7528\u4E8E\u63D0\u9AD8\u67E5\u8BE2\u6027\u80FD\uFF0C\u76F8\u5F53\u4E8E\u4E66\u7684\u76EE\u5F55</td></tr><tr><td>\u5B58\u50A8\u8FC7\u7A0B\uFF08PROCEDURE\uFF09</td><td>\u7528\u4E8E\u5B8C\u6210\u4E00\u6B21\u5B8C\u6574\u7684\u4E1A\u52A1\u5904\u7406\uFF0C\u6CA1\u6709\u8FD4\u56DE\u503C\u3002\u4F46\u53EF\u4EE5\u901A\u8FC7\u4F20\u51FA\u53C2\u6570\u5C06\u591A\u4E2A\u503C\u4F20\u7ED9\u8C03\u7528\u73AF\u5883</td></tr><tr><td>\u5B58\u50A8\u51FD\u6570\uFF08FUNCTION\uFF09</td><td>\u7528\u4E8E\u5B8C\u6210\u4E00\u6B21\u7279\u5B9A\u7684\u8BA1\u7B97\uFF0C\u5177\u6709\u4E00\u4E2A\u8FD4\u56DE\u503C</td></tr><tr><td>\u89E6\u53D1\u5668\uFF08TRIGGER\uFF09</td><td>\u76F8\u5F53\u4E8E\u4E00\u4E2A\u4E8B\u4EF6\u76D1\u542C\u5668\uFF0C\u5F53\u6570\u636E\u5E93\u53D1\u751F\u7279\u5B9A\u4E8B\u4EF6\u540E\uFF0C\u89E6\u53D1\u5668\u88AB\u89E6\u53D1\uFF0C\u5B8C\u6210\u76F8\u5E94\u7684\u5904\u7406</td></tr></tbody></table><h3 id="_13-2-\u89C6\u56FE\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_13-2-\u89C6\u56FE\u6982\u8FF0" aria-hidden="true">#</a> 13.2 \u89C6\u56FE\u6982\u8FF0</h3><ul><li>\u89C6\u56FE\u662F\u4E00\u4E2A<strong>\u865A\u62DF\u8868</strong>\uFF0C\u672C\u8EAB<strong>\u4E0D\u5B58\u50A8\u6570\u636E</strong>\uFF0C\u5360\u7528\u5F88\u5C11\u7684\u5185\u5B58\u7A7A\u95F4</li><li><strong>\u89C6\u56FE\u5EFA\u7ACB\u5728\u5DF2\u6709\u8868\u7684\u57FA\u7840\u4E0A</strong>\uFF0C\u89C6\u56FE\u8D56\u4EE5\u5EFA\u7ACB\u7684\u8868\u88AB\u79F0\u4E3A<strong>\u57FA\u8868</strong></li><li>\u89C6\u56FE\u7684\u521B\u5EFA\u548C\u5220\u9664\u53EA\u5F71\u54CD\u89C6\u56FE\u672C\u8EAB\uFF0C\u4E0D\u5F71\u54CD\u5BF9\u5E94\u7684\u57FA\u8868</li><li>\u9488\u5BF9\u89C6\u56FE\u4E2D\u7684\u6570\u636E\u505ADML\u64CD\u4F5C\uFF0C\u4F1A\u5F71\u54CD\u5230\u5BF9\u5E94\u7684\u57FA\u8868\u4E2D\u7684\u6570\u636E\u3002\u53CD\u4E4B\u4EA6\u7136</li><li><strong>\u89C6\u56FE\u7684\u5E94\u7528\u573A\u666F</strong>\uFF1A\u9488\u5BF9\u4E8E\u5C0F\u578B\u9879\u76EE\uFF0C\u4E0D\u63A8\u8350\u4F7F\u7528\u89C6\u56FE\u3002\u9488\u5BF9\u4E8E\u5927\u578B\u9879\u76EE\uFF0C\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u89C6\u56FE</li><li><strong>\u89C6\u56FE\u7684\u4F18\u70B9</strong>\uFF1A\u7B80\u5316\u67E5\u8BE2; \u63A7\u5236\u6570\u636E\u7684\u8BBF\u95EE</li></ul><h3 id="_13-3-\u521B\u5EFA\u89C6\u56FE" tabindex="-1"><a class="header-anchor" href="#_13-3-\u521B\u5EFA\u89C6\u56FE" aria-hidden="true">#</a> 13.3 \u521B\u5EFA\u89C6\u56FE</h3><h4 id="_13-3-1-\u5B8C\u6574\u8BED\u6CD5" tabindex="-1"><a class="header-anchor" href="#_13-3-1-\u5B8C\u6574\u8BED\u6CD5" aria-hidden="true">#</a> 13.3.1 \u5B8C\u6574\u8BED\u6CD5</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE [OR REPLACE]
[ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}]
VIEW \u89C6\u56FE\u540D\u79F0 [(\u5B57\u6BB5\u5217\u8868)]
AS 
\u67E5\u8BE2\u8BED\u53E5
[WITH [CASCADED|LOCAL] CHECK OPTION]
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>==\u8BF4\u660E\uFF1A==</p><ul><li><p><code>OR REPLACE</code>\uFF1A\u8868\u793A<strong>\u5982\u679C\u6CA1\u6709\u5C31\u521B\u5EFA\uFF0C\u5982\u679C\u6709\u5C31\u4FEE\u6539</strong></p></li><li><p><code>ALGORITHM</code>\uFF08\u4E86\u89E3\uFF09\uFF1A\u5B83\u8868\u793A<strong>\u4F7F\u7528\u4F55\u79CD\u7B97\u6CD5\u6765\u5904\u7406\u89C6\u56FE</strong>\u3002\u662FMySQL\u5BF9\u6807\u51C6SQL\u8FDB\u884C\u7684\u529F\u80FD\u6269\u5C55\u3002</p><p>ALGORITHM\u6709\u5982\u4E0B3\u4E2A\u503C\u53EF\u9009\uFF1A</p><ul><li><p><code>MERGE</code>\uFF1A\u4F1A\u5C06\u5F15\u7528\u89C6\u56FE\u7684\u8BED\u53E5\u7684\u6587\u672C\u4E0E\u89C6\u56FE\u5B9A\u4E49\u5408\u5E76\u8D77\u6765\uFF0C\u4F7F\u5F97\u89C6\u56FE\u5B9A\u4E49\u7684\u90E8\u5206\u66FF\u6362\u8BED\u53E5\u7684\u76F8\u5E94\u90E8\u5206</p><p>\u4F8B\u5B50\u5982\u4E0B\uFF1A</p><ul><li><p>\u2460 \u521B\u5EFA\u89C6\u56FE</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE ALGORITHM = MERGE VIEW v_merge (vc1, vc2) 
AS
SELECT c1, c2 FROM t WHERE c3 &gt; 100;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>\u2461 \u4F7F\u7528\u89C6\u56FE\u8FDB\u884C\u67E5\u8BE2</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT * FROM v_merge WHERE vc1 &lt; 100;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>\u2462 \u6700\u7EC8\u6267\u884C\u7684\u8BED\u53E5\u5B9E\u9645\u4E3A\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT c1, c2 FROM t WHERE (c3 &gt; 100) AND (c1 &lt; 100);
# \u6CE8\u610F\uFF1Awhere\u4E2D\u7684\u6761\u4EF6\u662F\u7531(select WHERE)\u548C\uFF08view WHERE\uFF09\u7EC4\u5408\u8D77\u6765\u7684\uFF0C\u91CD\u70B9\u6CE8\u610F\u4E8C\u8005\u5206\u522B\u7528()\u5305\u88F9\u7740\uFF0C\u5E76\u4E14\u4F7F\u7528AND\u8FDE\u63A5
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></li><li><p><code>TEMPTABLE</code>\uFF0C\u89C6\u56FE\u7684\u7ED3\u679C\u5C06\u88AB\u7F6E\u4E8E\u4E34\u65F6\u8868\u4E2D\uFF0C\u7136\u540E\u4F7F\u7528\u5B83\u6267\u884C\u8BED\u53E5</p></li><li><p><code>UNDEFINED</code>\uFF0CMySQL\u9009\u62E9\u4F7F\u7528\u54EA\u79CD\u7B97\u6CD5\u3002\u5982\u679C\u53EF\u80FD\uFF0C\u5B83\u503E\u5411\u4E8E<code>MERGE</code>\u800C\u4E0D\u662F<code>TEMPTABLE</code>\uFF0C\u8FD9\u662F\u56E0\u4E3A<code>MERGE</code>\u901A\u5E38\u66F4\u6709\u6548\uFF0C\u800C\u4E14\u5982\u679C\u4F7F\u7528\u4E86\u4E34\u65F6\u8868\uFF0C\u89C6\u56FE\u662F\u4E0D\u53EF\u66F4\u65B0\u7684\u3002</p></li><li><p>\u5982\u679C\u6CA1\u6709ALGORITHM\u5B50\u53E5\uFF0C\u9ED8\u8BA4\u7B97\u6CD5\u7531\u7CFB\u7EDF\u53D8\u91CF<code>optimizer_switch</code>\u7684<code>derived_merge</code>\u6807\u5FD7\u7684\u503C\u786E\u5B9A\u3002</p></li></ul></li><li><p><code>\u67E5\u8BE2\u8BED\u53E5</code>\uFF1A\u65E2\u53EF\u4EE5\u5728\u8868\u7684\u57FA\u7840\u4E0A\u521B\u5EFA\u89C6\u56FE\uFF0C\u4E5F\u53EF\u4EE5\u5728\u89C6\u56FE\u7684\u57FA\u7840\u4E0A\u521B\u5EFA\u89C6\u56FE</p></li><li><p><code>WITH [CASCADED|LOCAL] CHECK OPTION</code>\uFF1A<strong>\u786E\u4FDD\u89C6\u56FE\u6570\u636E\u7684\u4E00\u81F4\u6027</strong>\u3002\u5373\u5F53\u901A\u8FC7\u89C6\u56FE\u66F4\u65B0\u6216\u63D2\u5165\u57FA\u8868\u7684\u4E00\u884C\u8BB0\u5F55\u65F6\uFF0CMySQL\u90FD\u4F1A\u786E\u4FDD\u63D2\u5165\u6216\u66F4\u65B0\u64CD\u4F5C\u7B26\u5408\u89C6\u56FE\u7684\u5B9A\u4E49\uFF08\u5373\u786E\u4FDD\u8BE5\u8BB0\u5F55\u7B26\u5408\u521B\u5EFA\u89C6\u56FE\u65F6SELECT\u5B57\u53E5\u4E2D\u7684WHERE\u6761\u4EF6\uFF09</p><ul><li><p><code>CASCADED</code>\uFF1A<strong>\u9ED8\u8BA4\u503C</strong>\u3002\u8868\u793AMySQL\u4F1A\u4EE5<strong>\u9012\u5F52</strong>\u65B9\u5F0F\u68C0\u67E5\u89C6\u56FE\u7684\u89C4\u5219\u4EE5\u53CA\u57FA\u7840\u89C6\u56FE\u7684\u89C4\u5219\uFF08\uFF09</p></li><li><p><code>LOCAL</code>\uFF1A<strong>\u5728MySQL 5.7.6\u4E4B\u524D</strong>\uFF0C\u4EC5\u68C0\u67E5\u5F53\u524D\u89C6\u56FE\u7684\u89C4\u5219\uFF0C\u800C\u4E0D\u68C0\u67E5\u57FA\u7840\u89C6\u56FE\u7684\u89C4\u5219\uFF1B<strong>\u5728MySQL 5.7.6\u4E4B\u540E</strong>\uFF0C\u5C06\u68C0\u67E5\u5E26\u6709<code>WITH LOCAL CHECK OPTION</code>\u548C<code>WITH CASCADED CHECK OPTION</code>\u9009\u9879\u7684\u89C6\u56FE\u89C4\u5219\uFF08\u53EA\u68C0\u67E5\u5E26\u6709\u8FD9\u4E24\u4E2A\u9009\u9879\u7684\u89C6\u56FE\u89C4\u5219\uFF09\u3002</p></li><li><p>\u4F8B\u5B50\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># 1.\u5EFA\u8868
DROP TABLE IF EXISTS t1;

CREATE TABLE t1 (
    c INT
);

# 2.\u57FA\u4E8Et1\u8868\u521B\u5EFA\u4E00\u4E2A\u540D\u4E3Av1\u7684\u89C6\u56FE\uFF0C\u4EE5\u9009\u62E9\u503C\u5927\u4E8E10\u7684\u884C\u3002
CREATE OR REPLACE VIEW v1 
AS
    SELECT 
        c
    FROM
        t1
    WHERE
        c &gt; 10; 
				
# 3. \u63D2\u5165\u6210\u529F
INSERT INTO v1(c) VALUES (5); 

# 4.\u57FA\u4E8Ev1\u89C6\u56FE\u521B\u5EFAv2\u89C6\u56FE\u3002\u8FD9\u6B21\uFF0C\u6211\u4EEC\u6DFB\u52A0\u4E00\u4E2AWITH CASCADED CHECK OPTION\u6761\u6B3E\u3002
CREATE OR REPLACE VIEW v2 
AS
    SELECT 
        c
    FROM
        v1 
WITH CASCADED CHECK OPTION; 

# 5.\u63D2\u5165\u5931\u8D25\uFF1ACHECK OPTION failed &#39;dbtest14.v2&#39; ----&gt; \u56E0\u4E3A\u5B83\u521B\u5EFA\u4E86\u4E00\u4E2A\u4E0D\u7B26\u5408v2\u89C6\u56FE\u5B9A\u4E49\u7684\u65B0\u884C\u3002
INSERT INTO v2(c) VALUES (5); 

# 6.\u57FA\u4E8Ev2\u521B\u5EFA\u4E00\u4E2A\u540D\u4E3Av3\u7684\u65B0\u89C6\u56FE
CREATE OR REPLACE VIEW v3 
AS
    SELECT 
        c
    FROM
        v2
    WHERE
        c &lt; 20; 

# 7.\u63D2\u5165\u5931\u8D25\uFF1ACHECK OPTION failed &#39;dbtest14.v3&#39; ----&gt; \u56E0\u4E3Av3\u89C6\u56FE\u4F9D\u8D56\u4E8Ev2\u89C6\u56FE\uFF0C\u800Cv2\u89C6\u56FE\u5177\u6709WITH CASCADED CHECK OPTION\u3002
INSERT INTO v3(c) VALUES (8); 
# \u63D2\u5165\u6210\u529F\uFF1A\u56E0\u4E3A\uFF1A
# 							\u2460v3\u89C6\u56FE\u5B9A\u4E49\u65F6\u6CA1\u6709WITH CHECK OPTION\u9009\u9879\uFF0C\u6240\u4EE5\u4E0D\u4F1A\u5339\u914D33\u662F\u5426\u7B26\u5408v3\u89C6\u56FE\u7684\u5B9A\u4E49\uFF1B
#								\u2461v2\u89C6\u56FE\u5B9A\u4E49\u65F6\u6709WITH CASCADED CHECK OPTION\u9009\u9879\uFF0C\u6B64\u65F6\u9700\u8981\u5339\u914D33\u662F\u5426\u7B26\u5408v2\u89C6\u56FE\u7684\u5B9A\u4E49\uFF0C\u521A\u597D33\u7B26\u5408
#						\u7EFC\u4E0A\uFF0C33\u63D2\u5165\u6210\u529F
INSERT INTO v3(c) VALUES (33); 


# 8.\u6211\u4EEC\u66F4\u6539v2\u89C6\u56FE\u4EE5\u4F7F\u7528WITH LOCAL CHECK OPTION\u66FF\u4EE3\u3002
ALTER VIEW v2 AS
    SELECT 
        c
    FROM
        v1 
WITH CASCADED CHECK OPTION; 

# 9.\u63D2\u5165\u4E0E\u6B65\u9AA45\u76F8\u540C\u7684\u8BB0\u5F55\uFF0C\u63D2\u5165\u6210\u529F\u3002
# 	\u63D2\u5165\u6210\u529F\u539F\u56E0\uFF1A\u56E0\u4E3Av2\u89C6\u56FE\u6CA1\u6709\u4EFB\u4F55\u89C4\u5219\u3002v2\u89C6\u56FE\u53D6\u51B3\u4E8Ev1\u89C6\u56FE\u3002\u4F46\u662F\uFF0Cv1\u89C6\u56FE\u672A\u6307\u5B9A\u68C0\u67E5\u9009\u9879\uFF0C\u56E0\u6B64MySQL\u4F1A\u8DF3\u8FC7\u68C0\u67E5v1\u89C6\u56FE\u4E2D\u7684\u89C4\u5219\u3002
INSERT INTO v2(c) VALUES (5); 

# 10. \u63D2\u5165\u4E0E\u6B65\u9AA45\u76F8\u540C\u7684\u8BB0\u5F55\uFF0C\u63D2\u5165\u6210\u529F\u3002
INSERT INTO v3(c) VALUES (8); 
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div></li></ul></li></ul><h4 id="_13-3-2-\u7CBE\u7B80\u7248\u8BED\u6CD5" tabindex="-1"><a class="header-anchor" href="#_13-3-2-\u7CBE\u7B80\u7248\u8BED\u6CD5" aria-hidden="true">#</a> 13.3.2 \u7CBE\u7B80\u7248\u8BED\u6CD5</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE VIEW \u89C6\u56FE\u540D
AS 
\u67E5\u8BE2\u8BED\u53E5
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><code>\u67E5\u8BE2\u8BED\u53E5</code>\uFF1A\u65E2\u53EF\u4EE5\u5728\u8868\u7684\u57FA\u7840\u4E0A\u521B\u5EFA\u89C6\u56FE\uFF0C\u4E5F\u53EF\u4EE5\u5728\u89C6\u56FE\u7684\u57FA\u7840\u4E0A\u521B\u5EFA\u89C6\u56FE</li></ul><h3 id="_13-4-\u67E5\u770B\u89C6\u56FE\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#_13-4-\u67E5\u770B\u89C6\u56FE\u4FE1\u606F" aria-hidden="true">#</a> 13.4 \u67E5\u770B\u89C6\u56FE\u4FE1\u606F</h3><blockquote><p>\u67E5\u770B\u6570\u636E\u5E93\u7684\u8868\u5BF9\u8C61\u3001\u89C6\u56FE\u5BF9\u8C61</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW TABLES;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>\u770B\u89C6\u56FE\u7684\u7ED3\u6784</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DESC \u89C6\u56FE\u540D;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>\u67E5\u770B\u89C6\u56FE\u7684\u5C5E\u6027\u4FE1\u606F\uFF08\u663E\u793A\u6570\u636E\u8868\u7684\u5B58\u50A8\u5F15\u64CE\u3001\u7248\u672C\u3001\u6570\u636E\u884C\u6570\u548C\u6570\u636E\u5927\u5C0F\u7B49\uFF09</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW TABLE STATUS LIKE &#39;\u89C6\u56FE\u540D&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>\u67E5\u770B\u89C6\u56FE\u7684\u8BE6\u7EC6\u5B9A\u4E49\u4FE1\u606F</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW CREATE VIEW \u89C6\u56FE\u540D;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_13-5-\u66F4\u65B0\u89C6\u56FE\u4E2D\u7684\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_13-5-\u66F4\u65B0\u89C6\u56FE\u4E2D\u7684\u6570\u636E" aria-hidden="true">#</a> 13.5 \u66F4\u65B0\u89C6\u56FE\u4E2D\u7684\u6570\u636E</h3><p>\u4E00\u822C\u60C5\u51B5\u4E0B\uFF0CMySQL\u652F\u6301\u4F7F\u7528<code>INSERT</code>\u3001<code>UPDATE</code>\u548C<code>DELETE</code>\u8BED\u53E5\u5BF9\u89C6\u56FE\u4E2D\u7684\u6570\u636E\u8FDB\u884C\u63D2\u5165\u3001\u66F4\u65B0\u548C\u5220\u9664\u64CD\u4F5C\u3002\u5F53\u89C6\u56FE\u4E2D\u7684\u6570\u636E\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u6570\u636E\u8868\u4E2D\u7684\u6570\u636E\u4E5F\u4F1A\u53D1\u751F\u53D8\u5316\uFF0C\u53CD\u4E4B\u4EA6\u7136\u3002</p><p>\u4F46\u662F\uFF0C<strong>\u5728\u5982\u4E0B\u60C5\u51B5\u4E0B\uFF0C\u89C6\u56FE\u4E2D\u7684\u6570\u636E\u662F\u4E0D\u5141\u8BB8\u66F4\u65B0\u7684</strong>\uFF1A</p><ul><li>\u5728\u5B9A\u4E49\u89C6\u56FE\u65F6\uFF0C\u6307\u5B9A\u4E86<code>ALGORITHM = TEMPTABLE</code>\uFF0C\u8BE5\u89C6\u56FE\u4E0D\u652F\u6301<em>INSERT</em>\u548C <em>DELETE</em>\u64CD\u4F5C</li><li>\u5728\u5B9A\u4E49\u89C6\u56FE\u65F6\uFF0C\u6307\u5B9A\u4E86<code>WITH [CASCADED|LOCAL] CHECK OPTION</code>\uFF0C\u4E14INSERT\u548CUPDATE\u7684\u8BB0\u5F55\u4E0D\u6EE1\u8DB3\u89C6\u56FE\u89C4\u5219\u65F6\uFF0C\u4E0D\u80FD\u66F4\u65B0</li><li>\u89C6\u56FE\u4E2D<strong>\u4E0D\u5305\u542B\u57FA\u8868\u4E2D\u6240\u6709\u88AB\u5B9A\u4E49\u4E3ANOT NULL\u4E14\u53C8\u672A\u6307\u5B9A\u9ED8\u8BA4\u503C\u7684\u5217</strong>\uFF0C\u8BE5\u89C6\u56FE\u4E0D\u652F\u6301<em>INSERT</em>\u64CD\u4F5C</li><li>\u5728\u5B9A\u4E49\u89C6\u56FE\u7684SELECT\u4E2D\u4F7F\u7528\u4E86<code>JOIN\u8054\u5408\u67E5\u8BE2</code>\uFF0C\u8BE5\u89C6\u56FE\u4E0D\u652F\u6301 <em>INSERT</em>\u548C <em>DELETE</em>\u64CD\u4F5C</li><li>\u5728\u5B9A\u4E49\u89C6\u56FE\u7684SELECT\u8BED\u53E5\u540E\u7684<strong>\u5B57\u6BB5\u5217\u8868</strong>\u4E2D\u4F7F\u7528\u4E86<code>\u6570\u5B66\u8868\u8FBE\u5F0F</code>\u6216<code>\u5B50\u67E5\u8BE2</code>\uFF0C\u8BE5\u89C6\u56FE\u4E0D\u652F\u6301<em>INSERT</em>\u64CD\u4F5C\uFF0C\u4E5F\u4E0D\u652F\u6301\u5BF9\u4F7F\u7528\u4E86\u6570\u5B66\u8868\u8FBE\u5F0F\u548C\u5B50\u67E5\u8BE2\u7684\u5B57\u6BB5\u4F7F\u7528<code>UPDATE</code>\u64CD\u4F5C</li><li>\u5728\u5B9A\u4E49\u89C6\u56FE\u7684SELECT\u8BED\u53E5\u540E\u7684<strong>\u5B57\u6BB5\u5217\u8868</strong>\u4E2D\u4F7F\u7528\u4E86<code>DISTINCT</code>\u3001<code>\u805A\u5408\u51FD\u6570</code>\u3001<code>GROUP BY</code>\u3001<code>HAVING</code>\u3001<code>UNION</code>\u7B49</li><li>\u89C6\u56FE\u5B9A\u4E49\u57FA\u4E8E\u4E00\u4E2A<code>\u4E0D\u53EF\u66F4\u65B0\u89C6\u56FE</code></li><li>\u5E38\u91CF\u89C6\u56FE</li></ul><p>==\u7EFC\u4E0A\uFF1A==\u867D\u7136\u53EF\u4EE5\u66F4\u65B0\u89C6\u56FE\u6570\u636E\uFF0C\u4F46\u603B\u7684\u6765\u8BF4\uFF0C\u89C6\u56FE\u4F5C\u4E3A<code>\u865A\u62DF\u8868</code>\uFF0C\u4E3B\u8981\u7528\u4E8E<code>\u65B9\u4FBF\u67E5\u8BE2</code> \uFF0C\u4E0D\u5EFA\u8BAE\u66F4\u65B0\u89C6\u56FE\u7684\u6570\u636E\u3002<strong>\u5BF9\u89C6\u56FE\u6570\u636E\u7684\u66F4\u6539\uFF0C\u90FD\u662F\u901A\u8FC7\u5BF9\u5B9E\u9645\u6570\u636E\u8868\u91CC\u6570\u636E\u7684\u64CD\u4F5C\u6765\u5B8C\u6210\u7684</strong>\u3002</p><h3 id="_13-6-\u4FEE\u6539\u89C6\u56FE" tabindex="-1"><a class="header-anchor" href="#_13-6-\u4FEE\u6539\u89C6\u56FE" aria-hidden="true">#</a> 13.6 \u4FEE\u6539\u89C6\u56FE</h3><blockquote><p>\u4F7F\u7528CREATE OR REPLACE VIEW\u5B50\u53E5\u4FEE\u6539\u89C6\u56FE</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE OR REPLACE VIEW \u89C6\u56FE\u540D
AS
\u67E5\u8BE2\u8BED\u53E5
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>\u4F7F\u7528ALTER VIEW\u5B50\u53E5\u4FEE\u6539\u89C6\u56FE</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER VIEW \u89C6\u56FE\u540D
AS
\u67E5\u8BE2\u8BED\u53E5
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_13-7-\u5220\u9664\u89C6\u56FE" tabindex="-1"><a class="header-anchor" href="#_13-7-\u5220\u9664\u89C6\u56FE" aria-hidden="true">#</a> 13.7 \u5220\u9664\u89C6\u56FE</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DROP VIEW IF EXISTS \u89C6\u56FE\u540D\u79F0[, \u89C6\u56FE\u540D\u79F02, \u89C6\u56FE\u540D\u79F03, ...];
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>==\u8BF4\u660E\uFF1A==</p><ul><li>\u5220\u9664\u7684\u662F\u89C6\u56FE\u672C\u8EAB\uFF0C\u800C\u4E0D\u4F1A\u5220\u9664\u57FA\u8868\u4E2D\u7684\u6570\u636E</li><li>\u5047\u8BBE\u89C6\u56FEc\u662F\u57FA\u4E8E\u89C6\u56FEa\u521B\u5EFA\u7684\uFF0C\u5982\u679C\u5220\u9664\u4E86\u89C6\u56FEa\uFF0C\u4F1A\u5BFC\u81F4\u89C6\u56FEc\u67E5\u8BE2\u5931\u8D25\uFF0C\u6B64\u65F6<strong>\u9700\u8981\u624B\u52A8\u5220\u9664\u89C6\u56FEc</strong>\u3002</li></ul><h3 id="_13-8-\u89C6\u56FE\u7684\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_13-8-\u89C6\u56FE\u7684\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 13.8 \u89C6\u56FE\u7684\u4F18\u7F3A\u70B9</h3><h4 id="_13-8-1-\u89C6\u56FE\u7684\u4F18\u70B9" tabindex="-1"><a class="header-anchor" href="#_13-8-1-\u89C6\u56FE\u7684\u4F18\u70B9" aria-hidden="true">#</a> 13.8.1 \u89C6\u56FE\u7684\u4F18\u70B9</h4><ul><li><p><strong>\u64CD\u4F5C\u7B80\u5355</strong></p><p>\u5C06\u5E38\u7528\u7684\u67E5\u8BE2\u64CD\u4F5C\u5B9A\u4E49\u4E3A\u89C6\u56FE\uFF0C\u53EF\u4EE5\u4F7F\u5F00\u53D1\u4EBA\u5458\u4E0D\u9700\u8981\u5173\u5FC3\u89C6\u56FE\u5BF9\u5E94\u7684\u6570\u636E\u8868\u7ED3\u6784\u3001\u8868\u4E0E\u8868\u4E4B\u95F4\u7684\u5173\u8054\u5173\u7CFB\uFF0C\u53EA\u9700\u8981\u7B80\u5355\u7684\u64CD\u4F5C\u89C6\u56FE\u5373\u53EF\uFF0C\u6781\u5927\u7684\u7B80\u5316\u4E86\u5F00\u53D1\u4EBA\u5458\u5BF9\u6570\u636E\u5E93\u7684\u64CD\u4F5C</p></li><li><p><strong>\u51CF\u5C11\u6570\u636E\u5197\u4F59</strong></p><p>\u89C6\u56FE\u672C\u8EAB\u5C31\u662F\u4E00\u6761\u88AB\u4FDD\u5B58\u8D77\u6765\u7684SELECT\u8BED\u53E5\uFF0C\u672C\u8EAB\u4E0D\u5B58\u50A8\u6570\u636E\uFF0C\u4ECE\u800C\u51CF\u5C11\u4E86\u6570\u636E\u5197\u4F59</p></li><li><p><strong>\u6570\u636E\u5B89\u5168</strong></p><p>\u7528\u6237\u4E0D\u9700\u8981\u67E5\u8BE2\u6570\u636E\u8868\uFF0C\u53EF\u4EE5\u901A\u8FC7\u89C6\u56FE\u83B7\u53D6\u8868\u4E2D\u7684\u6570\u636E\u3002\u6B64\u5916\u8FD8\u53EF\u4EE5\u9650\u5236\u7528\u6237\u5BF9\u89C6\u56FE\u7684\u64CD\u4F5C\u6743\u9650\uFF0C\u4EE5\u4FDD\u8BC1\u6570\u636E\u7684\u5B89\u5168</p></li><li><p><strong>\u9002\u5E94\u7075\u6D3B\u591A\u53D8\u7684\u9700\u6C42</strong></p><p>\u5F53\u4E1A\u52A1\u7CFB\u7EDF\u7684\u9700\u6C42\u53D1\u751F\u53D8\u5316\u540E\uFF0C\u5982\u679C\u9700\u8981\u6539\u52A8\u8868\u7684\u7ED3\u6784\uFF0C\u6B64\u65F6\u5DE5\u4F5C\u91CF\u6BD4\u8F83\u5927\u3002\u5982\u679C\u501F\u52A9\u89C6\u56FE\uFF0C\u5219\u80FD\u51CF\u5C11\u6539\u52A8\u7684\u5DE5\u4F5C\u91CF</p></li><li><p><strong>\u80FD\u591F\u5206\u89E3\u590D\u6742\u7684\u67E5\u8BE2\u903B\u8F91</strong></p><p>\u6570\u636E\u5E93\u4E2D\u5982\u679C\u5B58\u5728\u590D\u6742\u7684\u903B\u8F91\u67E5\u8BE2\uFF0C\u5219\u53EF\u4EE5\u5C06\u95EE\u9898\u5206\u89E3\uFF0C\u521B\u5EFA\u591A\u4E2A\u89C6\u56FE\u83B7\u53D6\u6570\u636E\uFF0C\u5728\u5C06\u521B\u5EFA\u7684\u591A\u4E2A\u89C6\u56FE\u7ED3\u5408\u8D77\u6765\uFF0C\u5B8C\u6210\u590D\u6742\u7684\u903B\u8F91\u67E5\u8BE2</p></li></ul><h4 id="_13-8-2-\u89C6\u56FE\u7684\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_13-8-2-\u89C6\u56FE\u7684\u7F3A\u70B9" aria-hidden="true">#</a> 13.8.2 \u89C6\u56FE\u7684\u7F3A\u70B9</h4><ul><li><p><strong>\u7EF4\u62A4\u6BD4\u8F83\u56F0\u96BE\uFF0C\u53EF\u8BFB\u6027\u4E0D\u597D</strong></p><p>\u5982\u679C\u5728\u5B9E\u9645\u6570\u636E\u8868\u7684\u57FA\u7840\u4E0A\u521B\u5EFA\u4E86\u89C6\u56FE\uFF0C\u4E00\u65E6\u57FA\u8868\u7684\u7ED3\u6784\u53D8\u66F4\uFF0C\u5FC5\u987B\u53CA\u65F6\u5BF9\u76F8\u5173\u89C6\u56FE\u8FDB\u884C\u7EF4\u62A4\uFF0C\u7279\u522B\u662F\u5D4C\u5957\u7684\u89C6\u56FE\uFF0C\u7EF4\u62A4\u53D8\u5F97\u6BD4\u8F83\u590D\u6742\uFF0C\u53EF\u8BFB\u6027\u4E0D\u597D\uFF0C\u5BB9\u6613\u53D8\u6210\u7CFB\u7EDF\u7684\u6F5C\u5728\u9690\u60A3\u3002\u4E14\u521B\u5EFA\u89C6\u56FE\u7684SQL\u67E5\u8BE2\u53EF\u80FD\u4F1A\u5BF9\u5B57\u6BB5\u91CD\u547D\u540D\uFF0C\u4E5F\u53EF\u80FD\u662F\u5305\u542B\u590D\u6742\u7684\u903B\u8F91\uFF0C\u8FD9\u4E9B\u90FD\u4F1A\u589E\u52A0\u7EF4\u62A4\u7684\u6210\u672C\u3002</p></li></ul><h4 id="_13-8-3-\u89C6\u56FE\u7684\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_13-8-3-\u89C6\u56FE\u7684\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 13.8.3 \u89C6\u56FE\u7684\u4F7F\u7528\u573A\u666F</h4><p>\u9488\u5BF9\u4E8E\u5C0F\u578B\u9879\u76EE\uFF0C\u4E0D\u63A8\u8350\u4F7F\u7528\u89C6\u56FE\u3002\u9488\u5BF9\u4E8E\u5927\u578B\u9879\u76EE\uFF0C\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u89C6\u56FE</p><h2 id="_14-\u5B58\u50A8\u8FC7\u7A0B\u4E0E\u5B58\u50A8\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_14-\u5B58\u50A8\u8FC7\u7A0B\u4E0E\u5B58\u50A8\u51FD\u6570" aria-hidden="true">#</a> 14 \u5B58\u50A8\u8FC7\u7A0B\u4E0E\u5B58\u50A8\u51FD\u6570</h2><h3 id="_14-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_14-1-\u6982\u8FF0" aria-hidden="true">#</a> 14.1 \u6982\u8FF0</h3><h4 id="_14-1-1-\u5B58\u50A8\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#_14-1-1-\u5B58\u50A8\u8FC7\u7A0B" aria-hidden="true">#</a> 14.1.1 \u5B58\u50A8\u8FC7\u7A0B</h4><blockquote><p>\u7406\u89E3</p></blockquote><p>\u5B58\u50A8\u8FC7\u7A0B(Stored Procedure)\uFF0C\u5C31\u662F\u4E00\u7EC4\u7ECF\u8FC7<code>\u9884\u5148\u7F16\u8BD1</code>\u7684SQL\u8BED\u53E5\u7684\u5C01\u88C5\u3002\u5B83\u662F\u9884\u5148\u5B58\u50A8\u5728MySQL\u670D\u52A1\u5668\u4E0A\u7684\uFF0C\u9700\u8981\u6267\u884C\u7684\u65F6\u5019\uFF0C\u5BA2\u6237\u7AEF\u53EA\u9700\u8981\u5411\u670D\u52A1\u5668\u7AEF\u53D1\u51FA\u8C03\u7528\u5B58\u50A8\u8FC7\u7A0B\u7684\u547D\u4EE4\uFF0C\u670D\u52A1\u5668\u7AEF\u5C31\u53EF\u4EE5\u628A\u9884\u5148\u5B58\u50A8\u597D\u7684\u4E00\u7CFB\u5217SQL\u8BED\u53E5\u5168\u90E8\u6267\u884C\u3002</p><blockquote><p>\u4F18\u70B9</p></blockquote><ul><li>\u7B80\u5316\u64CD\u4F5C\uFF0C\u63D0\u9AD8\u4E86sql\u8BED\u53E5\u7684\u91CD\u7528\u6027\uFF0C\u51CF\u5C11\u4E86\u5F00\u53D1\u7A0B\u5E8F\u5458\u7684\u538B\u529B</li><li>\u51CF\u5C11\u64CD\u4F5C\u8FC7\u7A0B\u4E2D\u7684\u5931\u8BEF\uFF0C\u63D0\u9AD8\u6548\u7387</li><li>\u51CF\u5C11\u7F51\u7EDC\u4F20\u8F93\u91CF\uFF08\u5BA2\u6237\u7AEF\u4E0D\u9700\u8981\u628A\u6240\u6709\u7684sql\u901A\u8FC7\u7F51\u7EDC\u53D1\u9001\u4E2AMySQL\u670D\u52A1\u5668\uFF09</li><li>\u51CF\u5C11\u4E86SQL\u8BED\u53E5\u66B4\u9732\u5728\u7F51\u4E0A\u7684\u98CE\u9669\uFF0C\u4E5F\u63D0\u9AD8\u4E86\u6570\u636E\u67E5\u8BE2\u7684\u5B89\u5168\u6027</li></ul><blockquote><p>\u548C\u89C6\u56FE\u7684\u5BF9\u6BD4</p></blockquote><ul><li>\u76F8\u540C\u70B9\uFF1A\u5B58\u50A8\u8FC7\u7A0B\u548C\u89C6\u56FE\u6709\u7740\u540C\u6837\u7684\u4F18\u70B9\uFF0C<strong>\u6E05\u6670\u3001\u5B89\u5168\uFF0C\u8FD8\u53EF\u4EE5\u51CF\u5C11\u7F51\u7EDC\u4F20\u8F93\u91CF</strong>\u3002</li><li>\u4E0D\u540C\u70B9\uFF1A <ul><li>\u89C6\u56FE\u662F\u865A\u62DF\u8868\uFF0C\u901A\u5E38\u7528\u6765\u5BF9\u57FA\u8868\u7684\u67E5\u8BE2\u64CD\u4F5C\uFF0C\u4E0D\u7528\u4E8E\u589E\u5220\u6539\u64CD\u4F5C\uFF1B</li><li>\u5B58\u50A8\u8FC7\u7A0B\u53EF\u4EE5\u76F4\u63A5\u64CD\u4F5C\u5E95\u5C42\u6570\u636E\uFF0C\u80FD\u591F\u5B9E\u73B0\u4E00\u4E9B\u590D\u6742\u7684\u6570\u636E\u5904\u7406\u3002</li></ul></li></ul><blockquote><p>\u5B58\u50A8\u8FC7\u7A0B\u7684\u53C2\u6570</p></blockquote><p>\u5B58\u50A8\u8FC7\u7A0B\u7684\u53C2\u6570\u7C7B\u578B\u53EF\u4EE5\uFF1A</p><ul><li><code>IN</code>\uFF1A<strong>\u9ED8\u8BA4\u503C</strong>\u3002\u8868\u793A\u8BE5\u53C2\u6570\u662F\u4F20\u5165\u7684\u53C2\u6570\u3002\u5B58\u50A8\u8FC7\u7A0B\u77E5\u8BC6\u8BFB\u53D6\u8FD9\u4E2A\u53C2\u6570\u7684\u503C\u3002</li><li><code>OUT</code>\uFF1A\u8868\u793A\u8BE5\u53C2\u6570\u662F\u4F20\u51FA\u7684\u53C2\u6570\u3002\u5F53\u5B58\u50A8\u8FC7\u7A0B\u6267\u884C\u5B8C\u6BD5\u540E\uFF0C\u5B58\u50A8\u8FC7\u7A0B\u7684\u5BA2\u6237\u7AEF\u6216\u5E94\u7528\u7A0B\u5E8F\u53EF\u4EE5\u8BFB\u53D6\u8BE5\u53C2\u6570\u7684\u8FD4\u56DE\u503C</li><li><code>INOUT</code>\uFF1A\u8868\u793A\u8BE5\u53C2\u6570\u65E2\u662F\u4F20\u5165\u7684\u53C2\u6570\uFF0C\u53C8\u662F\u4F20\u51FA\u7684\u53C2\u6570\u3002</li></ul><p>\u4EE5\u4E0A\u53C2\u6570\u7C7B\u578B\u90FD\u53EF\u4EE5\u5728\u4E00\u4E2A\u5B58\u50A8\u8FC7\u7A0B\u4E2D\u5E260\u4E2A\u30011\u4E2A\u6216\u8005\u591A\u4E2A\u3002</p><blockquote><p>\u5206\u7C7B</p></blockquote><p><strong>\u5B58\u50A8\u8FC7\u7A0B\u53EF\u4EE5\u6309\u7167\u53C2\u6570\u7C7B\u578B\u8FDB\u884C\u5206\u7C7B\uFF1A</strong></p><ul><li>\u6CA1\u6709\u53C2\u6570</li><li>\u4EC5\u5E26IN\u7C7B\u578B</li><li>\u4EC5\u5E26OUT\u7C7B\u578B</li><li>\u65E2\u5E26IN\u7C7B\u578B\u53C8\u5E26OUT\u7C7B\u578B</li><li>\u5E26OUT\u7C7B\u578B</li></ul><h4 id="_14-1-2-\u5B58\u50A8\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_14-1-2-\u5B58\u50A8\u51FD\u6570" aria-hidden="true">#</a> 14.1.2 \u5B58\u50A8\u51FD\u6570</h4><p>MySQL\u652F\u6301\u81EA\u5B9A\u4E49\u51FD\u6570\uFF0C\u5B9A\u4E49\u597D\u4E4B\u540E\uFF0C\u8C03\u7528\u65B9\u5F0F\u4E0E\u8C03\u7528MySQL\u9884\u5B9A\u4E49\u7684\u7CFB\u7EDF\u51FD\u6570\u4E00\u6837</p><h4 id="_14-1-3-\u5B58\u50A8\u8FC7\u7A0B-vs-\u5B58\u50A8\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_14-1-3-\u5B58\u50A8\u8FC7\u7A0B-vs-\u5B58\u50A8\u51FD\u6570" aria-hidden="true">#</a> 14.1.3 \u5B58\u50A8\u8FC7\u7A0B VS \u5B58\u50A8\u51FD\u6570</h4><table><thead><tr><th></th><th>\u5173\u952E\u5B57</th><th>\u8C03\u7528\u8BED\u6CD5</th><th>\u8FD4\u56DE\u503C</th><th>\u5E94\u7528\u573A\u666F</th></tr></thead><tbody><tr><td>\u5B58\u50A8\u8FC7\u7A0B</td><td>PROCEDURE</td><td>CALL \u5B58\u50A8\u8FC7\u7A0B\u540D(\u53C2\u6570\u5217\u8868)</td><td>\u65E0</td><td>\u4E00\u822C\u7528\u4E8E\u66F4\u65B0</td></tr><tr><td>\u5B58\u50A8\u51FD\u6570</td><td>FUNCTION</td><td>SELECT \u5B58\u50A8\u51FD\u6570\u540D(\u53C2\u6570\u5217\u8868)</td><td>\u53EA\u67091\u4E2A</td><td>\u4E00\u822C\u7528\u4E8E\u67E5\u8BE2\u7ED3\u679C\u4E3A\u4E00\u4E2A\u503C\uFF0C\u5E76\u9700\u8981\u8FD4\u56DE\u7684\u573A\u666F</td></tr></tbody></table><p>\u6B64\u5916\uFF1A</p><ul><li><strong>\u5B58\u50A8\u51FD\u6570\u53EF\u4EE5\u5728\u67E5\u8BE2\u8BED\u53E5\u4E2D\u4F7F\u7528\uFF0C\u5B58\u50A8\u8FC7\u7A0B\u4E0D\u884C</strong>\u3002</li><li>\u5B58\u50A8\u8FC7\u7A0B\u7684\u529F\u80FD\u6BD4\u5B58\u50A8\u51FD\u6570\u66F4\u5F3A\u5927\uFF0C\u80FD\u6267\u884C\u5BF9\u8868\u7684\u64CD\u4F5C\uFF08\u5982\u521B\u5EFA\u8868\u3001\u5220\u9664\u8868\uFF09\u548C\u4E8B\u52A1\u64CD\u4F5C\uFF0C\u8FD9\u4E9B\u529F\u80FD\u5B58\u50A8\u51FD\u6570\u4E0D\u5177\u5907\u3002</li></ul><h3 id="_14-2-\u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#_14-2-\u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B" aria-hidden="true">#</a> 14.2 \u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B</h3><blockquote><p>\u8BED\u6CD5</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DELIMITER \u65B0\u7684\u7ED3\u675F\u6807\u8BB0\uFF08\u5B58\u50A8\u8FC7\u7A0B\u7684\u7ED3\u675F\u6807\u8BB0\uFF09
CREATE PROCEDURE \u5B58\u50A8\u8FC7\u7A0B\u540D(IN|OUT|INOUT \u53C2\u6570\u540D \u53C2\u6570\u7C7B\u578B,...)
[characteristics ...]
BEGIN 
	# \u5B9A\u4E49\u53D8\u91CF
	DECLARE \u53D8\u91CF\u540D \u53D8\u91CF\u7C7B\u578B;
	...
	
	# \u5904\u7406\u903B\u8F91
	...
END \u5B58\u50A8\u8FC7\u7A0B\u7684\u7ED3\u675F\u6807\u8BB0
DELIMITER ;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>==\u8BF4\u660E\uFF1A==</p><ul><li><p><code>DELIMITER</code>\uFF1A\u7528\u6765\u8BBE\u7F6E\u65B0\u7684\u7ED3\u675F\u6807\u8BB0\u3002MySQL\u4E2D\u9ED8\u8BA4\u7684\u8BED\u53E5\u7ED3\u675F\u7B26\u53F7\u662F&quot;;&quot;\u3002\u4E3A\u4E86\u907F\u514D\u4E0E\u5B58\u50A8\u8FC7\u7A0B\u4E2D\u7684SQL\u8BED\u53E5\u7684\u7ED3\u675F\u7B26\u51B2\u7A81\uFF0C\u9700\u8981\u4F7F\u7528DELIMITER\u6539\u53D8\u5B58\u50A8\u8FC7\u7A0B\u7684\u7ED3\u675F\u7B26\u3002</p><ul><li>\u7B2C\u4E00\u4E2ADELIMITER\uFF1A\u7528\u6765\u8868\u660E\u5B58\u50A8\u7684\u7ED3\u675F\u6807\u8BB0\u3002</li><li>\u7B2C\u4E8C\u4E2ADELIMITER\uFF1A\u5C06\u7ED3\u675F\u6807\u8BB0\u6539\u4E3AMySQL\u9ED8\u8BA4\u7684\u5B58\u50A8\u6807\u8BB0\u3002</li></ul><p><strong>\u5E38\u7528\u7684\u65B0\u7684\u7ED3\u675F\u6807\u8BB0\uFF1A</strong><code>$</code>\u3001<code>//</code></p></li><li><p><code>characteristics</code>\uFF1A\u8868\u793A\u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B\u65F6\u6307\u5B9A\u7684\u5BF9\u5B58\u50A8\u8FC7\u7A0B\u7684\u7EA6\u675F\u6761\u4EF6\u3002</p><p><strong>characteristics\u53D6\u503C\u4FE1\u606F\u5982\u4E0B\uFF1A</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>LANGUAGE SQL
| [NOT] DETERMINISTIC
| { CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA }
| SQL SECURITY { DEFINER | INVOKER }
| COMMENT &#39;string&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><code>LANGUAGE SQL</code>\uFF1A\u8BF4\u660E\u5B58\u50A8\u8FC7\u7A0B\u4F53\u662F\u7531SQL\u8BED\u53E5\u7EC4\u6210\u7684\uFF0C\u5F53\u524D\u7CFB\u7EDF\u652F\u6301\u7684\u8BED\u8A00\u662FSQL\u3002</li><li><code>[NOT] DETERMINISTIC</code>\uFF1A\u9ED8\u8BA4\u662F<code>NOT DETERMINISTIC</code>\u3002\u6307\u660E\u5B58\u50A8\u8FC7\u7A0B\u6267\u884C\u7684\u7ED3\u679C\u662F\u5426\u662F\u786E\u5B9A\u7684\uFF0C\u5373\u540C\u4E00\u8F93\u5165\u662F\u5426\u80FD\u5F97\u5230\u76F8\u540C\u7684\u8F93\u51FA\u3002</li><li><code>{ CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA }</code>\uFF1A\u6307\u660E\u5B50\u7A0B\u5E8F\u4F7F\u7528SQL\u8BED\u53E5\u7684\u9650\u5236\u3002 <ul><li><code>CONTAINS SQL</code>\uFF1A<strong>\u9ED8\u8BA4</strong>\u3002\u8868\u793A\u5305\u542BSQL\u8BED\u53E5\uFF0C\u4F46\u662F\u5E76\u4E0D\u5305\u542B\u8BFB\u5199\u6570\u636E\u7684SQL\u8BED\u53E5\uFF1B</li><li><code>NO SQL</code>\uFF1A\u8868\u793A\u4E0D\u5305\u542B\u4EFB\u4F55SQL\uFF1B</li><li><code>READS SQL DATA</code>\uFF1A\u5305\u542B\u8BFB\u6570\u636E\u7684SQL\uFF1B</li><li><code>MODIFIES SQL DATA</code>\uFF1A\u5305\u542B\u5199\u6570\u636E\u7684SQL\u3002</li></ul></li><li><code>SQL SECURITY { DEFINER | INVOKER }</code>\uFF1A\u6307\u660E\u54EA\u4E9B\u7528\u6237\u53EF\u4EE5\u6267\u884C\u5F53\u524D\u5B58\u50A8\u8FC7\u7A0B\u3002 <ul><li><code>DEFINER </code>\uFF1A\u8868\u793A\u53EA\u6709\u521B\u5EFA\u8005\u624D\u80FD\u6267\u884C</li><li><code>INVOKER </code>\uFF1A\u8868\u793A\u6709\u5F53\u524D\u5B58\u50A8\u8FC7\u7A0B\u8BBF\u95EE\u6743\u9650\u7684\u7528\u6237\u90FD\u53EF\u4EE5\u6267\u884C</li></ul></li><li><code>COMMENT &#39;string&#39;</code>\uFF1Astring\u5904\u53EF\u4EE5\u5199\u660E\u8BE5\u5B58\u50A8\u8FC7\u7A0B\u7684\u4E00\u4E9B\u6CE8\u91CA\u4FE1\u606F</li></ul></li><li><p><code>BEGIN ... END \u5B58\u50A8\u8FC7\u7A0B\u4F53\u7ED3\u675F\u7B26</code>\uFF1A\u5B58\u50A8\u8FC7\u7A0B\u7684\u8FC7\u7A0B\u4F53\u8981\u5199\u5728BEGIN ... END \u4E4B\u95F4\u3002</p><p><strong>\u5B58\u50A8\u8FC7\u7A0B\u4F53\u7F16\u5199\u6CE8\u610F\u4E8B\u9879</strong>\uFF1A</p><ul><li>\u5B58\u50A8\u8FC7\u7A0B\u4F53\u5982\u679C\u53EA\u6709\u4E00\u6761SQL\u8BED\u53E5\uFF0CBEGIN ... END\u53EF\u7701\u3002</li><li>\u5B58\u50A8\u8FC7\u7A0B\u4F53\u4E2D\u7684<strong>\u6BCF\u4E2A\u8BED\u53E5\u90FD\u8981\u4EE5&quot;;&quot;\u4F5C\u4E3A\u7ED3\u675F\u7B26</strong>\u3002</li><li><code>DECLARE</code>\u7528\u6765\u58F0\u660E\u53D8\u91CF\uFF0C\u4E14<strong>\u53D8\u91CF\u7684\u58F0\u660E\u5FC5\u987B\u5728\u5176\u4ED6\u8BED\u53E5\u4F7F\u7528\u4E4B\u524D\u8FDB\u884C</strong>\u3002</li><li><code>SET \u53D8\u91CF\u540D = \u503C</code>\u7528\u6765\u5BF9\u53D8\u91CF\u8D4B\u503C\u3002</li><li><code>SELECT ... INTO \u53D8\u91CF\u540D [FROM ... WHERE ...]</code>\u4E5F\u53EF\u4EE5\u5BF9\u53D8\u91CF\u8FDB\u884C\u8D4B\u503C</li></ul></li></ul><blockquote><p>\u4E3E\u4F8B\uFF1A</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DELIMITER $
CREATE PROCEDURE test_proc1(IN emp_id INT)
BEGIN 
	# \u5B9A\u4E49\u53D8\u91CF
	DECLARE emp_year DOUBLE;
	DECLARE emp_sal DOUBLE;
	
	# \u8D4B\u503C
	SELECT DATEDIFF(CURRENT_DATE(), hire_date)/365, salary INTO emp_year, emp_sal
	FROM emps
	WHERE employee_id = emp_id;
	
	# \u4F7F\u7528
	SELECT emp_year, emp_sal;

END $
DELIMITER ;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_14-3-\u8C03\u7528\u5B58\u50A8\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#_14-3-\u8C03\u7528\u5B58\u50A8\u8FC7\u7A0B" aria-hidden="true">#</a> 14.3 \u8C03\u7528\u5B58\u50A8\u8FC7\u7A0B</h3><blockquote><p>\u8BED\u6CD5</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CALL \u5B58\u50A8\u8FC7\u7A0B\u540D(\u53C2\u6570\u5217\u8868)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>\u4F8B\u5B50</p></blockquote><ul><li><p>\u53C2\u6570\u4E3A<code>IN</code>\u7C7B\u578B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CALL sp1(\u503C);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>\u8C03\u7528<code>OUT</code>\u6A21\u5F0F\u7684\u53C2\u6570\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u65B9\u6CD5\u4E00
SET @num = 0; # = \u4E5F\u53EF\u66FF\u6362\u4E3A :=
CALL sp1(@num);
SELECT @num;

# \u65B9\u6CD5\u4E8C
CALL sp1(@num);
SELECT @num;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li><li><p>\u8C03\u7528<code>INOUT</code>\u6A21\u5F0F\u7684\u53C2\u6570\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SET @num = 0; # = \u4E5F\u53EF\u66FF\u6362\u4E3A :=
CALL sp1(@num);
SELECT @num;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul><h3 id="_14-4-\u521B\u5EFA\u5B58\u50A8\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_14-4-\u521B\u5EFA\u5B58\u50A8\u51FD\u6570" aria-hidden="true">#</a> 14.4 \u521B\u5EFA\u5B58\u50A8\u51FD\u6570</h3><blockquote><p>\u8BED\u6CD5</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DELIMITER \u65B0\u7684\u7ED3\u675F\u6807\u8BB0\uFF08\u5B58\u50A8\u8FC7\u7A0B\u7684\u7ED3\u675F\u6807\u8BB0\uFF09
CREATE FUNCTION \u51FD\u6570\u540D(\u53C2\u6570\u540D \u53C2\u6570\u7C7B\u578B,...)
RETURNS \u8FD4\u56DE\u503C\u7C7B\u578B
[characteristics ...]
BEGIN
\u51FD\u6570\u4F53 #\u51FD\u6570\u4F53\u4E2D\u80AF\u5B9A\u6709 RETURN \u8BED\u53E5
END \u65B0\u7684\u7ED3\u675F\u6807\u8BB0
DELIMITER ;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>==\u8BF4\u660E\uFF1A==</p><ul><li>\u5B58\u50A8\u51FD\u6570\u7684\u53C2\u6570\u5217\u8868\uFF0C\u603B\u662F\u9ED8\u8BA4\u4E3A<code>IN</code>\u7C7B\u578B</li><li><code>RETURNS \u8FD4\u56DE\u503C\u7C7B\u578B</code>\u5B58\u50A8\u51FD\u6570\u5FC5\u987B\u6307\u660E\u8FD4\u56DE\u503C\u7C7B\u578B\uFF0C\u51FD\u6570\u4F53\u4E2D\u5FC5\u987B\u5305\u542B\u4E00\u4E2A<code>RETURN \u8FD4\u56DE\u503C;</code>\u8BED\u53E5\u3002</li><li><code>characteristic</code>\u6307\u660E\u5BF9\u51FD\u6570\u7684\u7EA6\u5B9A\uFF0C\u4E0E\u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B\u7684\u7EA6\u675F\u4E00\u81F4\u3002</li><li><code>BEGIN ... END \u65B0\u7684\u7ED3\u675F\u6807\u8BB0</code>\uFF1A\u51FD\u6570\u4F53\u8981\u5199\u5728BEGIN ... END\u4E4B\u95F4\u3002\u5982\u679C\u51FD\u6570\u4F53\u53EA\u6709\u4E00\u6761\u8BED\u53E5\uFF0CBEGIN ... END\u53EF\u7701\u3002</li></ul><blockquote><p>\u4E3E\u4F8B</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u521B\u5EFA\u5B58\u50A8\u51FD\u6570count_by_id()\uFF0C\u53C2\u6570\u4F20\u5165dept_id\uFF0C\u8BE5\u51FD\u6570\u67E5\u8BE2dept_id\u90E8\u95E8\u7684\u5458\u5DE5\u4EBA\u6570\uFF0C\u5E76\u8FD4\u56DE\uFF0C\u6570\u636E\u7C7B\u578B\u4E3A\u6574\u578B
DELIMITER $
CREATE FUNCTION count_by_id(dept_id INT)
RETURNS INT
	DETERMINISTIC
	READS SQL DATA
BEGIN
	DECLARE emps_num INT DEFAULT 0;
	SELECT COUNT(*) INTO emps_num FROM emps WHERE department_id = dept_id;
	RETURN emps_num;
END $
DELIMITER ;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>==\u8BF4\u660E\uFF1A==</p><p>\u5BF9\u4E8E\u521B\u5EFA\u51FD\u6570\u65F6\u62A5\u9519<code>This function has none of DETERMINISTIC, NO SQL, or READS SQL DATA in its declaration and binary logging is enabled (you *might* want to use the less safe log_bin_trust_function_creators variable)</code>\u7684\u5904\u7406\u529E\u6CD5\uFF1A</p><ul><li><p>\u65B9\u5F0F\u4E00\uFF1A</p><p>\u5728\u521B\u5EFA\u51FD\u6570\u65F6\u52A0\u4E0A\u5FC5\u8981\u7684\u51FD\u6570\u7EA6\u675F<code>[NOT] DETERMINISTIC</code>\u548C<code>{CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA}</code></p></li><li><p>\u65B9\u5F0F\u4E8C\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u4FEE\u6539\u5168\u5C40\u53C2\u6570
SET GLOBAL log_bin_trust_function_creators = 1;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul><h3 id="_14-5-\u8C03\u7528\u5B58\u50A8\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_14-5-\u8C03\u7528\u5B58\u50A8\u51FD\u6570" aria-hidden="true">#</a> 14.5 \u8C03\u7528\u5B58\u50A8\u51FD\u6570</h3><blockquote><p>\u8BED\u6CD5</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT \u51FD\u6570\u540D(\u53C2\u6570\u5217\u8868);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_14-6-\u67E5\u770B\u5B58\u50A8\u8FC7\u7A0B\u548C\u5B58\u50A8\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_14-6-\u67E5\u770B\u5B58\u50A8\u8FC7\u7A0B\u548C\u5B58\u50A8\u51FD\u6570" aria-hidden="true">#</a> 14.6 \u67E5\u770B\u5B58\u50A8\u8FC7\u7A0B\u548C\u5B58\u50A8\u51FD\u6570</h3><ul><li><p>\u4F7F\u7528<code>SHOW CREATE</code>\u8BED\u53E5\u67E5\u770B\u5B58\u50A8\u8FC7\u7A0B\u548C\u51FD\u6570\u7684\u521B\u5EFA\u4FE1\u606F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW CREATE {PROCEDURE | FUNCTION} \u5B58\u50A8\u8FC7\u7A0B\u540D\u6216\u51FD\u6570\u540D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>\u4F7F\u7528<code>SHOW STATUS</code>\u8BED\u53E5\u67E5\u770B\u5B58\u50A8\u8FC7\u7A0B\u548C\u51FD\u6570\u7684\u72B6\u6001\u4FE1\u606F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW {PROCEDURE | FUNCTION} STATUS [LIKE &#39;\u6A21\u7CCA\u67E5\u8BE2\u6761\u4EF6&#39;]
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>\u4ECE<code>information_schema.Routines</code>\u8868\u4E2D\u67E5\u770B\u5B58\u50A8\u8FC7\u7A0B\u548C\u51FD\u6570\u7684\u4FE1\u606F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT * 
FROM information_schema.Routines
WHERE ROUTINE_NAME=&#39;\u5B58\u50A8\u8FC7\u7A0B\u6216\u51FD\u6570\u7684\u540D&#39; [AND ROUTINE_TYPE = {&#39;PROCEDURE|FUNCTION&#39;}];
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul><h3 id="_14-7-\u4FEE\u6539\u5B58\u50A8\u8FC7\u7A0B\u548C\u5B58\u50A8\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_14-7-\u4FEE\u6539\u5B58\u50A8\u8FC7\u7A0B\u548C\u5B58\u50A8\u51FD\u6570" aria-hidden="true">#</a> 14.7 \u4FEE\u6539\u5B58\u50A8\u8FC7\u7A0B\u548C\u5B58\u50A8\u51FD\u6570</h3><p>\u4FEE\u6539\u5B58\u50A8\u8FC7\u7A0B\u548C\u5B58\u50A8\u51FD\u6570\uFF0C<strong>\u4E0D\u80FD\u4FEE\u6539\u5176\u5B58\u50A8\u8FC7\u7A0B\u4F53\u6216\u8005\u51FD\u6570\u4F53\uFF0C\u53EA\u80FD\u4FEE\u6539\u76F8\u5173\u7279\u6027</strong>\u3002\u8BED\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ALTER {PROCEDURE | FUNCTION} \u5B58\u50A8\u8FC7\u7A0B\u6216\u51FD\u6570\u7684\u540D [characteristic ...]
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>==\u8BF4\u660E\uFF1A==characteristic\u6307\u5B9A\u5B58\u50A8\u8FC7\u7A0B\u6216\u51FD\u6570\u7684\u7279\u6027\uFF0C\u5176\u53D6\u503C\u4FE1\u606F\u4E0E\u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B\u3001\u51FD\u6570\u65F6\u7684\u53D6\u503C\u4FE1\u606F\u7565\u6709 \u4E0D\u540C\uFF0C\u5176\u53D6\u503C\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>{ CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA }
| SQL SECURITY { DEFINER | INVOKER }
| COMMENT &#39;string&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_14-8-\u5220\u9664\u5B58\u50A8\u8FC7\u7A0B\u548C\u5B58\u50A8\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_14-8-\u5220\u9664\u5B58\u50A8\u8FC7\u7A0B\u548C\u5B58\u50A8\u51FD\u6570" aria-hidden="true">#</a> 14.8 \u5220\u9664\u5B58\u50A8\u8FC7\u7A0B\u548C\u5B58\u50A8\u51FD\u6570</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DROP {PROCEDURE | FUNCTION} [IF EXISTS] \u5B58\u50A8\u8FC7\u7A0B\u6216\u51FD\u6570\u7684\u540D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_14-9-\u5B58\u50A8\u8FC7\u7A0B\u7684\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_14-9-\u5B58\u50A8\u8FC7\u7A0B\u7684\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 14.9 \u5B58\u50A8\u8FC7\u7A0B\u7684\u4F18\u7F3A\u70B9</h3><p>\u5C3D\u7BA1\u5B58\u50A8\u8FC7\u7A0B\u6709\u8BF8\u591A\u4F18\u70B9\uFF0C\u4F46\u662F\u5BF9\u4E8E\u5B58\u50A8\u8FC7\u7A0B\u7684\u4F7F\u7528\uFF0C**\u4E00\u76F4\u90FD\u5B58\u5728\u7740\u5F88\u591A\u4E89\u8BAE\uFF0C**\u6BD4\u5982\u6709\u4E9B\u516C\u53F8\u5BF9\u4E8E\u5927\u578B \u9879\u76EE\u8981\u6C42\u4F7F\u7528\u5B58\u50A8\u8FC7\u7A0B\uFF0C\u800C\u6709\u4E9B\u516C\u53F8\u5728\u624B\u518C\u4E2D\u660E\u786E\u7981\u6B62\u4F7F\u7528\u5B58\u50A8\u8FC7\u7A0B\u3002</p><h4 id="_14-9-1-\u5B58\u50A8\u8FC7\u7A0B\u7684\u4F18\u70B9" tabindex="-1"><a class="header-anchor" href="#_14-9-1-\u5B58\u50A8\u8FC7\u7A0B\u7684\u4F18\u70B9" aria-hidden="true">#</a> 14.9.1 \u5B58\u50A8\u8FC7\u7A0B\u7684\u4F18\u70B9</h4><ul><li><strong>\u4E00\u6B21\u7F16\u8BD1\u591A\u6B21\u4F7F\u7528\uFF0C\u63D0\u9AD8\u4E86SQL\u7684\u6267\u884C\u6548\u7387</strong>\uFF1A\u5B58\u50A8\u8FC7\u7A0B\u53EA\u5728\u521B\u5EFA\u65F6\u8FDB\u884C\u7F16\u8BD1\uFF0C\u4E4B\u540E\u7684\u4F7F\u7528\u90FD\u4E0D\u9700\u8981\u91CD\u65B0\u7F16\u8BD1</li><li><strong>\u51CF\u5C11\u5F00\u53D1\u5DE5\u4F5C\u91CF\uFF0C\u4FDD\u8BC1\u4EE3\u7801\u7ED3\u6784\u6E05\u6670</strong>\uFF1A\u5C06\u4EE3\u7801\u5C01\u88C5\u6210<code>\u6A21\u5757</code>\uFF0C\u6A21\u5757\u95F4\u53EF\u4EE5<code>\u91CD\u590D\u4F7F\u7528</code></li><li><strong>\u5B58\u50A8\u8FC7\u7A0B\u7684\u5B89\u5168\u6027\u5F3A</strong>\uFF1A\u5728\u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B\u65F6<code>\u8BBE\u7F6E\u7528\u6237\u7684\u4F7F\u7528\u6743\u9650</code>\uFF0C\u8FD9\u6837\u5C31\u548C\u89C6\u56FE\u4E00\u6837\u5177\u6709\u8F83\u5F3A\u7684\u5B89\u5168\u6027</li><li><strong>\u51CF\u5C11\u7F51\u7EDC\u4F20\u8F93\u91CF</strong>\uFF1A\u5B58\u50A8\u8FC7\u7A0B\u662F\u4FDD\u5B58\u5728MySQL\u670D\u52A1\u5668\u7AEF\u7684\uFF0C\u6BCF\u6B21\u53EA\u9700\u8981\u8C03\u7528\u5B58\u50A8\u8FC7\u7A0B\u5373\u53EF\uFF0C\u51CF\u5C11\u4E86SQL\u8BED\u53E5\u7684\u7F51\u7EDC\u4F20\u8F93</li><li><strong>\u826F\u597D\u7684\u5C01\u88C5\u6027</strong>\uFF1A\u5728\u8FDB\u884C\u76F8\u5BF9\u590D\u6742\u7684\u6570\u636E\u5E93\u64CD\u4F5C\u65F6\uFF0C\u539F\u672C\u9700\u8981\u4F7F\u7528\u4E00\u6761\u4E00\u6761\u7684SQL\u8BED\u53E5\uFF0C\u53EF\u80FD\u9700\u8981\u591A\u6B21\u8FDE\u63A5\u6570\u636E\u5E93\u3002\u5982\u679C\u4F7F\u7528\u5B58\u50A8\u8FC7\u7A0B\uFF0C\u53EA\u9700\u8981\u8FDE\u63A5\u4E00\u6B21</li></ul><h4 id="_14-9-2-\u5B58\u50A8\u8FC7\u7A0B\u7684\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_14-9-2-\u5B58\u50A8\u8FC7\u7A0B\u7684\u7F3A\u70B9" aria-hidden="true">#</a> 14.9.2 \u5B58\u50A8\u8FC7\u7A0B\u7684\u7F3A\u70B9</h4><p>==\u300A\u963F\u91CC\u5F00\u53D1\u89C4\u8303\u300B\uFF1A\u3010\u5F3A\u5236\u3011\u7981\u6B62\u4F7F\u7528\u5B58\u50A8\u8FC7\u7A0B\uFF0C\u5B58\u50A8\u8FC7\u7A0B\u96BE\u4EE5\u8C03\u8BD5\u548C\u6269\u5C55\uFF0C\u66F4\u6CA1\u6709\u79FB\u690D\u6027\u3002==</p><ul><li><strong>\u53EF\u79FB\u690D\u6027\u5DEE</strong>\uFF1A\u5B58\u50A8\u8FC7\u7A0B\u4E0D\u80FD\u8DE8\u6570\u636E\u5E93\u79FB\u690D\u3002\u5982\u5728 MySQL\u3001Oracle \u548C SQL Server \u91CC\u7F16\u5199\u7684\u5B58\u50A8\u8FC7 \u7A0B\uFF0C\u5728\u6362\u6210\u5176\u4ED6\u6570\u636E\u5E93\u65F6\u90FD\u9700\u8981\u91CD\u65B0\u7F16\u5199\u3002</li><li><strong>\u8C03\u8BD5\u56F0\u96BE</strong>\uFF1A\u5BF9\u4E8E\u590D\u6742\u7684\u5B58\u50A8\u8FC7\u7A0B\uFF0C\u5F00\u53D1\u548C\u7EF4\u62A4\u90FD\u4E0D\u5BB9\u6613\uFF0C\u6CA1\u6709\u597D\u7528\u3001\u514D\u8D39\u7684\u8C03\u8BD5\u5DE5\u5177</li><li><strong>\u5B58\u50A8\u8FC7\u7A0B\u7684\u7248\u672C\u7BA1\u7406\u5F88\u56F0\u96BE</strong>\uFF1A\u6BD4\u5982\u6570\u636E\u8868\u7D22\u5F15\u53D1\u751F\u53D8\u5316\u4E86\uFF0C\u53EF\u80FD\u4F1A\u5BFC\u81F4\u5B58\u50A8\u8FC7\u7A0B\u5931\u6548\u3002\u6211\u4EEC\u5728\u5F00\u53D1 \u8F6F\u4EF6\u7684\u65F6\u5019\u5F80\u5F80\u9700\u8981\u8FDB\u884C\u7248\u672C\u7BA1\u7406\uFF0C\u4F46\u662F\u5B58\u50A8\u8FC7\u7A0B\u672C\u8EAB\u6CA1\u6709\u7248\u672C\u63A7\u5236\uFF0C\u7248\u672C\u8FED\u4EE3\u66F4\u65B0\u7684\u65F6\u5019\u5F88\u9EBB\u70E6</li><li><strong>\u4E0D\u9002\u5408\u9AD8\u5E76\u53D1\u573A\u666F</strong>\uFF1A\u9AD8\u5E76\u53D1\u7684\u573A\u666F\u9700\u8981\u51CF\u5C11\u6570\u636E\u5E93\u7684\u538B\u529B\uFF0C\u6709\u65F6\u6570\u636E\u5E93\u4F1A\u91C7\u7528<code>\u5206\u5E93\u5206\u8868</code>\u7684\u65B9 \u5F0F\uFF0C\u800C\u4E14\u5BF9\u53EF\u6269\u5C55\u6027\u8981\u6C42\u5F88\u9AD8\uFF0C\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u5B58\u50A8\u8FC7\u7A0B\u4F1A\u53D8\u5F97\u96BE\u4EE5\u7EF4\u62A4\uFF0C \u589E\u52A0\u6570\u636E\u5E93\u7684\u538B\u529B \uFF0C\u663E\u7136\u5C31 \u4E0D\u9002\u7528\u4E86</li></ul><h2 id="_15-\u53D8\u91CF\u3001\u6D41\u7A0B\u63A7\u5236\u4E0E\u6E38\u6807" tabindex="-1"><a class="header-anchor" href="#_15-\u53D8\u91CF\u3001\u6D41\u7A0B\u63A7\u5236\u4E0E\u6E38\u6807" aria-hidden="true">#</a> 15 \u53D8\u91CF\u3001\u6D41\u7A0B\u63A7\u5236\u4E0E\u6E38\u6807</h2><h3 id="_15-1-\u53D8\u91CF" tabindex="-1"><a class="header-anchor" href="#_15-1-\u53D8\u91CF" aria-hidden="true">#</a> 15.1 \u53D8\u91CF</h3><p>==\u53D8\u91CF\u7684\u5206\u7C7B\uFF1A==</p><ul><li><p>\u7CFB\u7EDF\u53D8\u91CF</p><ul><li>\u5168\u5C40\u7CFB\u7EDF\u53D8\u91CF</li><li>\u4F1A\u8BDD\u7CFB\u7EDF\u53D8\u91CF\uFF08<strong>\u9ED8\u8BA4</strong>\uFF09</li></ul><p>==\u8BF4\u660E\uFF1A==\u6709\u7684\u53D8\u91CF\uFF0C\u65E2\u662F\u5168\u5C40\u7CFB\u7EDF\u53D8\u91CF\uFF0C\u53C8\u662F\u4F1A\u8BDD\u7CFB\u7EDF\u53D8\u91CF</p></li><li><p>\u7528\u6237\u81EA\u5B9A\u4E49\u53D8\u91CF</p><ul><li>\u4F1A\u8BDD\u7528\u6237\u53D8\u91CF</li><li>\u5C40\u90E8\u53D8\u91CF</li></ul></li></ul><h4 id="_15-1-1-\u7CFB\u7EDF\u53D8\u91CF" tabindex="-1"><a class="header-anchor" href="#_15-1-1-\u7CFB\u7EDF\u53D8\u91CF" aria-hidden="true">#</a> 15.1.1 \u7CFB\u7EDF\u53D8\u91CF</h4><blockquote><p>\u6982\u8FF0</p></blockquote><ul><li>\u5B9A\u4E49\uFF1A\u53D8\u91CF\u7531\u7CFB\u7EDF\u5B9A\u4E49\uFF0C\u4E0D\u662F\u7528\u6237\u5B9A\u4E49\uFF0C\u5C5E\u4E8E\u670D\u52A1\u5668\u5C42\u9762\u3002\u542F\u52A8MySQL\u670D\u52A1\uFF0C\u751F\u6210MySQL\u670D\u52A1\u5B9E\u4F8B\u671F\u95F4\uFF0C MySQL\u5C06\u4E3AMySQL\u670D\u52A1\u5668\u5185\u5B58\u4E2D\u7684\u7CFB\u7EDF\u53D8\u91CF\u8D4B\u503C\uFF0C\u8FD9\u4E9B\u7CFB\u7EDF\u53D8\u91CF\u5B9A\u4E49\u4E86\u5F53\u524DMySQL\u670D\u52A1\u5B9E\u4F8B\u7684\u5C5E\u6027\u3001\u7279 \u5F81\u3002\u8FD9\u4E9B<strong>\u7CFB\u7EDF\u53D8\u91CF\u7684\u503C\u8981\u4E48\u662F \u7F16\u8BD1MySQL\u65F6\u53C2\u6570\u7684\u9ED8\u8BA4\u503C\uFF0C\u8981\u4E48\u662F \u914D\u7F6E\u6587\u4EF6 \uFF08\u4F8B\u5982my.ini\u7B49\uFF09\u4E2D\u7684\u53C2\u6570\u503C</strong>\u3002</li><li>\u7CFB\u7EDF\u53D8\u91CF\u5206\u4E3A<code>\u5168\u5C40\u7CFB\u7EDF\u53D8\u91CF</code>\uFF08\u9700\u8981\u6DFB\u52A0<code> global</code> \u5173\u952E\u5B57\uFF09\u4EE5\u53CA<code>\u4F1A\u8BDD\u7CFB\u7EDF\u53D8\u91CF</code>\uFF08\u9700\u8981\u6DFB\u52A0<code>session</code>\u5173\u952E\u5B57\uFF09\u3002\u5982\u679C\u4E0D\u5199\uFF0C<strong>\u9ED8\u8BA4\u4F1A\u8BDD\u7EA7\u522B</strong>\u3002</li><li>\u6709\u65F6\u4E5F\u628A\u5168\u5C40\u7CFB\u7EDF\u53D8\u91CF\u7B80\u79F0\u4E3A<em>\u5168\u5C40\u53D8\u91CF</em>\uFF0C\u6709\u65F6\u4E5F\u628A\u4F1A\u8BDD\u7CFB\u7EDF\u53D8\u91CF\u79F0\u4E3A<em>local\u53D8\u91CF</em>\u3002</li><li><code>\u9759\u6001\u53D8\u91CF</code>\uFF08\u5728 MySQL \u670D\u52A1\u5B9E\u4F8B\u8FD0\u884C\u671F\u95F4\u5B83\u4EEC\u7684\u503C\u4E0D\u80FD\u4F7F\u7528 set \u52A8\u6001\u4FEE\u6539\uFF09<strong>\u5C5E\u4E8E\u7279\u6B8A\u7684\u5168\u5C40\u7CFB\u7EDF\u53D8\u91CF</strong>\u3002</li><li>\u5168\u5C40\u7CFB\u7EDF\u53D8\u91CF\u9488\u5BF9\u4E8E\u6240\u6709\u4F1A\u8BDD\u6709\u6548\uFF0C\u4F46\u662F<strong>\u4E0D\u80FD\u8DE8\u91CD\u542F</strong></li><li>\u4F1A\u8BDD\u7CFB\u7EDF\u53D8\u91CF\uFF0C\u53EA\u9488\u5BF9\u5F53\u524D\u4F1A\u8BDD\u6709\u6548\u3002</li><li>\u4F1A\u8BDD1\u9488\u5BF9\u67D0\u4E2A\u5168\u5C40\u7CFB\u7EDF\u53D8\u91CF\u503C\u7684\u4FEE\u6539\uFF0C\u4F1A\u5BFC\u81F4\u4F1A\u8BDD2\u4E2D\u540C\u4E00\u4E2A\u5168\u5C40\u53D8\u91CF\u7684\u503C\u7684\u4FEE\u6539\u3002</li><li><strong>\u6709\u4E9B\u7CFB\u7EDF\u53D8\u91CF\u53EA\u80FD\u662F\u5168\u5C40\u7684</strong>\uFF0C\u4F8B\u5982 max_connections \u7528\u4E8E\u9650\u5236\u670D\u52A1\u5668\u7684\u6700\u5927\u8FDE\u63A5\u6570\uFF1B<strong>\u6709\u4E9B\u7CFB\u7EDF\u53D8\u91CF\u4F5C\u7528\u57DF\u65E2\u53EF\u4EE5\u662F\u5168\u5C40\u53C8\u53EF\u4EE5\u662F\u4F1A\u8BDD</strong>\uFF0C\u4F8B\u5982 character_set_client \u7528\u4E8E\u8BBE\u7F6E\u5BA2\u6237\u7AEF\u7684\u5B57\u7B26\u96C6\uFF1B<strong>\u6709\u4E9B\u7CFB\u7EDF\u53D8\u91CF\u7684\u4F5C\u7528\u57DF\u53EA\u80FD\u662F\u5F53\u524D\u4F1A\u8BDD</strong>\uFF0C\u4F8B\u5982 pseudo_thread_id \u7528\u4E8E\u6807\u8BB0\u5F53\u524D\u4F1A\u8BDD\u7684 MySQL \u8FDE\u63A5 ID</li></ul><blockquote><p>\u67E5\u770B\u7CFB\u7EDF\u53D8\u91CF</p></blockquote><ul><li><p>\u67E5\u770B\u6240\u6709\u6216\u90E8\u5206\u7CFB\u7EDF\u53D8\u91CF</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u67E5\u770B\u6240\u6709\u5168\u5C40\u53D8\u91CF
SHOW GLOBAL VARIABLES;
#\u67E5\u770B\u6240\u6709\u4F1A\u8BDD\u53D8\u91CF
SHOW [SESSION] VARIABLES;

#\u67E5\u770B\u6EE1\u8DB3\u6761\u4EF6\u7684\u90E8\u5206\u7CFB\u7EDF\u53D8\u91CF\u3002
SHOW GLOBAL VARIABLES LIKE &#39;\u6A21\u7CCA\u67E5\u8BE2\u6761\u4EF6&#39;;
#\u67E5\u770B\u6EE1\u8DB3\u6761\u4EF6\u7684\u90E8\u5206\u4F1A\u8BDD\u53D8\u91CF
SHOW [SESSION] VARIABLES LIKE &#39;\u6A21\u7CCA\u67E5\u8BE2\u6761\u4EF6&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li><li><p>\u67E5\u770B\u6307\u5B9A\u7CFB\u7EDF\u53D8\u91CF</p><p>==\u7CFB\u7EDF\u53D8\u91CF\u4EE5<code>@@</code>\u5F00\u5934==\uFF0C\u5176\u4E2D\uFF1A</p><ul><li><code>@@global</code>\u5F00\u5934\u8868\u793A\u5168\u5C40\u7CFB\u7EDF\u53D8\u91CF</li><li><code>@@session</code>\u5F00\u5934\u8868\u793A\u4F1A\u8BDD\u7CFB\u7EDF\u53D8\u91CF</li><li><code>@@</code>\u5F00\u5934\uFF0C\u9996\u5148\u4F1A\u67E5\u8BE2\u4F1A\u8BDD\u7CFB\u7EDF\u53D8\u91CF\uFF0C\u5982\u679C\u4F1A\u8BDD\u7CFB\u7EDF\u4E0D\u5B58\u5728\uFF0C\u518D\u53BB\u67E5\u5168\u5C40\u7CFB\u7EDF\u53D8\u91CF</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u67E5\u770B\u6307\u5B9A\u7684\u7CFB\u7EDF\u53D8\u91CF\u7684\u503C
SELECT @@global.\u53D8\u91CF\u540D;

#\u67E5\u770B\u6307\u5B9A\u7684\u4F1A\u8BDD\u53D8\u91CF\u7684\u503C
SELECT @@session.\u53D8\u91CF\u540D;

#\u5148\u5339\u914D\u4F1A\u8BDD\u7CFB\u7EDF\u53D8\u91CF\uFF0C\u4E0D\u5B58\u5728\u7684\u8BDD\u518D\u53BB\u5339\u914D\u5168\u5C40\u7CFB\u7EDF\u53D8\u91CF
SELECT @@\u53D8\u91CF\u540D;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul><blockquote><p>\u4FEE\u6539\u7CFB\u7EDF\u53D8\u91CF\u7684\u503C</p></blockquote><ul><li><p>\u65B9\u6CD5\u4E00\uFF1A</p><p>\u4FEE\u6539MySQL \u914D\u7F6E\u6587\u4EF6<code>my.ini</code> \uFF0C\u7EE7\u800C\u4FEE\u6539MySQL\u7CFB\u7EDF\u53D8\u91CF\u7684\u503C\uFF08\u8BE5\u65B9\u6CD5\u9700\u8981\u91CD\u542FMySQL\u670D\u52A1\uFF09</p></li><li><p>\u65B9\u6CD5\u4E8C\uFF1A</p><p>\u5728MySQL\u670D\u52A1\u8FD0\u884C\u671F\u95F4\uFF0C\u4F7F\u7528<code>set</code>\u547D\u4EE4\u91CD\u65B0\u8BBE\u7F6E\u7CFB\u7EDF\u53D8\u91CF\u7684\u503C\uFF0C\u8BED\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u4E3A\u5168\u5C40\u7CFB\u7EDF\u53D8\u91CF\u8D4B\u503C
SET @@global.\u53D8\u91CF\u540D=\u53D8\u91CF\u503C;
#\u65B9\u5F0F2\uFF1A
SET GLOBAL \u53D8\u91CF\u540D=\u53D8\u91CF\u503C;

#\u4E3A\u4F1A\u8BDD\u7CFB\u7EDF\u53D8\u91CF\u8D4B\u503C
#\u65B9\u5F0F1\uFF1A
SET @@session.\u53D8\u91CF\u540D=\u53D8\u91CF\u503C;
#\u65B9\u5F0F2\uFF1A
SET SESSION \u53D8\u91CF\u540D=\u53D8\u91CF\u503C;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ul><blockquote><p>MySQL8.0\u65B0\u7279\u6027\uFF1A\u5168\u5C40\u53D8\u91CF\u7684\u6301\u4E45\u5316</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SET PERSIST GLOBAL  \u5168\u5C40\u7CFB\u7EDF\u53D8\u91CF\u540D = \u503C;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>==\u8BF4\u660E\uFF1A==</p><ul><li>\u6570\u636E\u5E93\u91CD\u542F\u540E\uFF0C\u503C\u4ECD\u6709\u6548</li><li>MySQL\u4F1A\u5C06\u8BE5\u547D\u4EE4\u7684\u914D\u7F6E\u4FDD\u5B58\u5230\u6570\u636E\u76EE\u5F55\u4E0B\u7684<code>mysqld-auto.cnf</code>\u6587\u4EF6\u4E2D\uFF0C\u4E0B\u6B21\u542F\u52A8\u65F6\u4F1A\u8BFB\u53D6\u8BE5\u6587\u4EF6\uFF0C\u7528\u5176\u4E2D\u7684\u914D\u7F6E\u6765\u8986\u76D6\u9ED8\u8BA4\u914D\u7F6E</li></ul><h4 id="_15-1-2-\u7528\u6237\u53D8\u91CF" tabindex="-1"><a class="header-anchor" href="#_15-1-2-\u7528\u6237\u53D8\u91CF" aria-hidden="true">#</a> 15.1.2 \u7528\u6237\u53D8\u91CF</h4><blockquote><p>\u6982\u8FF0</p></blockquote><ul><li>\u5B9A\u4E49\uFF1A\u7528\u6237\u53D8\u91CF\u662F\u7528\u6237\u81EA\u5DF1\u5B9A\u4E49\u7684\uFF0C\u4F5C\u4E3A MySQL \u7F16\u7801\u89C4\u8303\uFF0CMySQL \u4E2D\u7684\u7528\u6237\u53D8\u91CF\u4EE5 <code>@</code> \u5F00\u5934\u3002</li><li>\u5206\u7C7B\uFF1A <ul><li><code>\u4F1A\u8BDD\u7528\u6237\u53D8\u91CF</code>\uFF1A\u4F5C\u7528\u57DF\u662F\u5F53\u524D\u4F1A\u8BDD\uFF0C\u53EA\u5BF9\u5F53\u524D\u8FDE\u63A5\u6709\u6548</li><li><code>\u5C40\u90E8\u53D8\u91CF</code>\uFF1A\u53EA\u5728\u5B58\u50A8\u8FC7\u7A0B\u6216\u8005\u5B58\u50A8\u51FD\u6570\u7684BEGIN ... END\u8BED\u53E5\u4E2D\u6709\u6548\u3002</li></ul></li></ul><blockquote><p>\u7528\u6237\u53D8\u91CF\u7684\u5B9A\u4E49</p></blockquote><ul><li><p>\u4F1A\u8BDD\u7EA7\u7528\u6237\u53D8\u91CF</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u5B9A\u4E49
# \u65B9\u5F0F1\uFF1A\u4F7F\u7528\u201C=\u201D\u6216\u8005\u201C:=\u201D
SET @\u7528\u6237\u53D8\u91CF = \u503C;
SET @\u7528\u6237\u53D8\u91CF:= \u503C;

# \u65B9\u5F0F2\uFF1A\u4F7F\u7528\u201C:=\u201D\u6216\u8005\u201CINTO\u201D\u5173\u952E\u5B57
SELECT @\u7528\u6237\u53D8\u91CF := \u8868\u8FBE\u5F0F [FROM \u5B50\u53E5];
SELECT \u8868\u8FBE\u5F0F\uFF08\u6216\u8005\u5B57\u6BB5\u540D\uFF09 INTO @\u7528\u6237\u53D8\u91CF [FROM \u5B50\u53E5];
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li><li><p>\u5C40\u90E8\u53D8\u91CF</p><p>==\u53EA\u80FD\u7528\u5728\u5B58\u50A8\u8FC7\u7A0B\u6216\u8005\u5B58\u50A8\u51FD\u6570\u7684BEGIN ... END\u8BED\u53E5\u4E2D\u3002==<strong>\u5C40\u90E8\u53D8\u91CF\u7684\u58F0\u660E\u5FC5\u987B\u653E\u5728\u5176\u4ED6\u8BED\u53E5\u524D\u9762</strong>\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u58F0\u660E
DECLARE \u53D8\u91CF\u540D \u7C7B\u578B [default \u503C]; # \u5982\u679C\u6CA1\u6709DEFAULT\u5B50\u53E5\uFF0C\u521D\u59CB\u503C\u4E3ANULL

# \u8D4B\u503C\u65B9\u5F0F1\uFF1A
SET \u53D8\u91CF\u540D = \u503C;
# \u8D4B\u503C\u65B9\u5F0F2\uFF1A
SELECT \u8868\u8FBE\u5F0F\uFF08\u6216\u8005\u5B57\u6BB5\u540D\uFF09 INTO \u53D8\u91CF\u540D [FROM \u5B50\u53E5];
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul><blockquote><p>\u7528\u6237\u53D8\u91CF\u7684\u67E5\u770B</p></blockquote><ul><li><p>\u4F1A\u8BDD\u7528\u6237\u53D8\u91CF</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT @\u4F1A\u8BDD\u7528\u6237\u53D8\u91CF
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>\u5C40\u90E8\u53D8\u91CF</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT \u5C40\u90E8\u53D8\u91CF\u540D;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><blockquote><p>\u4F1A\u8BDD\u7528\u6237\u53D8\u91CF VS \u5C40\u90E8\u53D8\u91CF</p></blockquote><table><thead><tr><th></th><th>\u4F5C\u7528\u57DF</th><th>\u5B9A\u4E49\u4F4D\u7F6E</th><th>\u8BED\u6CD5</th></tr></thead><tbody><tr><td>\u4F1A\u8BDD\u7528\u6237\u53D8\u91CF</td><td>\u5F53\u524D\u4F1A\u8BDD</td><td>\u4F1A\u8BDD\u7684\u4EFB\u610F\u4F4D\u7F6E</td><td>\u4F7F\u7528@\u7B26\u53F7\uFF0C\u4E0D\u7528\u6307\u5B9A\u7C7B\u578B</td></tr><tr><td>\u5C40\u90E8\u53D8\u91CF</td><td>\u58F0\u660E\u7684BEGIN ... END \u8BED\u53E5\u4E2D</td><td>BEGIN ... END\u8BED\u53E5\u4E2D\u7684\u7B2C\u4E00\u53E5\u4EE3\u7801</td><td>\u4F7F\u7528DECLARE\uFF0C\u9700\u8981\u6307\u5B9A\u7C7B\u578B</td></tr></tbody></table><h3 id="_15-2-\u5B9A\u4E49\u6761\u4EF6\u4E0E\u5904\u7406\u7A0B\u5E8F" tabindex="-1"><a class="header-anchor" href="#_15-2-\u5B9A\u4E49\u6761\u4EF6\u4E0E\u5904\u7406\u7A0B\u5E8F" aria-hidden="true">#</a> 15.2 \u5B9A\u4E49\u6761\u4EF6\u4E0E\u5904\u7406\u7A0B\u5E8F</h3><p><code>\u5B9A\u4E49\u6761\u4EF6</code>\u662F\u4E8B\u5148\u5B9A\u4E49\u7A0B\u5E8F\u6267\u884C\u8FC7\u7A0B\u4E2D\u53EF\u80FD\u9047\u5230\u7684\u95EE\u9898\uFF0C<code>\u5904\u7406\u7A0B\u5E8F</code>\u5B9A\u4E49\u4E86\u5728\u9047\u5230\u95EE\u9898\u65F6\u5E94\u5F53\u91C7\u53D6\u7684\u5904\u7406\u65B9\u5F0F\uFF0C\u5E76\u4E14\u4FDD\u8BC1\u5B58\u50A8\u8FC7\u7A0B\u6216\u51FD\u6570\u5728\u9047\u5230\u8B66\u544A\u6216\u9519\u8BEF\u65F6\u80FD\u591F\u7EE7\u7EED\u6267\u884C\u3002\u8FD9\u6837\u53EF\u4EE5\u589E\u5F3A\u5B58\u50A8\u8FC7\u7A0B\u6216\u8005\u5B58\u50A8\u7A0B\u5E8F\u5904\u7406\u95EE\u9898\u7684\u80FD\u529B\uFF0C\u589E\u5F3A\u7A0B\u5E8F\u7684\u5065\u58EE\u6027\uFF0C\u907F\u514D\u7A0B\u5E8F\u5F02\u5E38\u505C\u6B62\u8FD0\u884C\u3002<strong>\u7C7B\u4F3C\u4E8EJava\u7684\u5F02\u5E38\u5904\u7406\u673A\u5236\u3002</strong></p><h4 id="_15-2-1-\u5B9A\u4E49\u6761\u4EF6" tabindex="-1"><a class="header-anchor" href="#_15-2-1-\u5B9A\u4E49\u6761\u4EF6" aria-hidden="true">#</a> 15.2.1 \u5B9A\u4E49\u6761\u4EF6</h4><blockquote><p>\u5B9A\u4E49</p></blockquote><p><code>\u5B9A\u4E49\u6761\u4EF6</code>\u5C31\u662F<strong>\u7ED9MySQL\u4E2D\u7684\u9519\u8BEF\u547D\u540D</strong>\uFF0C\u6709\u52A9\u4E8E\u5B58\u50A8\u7684\u7A0B\u5E8F\u4EE3\u7801\u66F4\u6E05\u6670\u3002\u5B83\u5C06\u4E00\u4E2A<code>\u9519\u8BEF\u540D\u5B57</code>\u548C<code>\u9519\u8BEF\u6761\u4EF6</code>\u5173\u8054\u8D77\u6765\uFF0C\u968F\u540E\u53EF\u4EE5\u88AB\u7528\u5728<u>\u5B9A\u4E49\u5904\u7406\u7A0B\u5E8F</u>\u7684<code>DECLARE HANDLER</code>\u8BED\u53E5\u4E2D\u3002</p><blockquote><p>\u8BED\u6CD5</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DECLARE \u9519\u8BEF\u540D\u5B57 CONDITION FOR \u9519\u8BEF\u7801|\u9519\u8BEF\u6761\u4EF6
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>==\u9519\u8BEF\u7801\u7684\u8BF4\u660E\uFF1A==</p><ul><li><code>MySQL_error_code</code>\u548C<code>sqlstate_value</code>\u90FD\u53EF\u4EE5\u8868\u793AMySQL\u7684\u9519\u8BEF\u3002 <ul><li><code>MySQL_error_code</code>\uFF1A\u662F\u6570\u503C\u578B\u7684\u9519\u8BEF\u4EE3\u7801</li><li><code>sqlstate_value</code>\uFF1A\u662F\u957F\u5EA6\u4E3A5\u7684\u5B57\u7B26\u4E32\u7C7B\u578B\u7684\u9519\u8BEF\u4EE3\u7801</li></ul></li><li><code>\u4F8B\u5B50</code>\uFF1A\u5728\u201CERROR 1418 (HY000)\u201D\u4E2D\uFF0C1418\u662FMySQL_error_code\uFF0C\u201CHY000\u201D\u662Fsqlstate_value\u3002</li><li><code>\u4F8B\u5B50</code>\uFF1A\u5728\u201CERROR 1142\uFF0842000\uFF09\u201D\u4E2D\uFF0C1142\u662FMySQL_error_code\uFF0C\u201C42000\u201D\u662Fsqlstate_value\u3002</li></ul><blockquote><p>\u5B9A\u4E49\u6761\u4EF6\u4E3E\u4F8B</p></blockquote><p><code>\u4F8B</code>\u5B9A\u4E49\u201CField_Not_Be_NULL\u201D\u9519\u8BEF\u540D\u4E0EMySQL\u4E2D\u8FDD\u53CD\u975E\u7A7A\u7EA6\u675F\u7684\u9519\u8BEF\u7C7B\u578B\u662F\u201CERROR 1048 (23000)\u201D\u5BF9\u5E94</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u65B9\u6CD51\uFF1A\u4F7F\u7528MySQL_error_code
DECLARE Field_Not_Be_NULL CONDITION FOR 1048;

#\u65B9\u6CD52\uFF1A\u4F7F\u7528sqlstate_value
DECLARE Field_Not_Be_NULL CONDITION FOR SQLSTATE &#39;23000&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_15-2-2-\u5B9A\u4E49\u5904\u7406\u7A0B\u5E8F" tabindex="-1"><a class="header-anchor" href="#_15-2-2-\u5B9A\u4E49\u5904\u7406\u7A0B\u5E8F" aria-hidden="true">#</a> 15.2.2 \u5B9A\u4E49\u5904\u7406\u7A0B\u5E8F</h4><blockquote><p>\u5B9A\u4E49</p></blockquote><p>\u53EF\u4EE5\u4E3ASQL\u6267\u884C\u8FC7\u7A0B\u4E2D\u53D1\u751F\u7684\u67D0\u79CD\u7C7B\u578B\u7684\u9519\u8BEF\u5B9A\u4E49\u7279\u6B8A\u7684\u5904\u7406\u7A0B\u5E8F\u3002</p><blockquote><p>\u8BED\u6CD5</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DECLARE \u5904\u7406\u65B9\u5F0F HANDLER FOR \u9519\u8BEF\u7C7B\u578B \u5904\u7406\u8BED\u53E5
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>==\u8BF4\u660E\uFF1A==</p><ul><li><p><strong>\u5904\u7406\u65B9\u5F0F</strong>\uFF1A\u53D6\u503C\u5982\u4E0B\uFF1A</p><ul><li><code>CONTINUE</code>\uFF1A\u8868\u793A\u9047\u5230\u6307\u5B9A\u7684\u9519\u8BEF\u7C7B\u578B\u4E0D\u5904\u7406\uFF0C\u7EE7\u7EED\u6267\u884C</li><li><code>EXIT</code>\uFF1A\u8868\u793A\u9047\u5230\u6307\u5B9A\u7684\u9519\u8BEF\u7C7B\u578B\u9A6C\u4E0A\u9000\u51FA</li><li><code>UNDO</code>\uFF1A\u8868\u793A\u9047\u5230\u6307\u5B9A\u7684\u9519\u8BEF\u7C7B\u578B\u540E\u64A4\u56DE\u4E4B\u524D\u7684\u64CD\u4F5C\u3002<strong>MySQL\u4E2D\u6682\u65F6\u4E0D\u652F\u6301\u8BE5\u64CD\u4F5C</strong></li></ul></li><li><p><strong>\u9519\u8BEF\u7C7B\u578B</strong>\uFF1A\u53D6\u503C\u5982\u4E0B\uFF1A</p><ul><li><code>SQLSTATE &#39;\u5B57\u7B26\u4E32\u9519\u8BEF\u7801&#39;</code>\uFF1A\u8868\u793A\u957F\u5EA6\u4E3A5\u7684\u5B57\u7B26\u4E32\u7C7B\u578B\u7684\u9519\u8BEF\u4EE3\u7801</li><li><code>MySQL_error_code\u9519\u8BEF\u4EE3\u7801</code>\uFF1A\u5339\u914D\u6570\u503C\u7C7B\u578B\u7684\u9519\u8BEF\u7801</li><li><code>\u9519\u8BEF\u540D\u79F0</code>\uFF1A\u8868\u793ADECLARE ... CONDITION\u5B9A\u4E49\u7684\u9519\u8BEF\u6761\u4EF6\u540D\u79F0</li><li><code>SQLWARNING</code>\uFF1A\u5339\u914D\u6240\u6709\u4EE501\u5F00\u5934\u7684SQLSTATE\u9519\u8BEF\u4EE3\u7801</li><li><code>NOT FOUND</code>\uFF1A\u5339\u914D\u6240\u6709\u4EE502\u5F00\u5934\u7684SQLSTATE\u9519\u8BEF\u4EE3\u7801\uFF1B</li><li><code>SQLEXCEPTION</code>\uFF1A\u5339\u914D\u6240\u6709\u6CA1\u6709\u88ABSQLWARNING\u6216NOT FOUND\u6355\u83B7\u7684SQLSTATE\u9519\u8BEF\u4EE3\u7801</li></ul></li><li><p><strong>\u5904\u7406\u8BED\u53E5</strong>\uFF1A\u5982\u679C\u51FA\u73B0\u4E0A\u8FF0\u6761\u4EF6\u4E4B\u4E00\uFF0C\u5219\u91C7\u7528\u5BF9\u5E94\u7684\u5904\u7406\u65B9\u5F0F\uFF0C\u5E76\u6267\u884C\u6307\u5B9A\u7684\u5904\u7406\u8BED\u53E5\u3002</p><p>\u5904\u7406\u8BED\u53E5\u53EF\u4EE5\u662F<code>SET \u53D8\u91CF = \u503C</code>\u8FD9\u6837\u7684\u7B80\u5355\u8BED\u53E5\uFF0C\u4E5F\u53EF\u4EE5\u662F<code>BEGIN ... END</code>\u7F16\u5199\u7684\u590D\u6742\u8BED\u53E5</p></li></ul><blockquote><p>\u4F8B\u5B50</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>#\u65B9\u6CD51\uFF1A\u6355\u83B7sqlstate_value
DECLARE CONTINUE HANDLER FOR SQLSTATE &#39;42S02&#39; SET @info = &#39;NO_SUCH_TABLE&#39;;

#\u65B9\u6CD52\uFF1A\u6355\u83B7mysql_error_value
DECLARE CONTINUE HANDLER FOR 1146 SET @info = &#39;NO_SUCH_TABLE&#39;;

#\u65B9\u6CD53\uFF1A\u5148\u5B9A\u4E49\u6761\u4EF6\uFF0C\u518D\u8C03\u7528
DECLARE no_such_table CONDITION FOR 1146;
DECLARE CONTINUE HANDLER FOR NO_SUCH_TABLE SET @info = &#39;NO_SUCH_TABLE&#39;;

#\u65B9\u6CD54\uFF1A\u4F7F\u7528SQLWARNING
DECLARE EXIT HANDLER FOR SQLWARNING SET @info = &#39;ERROR&#39;;

#\u65B9\u6CD55\uFF1A\u4F7F\u7528NOT FOUND
DECLARE EXIT HANDLER FOR NOT FOUND SET @info = &#39;NO_SUCH_TABLE&#39;;

#\u65B9\u6CD56\uFF1A\u4F7F\u7528SQLEXCEPTION
DECLARE EXIT HANDLER FOR SQLEXCEPTION SET @info = &#39;ERROR&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_15-3-\u6D41\u7A0B\u63A7\u5236" tabindex="-1"><a class="header-anchor" href="#_15-3-\u6D41\u7A0B\u63A7\u5236" aria-hidden="true">#</a> 15.3 \u6D41\u7A0B\u63A7\u5236</h3><blockquote><p>\u6D41\u7A0B\u7684\u5206\u7C7B</p></blockquote><ul><li><strong>\u987A\u5E8F\u7ED3\u6784</strong>\uFF1A\u7A0B\u5E8F\u4ECE\u4E0A\u5F80\u4E0B\u4F9D\u6B21\u6267\u884C</li><li><strong>\u5206\u652F\u7ED3\u6784</strong>\uFF1A\u7A0B\u5E8F\u6309\u7167\u6761\u4EF6\u8FDB\u884C\u9009\u62E9\u6267\u884C\uFF0C\u4ECE\u4E24\u6761\u6216\u8005\u591A\u6761\u8DEF\u5F84\u4E2D\u9009\u62E9\u4E00\u6761\u6267\u884C</li><li><strong>\u5FAA\u73AF\u7ED3\u6784</strong>\uFF1A\u7A0B\u5E8F\u6EE1\u8DB3\u4E00\u5B9A\u6761\u4EF6\u4E0B\uFF0C\u91CD\u590D\u6267\u884C\u4E00\u7EC4\u8BED\u53E5</li></ul><blockquote><p>\u6D41\u7A0B\u63A7\u5236\u8BED\u53E5\u7684\u5206\u7C7B</p></blockquote><p>==\u53EA\u80FD\u7528\u4E8E\u5B58\u50A8\u8FC7\u7A0B\u548C\u5B58\u50A8\u51FD\u6570\u4E2D==</p><ul><li><strong>\u6761\u4EF6\u5224\u65AD\u8BED\u53E5</strong>\uFF1AIF \u8BED\u53E5\u6216\u8005 CASE \u8BED\u53E5</li><li><strong>\u5FAA\u73AF\u8BED\u53E5</strong>\uFF1ALOOP \u8BED\u53E5\u3001WHILE \u8BED\u53E5\u6216\u8005 REPEAT\u8BED\u53E5</li><li><strong>\u8DF3\u8F6C\u8BED\u53E5</strong>\uFF1AITERATE \u8BED\u53E5\u548C LEAVE \u8BED\u53E5</li></ul><h4 id="_15-3-1-\u5206\u652F\u7ED3\u6784\u4E4B-if" tabindex="-1"><a class="header-anchor" href="#_15-3-1-\u5206\u652F\u7ED3\u6784\u4E4B-if" aria-hidden="true">#</a> 15.3.1 \u5206\u652F\u7ED3\u6784\u4E4B IF</h4><blockquote><p>\u8BED\u6CD5</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>IF \u8868\u8FBE\u5F0F1 THEN \u64CD\u4F5C1
[ELSEIF \u8868\u8FBE\u5F0F2 THEN \u64CD\u4F5C2]\u2026\u2026
[ELSE \u64CD\u4F5CN]
END IF;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>\u4E3E\u4F8B</p></blockquote><p><code>\u4F8B</code>\u58F0\u660E\u5B58\u50A8\u8FC7\u7A0B\u201Cupdate_salary_by_eid2\u201D\uFF0C\u5B9A\u4E49IN\u53C2\u6570emp_id\uFF0C\u8F93\u5165\u5458\u5DE5\u7F16\u53F7\u3002\u5224\u65AD\u8BE5\u5458\u5DE5\u85AA\u8D44\u5982\u679C\u4F4E\u4E8E9000\u5143\u5E76\u4E14\u5165\u804C\u65F6\u95F4\u8D85\u8FC75\u5E74\uFF0C\u5C31\u6DA8\u85AA500\u5143\uFF1B\u5426\u5219\u5C31\u6DA8\u85AA100\u5143\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u5B9A\u4E49\u5B58\u50A8\u8FC7\u7A0B
DELIMITER $
CREATE PROCEDURE update_salary_by_eid2(IN emp_id INT)
BEGIN
	DECLARE emp_salary DOUBLE;
	DECLARE emp_years DOUBLE;
	
	SELECT salary, DATEDIFF(CURRENT_DATE(), hire_date)/365 INTO emp_salary, emp_years
	FROM emps
	WHERE employee_id = emp_id;
	
	IF emp_salary &lt; 9000 AND emp_years &gt;= 5 
		THEN UPDATE emps SET salary = salary + 500 WHERE employee_id = emp_id;
	ELSE 
		UPDATE emps SET salary = salary + 100 WHERE employee_id = emp_id;
	END IF;
END $
DELIMITER ;

# \u8C03\u7528\u5B58\u50A8\u8FC7\u7A0B
CALL update_salary_by_eid2(104);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="_15-3-2-\u5206\u652F\u7ED3\u6784\u4E4B-case" tabindex="-1"><a class="header-anchor" href="#_15-3-2-\u5206\u652F\u7ED3\u6784\u4E4B-case" aria-hidden="true">#</a> 15.3.2 \u5206\u652F\u7ED3\u6784\u4E4B CASE</h4><blockquote><p>\u8BED\u6CD51\uFF1A\u7C7B\u4F3C\u4E8EJava\u4E2D\u7684switch\u8BED\u53E5</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CASE \u8868\u8FBE\u5F0F
WHEN \u503C1 THEN \u7ED3\u679C1\u6216\u8BED\u53E51(\u5982\u679C\u662F\u8BED\u53E5\uFF0C\u9700\u8981\u52A0\u5206\u53F7)
WHEN \u503C2 THEN \u7ED3\u679C2\u6216\u8BED\u53E52(\u5982\u679C\u662F\u8BED\u53E5\uFF0C\u9700\u8981\u52A0\u5206\u53F7)
...
ELSE \u7ED3\u679Cn\u6216\u8BED\u53E5n(\u5982\u679C\u662F\u8BED\u53E5\uFF0C\u9700\u8981\u52A0\u5206\u53F7)
END CASE;  # \u6CE8\u610F\uFF1A\u5982\u679C\u662F\u653E\u5728begin end\u4E2D\u9700\u8981\u52A0\u4E0Acase\uFF0C\u5982\u679C\u653E\u5728select\u540E\u9762\u4E0D\u9700\u8981
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>\u8BED\u6CD52\uFF1A\u7C7B\u4F3C\u4E8EJava\u4E2D\u7684\u591A\u91CDif</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CASE
WHEN \u6761\u4EF61 THEN \u7ED3\u679C1\u6216\u8BED\u53E51(\u5982\u679C\u662F\u8BED\u53E5\uFF0C\u9700\u8981\u52A0\u5206\u53F7)
WHEN \u6761\u4EF62 THEN \u7ED3\u679C2\u6216\u8BED\u53E52(\u5982\u679C\u662F\u8BED\u53E5\uFF0C\u9700\u8981\u52A0\u5206\u53F7)
...
ELSE \u7ED3\u679Cn\u6216\u8BED\u53E5n(\u5982\u679C\u662F\u8BED\u53E5\uFF0C\u9700\u8981\u52A0\u5206\u53F7)
END CASE; # \u6CE8\u610F\uFF1A\u5982\u679C\u662F\u653E\u5728begin end\u4E2D\u9700\u8981\u52A0\u4E0Acase\uFF0C\u5982\u679C\u653E\u5728select\u540E\u9762\u4E0D\u9700\u8981
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>\u4E3E\u4F8B</p></blockquote><p><code>\u4F8B</code>\u58F0\u660E\u5B58\u50A8\u8FC7\u7A0B\u201Cupdate_salary_by_eid4\u201D\uFF0C\u5B9A\u4E49IN\u53C2\u6570emp_id\uFF0C\u8F93\u5165\u5458\u5DE5\u7F16\u53F7\u3002\u5224\u65AD\u8BE5\u5458\u5DE5\u85AA\u8D44\u5982\u679C\u4F4E\u4E8E9000\u5143\uFF0C\u5C31\u66F4\u65B0\u85AA\u8D44\u4E3A9000\u5143\uFF1B\u85AA\u8D44\u5927\u4E8E\u7B49\u4E8E9000\u5143\u4E14\u4F4E\u4E8E10000\u7684\uFF0C\u4F46\u662F\u5956\u91D1\u6BD4\u4F8B\u4E3ANULL\u7684\uFF0C\u5C31\u66F4\u65B0\u5956\u91D1\u6BD4\u4F8B\u4E3A0.01\uFF1B\u5176\u4ED6\u7684\u6DA8\u85AA100\u5143\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u58F0\u660E\u5B58\u50A8\u8FC7\u7A0B	
DELIMITER $
CREATE PROCEDURE update_salary_by_eid4(IN emp_id INT)
BEGIN
	DECLARE emp_sal DOUBLE;
	DECLARE emp_bonus DOUBLE;
	
	SELECT salary, commission_pct INTO emp_sal, emp_bonus FROM emps WHERE employee_id = emp_id;
	
	CASE 
		WHEN emp_sal &lt; 9000 
			THEN UPDATE emps SET salary = 9000 WHERE employee_id = emp_id;
		WHEN emp_sal &gt;= 9000 AND emp_sal &lt; 10000 AND emp_bonus IS NULL 
			THEN UPDATE emps SET commission_pct = 0.01 WHERE employee_id = emp_id;
		ELSE
			UPDATE emps SET salary = salary + 100 WHERE employee_id = emp_id;
	END CASE;
END $
DELIMITER ;

# \u8C03\u7528 
CALL update_salary_by_eid4(100)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="_15-3-3-\u5FAA\u73AF\u7ED3\u6784\u4E4B-loop" tabindex="-1"><a class="header-anchor" href="#_15-3-3-\u5FAA\u73AF\u7ED3\u6784\u4E4B-loop" aria-hidden="true">#</a> 15.3.3 \u5FAA\u73AF\u7ED3\u6784\u4E4B LOOP</h4><p>==\u4F7F\u7528LEAVE\u8DF3\u51FALOOP\u5FAA\u73AF==</p><blockquote><p>\u8BED\u6CD5</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>[loop_label]: LOOP
	\u5FAA\u73AF\u4F53
END LOOP [loop_label];
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>==\u8BF4\u660E==\uFF1A</p><ul><li><code>loop_label</code>\uFF1A\u5F53\u524DLOOP\u5FAA\u73AF\u8BED\u53E5\u7684\u6807\u6CE8\u540D\u79F0\uFF0C\u5728\u4F7F\u7528LEAVE\u8DF3\u51FA\u5FAA\u73AF\u65F6\u4F1A\u7528\u5230</li></ul><blockquote><p>\u4E3E\u4F8B</p></blockquote><p><code>\u4F8B</code>\u5F53\u5E02\u573A\u73AF\u5883\u53D8\u597D\u65F6\uFF0C\u516C\u53F8\u4E3A\u4E86\u5956\u52B1\u5927\u5BB6\uFF0C\u51B3\u5B9A\u7ED9\u5927\u5BB6\u6DA8\u5DE5\u8D44\u3002\u58F0\u660E\u5B58\u50A8\u8FC7\u7A0B\u201Cupdate_salary_loop()\u201D\uFF0C\u58F0\u660EOUT\u53C2\u6570num\uFF0C\u8F93\u51FA\u5FAA\u73AF\u6B21\u6570\u3002\u5B58\u50A8\u8FC7\u7A0B\u4E2D\u5B9E\u73B0\u5FAA\u73AF\u7ED9\u5927\u5BB6\u6DA8\u85AA\uFF0C\u85AA\u8D44\u6DA8\u4E3A\u539F\u6765\u76841.1\u500D\uFF0C\u76F4\u5230\u5168\u516C\u53F8\u7684\u5E73\u5747\u85AA\u8D44\u8FBE\u523012000\u7ED3\u675F\uFF0C\u5E76\u7EDF\u8BA1\u5FAA\u73AF\u6B21\u6570\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u58F0\u660E\u5B58\u50A8\u8FC7\u7A0B
DELIMITER //
CREATE PROCEDURE update_salary_loop(OUT num INT)
BEGIN
	DECLARE avg_sal DOUBLE;
	SET num := 0;
	
	SELECT AVG(salary) INTO avg_sal FROM emps;
	
	add_salary:LOOP
			# \u5FAA\u73AF\u9000\u51FA\u6761\u4EF6
			IF avg_sal &gt;= 12000 THEN LEAVE add_salary; 
			END IF;
			
			# \u7EDF\u8BA1\u5FAA\u73AF\u6B21\u6570
			SET num := num + 1; 
			
			# \u66F4\u65B0\u85AA\u8D44
			UPDATE emps SET salary = salary * 1.1; 
			
			# \u67E5\u8BE2\u66F4\u65B0\u540E\u7684\u5E73\u5747\u85AA\u8D44
			SELECT AVG(salary) INTO avg_sal FROM emps; 
	END LOOP add_salary;

END //
DELIMITER ;

# \u8C03\u7528\u5B58\u50A8\u8FC7\u7A0B
set @num := 0;
call update_salary_loop(@num);
SELECT @num;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h4 id="_15-3-4-\u5FAA\u73AF\u7ED3\u6784\u4E4B-while" tabindex="-1"><a class="header-anchor" href="#_15-3-4-\u5FAA\u73AF\u7ED3\u6784\u4E4B-while" aria-hidden="true">#</a> 15.3.4 \u5FAA\u73AF\u7ED3\u6784\u4E4B WHILE</h4><p>WHILE\u5728\u6267\u884C\u8BED\u53E5\u6267\u884C\u65F6\uFF0C<strong>\u5148\u5BF9\u6307\u5B9A\u7684\u8868\u8FBE\u5F0F\u8FDB\u884C\u5224\u65AD</strong>\uFF0C\u5982 \u679C\u4E3A\u771F\uFF0C\u5C31\u6267\u884C\u5FAA\u73AF\u5185\u7684\u8BED\u53E5\uFF0C\u5426\u5219\u9000\u51FA\u5FAA\u73AF\u3002</p><blockquote><p>\u8BED\u6CD5</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>[while_label:] WHILE \u5FAA\u73AF\u6761\u4EF6 DO
\u5FAA\u73AF\u4F53
END WHILE [while_label];
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>==\u8BF4\u660E==\uFF1A</p><ul><li><code>while_label</code>\uFF1A\u5F53\u524DWHILE\u5FAA\u73AF\u8BED\u53E5\u7684\u6807\u6CE8\u540D\u79F0\u3002</li></ul><blockquote><p>\u4F8B\u5B50</p></blockquote><p><code>\u4F8B</code>\u5E02\u573A\u73AF\u5883\u4E0D\u597D\u65F6\uFF0C\u516C\u53F8\u4E3A\u4E86\u6E21\u8FC7\u96BE\u5173\uFF0C\u51B3\u5B9A\u6682\u65F6\u964D\u4F4E\u5927\u5BB6\u7684\u85AA\u8D44\u3002\u58F0\u660E\u5B58\u50A8\u8FC7\u7A0B\u201Cupdate_salary_while()\u201D\uFF0C\u58F0\u660EOUT\u53C2\u6570num\uFF0C\u8F93\u51FA\u5FAA\u73AF\u6B21\u6570\u3002\u5B58\u50A8\u8FC7\u7A0B\u4E2D\u5B9E\u73B0\u5FAA\u73AF\u7ED9\u5927\u5BB6\u964D\u85AA\uFF0C\u85AA\u8D44\u964D\u4E3A\u539F\u6765\u768490%\u3002\u76F4\u5230\u5168\u516C\u53F8\u7684\u5E73\u5747\u85AA\u8D44\u8FBE\u52305000\u7ED3\u675F\uFF0C\u5E76\u7EDF\u8BA1\u5FAA\u73AF\u6B21\u6570\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u58F0\u660E\u5B58\u50A8\u8FC7\u7A0B	
delimiter $
create procedure update_salary_while(out num int)
begin 
	# \u58F0\u660E\u53D8\u91CF
	declare avg_sal double; # \u8BB0\u5F55\u516C\u53F8\u5E73\u5747\u85AA\u8D44
	declare loop_num int default 0; # \u8BB0\u5F55\u5FAA\u73AF\u6B21\u6570
	
	# \u521D\u59CB\u5316avg_sal
	select avg(salary) into avg_sal from emps;
	
	# \u5FAA\u73AF\u964D\u85AA
	sub_salary: while avg_sal &gt; 5000 DO
		# \u964D\u85AA
		update emps set salary = salary * 0.9;
		# \u8BB0\u5F55\u5FAA\u73AF\u6B21\u6570
		set loop_num = loop_num + 1;
		# \u91CD\u65B0\u8BA1\u7B97\u5E73\u5747\u5DE5\u8D44
		select avg(salary) into avg_sal from emps;
	end while sub_salary;
	
	# \u7ED9out\u53C2\u6570\u8D4B\u503C
	set num = loop_num;
end $
delimiter ;

# \u8C03\u7528\u5B58\u50A8\u8FC7\u7A0B
call update_salary_while(@num);
select @num;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h4 id="_15-3-5-\u5FAA\u73AF\u7ED3\u6784\u4E4B-repeat" tabindex="-1"><a class="header-anchor" href="#_15-3-5-\u5FAA\u73AF\u7ED3\u6784\u4E4B-repeat" aria-hidden="true">#</a> 15.3.5 \u5FAA\u73AF\u7ED3\u6784\u4E4B REPEAT</h4><p>REPEAT \u5FAA\u73AF<strong>\u9996\u5148\u4F1A\u6267\u884C\u4E00\u6B21\u5FAA \u73AF\uFF0C\u7136\u540E\u5728 UNTIL \u4E2D\u8FDB\u884C\u8868\u8FBE\u5F0F\u7684\u5224\u65AD</strong>\uFF0C\u5982\u679C\u6EE1\u8DB3\u6761\u4EF6\u5C31\u9000\u51FA\uFF0C\u5373 END REPEAT\uFF1B\u5982\u679C\u6761\u4EF6\u4E0D\u6EE1\u8DB3\uFF0C\u5219\u4F1A \u5C31\u7EE7\u7EED\u6267\u884C\u5FAA\u73AF\uFF0C\u76F4\u5230\u6EE1\u8DB3\u9000\u51FA\u6761\u4EF6\u4E3A\u6B62\u3002</p><blockquote><p>\u8BED\u6CD5</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>[repeat_label]:REPEAT
	\u5FAA\u73AF\u4F53
	UNTIL \u5FAA\u73AF\u7ED3\u675F\u6761\u4EF6
END REPEAT [repeat_label];
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>==\u8BF4\u660E==\uFF1A</p><ul><li><code>repeat_label</code>\uFF1A\u5F53\u524DREPEAT\u5FAA\u73AF\u8BED\u53E5\u7684\u6807\u6CE8\u540D\u79F0\u3002</li></ul><blockquote><p>\u4F8B\u5B50</p></blockquote><p><code>\u4F8B</code>\u5F53\u5E02\u573A\u73AF\u5883\u53D8\u597D\u65F6\uFF0C\u516C\u53F8\u4E3A\u4E86\u5956\u52B1\u5927\u5BB6\uFF0C\u51B3\u5B9A\u7ED9\u5927\u5BB6\u6DA8\u5DE5\u8D44\u3002\u58F0\u660E\u5B58\u50A8\u8FC7\u7A0B\u201Cupdate_salary_repeat()\u201D\uFF0C\u58F0\u660EOUT\u53C2\u6570num\uFF0C\u8F93\u51FA\u5FAA\u73AF\u6B21\u6570\u3002\u5B58\u50A8\u8FC7\u7A0B\u4E2D\u5B9E\u73B0\u5FAA\u73AF\u7ED9\u5927\u5BB6\u6DA8\u85AA\uFF0C\u85AA\u8D44\u6DA8\u4E3A\u539F\u6765\u76841.15\u500D\u3002\u76F4\u5230\u5168\u516C\u53F8\u7684\u5E73\u5747\u85AA\u8D44\u8FBE\u523013000\u7ED3\u675F\uFF0C\u5E76\u7EDF\u8BA1\u5FAA\u73AF\u6B21\u6570\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u58F0\u660E\u5B58\u50A8\u8FC7\u7A0B	
delimiter $
create procedure update_salary_repeat(out num int)
begin
	declare avg_sal DOUBLE;
	declare repeat_count int default 0;
	
	select avg(salary) into avg_sal from emps;
	
	add_salary:repeat
		update emps set salary = salary * 1.15;
		set repeat_count = repeat_count + 1;
		select avg(salary) into avg_sal from emps;
		until avg_sal &gt;= 13000
	end repeat add_salary;
	
	set num = repeat_count;
end $
delimiter ;

# \u8C03\u7528\u5FAA\u73AF
call update_salary_repeat(@num);
select @num;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h4 id="_15-3-6-loop\u3001while\u3001repeat\u7684\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#_15-3-6-loop\u3001while\u3001repeat\u7684\u5BF9\u6BD4" aria-hidden="true">#</a> 15.3.6 LOOP\u3001WHILE\u3001REPEAT\u7684\u5BF9\u6BD4</h4><ul><li><p><strong>\u76F8\u540C\u70B9</strong>\uFF1A</p><p>\u4E09\u8005\u90FD\u53EF\u4EE5\u7701\u7565\u6807\u6CE8\u540D\u79F0\uFF0C\u4F46\u662F\u5982\u679C\u5728\u5FAA\u73AF\u4E2D\u6DFB\u52A0\u4E86\u5FAA\u73AF\u63A7\u5236\u8BED\u53E5\uFF08LEAVE\u6216ITERATE\uFF09\u5219\u5FC5\u987B\u6DFB\u52A0\u6807\u6CE8\u540D\u79F0\u3002</p></li><li><p><strong>\u4E0D\u540C\u70B9</strong>\uFF1A</p><ul><li><code>LOOP</code>\uFF1A\u4E00\u822C\u7528\u4E8E\u5B9E\u73B0\u7B80\u5355\u7684\u201C\u6B7B\u201D\u5FAA\u73AF</li><li><code>WHILE</code>\uFF1A\u5148\u5224\u65AD\uFF0C\u540E\u6267\u884C</li><li><code>REPEAT</code>\uFF1A\u5148\u6267\u884C\uFF0C\u540E\u5224\u65AD\u3002\u65E0\u6761\u4EF6\u81F3\u5C11\u6267\u884C\u4E00\u6B21</li></ul></li></ul><h4 id="_15-3-7-\u8DF3\u8F6C\u8BED\u53E5\u4E4B-leave" tabindex="-1"><a class="header-anchor" href="#_15-3-7-\u8DF3\u8F6C\u8BED\u53E5\u4E4B-leave" aria-hidden="true">#</a> 15.3.7 \u8DF3\u8F6C\u8BED\u53E5\u4E4B LEAVE</h4><blockquote><p>\u4F5C\u7528</p></blockquote><ul><li>\u53EF\u4EE5\u7528\u5728<code>BEGIN ... END</code>\u8BED\u53E5\u4E2D\uFF0C\u8868\u793A\u8DF3\u51FA\u7A0B\u5E8F\u4F53</li><li>\u53EF\u4EE5\u7528\u5728\u5FAA\u73AF\u4F53\u5185\uFF0C\u8868\u793A\u8DF3\u51FA\u5FAA\u73AF</li></ul><p>\u76F8\u5F53\u4E8E<code>break</code>\u3002</p><blockquote><p>\u8BED\u6CD5</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>LEAVE \u6807\u8BB0\u540D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>\u4E3E\u4F8B</p></blockquote><p><code>\u4F8B</code><strong>\u8DF3\u51FA BEGIN ... END \u8BED\u53E5</strong>\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DELIMITER //
CREATE PROCEDURE leave_begin(IN num INT)
begin_label:BEGIN
	IF num &lt;= 0
		THEN LEAVE begin_label; # \u8DF3\u51FA\u7A0B\u5E8F\u4F53
	ELSEIF num = 1
		THEN SELECT AVG(salary) FROM emps;
	ELSEIF num = 2
		THEN SELECT MIN(salary) FROM emps;
	ELSE 
		SELECT MAX(salary) FROM emps;
	END IF;
	
	#\u67E5\u8BE2\u603B\u4EBA\u6570
	SELECT COUNT(*) FROM emps;
END //
DELIMITER ;

#\u8C03\u7528
CALL leave_begin(1);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><code>\u4F8B</code><strong>\u8DF3\u51FAwhile\u5FAA\u73AF</strong></p><p>\u5F53\u5E02\u573A\u73AF\u5883\u4E0D\u597D\u65F6\uFF0C\u516C\u53F8\u4E3A\u4E86\u6E21\u8FC7\u96BE\u5173\uFF0C\u51B3\u5B9A\u6682\u65F6\u964D\u4F4E\u5927\u5BB6\u7684\u85AA\u8D44\u3002\u58F0\u660E\u5B58\u50A8\u8FC7\u7A0B\u201Cleave_while()\u201D\uFF0C\u58F0\u660EOUT\u53C2\u6570num\uFF0C\u8F93\u51FA\u5FAA\u73AF\u6B21\u6570\uFF0C\u5B58\u50A8\u8FC7\u7A0B\u4E2D\u4F7F\u7528WHILE\u5FAA\u73AF\u7ED9\u5927\u5BB6\u964D\u4F4E\u85AA\u8D44\u4E3A\u539F\u6765\u85AA\u8D44\u768490%\uFF0C\u76F4\u5230\u5168\u516C\u53F8\u7684\u5E73\u5747\u85AA\u8D44\u5C0F\u4E8E\u7B49\u4E8E10000\uFF0C\u5E76\u7EDF\u8BA1\u5FAA\u73AF\u6B21\u6570\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u58F0\u660E\u5B58\u50A8\u8FC7\u7A0B
delimiter $
create procedure leave_while(out num int)
begin
	declare avg_sal double;
	set num = 0;
	
	select avg(salary) into avg_sal from emps;
	sub_sal:while 1=1 do
			if avg_sal &lt;= 10000
				then leave sub_sal;
			end if;
			update emps set salary = salary * 0.9;
			set num = num + 1;
			select avg(salary) into avg_sal from emps;
	 end while sub_sal;
end $
delimiter ;

# \u8C03\u7528
call leave_while(@num);
select @num;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="_15-3-8-\u8DF3\u8F6C\u8BED\u53E5\u4E4B-iterate" tabindex="-1"><a class="header-anchor" href="#_15-3-8-\u8DF3\u8F6C\u8BED\u53E5\u4E4B-iterate" aria-hidden="true">#</a> 15.3.8 \u8DF3\u8F6C\u8BED\u53E5\u4E4B ITERATE</h4><blockquote><p>\u4F5C\u7528</p></blockquote><p>\u53EA\u80FD\u7528\u5728\u5FAA\u73AF\u8BED\u53E5\u5185\uFF0C<strong>\u8868\u793A\u91CD\u65B0\u5F00\u59CB\u5FAA\u73AF\uFF0C\u5C06\u6267\u884C\u987A\u5E8F\u8F6C\u5230\u8BED\u53E5\u6BB5\u7684\u5F00\u5934</strong>\u3002</p><p>\u76F8\u5F53\u4E8E<code>continue</code>\u3002</p><blockquote><p>\u8BED\u6CD5</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>ITERATE \u6807\u8BB0\u540D\u79F0;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>\u4E3E\u4F8B</p></blockquote><p><code>\u4F8B</code>\u5B9A\u4E49\u5C40\u90E8\u53D8\u91CFnum\uFF0C\u521D\u59CB\u503C\u4E3A0\u3002\u5FAA\u73AF\u7ED3\u6784\u4E2D\u6267\u884Cnum + 1\u64CD\u4F5C\u3002\u5982\u679Cnum &lt; 10\uFF0C\u5219\u7EE7\u7EED\u6267\u884C\u5FAA\u73AF\uFF1B\u5982\u679Cnum &gt; 15\uFF0C\u5219\u9000\u51FA\u5FAA\u73AF\u7ED3\u6784\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u58F0\u660E\u5B58\u50A8\u8FC7\u7A0B
delimiter $
create procedure test_iterate() 
begin
	declare num int default 0;
	loop_label:loop
		set num = num + 1;
		if num &lt; 10
			then iterate loop_label; # \u7ED3\u675F\u5F53\u524D\u5FAA\u73AF\uFF0C\u5F00\u59CB\u4E0B\u4E00\u6B21\u5FAA\u73AF
		elseif num &gt; 15
			then leave loop_label;
		end if;
		SELECT &#39;\u5B66\u5982\u9006\u6C34\u884C\u821F\uFF0C\u4E0D\u8FDB\u5219\u9000&#39;;
	end loop loop_label;
end $
delimiter ;

# \u8C03\u7528
call test_iterate()
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_15-4-\u6E38\u6807" tabindex="-1"><a class="header-anchor" href="#_15-4-\u6E38\u6807" aria-hidden="true">#</a> 15.4 \u6E38\u6807</h3><h4 id="_15-4-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_15-4-1-\u6982\u8FF0" aria-hidden="true">#</a> 15.4.1 \u6982\u8FF0</h4><ul><li><strong>\u4F5C\u7528</strong>\uFF1A\u6E38\u6807\uFF0C\u8BA9\u6211\u4EEC\u80FD\u591F\u5BF9\u7ED3\u679C\u96C6\u4E2D\u7684<em>\u6BCF\u4E00\u6761\u8BB0\u5F55</em>\u8FDB\u884C\u5B9A\u4F4D\uFF0C\u5E76\u5BF9\u6307\u5411\u7684\u8BB0\u5F55\u4E2D\u7684\u6570\u636E\u8FDB\u884C\u64CD\u4F5C\u7684\u6570\u636E\u7ED3\u6784\u3002<strong>\u6E38\u6807\u8BA9 SQL \u8FD9\u79CD\u9762\u5411\u96C6\u5408\u7684\u8BED\u8A00\u6709\u4E86\u9762\u5411\u8FC7 \u7A0B\u5F00\u53D1\u7684\u80FD\u529B\u3002</strong></li><li>\u6E38\u6807\u662F\u4E00\u79CD\u4E34\u65F6\u7684\u6570\u636E\u5E93\u5BF9\u8C61\uFF0C\u53EF\u4EE5\u6307\u5411\u5B58\u50A8\u5728\u6570\u636E\u5E93\u8868\u4E2D\u7684\u6570\u636E\u884C\u6307\u9488\u3002\u8FD9\u91CC\u6E38\u6807<code>\u5145\u5F53\u4E86\u6307\u9488</code>\u7684\u4F5C\u7528\u3002</li><li>\u6E38\u6807\u53EF\u4EE5\u5728<code>\u5B58\u50A8\u8FC7\u7A0B</code>\u548C<code>\u5B58\u50A8\u51FD\u6570</code>\u4E2D\u4F7F\u7528</li></ul><h4 id="_15-4-2-\u6E38\u6807\u7684\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_15-4-2-\u6E38\u6807\u7684\u4F7F\u7528" aria-hidden="true">#</a> 15.4.2 \u6E38\u6807\u7684\u4F7F\u7528</h4><p><strong>\u4F7F\u7528\u6E38\u6807\uFF0C\u4E00\u822C\u9700\u8981\u7ECF\u5386\u5982\u4E0B4\u4E2A\u6B65\u9AA4\uFF1A</strong></p><ul><li><p>\u58F0\u660E\u6E38\u6807\uFF1A\u6E38\u6807\u7684\u58F0\u660E\u5FC5\u987B<strong>\u5728\u53D8\u91CF\u58F0\u660E\u4E4B\u540E\u3001\u5904\u7406\u7A0B\u5E8F\u4E4B\u524D</strong>\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DECLARE \u6E38\u6807\u540D CURSOR FOR \u67E5\u8BE2\u8BED\u53E5;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>\u5F00\u542F\u6E38\u6807</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>OPEN \u6E38\u6807\u540D;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>\u4F7F\u7528\u6E38\u6807\uFF08\u4ECE\u6E38\u6807\u4E2D\u83B7\u53D6\u6570\u636E\uFF09\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>FETCH \u6E38\u6807\u540D INTO \u53D8\u91CF\u540D1 [, \u53D8\u91CF\u540D2, ...]
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>==\u8BF4\u660E\uFF1A==</p><p><strong>\u6E38\u6807\u7684\u67E5\u8BE2\u7ED3\u679C\u96C6\u4E2D\u7684\u5B57\u6BB5\uFF0C\u5FC5\u987B\u548CINTO\u540E\u7684\u53D8\u91CF\u4FDD\u6301\u4E00\u81F4</strong></p></li><li><p>\u5173\u95ED\u6E38\u6807</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CLOSE \u6E38\u6807\u540D;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h4 id="_15-4-3-\u4E3E\u4F8B" tabindex="-1"><a class="header-anchor" href="#_15-4-3-\u4E3E\u4F8B" aria-hidden="true">#</a> 15.4.3 \u4E3E\u4F8B</h4><p><code>\u4F8B</code>\u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B\u201Cget_count_by_limit_total_salary()\u201D\uFF0C\u58F0\u660EIN\u53C2\u6570 limit_total_salary\uFF0CDOUBLE\u7C7B\u578B\uFF1B\u58F0\u660EOUT\u53C2\u6570total_count\uFF0CINT\u7C7B\u578B\u3002\u51FD\u6570\u7684\u529F\u80FD\u53EF\u4EE5\u5B9E\u73B0\u7D2F\u52A0\u85AA\u8D44\u6700\u9AD8\u7684\u51E0\u4E2A\u5458\u5DE5\u7684\u85AA\u8D44\u503C\uFF0C\u76F4\u5230\u85AA\u8D44\u603B\u548C\u8FBE\u5230limit_total_salary\u53C2\u6570\u7684\u503C\uFF0C\u8FD4\u56DE\u7D2F\u52A0\u7684\u4EBA\u6570\u7ED9total_count\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u58F0\u660E\u5B58\u50A8\u8FC7\u7A0B 
DELIMITER $
CREATE PROCEDURE get_count_by_limit_total_salary(IN limit_total_salary DOUBLE, OUT total_count INT)
BEGIN
	# \u58F0\u660E\u53D8\u91CF\uFF0C\u5B58\u50A8\u85AA\u8D44\u7684\u548C
	DECLARE sal_sum DOUBLE DEFAULT 0;
	# \u58F0\u660E\u53D8\u91CF\uFF0C\u8BB0\u5F55\u7D2F\u52A0\u6B21\u6570
	DECLARE emp_num INT DEFAULT 0;
	# \u58F0\u660E\u53D8\u91CF\uFF0C\u8BB0\u5F55\u6E38\u6807\u6307\u5B9A\u884C\u7684salary\u4FE1\u606F
	DECLARE sal_tmp DOUBLE DEFAULT 0;
	# \u58F0\u660E\u6E38\u6807
	DECLARE sal_cursor CURSOR FOR SELECT salary FROM emps ORDER BY salary DESC;
	# \u6253\u5F00\u6E38\u6807
	OPEN sal_cursor;
	# \u5F00\u59CB\u5FAA\u73AF\u7D2F\u52A0
	add_sal: WHILE sal_sum &lt; limit_total_salary DO 
		# \u4F7F\u7528\u6E38\u6807
		FETCH sal_cursor INTO sal_tmp;
		SET sal_sum := sal_sum + sal_tmp;
		SET emp_num := emp_num + 1;
	END WHILE add_sal;
	# \u5173\u95ED\u6E38\u6807
	CLOSE sal_cursor;
	# \u7ED9\u4F20\u51FA\u53C2\u6570\u8D4B\u503C
	SET total_count := emp_num;
END $
DELIMITER ;

# \u8C03\u7528
CALL get_count_by_limit_total_salary(200000, @count);
SELECT @count;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h4 id="_15-4-4-\u6E38\u6807\u7684\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_15-4-4-\u6E38\u6807\u7684\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 15.4.4 \u6E38\u6807\u7684\u4F18\u7F3A\u70B9</h4><ul><li><p><strong>\u4F18\u70B9</strong>\uFF1A</p><ul><li>\u5141\u8BB8<code>\u9010\u6761\u8BFB\u53D6</code>\u7ED3\u679C\u96C6\u4E2D\u7684\u6570\u636E</li><li>\u8DDF\u5728\u5E94\u7528\u5C42 \u9762\u5B9E\u73B0\u76F8\u540C\u7684\u529F\u80FD\u76F8\u6BD4\uFF0C\u6E38\u6807\u53EF\u4EE5\u5728\u5B58\u50A8\u7A0B\u5E8F\u4E2D\u4F7F\u7528\uFF0C\u6548\u7387\u9AD8\uFF0C\u7A0B\u5E8F\u4E5F\u66F4\u52A0\u7B80\u6D01\u3002</li></ul></li><li><p><strong>\u7F3A\u70B9</strong>\uFF1A</p><p>\u5728\u4F7F\u7528\u6E38\u6807\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u4F1A\u5BF9\u6570\u636E\u884C\u8FDB\u884C<code>\u52A0\u9501</code>\u3002\u8FD9\u6837\u5728<em>\u4E1A\u52A1\u5E76\u53D1\u91CF\u5927</em> \u7684\u65F6\u5019\uFF0C\u4E0D\u4EC5\u4F1A<u>\u5F71\u54CD\u4E1A\u52A1\u4E4B\u95F4\u7684\u6548\u7387</u>\uFF0C\u8FD8\u4F1A<u>\u6D88\u8017\u7CFB\u7EDF\u8D44\u6E90</u> \uFF0C<u>\u9020\u6210\u5185\u5B58\u4E0D\u8DB3</u>\uFF0C\u8FD9\u662F\u56E0\u4E3A\u6E38\u6807\u662F\u5728\u5185\u5B58\u4E2D\u8FDB \u884C\u7684\u5904\u7406</p></li></ul><p>==\u5EFA\u8BAE\uFF1A==\u517B\u6210<strong>\u7528\u5B8C\u5C31\u5173\u95ED</strong>\u7684\u4E60\u60EF\uFF0C\u8FD9\u6837\u624D\u80FD\u63D0\u9AD8\u7CFB\u7EDF\u7684\u6574\u4F53\u6548\u7387\u3002</p><h3 id="_15-5-\u7EFC\u5408\u4F8B\u5B50" tabindex="-1"><a class="header-anchor" href="#_15-5-\u7EFC\u5408\u4F8B\u5B50" aria-hidden="true">#</a> 15.5 \u7EFC\u5408\u4F8B\u5B50</h3><p><code>\u4F8B</code>\u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0Bupdate_salary()\uFF0C\u53C2\u65701\u4E3A IN \u7684INT\u578B\u53D8\u91CFdept_id\uFF0C\u8868\u793A\u90E8\u95E8id\uFF1B\u53C2\u65702\u4E3A IN\u7684INT\u578B\u53D8\u91CFchange_sal_count\uFF0C\u8868\u793A\u8981\u8C03\u6574\u85AA\u8D44\u7684\u5458\u5DE5\u4E2A\u6570\uFF1B\u53C2\u65703\u4E3AOUT\u7684VARCHAR(255)\u578B\u53D8\u91CFresult\uFF0C\u8BB0\u5F55\u7A0B\u5E8F\u662F\u5426\u6B63\u5E38\u7ED3\u675F\u3002</p><p>\u67E5\u8BE2\u6307\u5B9Aid\u90E8\u95E8\u7684\u5458\u5DE5\u4FE1\u606F\uFF0C\u6309\u7167salary\u5347\u5E8F\u6392\u5217\uFF0C\u6839\u636Ehire_date\u7684\u60C5\u51B5\uFF0C\u8C03\u6574\u524Dchange_sal_count\u4E2A\u5458\u5DE5\u7684\u85AA\u8D44\u3002\u6DA8\u85AA\u6BD4\u4F8B\u5982\u4E0B\uFF1A</p><ul><li>1995(\u542B1995)\u5E74\u4E4B\u524D\u5165\u804C\u7684\uFF0C\u6DA8\u85AA120%\uFF1B</li><li>1995~1998\uFF08\u542B1998\uFF09\u5E74\u5165\u804C\u7684\uFF0C\u6DA8\u85AA115%\uFF1B</li><li>1998~2001\uFF08\u542B2001\uFF09\u5E74\u5165\u804C\u7684\u6DA8\u85AA110%\uFF1B</li><li>\u5176\u4ED6\u6DA8\u85AA105%</li></ul><p>\u53E6\u5916\uFF0C\u5173\u4E8E\u53C2\u65703 result\u7684\u503C\u8BBE\u8BA1\u5982\u4E0B\uFF1A</p><ul><li>\u5982\u679C\u7A0B\u5E8F\u6B63\u5E38\u7ED3\u675F\uFF0Cresult \u503C\u4E3A &quot;success&quot;\uFF1B</li><li>\u5F53\u7A0B\u5E8F\u62A5\u9519 \u201CERROR 1329 (02000)\u201D\u65F6\uFF0Cresult \u503C\u4E3A &quot;The change_sal_count is more than the number of employees of the current department&quot;</li></ul><p><code>\u5206\u6790\uFF1A</code>\u7528\u5230\u7684\u77E5\u8BC6\u70B9\u6709\uFF1A</p><p>\u2460\u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B\uFF1B\u2461\u5206\u652F\u7ED3\u6784\uFF1B\u2462\u5FAA\u73AF\u7ED3\u6784\uFF1B\u2463\u6E38\u6807\uFF1B\u2464\u5B9A\u4E49\u6761\u4EF6\u4E0E\u5904\u7406\u7A0B\u5E8F\uFF1B\u2465\u5C40\u90E8\u53D8\u91CF\u7B49</p><p><code>\u4EE3\u7801</code></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B
delimiter $
create procedure update_salary(in dept_id int, in change_sal_count int, out result varchar(255))
begin
	# \u521B\u5EFA\u53D8\u91CF\uFF0C\u8BB0\u5F55\u5458\u5DE5\u7684id
	declare emp_id int;
	# \u521B\u5EFA\u53D8\u91CF\uFF0C\u8BB0\u5F55\u5458\u5DE5\u5165\u804C\u5E74\u4EFD
	declare hire_year year;
	# \u521B\u5EFA\u53D8\u91CF\uFF0C\u8BB0\u5F55\u5458\u5DE5\u6DA8\u85AA\u5E45\u5EA6
	declare sal_rate double;
	
	# \u5B9A\u4E49\u6761\u4EF6
	declare index_out condition for 1329;
	
	# \u58F0\u660E\u6E38\u6807
	declare emp_cursor cursor for 
		select employee_id, year(hire_date)
		from emps 
		where department_id = dept_id 
		order by salary asc;
		
	# \u5B9A\u4E49\u5904\u7406\u7C7B\u578B
	declare exit handler for index_out set result = &#39;The change_sal_count is more than the number of employees of the current department&#39;;

	# \u5F00\u542F\u6E38\u6807
	open emp_cursor;
	
	update_sal: while change_sal_count &gt; 0 do
		# \u4F7F\u7528\u6E38\u6807
		fetch emp_cursor into emp_id, hire_year;
		# \u83B7\u53D6\u6DA8\u85AA\u7387
		case
			when hire_year &lt;= 1995 then set sal_rate = 1.2;
			when hire_year &lt;= 1998 then set sal_rate = 1.15;
			when hire_year &lt;= 2001 then set sal_rate = 1.10;
			else set sal_rate = 1.05;
		end case;
		# \u6DA8\u85AA
		update emps set salary = salary * sal_rate where employee_id = emp_id;
		# \u66F4\u65B0\u8FED\u4EE3\u6761\u4EF6
		set change_sal_count = change_sal_count - 1;
	end while update_sal;
	
	# \u5173\u95ED\u6E38\u6807
	close emp_cursor;
	
	# \u7A0B\u5E8F\u6B63\u5E38\u7ED3\u675F
	set result = &#39;success&#39;;
end $
delimiter ;

select employee_id, year(hire_date), salary
		from emps 
		where department_id = 90 
		order by salary asc;

# \u8C03\u7528
call update_salary(90, 2, @result);
select @result;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><h2 id="_16-\u89E6\u53D1\u5668" tabindex="-1"><a class="header-anchor" href="#_16-\u89E6\u53D1\u5668" aria-hidden="true">#</a> 16 \u89E6\u53D1\u5668</h2><h3 id="_16-1-\u5B9A\u4E49\u89E6\u53D1\u5668" tabindex="-1"><a class="header-anchor" href="#_16-1-\u5B9A\u4E49\u89E6\u53D1\u5668" aria-hidden="true">#</a> 16.1 \u5B9A\u4E49\u89E6\u53D1\u5668</h3><blockquote><p>\u8BED\u6CD5</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TRIGGER \u89E6\u53D1\u5668\u540D\u79F0
{BEFORE|AFTER} {INSERT|UPDATE|DELETE} ON \u8868\u540D
FOR EACH ROW
\u89E6\u53D1\u5668\u6267\u884C\u7684\u8BED\u53E5\u5757;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>==\u8BF4\u660E\uFF1A==</p><ul><li><p><code>BEFORE|AFTER</code>\uFF1A\u4E8C\u9009\u4E00</p><ul><li><code>BEFORE</code>\uFF1A\u8868\u793A\u5728\u4E8B\u4EF6\u53D1\u751F\u4E4B\u524D\u6267\u884C\u5F53\u524D\u89E6\u53D1\u5668</li><li><code>AFTER</code>\uFF1A\u8868\u793A\u5728\u4E8B\u4EF6\u53D1\u751F\u4E4B\u540E\u4E4B\u6267\u884C\u89E6\u53D1\u5668\u3002<strong>\u4E0D\u5141\u8BB8\u5728\u89E6\u53D1\u540E\u66F4\u65B0new\u884C\u548Cold\u884C</strong></li></ul></li><li><p><code>INSERT|UPDATE|DELETE</code>\uFF1A\u4E09\u9009\u4E00\uFF0C\u8868\u540D\u4E8B\u4EF6\u7C7B\u578B</p><ul><li><code>INSERT</code>\uFF1A\u4F7F\u7528<code>NEW</code>(\u6216<code>new</code>)\u4EE3\u8868\u5F53\u524D\u8981\u63D2\u5165\u7684\u5BF9\u8C61</li><li><code>DELETE</code>\uFF1A\u4F7F\u7528<code>OLD</code>(\u6216<code>old</code>)\u4EE3\u8868\u5F53\u524D\u8981\u5220\u9664\u7684\u5BF9\u8C61</li><li><code>UPDATE</code>\uFF1A<code>NEW</code>(\u6216<code>new</code>)\u548C<code>OLD</code>(\u6216<code>old</code>)\u90FD\u53EF\u4EE5\u7528\u3002</li></ul></li><li><p><code>FOR EACH ROW</code>\uFF1A\u8868\u793A\u6BCF\u4E00\u884C\u90FD\u8981\u6267\u884C\u89E6\u53D1\u5668</p></li><li><p><code>\u89E6\u53D1\u5668\u6267\u884C\u7684\u8BED\u53E5\u5757</code>\uFF1A\u53EF\u4EE5\u662F\u4E00\u884Csql\u8BED\u53E5\uFF0C\u4E5F\u53EF\u4EE5\u662F\u590D\u6742\u7684<code>BEGIN ... END</code>\u8BED\u53E5</p></li><li><p><strong>\u540C\u8868\u7684\u66F4\u65B0\u4E0D\u80FD\u5728\u89E6\u53D1\u5668\u4E2D\u4F7F\u7528update\uFF0C\u800C\u662F\u76F4\u63A5\u4F7F\u7528set\u3002\u76F8\u5F53\u4E8E\u7ED9new\u6216old\u5BF9\u8C61\u8FDB\u884C\u8D4B\u503C\u64CD\u4F5C</strong>\u3002</p><p>\u4F8B\u5B50\uFF1A16.5--&gt;<code>\u4EE3\u7801</code>--&gt; \u2461\u548C\u2464</p></li></ul><h3 id="_16-2-\u67E5\u770B\u89E6\u53D1\u5668" tabindex="-1"><a class="header-anchor" href="#_16-2-\u67E5\u770B\u89E6\u53D1\u5668" aria-hidden="true">#</a> 16.2 \u67E5\u770B\u89E6\u53D1\u5668</h3><ul><li><p>\u67E5\u770B\u5F53\u524D\u6570\u636E\u5E93\u6240\u6709\u7684\u89E6\u53D1\u5668</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW TRIGGERS;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>\u67E5\u770B\u5F53\u524D\u6570\u636E\u5E93\u6307\u5B9A\u89E6\u53D1\u5668\u7684\u5B9A\u4E49</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SHOW CREATE TRIGGER \u89E6\u53D1\u5668\u540D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>\u4ECE\u7CFB\u7EDF\u5E93information_schema\u7684TRIGGERS\u8868\u4E2D\u67E5\u8BE2\u89E6\u53D1\u5668\u7684\u4FE1\u606F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT * FROM information_schema.TRIGGERS [WHERE \u5B57\u53E5];
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h3 id="_16-3-\u5220\u9664\u89E6\u53D1\u5668" tabindex="-1"><a class="header-anchor" href="#_16-3-\u5220\u9664\u89E6\u53D1\u5668" aria-hidden="true">#</a> 16.3 \u5220\u9664\u89E6\u53D1\u5668</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>DROP TRIGGER IF EXISTS \u89E6\u53D1\u5668\u540D\u79F0;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_16-4-\u4E2D\u65AD\u89E6\u53D1\u5668\u7684\u6267\u884C" tabindex="-1"><a class="header-anchor" href="#_16-4-\u4E2D\u65AD\u89E6\u53D1\u5668\u7684\u6267\u884C" aria-hidden="true">#</a> 16.4 \u4E2D\u65AD\u89E6\u53D1\u5668\u7684\u6267\u884C</h3><p>\u53EF\u4EE5\u4F7F\u7528<code>SIGNAL</code>\u8BED\u53E5\u629B\u51FA\u5F02\u5E38\uFF0C\u4E2D\u65AD\u89E6\u53D1\u5668\u7684\u6267\u884C\uFF0C\u5E76\u63D0\u4F9B\u9519\u8BEF\u4FE1\u606F\u3002</p><blockquote><p>\u8BED\u6CD5</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SIGNAL condition_value
    [SET condition_information_item_name = \u503C [, condition_information_item_name = \u503C, ...]];
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>==\u8BF4\u660E\uFF1A==</p><ul><li><code>condition_value</code>\u53EF\u9009\u503C\u5982\u4E0B\uFF1A <ul><li><code>SQLSTATE &#39;\u957F\u5EA6\u4E3A5\u7684\u5B57\u7B26\u4E32\u7C7B\u578B\u7684\u9519\u8BEF\u4EE3\u7801&#39;</code>\uFF1A\u5176\u4E2D&#39;\u9519\u8BEF\u7801&#39;\u4E0D\u80FD\u662F00\uFF08\u8868\u793A\u6210\u529F\uFF09\u548C01\uFF08\u8868\u793A\u8B66\u544A\uFF09\u5F00\u5934\uFF0C\u56E0\u4E3A\u4E8C\u8005\u4E0D\u4F1A\u4E2D\u65AD\u6267\u884C\u3002</li><li><code>\u4E8B\u5148\u7528DECLARE\u81EA\u5B9A\u4E49\u7684\u6761\u4EF6\u540D\u79F0</code></li></ul></li><li><code>condition_information_item_name</code>\u53EF\u9009\u503C\u5982\u4E0B\uFF1A <ul><li><code>MESSAGE_TEXT</code>\uFF1A\u5BF9\u5E94\u7684\u503C\u4E3A\u9519\u8BEF\u63CF\u8FF0\u4FE1\u606F</li><li><code>MYSQL_ERRNO</code>\uFF1A\u5BF9\u5E94\u7684\u503C\u4E3A\u6570\u503C\u578B\u7684\u9519\u8BEF\u4EE3\u7801</li><li>...</li></ul></li></ul><p>==\u4E3E\u4F8B\uFF1A==</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>delimiter $
create trigger salary_check_trigger
before insert on emps
for each row
begin
	declare mgr_sal double;
	select salary into mgr_sal from emps where employee_id = NEW.manager_id;
	
	if NEW.salary &gt; mgr_sal 
		then SIGNAL SQLSTATE &#39;HY000&#39; SET MESSAGE_TEXT = &#39;\u85AA\u8D44\u9AD8\u4E8E\u9886\u5BFC\u85AA\u8D44\u9519\u8BEF&#39;, MYSQL_ERRNO = 1644;
	end if;
end $
delimiter ;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_16-5-\u89E6\u53D1\u5668\u7684\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_16-5-\u89E6\u53D1\u5668\u7684\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 16.5 \u89E6\u53D1\u5668\u7684\u4F18\u7F3A\u70B9</h3><h4 id="_16-5-1-\u4F18\u70B9" tabindex="-1"><a class="header-anchor" href="#_16-5-1-\u4F18\u70B9" aria-hidden="true">#</a> 16.5.1 \u4F18\u70B9</h4><ul><li><strong>\u53EF\u4EE5\u786E\u4FDD\u6570\u636E\u7684\u5B8C\u6574\u6027</strong></li><li><strong>\u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u8BB0\u5F55\u65E5\u5FD7\u64CD\u4F5C</strong></li><li><strong>\u53EF\u4EE5\u5728\u64CD\u4F5C\u6570\u636E\u524D\uFF0C\u5BF9\u6570\u636E\u8FDB\u884C\u5408\u6CD5\u6027\u68C0\u67E5</strong></li></ul><h4 id="_16-5-2-\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_16-5-2-\u7F3A\u70B9" aria-hidden="true">#</a> 16.5.2 \u7F3A\u70B9</h4><ul><li><p><strong>\u53EF\u8BFB\u6027\u5DEE</strong>\u3002\u56E0\u4E3A\u89E6\u53D1\u5668\u5B58\u50A8\u5728\u6570\u636E\u5E93\u4E2D\uFF0C\u5E76\u4E14\u7531\u4E8B\u4EF6\u9A71\u52A8\uFF0C\u8FD9\u5C31\u610F\u5473\u7740\u89E6\u53D1\u5668\u6709\u53EF\u80FD<code>\u4E0D\u53D7\u5E94\u7528\u5C42\u7684\u63A7\u5236</code>\u3002</p><p>\u6BD4\u5982\uFF0C\u5728\u7ED9t_user\u8868\u4E2D\u63D2\u5165\u7528\u6237\u4FE1\u606F\u65F6\uFF0C\u9700\u8981\u66F4\u65B0t_user_log\u8868\u3002\u5F53t_user_log\u4E2D\u7684remark\u5B57\u6BB5\u8FC7\u957F\uFF0C\u89E6\u53D1\u5668\u4F1A\u62A5\u9519\u3002\u4F46\u662Ft_user\u8868\u4E2D\u5E76\u6CA1\u6709remark\u5B57\u6BB5\u3002\u5982\u679C\u4F60\u4E0D\u4E86\u89E3\u8FD9\u4E2A\u89E6\u53D1\u5668\uFF0C \u5F88\u53EF\u80FD\u4F1A\u8BA4\u4E3A\u662F\u66F4\u65B0\u8BED\u53E5\u672C\u8EAB\u7684\u95EE\u9898</p></li><li><p>**\u76F8\u5173\u6570\u636E\u7684\u53D8\u66F4\uFF0C\u53EF\u80FD\u4F1A\u5BFC\u81F4\u89E6\u53D1\u5668\u51FA\u9519\u3002**\u7279\u522B\u662F\u6570\u636E\u8868\u7ED3\u6784\u7684\u53D8\u66F4\uFF0C\u90FD\u53EF\u80FD\u4F1A\u5BFC\u81F4\u89E6\u53D1\u5668\u51FA\u9519\uFF0C\u8FDB\u800C\u5F71\u54CD\u6570\u636E\u64CD\u4F5C\u7684\u6B63\u5E38\u8FD0\u884C\u3002\u8FD9\u4E9B\u90FD\u4F1A\u7531\u4E8E\u89E6 \u53D1\u5668\u672C\u8EAB\u7684\u9690\u853D\u6027\uFF0C\u5F71\u54CD\u5230\u5E94\u7528\u4E2D\u9519\u8BEF\u539F\u56E0\u6392\u67E5\u7684\u6548\u7387</p></li></ul><h3 id="_16-6-\u89E6\u53D1\u5668\u4F7F\u7528\u4F8B\u5B50" tabindex="-1"><a class="header-anchor" href="#_16-6-\u89E6\u53D1\u5668\u4F7F\u7528\u4F8B\u5B50" aria-hidden="true">#</a> 16.6 \u89E6\u53D1\u5668\u4F7F\u7528\u4F8B\u5B50</h3><p><code>\u4F8B</code>\u521B\u5EFAt_user\u8868\uFF0Ct_user_log\u8868\u3002</p><ul><li>\u2460\u5728\u63D2\u5165\u7528\u6237\u4FE1\u606F\u540E\uFF0C\u4F7F\u7528\u89E6\u53D1\u5668\uFF0C\u81EA\u52A8\u63D2\u5165create_time\u3001update_time\u5B57\u6BB5\uFF0C\u5E76\u4E14\u5728t_user_log\u8868\u4E2D\u63D2\u5165\u65E5\u5FD7</li><li>\u2461\u5728\u66F4\u65B0\u7528\u6237\u4FE1\u606F\u524D\uFF0C\u4F7F\u7528\u89E6\u53D1\u5668\uFF0C\u81EA\u52A8\u66F4\u65B0update_time\u5B57\u6BB5\uFF0C\u5E76\u4E14\u5728t_user_log\u8868\u4E2D\u63D2\u5165\u65E5\u5FD7</li><li>\u2462\u5728\u5220\u9664\u7528\u6237\u4FE1\u606F\u540E\uFF0C\u4F7F\u7528\u89E6\u53D1\u5668\uFF0C\u5728t_user_log\u8868\u4E2D\u63D2\u5165\u65E5\u5FD7</li></ul><p><code>\u4EE3\u7801</code></p><ul><li><p>\u2460\u521B\u5EFAt_user\u8868\uFF0Ct_user_log\u8868</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>create table t_user(
	id int primary key auto_increment,
	user_name VARCHAR(25),
	create_time datetime,
	update_time datetime
);
create table t_user_log(
	id int primary key auto_increment,
	user_id int,
	user_name_old varchar(25),
	user_name_new varchar(25),
	type enum(&#39;1&#39;, &#39;2&#39;, &#39;3&#39;) default &#39;1&#39; comment &#39;1\u63D2\u51652\u66F4\u65B03\u5220\u9664&#39; ,
	remark varchar(25),
	create_time datetime
);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li><li><p>\u2461\u521B\u5EFA\u89E6\u53D1\u5668<code>t_user_before_insert_trigger</code>\uFF0C\u5728\u63D2\u5165\u7528\u6237\u4FE1\u606F\u65F6\uFF0C\u81EA\u52A8\u586B\u5145create_time\u548Cupdate_time</p><p>==\u540C\u8868\u6570\u636E\u66F4\u65B0==</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u89E6\u53D1\u5668\u4F5C\u7528\uFF1A\u5728\u63D2\u5165\u7528\u6237\u4FE1\u606F\u65F6\uFF0C\u81EA\u52A8\u586B\u5145create_time\u548Cupdate_time
# \u4F7F\u7528before\u7684\u539F\u56E0\uFF1A\u4E0D\u5141\u8BB8\u5728\u89E6\u53D1\u540E\uFF0C\u66F4\u65B0new\u884C\u548Cold\u884C
delimiter $
create trigger t_user_before_insert_trigger
before insert on t_user
for each row
begin 
	# \u540C\u8868\u7684\u66F4\u65B0\u4E0D\u80FD\u7528update\uFF0C\u800C\u662F\u76F4\u63A5\u4F7F\u7528set
	# \u53EF\u4EE5\u7406\u89E3\u4E3A\uFF1A
	# 	\u2460\u5728\u63D2\u5165\u4E4B\u524D\u4E2D\u8FD8\u6CA1\u6709\u5F53\u524D\u8BB0\u5F55\uFF0C\u6240\u4EE5\u65E0\u6CD5\u4F7F\u7528update\uFF08\u56E0\u4E3Aupdate\u9700\u8981\u6839\u636Eid\u6216\u5176\u4ED6\u5B57\u6BB5\u5B9A\u4F4D\uFF09
	# 	\u2461\u4F7F\u7528set\u7ED9\u5F53\u524D\u5BF9\u8C61\uFF08new\uFF09\u8FDB\u884C\u8D4B\u503C\uFF0C\u5728\u63D2\u5165\u65F6\u5F53\u524D\u5BF9\u8C61\u7684create_time\u3001update_time\u5C31\u6709\u503C\u4E86
	set new.create_time = now(), new.update_time = now(); 
end $
delimiter ;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li><li><p>\u2462\u521B\u5EFA\u89E6\u53D1\u5668<code>t_user_after_insert_trigger</code>\uFF0C\u5728\u63D2\u5165\u7528\u6237\u4FE1\u606F\u65F6\uFF0C\u4F7F\u7528\u65E5\u5FD7\u8868t_user_log\u8BB0\u5F55\u64CD\u4F5C\u65E5\u5FD7</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u89E6\u53D1\u5668\u4F5C\u7528\uFF1A\u5728\u63D2\u5165\u7528\u6237\u4FE1\u606F\u540E\uFF0C\u4F7F\u7528\u65E5\u5FD7\u8868t_user_log\u8BB0\u5F55\u64CD\u4F5C\u65E5\u5FD7
delimiter $
create trigger t_user_after_insert_trigger
after insert on t_user
for each row
begin
	insert into t_user_log(user_id, user_name_new, type, remark, create_time)
	values (new.id, new.user_name, 1, &#39;\u63D2\u5165\u7528\u6237\u4FE1\u606F&#39;, now());
end $
delimiter ;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li><li><p>\u2463\u63D2\u5165\u6570\u636E\u9A8C\u8BC1</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u63D2\u5165\u6570\u636E
insert into t_user(user_name) values(&#39;Tom&#39;);
# \u9A8C\u8BC1
select * from t_user;
select * from t_user_log;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>\u2464\u521B\u5EFA\u89E6\u53D1\u5668<code>t_user_before_update_trigger</code>\uFF0C\u5728\u66F4\u65B0\u7528\u6237\u4FE1\u606F\u65F6\uFF0C\u81EA\u52A8\u66F4\u65B0update_time</p><p>==\u540C\u8868\u6570\u636E\u66F4\u65B0==</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u89E6\u53D1\u5668\u4F5C\u7528\uFF1A\u5728\u66F4\u65B0\u7528\u6237\u4FE1\u606F\u65F6\uFF0C\u81EA\u52A8\u66F4\u65B0update_time
# \u4F7F\u7528before\u7684\u539F\u56E0\uFF1A\u4E0D\u5141\u8BB8\u5728\u89E6\u53D1\u540E\u66F4\u65B0new\u884C\u548Cold\u884C
delimiter $
create trigger t_user_before_update_trigger
before update on t_user
for each row
begin
	set new.update_time = now();
end $
delimiter ;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li><li><p>\u2465\u521B\u5EFA\u89E6\u53D1\u5668<code>t_user_after_update_trigger</code>\uFF0C\u4F7F\u7528\u65E5\u5FD7\u8868t_user_log\u8BB0\u5F55\u64CD\u4F5C\u65E5\u5FD7</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u89E6\u53D1\u5668\u4F5C\u7528\uFF1A\u5728\u66F4\u65B0\u7528\u6237\u4FE1\u606F\u540E\uFF0C\u4F7F\u7528\u65E5\u5FD7\u8868t_user_log\u8BB0\u5F55\u64CD\u4F5C\u65E5\u5FD7
delimiter $
create trigger t_user_after_update_trigger
after update on t_user
for each row
begin
	insert into t_user_log(user_id, user_name_old, user_name_new, type, remark, create_time)
	values (new.id, old.user_name, new.user_name, 2, &#39;\u66F4\u65B0\u7528\u6237\u4FE1\u606F&#39;, now());
end $
delimiter ;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li><li><p>\u2466\u66F4\u65B0\u6570\u636E\u9A8C\u8BC1</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u66F4\u65B0\u6570\u636E
update t_user set user_name = &#39;Tom1&#39; where id = 1;
# \u9A8C\u8BC1
select * from t_user;
select * from t_user_log;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>\u2467\u521B\u5EFA\u89E6\u53D1\u5668<code>t_user_after_delete_trigger</code>\uFF0C\u5728\u5220\u9664\u6570\u636E\u540E\uFF0C\u4F7F\u7528\u65E5\u5FD7\u8868t_user_log\u8BB0\u5F55\u64CD\u4F5C\u65E5\u5FD7</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u89E6\u53D1\u5668\u4F5C\u7528\uFF1A\u5728\u5220\u9664\u6570\u636E\u540E\uFF0C\u4F7F\u7528\u65E5\u5FD7\u8868t_user_log\u8BB0\u5F55\u64CD\u4F5C\u65E5\u5FD7
delimiter $
create trigger t_user_after_delete_trigger
after delete on t_user
for each row
begin
	insert into t_user_log(user_id, user_name_old, type, remark, create_time)
	values (old.id, old.user_name, 3, &#39;\u5220\u9664\u7528\u6237\u4FE1\u606F&#39;, now());
end $
delimiter ;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li><li><p>\u2468\u5220\u9664\u6570\u636E\u9A8C\u8BC1</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u5220\u9664\u6570\u636E
delete from t_user where id = 1;
# \u9A8C\u8BC1
select * from t_user;
select * from t_user_log;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul><h3 id="_16-7-\u89E6\u53D1\u5668\u4F7F\u7528\u6CE8\u610F\u4E8B\u9879" tabindex="-1"><a class="header-anchor" href="#_16-7-\u89E6\u53D1\u5668\u4F7F\u7528\u6CE8\u610F\u4E8B\u9879" aria-hidden="true">#</a> 16.7 \u89E6\u53D1\u5668\u4F7F\u7528\u6CE8\u610F\u4E8B\u9879</h3><p>\u5982\u679C\u5728\u5B50\u8868\u4E2D\u5B9A\u4E49\u4E86<em>\u5916\u952E\u7EA6\u675F</em>\uFF0C\u5E76\u4E14\u5916\u952E\u6307\u5B9A\u4E86<code>ON UPDATE</code>/<code>DELETE CASCADE</code>/<code>SET NULL</code>\u5B50\u53E5\uFF0C\u6B64\u65F6<em>\u4FEE\u6539\u7236\u8868\u88AB\u5F15\u7528\u7684\u952E\u503C\u6216\u5220\u9664\u7236\u8868\u88AB\u5F15\u7528\u7684\u8BB0\u5F55\u884C</em>\u65F6\uFF0C\u4E5F\u4F1A\u5F15\u8D77\u5B50\u8868\u7684\u4FEE\u6539\u548C\u5220\u9664\u64CD\u4F5C\uFF0C\u6B64\u65F6<strong>\u57FA\u4E8E\u5B50\u8868\u7684UPDATE\u548CDELETE\u8BED\u53E5\u5B9A\u4E49\u7684\u89E6\u53D1\u5668\u5E76\u4E0D\u4F1A\u88AB\u6FC0\u6D3B</strong></p><h2 id="_18-mysql8-0\u65B0\u7279\u6027" tabindex="-1"><a class="header-anchor" href="#_18-mysql8-0\u65B0\u7279\u6027" aria-hidden="true">#</a> 18 MySQL8.0\u65B0\u7279\u6027</h2><h3 id="_18-1-mysql80-0\u65B0\u7279\u6027\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_18-1-mysql80-0\u65B0\u7279\u6027\u6982\u8FF0" aria-hidden="true">#</a> 18.1 MySQL80.0\u65B0\u7279\u6027\u6982\u8FF0</h3><h4 id="_18-1-1-mysql8-0\u65B0\u589E\u7279\u6027" tabindex="-1"><a class="header-anchor" href="#_18-1-1-mysql8-0\u65B0\u589E\u7279\u6027" aria-hidden="true">#</a> 18.1.1 MySQL8.0\u65B0\u589E\u7279\u6027</h4><ul><li><p><strong>\u66F4\u7B80\u4FBF\u7684NoSQL\u652F\u6301</strong>\u3002\u4ECE5.6\u7248\u672C\u5F00\u59CB\uFF0CMySQL\u5C31\u5F00\u59CB\u652F\u6301\u7B80\u5355\u7684NoSQL\u5B58\u50A8\u529F\u80FD\u3002MySQL8.0\u5BF9\u8FD9\u4E00\u529F\u80FD\u505A\u4E86\u4F18\u5316\uFF0C\u4EE5\u66F4\u7075\u6D3B\u7684\u65B9\u5F0F\u5B9E\u73B0NoSQL\uFF0C\u4E0D\u518D\u4F9D\u8D56\u6A21\u5F0F\u3002</p></li><li><p><strong>\u66F4\u597D\u7684\u7D22\u5F15</strong>\u3002\u65B0\u589E<code>\u9690\u85CF\u7D22\u5F15</code>\u548C<code>\u964D\u5E8F\u7D22\u5F15</code>\u3002<code>\u9690\u85CF\u7D22\u5F15</code>\u53EF\u4EE5\u7528\u6765\u6D4B\u8BD5\u53BB\u6389\u7D22\u5F15\u5BF9\u67E5\u8BE2\u6027\u80FD\u7684\u5F71\u54CD\uFF1B\u5728\u67E5\u8BE2\u4E2D\u6DF7\u5408\u5B58\u5728\u591A\u5217\u7D22\u5F15\u65F6\uFF0C\u4F7F\u7528<code>\u964D\u5E8F\u7D22\u5F15</code>\u53EF\u4EE5\u63D0\u9AD8\u67E5\u8BE2\u6027\u80FD\u3002</p></li><li><p><strong>\u66F4\u5B8C\u5584\u7684JSON\u652F\u6301</strong>\u3002\u4ECE5.7\u7248\u672C\u5F00\u59CB\u652F\u6301\u539F\u751Fjson\u6570\u636E\u7684\u5B58\u50A8\uFF0C8.0\u8FDB\u884C\u4E86\u4F18\u5316\u3002</p><ul><li>\u589E\u52A0\u4E86\u805A\u5408\u51FD\u6570<code>JSON_ARRAYGG</code>\u548C<code>JSON_OBJECTAGG</code>\uFF0C\u5C06\u53C2\u6570\u805A\u5408\u4E3AJSON\u6570\u7EC4\u6216\u5BF9\u8C61\uFF1B</li><li>\u65B0\u589E\u884C\u5185\u64CD\u4F5C\u7B26<code>-&gt;&gt;</code>\uFF0C\u662F\u5217\u8DEF\u5F84\u8FD0\u7B97\u7B26<code>-&gt;</code>\u7684\u589E\u5F3A\uFF0C\u5BF9JSON\u6392\u5E8F\u505A\u4E86\u63D0\u5347\uFF1B</li><li>\u4F18\u5316\u4E86JSON\u7684\u66F4\u65B0\u64CD\u4F5C</li></ul></li><li><p><strong>\u5B89\u5168\u548C\u8D26\u6237\u7BA1\u7406</strong>\u3002\u65B0\u589E<code>caching_sha2_password</code>\u6388\u6743\u63D2\u4EF6\u3001\u89D2\u8272\u3001\u5BC6\u7801\u5386\u53F2\u8BB0\u5F55\u548CFIPS\u6A21\u5F0F\u652F\u6301\u3002\u63D0\u9AD8\u4E86\u6570\u636E\u5E93\u7684\u5B89\u5168\u6027\u548C\u6027\u80FD\uFF0C\u4F7F\u6570\u636E\u5E93\u7BA1\u7406\u5458\u80FD\u66F4\u7075\u6D3B\u7684\u8FDB\u884C\u8D26\u6237\u7BA1\u7406\u5DE5\u4F5C\u3002</p></li><li><p><strong>InnoDB\u7684\u53D8\u5316</strong>\u3002<code>InnoDB\u662FMySQL\u9ED8\u8BA4\u7684\u5B58\u50A8\u5F15\u64CE</code>\uFF0C8.0\u5728\u5176\u81EA\u589E\u3001\u7D22\u5F15\u3001\u52A0\u5BC6\u3001\u6B7B\u9501\u3001\u5171\u4EAB\u9501\u7B49\u65B9\u9762\u505A\u4E86\u5927\u91CF\u7684<code>\u6539\u8FDB\u548C\u4F18\u5316</code>\uFF0C\u5E76\u4E14\u652F\u6301\u539F\u5B50\u6570\u636E\u5B9A\u4E49\u8BED\u8A00\uFF08DDL\uFF09\uFF0C\u63D0\u9AD8\u4E86\u6570\u636E\u5B89\u5168\u6027\uFF0C\u5BF9\u4E8B\u52A1\u63D0\u4F9B\u66F4\u597D\u7684\u652F\u6301\u3002</p></li><li><p><strong>\u6570\u636E\u5B57\u5178</strong>\u3002\u65B0\u589E\u4E8B\u52A1\u6570\u636E\u5B57\u5178\uFF0C\u7528\u6765\u5B58\u50A8\u6570\u636E\u5E93\u5BF9\u8C61\u4FE1\u606F\u3002\u6570\u636E\u5B57\u5178\u5B58\u50A8\u5728\u5185\u90E8\u4E8B\u52A1\u8868\u4E2D\u3002</p></li><li><p><strong>\u539F\u5B50\u6570\u636E\u5B9A\u4E49\u8BED\u8A00</strong>\uFF0C\u5373<code>\u539F\u5B50DDL</code>\u3002\u76EE\u524D\u53EA\u6709InnoDB\u5F15\u64CE\u652F\u6301\u3002</p><ul><li>\u5B9A\u4E49\uFF1A\u539F\u5B50\u6570\u636E\u5B9A\u4E49\u8BED\u53E5\uFF08DDL\uFF09\u5C06\u4E0EDDL\u64CD\u4F5C\u76F8\u5173\u7684\u6570\u636E\u5B57\u5178\u66F4\u65B0\u3001\u5B58\u50A8\u5F15\u64CE\u64CD\u4F5C\u3001\u4E8C\u8FDB\u5236\u65E5\u5FD7\u5199\u5165\u7ED3\u5408\u5230\u4E00\u4E2A\u5355\u72EC\u7684\u539F\u5B50\u4E8B\u52A1\u4E2D\u3002</li><li>\u597D\u5904\uFF1A\u5373\u4F7F\u670D\u52A1\u5668\u5D29\u6E83\uFF0C\u4E8B\u52A1\u4E5F\u4F1A\u63D0\u4EA4\u6216\u56DE\u6EDA\u3002</li><li>\u5177\u4F53\u8868\u73B0\uFF1A\u4F7F\u7528\u652F\u6301\u539F\u5B50DDL\u7684\u5F15\u64CE\u6240\u521B\u5EFA\u7684\u8868\uFF0C\u5728\u6267\u884C<code>DROP TABLE</code>\u3001<code>CREATE TABLE</code>\u3001<code>ALTER TABLE</code>\u3001<code>RENAME TABLE</code>\u3001<code>TRUNCATE TABLE</code>\u3001<code>CREATE TABLESPACE</code>\u3001<code>DROP TABLESPACE</code>\u7B49\u64CD\u4F5C\u65F6\uFF0C\u90FD\u652F\u6301\u539F\u5B50\u64CD\u4F5C\uFF0C\u5373<em>\u4E8B\u52A1\u8981\u4E48\u5B8C\u5168\u64CD\u4F5C\u6210\u529F\uFF0C\u8981\u4E48\u5931\u8D25\u540E\u56DE\u6EDA\uFF0C\u4E0D\u518D\u8FDB\u884C\u90E8\u5206\u63D0\u4EA4</em>\u3002</li></ul></li><li><p><strong>\u8D44\u6E90\u7BA1\u7406</strong>\u3002MySQL 8\u5F00\u59CB\u652F\u6301\u521B\u5EFA\u548C\u7BA1\u7406<code>\u8D44\u6E90\u7EC4</code>\uFF0C\u5141\u8BB8\u5C06\u670D\u52A1\u5668\u5185\u8FD0\u884C\u7684\u7EBF\u7A0B\u5206\u914D\u7ED9\u7279\u5B9A\u7684\u5206\u7EC4\uFF0C\u4EE5\u4FBF\u7EBF\u7A0B\u6839\u636E\u7EC4\u5185\u53EF\u7528\u8D44\u6E90\u6267\u884C.</p></li><li><p><strong>\u5B57\u7B26\u96C6\u652F\u6301</strong>\u3002MySQL 8\u9ED8\u8BA4\u5B57\u7B26\u96C6\u6539\u4E3A<code>utf8mb4</code> \uFF0C\u5E76\u9996\u6B21\u589E\u52A0\u4E86\u65E5\u8BED\u6240\u7279\u5B9A\u4F7F\u7528\u7684\u96C6 \u5408\uFF0Cutf8mb4_ja_0900_as_cs\u3002</p></li><li><p><strong>\u4F18\u5316\u5668\u589E\u5F3A</strong>\u3002MySQL\u4F18\u5316\u5668\u5F00\u59CB\u652F\u6301\u9690\u85CF\u7D22\u5F15\u548C\u964D\u5E8F\u7D22\u5F15\u3002\u9690\u85CF\u7D22\u5F15\u4E0D\u4F1A\u88AB\u4F18\u5316\u5668\u4F7F\u7528\uFF0C\u9A8C\u8BC1\u7D22\u5F15\u7684\u5FC5 \u8981\u6027\u65F6\u4E0D\u9700\u8981\u5220\u9664\u7D22\u5F15\uFF0C\u5148\u5C06\u7D22\u5F15\u9690\u85CF\uFF0C\u5982\u679C\u4F18\u5316\u5668\u6027\u80FD\u65E0\u5F71\u54CD\u5C31\u53EF\u4EE5\u771F\u6B63\u5730\u5220\u9664\u7D22\u5F15\u3002\u964D\u5E8F\u7D22\u5F15\u5141\u8BB8 \u4F18\u5316\u5668\u5BF9\u591A\u4E2A\u5217\u8FDB\u884C\u6392\u5E8F\uFF0C\u5E76\u4E14\u5141\u8BB8\u6392\u5E8F\u987A\u5E8F\u4E0D\u4E00\u81F4\u3002</p></li><li><p><strong>\u516C\u7528\u8868\u8868\u8FBE\u5F0F</strong>\u3002\u516C\u7528\u8868\u8868\u8FBE\u5F0F\uFF08Common Table Expressions\uFF09\u7B80\u79F0\u4E3ACTE\uFF0CMySQL\u73B0\u5728\u652F\u6301<code>\u9012\u5F52</code>\u548C<code>\u975E\u9012\u5F52</code>\u4E24\u79CD\u5F62\u5F0F\u7684CTE\u3002</p></li><li><p><strong>\u7A97\u53E3\u51FD\u6570</strong>\u3002\u5728\u4E4B\u524D\u7684\u7248\u672C\u4E2D\u5DF2\u5B58\u5728\u7684\u5927\u90E8\u5206 \u805A\u5408\u51FD\u6570 \u5728MySQL 8\u4E2D\u4E5F\u53EF\u4EE5 \u4F5C\u4E3A\u7A97\u53E3\u51FD\u6570\u6765\u4F7F\u7528\u3002</p><p>==\u7A97\u53E3\u51FD\u6570\u5982\u4E0B\uFF1A==</p><table><thead><tr><th>\u51FD\u6570\u540D\u79F0</th><th>\u63CF\u8FF0</th></tr></thead><tbody><tr><td>ROW_NUMBER()</td><td>\u987A\u5E8F\u6392\u5E8F</td></tr><tr><td>RANK()</td><td>\u5E76\u5217\u6392\u5E8F\uFF0C\u4F1A\u8DF3\u8FC7\u91CD\u590D\u7684\u5E8F\u53F7\uFF0C\u59821\u30011\u30013</td></tr><tr><td>DENSE_RANK()</td><td>\u5E76\u5217\u6392\u5E8F\uFF0C\u4E0D\u4F1A\u8DF3\u8FC7\u91CD\u590D\u7684\u5E8F\u53F7\uFF0C\u59821\u30011\u30012</td></tr><tr><td>PERCENT_RANK</td><td>\u7B49\u7EA7\u503C\u767E\u5206\u6BD4</td></tr><tr><td>CUME_DIST()</td><td>\u7D2F\u79EF\u5206\u5E03\u503C</td></tr><tr><td>LAG(expr, n)</td><td>\u8FD4\u56DE\u5F53\u524D\u884C\u7684\u5F80\u524D\u6570\u7B2Cn\u884C\u7684expr\u7684\u503C\u3002expr\u662F\u8868\u4E2D\u5B57\u6BB5\u540D</td></tr><tr><td>LEAD(expr, n)</td><td>\u8FD4\u56DE\u5F53\u524D\u884C\u7684\u5F80\u540E\u6570\u7B2Cn\u884C\u7684expr\u7684\u503C\u3002expr\u662F\u8868\u4E2D\u5B57\u6BB5\u540D</td></tr><tr><td>FIRST_VALUE(expr)</td><td>\u8FD4\u56DE\u7B2C\u4E00\u4E2Aexpr\u7684\u503C\u3002expr\u662F\u8868\u4E2D\u5B57\u6BB5\u540D</td></tr><tr><td>LAST_VALUE(expr)</td><td>\u8FD4\u56DE\u6700\u540E\u4E00\u4E2Aexpr\u7684\u503C\u3002expr\u662F\u8868\u4E2D\u5B57\u6BB5\u540D</td></tr><tr><td>NTH_VALUE(expr, n)</td><td>\u8FD4\u56DE\u7B2Cn\u4E2Aexpr\u7684\u503C\u3002expr\u662F\u8868\u4E2D\u5B57\u6BB5\u540D</td></tr><tr><td>NTILE(n)</td><td>\u5C06\u5206\u533A\u4E2D\u7684\u6709\u5E8F\u6570\u636E\u5206\u6210n\u4E2A\u6876\uFF0C\u8BB0\u5F55\u6876\u7F16\u53F7</td></tr></tbody></table></li><li><p><strong>\u6B63\u5219\u8868\u8FBE\u5F0F\u652F\u6301</strong>\u3002\u589E\u52A0\u4E86<code>REGEXP_LIKE()</code>\u3001<code> EGEXP_INSTR()</code>\u3001<code>REGEXP_REPLACE()</code>\u548C <code>REGEXP_SUBSTR()</code>\u7B49\u51FD\u6570\u6765\u63D0\u5347\u6027\u80FD\uFF0C\u53E6\u5916\uFF0C<code>regexp_stack_limit</code>\u548C <code>regexp_time_limit</code>\u7CFB\u7EDF\u53D8\u91CF\u80FD\u591F\u901A\u8FC7\u5339\u914D\u5F15\u64CE\u6765\u63A7\u5236\u8D44\u6E90\u6D88\u8017\u3002</p></li><li><p><strong>\u5185\u90E8\u4E34\u65F6\u8868</strong>\u3002<code>TempTable\u5B58\u50A8\u5F15\u64CE\u53D6\u4EE3MEMORY\u5B58\u50A8\u5F15\u64CE\u6210\u4E3A\u5185\u90E8\u4E34\u65F6\u8868\u7684\u9ED8\u8BA4\u5B58\u50A8\u5F15\u64CE </code>\u3002TempTable\u5B58\u50A8 \u5F15\u64CE\u4E3AVARCHAR\u548CVARBINARY\u5217\u63D0\u4F9B\u9AD8\u6548\u5B58\u50A8\u3002<code>internal_tmp_mem_storage_engine</code>\u4F1A\u8BDD\u53D8\u91CF\u5B9A\u4E49\u4E86\u5185\u90E8 \u4E34\u65F6\u8868\u7684\u5B58\u50A8\u5F15\u64CE\uFF0C\u53EF\u9009\u7684\u503C\u6709\u4E24\u4E2A\uFF0C<code>TempTable</code>\u548C<code>MEMORY</code>\uFF0C\u5176\u4E2DTempTable\u4E3A\u9ED8\u8BA4\u7684\u5B58\u50A8\u5F15\u64CE\u3002 <code>temptable_max_ram</code>\u7CFB\u7EDF\u914D\u7F6E\u9879\u5B9A\u4E49\u4E86TempTable\u5B58\u50A8\u5F15\u64CE\u53EF\u4F7F\u7528\u7684\u6700\u5927\u5185\u5B58\u6570\u91CF\u3002</p></li><li><p><strong>\u65E5\u5FD7\u8BB0\u5F55</strong>\u3002\u5728MySQL 8\u4E2D\u9519\u8BEF\u65E5\u5FD7\u5B50\u7CFB\u7EDF\u7531\u4E00\u7CFB\u5217MySQL\u7EC4\u4EF6\u6784\u6210\u3002\u8FD9\u4E9B\u7EC4\u4EF6\u7684\u6784\u6210\u7531\u7CFB\u7EDF\u53D8\u91CF log_error_services\u6765\u914D\u7F6E\uFF0C\u80FD\u591F\u5B9E\u73B0\u65E5\u5FD7\u4E8B\u4EF6\u7684\u8FC7\u6EE4\u548C\u5199\u5165\u3002</p></li><li></li><li><p><strong>\u589E\u5F3A\u7684MySQL\u590D\u5236</strong>\u3002MySQL 8\u590D\u5236\u652F\u6301\u5BF9<code>JSON\u6587\u6863</code>\u8FDB\u884C<code>\u90E8\u5206\u66F4\u65B0</code>\u7684<code>\u4E8C\u8FDB\u5236\u65E5\u5FD7\u8BB0\u5F55</code> \uFF0C\u8BE5\u8BB0\u5F55\u4F7F\u7528\u7D27\u51D1\u7684\u4E8C\u8FDB\u5236\u683C\u5F0F \uFF0C\u4ECE\u800C<em>\u8282\u7701\u8BB0\u5F55\u5B8C\u6574JSON\u6587\u6863\u7684\u7A7A\u95F4</em>\u3002\u5F53\u4F7F\u7528\u57FA\u4E8E\u8BED\u53E5\u7684\u65E5\u5FD7\u8BB0\u5F55\u65F6\uFF0C\u8FD9\u79CD\u7D27\u51D1\u7684\u65E5\u5FD7\u8BB0\u5F55\u4F1A\u81EA\u52A8\u5B8C\u6210\uFF0C\u5E76\u4E14\u53EF\u4EE5\u901A\u8FC7\u5C06\u65B0\u7684<code>binlog_row_value_options</code>\u7CFB\u7EDF\u53D8\u91CF\u503C\u8BBE\u7F6E\u4E3APARTIAL_JSON\u6765\u542F\u7528\u3002</p></li></ul><h4 id="_18-1-2-mysql8-0\u79FB\u9664\u7684\u5C31\u7279\u6027" tabindex="-1"><a class="header-anchor" href="#_18-1-2-mysql8-0\u79FB\u9664\u7684\u5C31\u7279\u6027" aria-hidden="true">#</a> 18.1.2 MySQL8.0\u79FB\u9664\u7684\u5C31\u7279\u6027</h4><ul><li><strong>\u67E5\u8BE2\u7F13\u5B58</strong>\u3002\u67E5\u8BE2\u7F13\u5B58\u5DF2\u88AB\u79FB\u9664 \uFF0C\u5220\u9664\u7684\u9879\u6709\uFF1A <ul><li>\u8BED\u53E5\uFF1AFLUSH QUERY CACHE\u548CRESET QUERY CACHE\u3002</li><li>\u7CFB\u7EDF\u53D8\u91CF\uFF1Aquery_cache_limit\u3001query_cache_min_res_unit\u3001query_cache_size\u3001 query_cache_type\u3001query_cache_wlock_invalidate\u3002</li><li>\u72B6\u6001\u53D8\u91CF\uFF1AQcache_free_blocks\u3001 Qcache_free_memory\u3001Qcache_hits\u3001Qcache_inserts\u3001Qcache_lowmem_prunes\u3001Qcache_not_cached\u3001 Qcache_queries_in_cache\u3001Qcache_total_blocks\u3002</li><li>\u7EBF\u7A0B\u72B6\u6001\uFF1Achecking privileges on cached query\u3001checking query cache for query\u3001invalidating query cache entries\u3001sending cached result to client\u3001storing result in query cache\u3001waiting for query cache lock\u3002</li></ul></li><li><strong>\u52A0\u5BC6\u76F8\u5173</strong>\u3002 <ul><li>\u5220\u9664\u7684\u52A0\u5BC6\u76F8\u5173\u7684\u5185\u5BB9\u6709\uFF1AENCODE()\u3001DECODE()\u3001ENCRYPT()\u3001DES_ENCRYPT()\u548C DES_DECRYPT()\u51FD\u6570\uFF0C\u914D\u7F6E\u9879des-key-file\uFF0C\u7CFB\u7EDF\u53D8\u91CFhave_crypt\uFF0CFLUSH\u8BED\u53E5\u7684DES_KEY_FILE\u9009\u9879\uFF0C HAVE_CRYPT CMake\u9009\u9879\u3002</li><li>\u5BF9\u4E8E\u79FB\u9664\u7684ENCRYPT()\u51FD\u6570\uFF0C\u8003\u8651\u4F7F\u7528SHA2()\u66FF\u4EE3\uFF0C\u5BF9\u4E8E\u5176\u4ED6\u79FB\u9664\u7684\u51FD\u6570\uFF0C\u4F7F \u7528AES_ENCRYPT()\u548CAES_DECRYPT()\u66FF\u4EE3\u3002</li></ul></li><li><strong>\u7A7A\u95F4\u51FD\u6570\u76F8\u5173</strong>\u3002\u5728MySQL 5.7\u7248\u672C\u4E2D\uFF0C\u591A\u4E2A\u7A7A\u95F4\u51FD\u6570\u5DF2\u88AB\u6807\u8BB0\u4E3A\u8FC7\u65F6\u3002\u8FD9\u4E9B\u8FC7\u65F6\u51FD\u6570\u5728MySQL 8\u4E2D\u90FD\u5DF2\u88AB \u79FB\u9664\uFF0C\u53EA\u4FDD\u7559\u4E86\u5BF9\u5E94\u7684ST_\u548CMBR\u51FD\u6570\u3002</li><li><strong>\\N\u548CNULL</strong>\u3002\u5728SQL\u8BED\u53E5\u4E2D\uFF0C\u89E3\u6790\u5668\u4E0D\u518D\u5C06\\N\u89C6\u4E3ANULL\uFF0C\u6240\u4EE5\u5728SQL\u8BED\u53E5\u4E2D\u5E94\u4F7F\u7528NULL\u4EE3\u66FF\\N\u3002\u8FD9\u9879\u53D8\u5316 \u4E0D\u4F1A\u5F71\u54CD\u4F7F\u7528LOAD DATA INFILE\u6216\u8005SELECT...INTO OUTFILE\u64CD\u4F5C\u6587\u4EF6\u7684\u5BFC\u5165\u548C\u5BFC\u51FA\u3002\u5728\u8FD9\u7C7B\u64CD\u4F5C\u4E2D\uFF0CNULL \u4ECD\u7B49\u540C\u4E8E\\N\u3002</li><li><strong>mysql_install_db</strong>\u3002\u5728MySQL\u5206\u5E03\u4E2D\uFF0C\u5DF2\u79FB\u9664\u4E86mysql_install_db\u7A0B\u5E8F\uFF0C\u6570\u636E\u5B57\u5178\u521D\u59CB\u5316\u9700\u8981\u8C03\u7528\u5E26\u7740-- initialize\u6216\u8005--initialize-insecure\u9009\u9879\u7684mysqld\u6765\u4EE3\u66FF\u5B9E\u73B0\u3002\u53E6\u5916\uFF0C--bootstrap\u548CINSTALL_SCRIPTDIR CMake\u4E5F\u5DF2\u88AB\u5220\u9664\u3002</li><li><strong>\u901A\u7528\u5206\u533A\u5904\u7406\u7A0B\u5E8F</strong>\u3002\u901A\u7528\u5206\u533A\u5904\u7406\u7A0B\u5E8F\u5DF2\u4ECEMySQL\u670D\u52A1\u4E2D\u88AB\u79FB\u9664\u3002\u4E3A\u4E86\u5B9E\u73B0\u7ED9\u5B9A\u8868\u5206\u533A\uFF0C\u8868\u6240\u4F7F\u7528\u7684\u5B58 \u50A8\u5F15\u64CE\u9700\u8981\u81EA\u6709\u7684\u5206\u533A\u5904\u7406\u7A0B\u5E8F\u3002 \u63D0\u4F9B\u672C\u5730\u5206\u533A\u652F\u6301\u7684MySQL\u5B58\u50A8\u5F15\u64CE\u6709\u4E24\u4E2A\uFF0C\u5373InnoDB\u548CNDB\uFF0C\u800C\u5728 MySQL 8\u4E2D\u53EA\u652F\u6301InnoDB\u3002</li><li><strong>\u7CFB\u7EDF\u548C\u72B6\u6001\u53D8\u91CF\u4FE1\u606F</strong>\u3002\u5728INFORMATION_SCHEMA\u6570\u636E\u5E93\u4E2D\uFF0C\u5BF9\u7CFB\u7EDF\u548C\u72B6\u6001\u53D8\u91CF\u4FE1\u606F\u4E0D\u518D\u8FDB\u884C\u7EF4\u62A4\u3002 GLOBAL_VARIABLES\u3001SESSION_VARIABLES\u3001GLOBAL_STATUS\u3001SESSION_STATUS\u8868\u90FD\u5DF2\u88AB\u5220\u9664\u3002\u53E6\u5916\uFF0C\u7CFB \u7EDF\u53D8\u91CFshow_compatibility_56\u4E5F\u5DF2\u88AB\u5220\u9664\u3002\u88AB\u5220\u9664\u7684\u72B6\u6001\u53D8\u91CF\u6709Slave_heartbeat_period\u3001 Slave_last_heartbeat,Slave_received_heartbeats\u3001Slave_retried_transactions\u3001Slave_running\u3002\u4EE5\u4E0A\u88AB\u5220\u9664 \u7684\u5185\u5BB9\u90FD\u53EF\u4F7F\u7528\u6027\u80FD\u6A21\u5F0F\u4E2D\u5BF9\u5E94\u7684\u5185\u5BB9\u8FDB\u884C\u66FF\u4EE3\u3002</li><li><strong>mysql_plugin\u5DE5\u5177</strong>\u3002mysql_plugin\u5DE5\u5177\u7528\u6765\u914D\u7F6EMySQL\u670D\u52A1\u5668\u63D2\u4EF6\uFF0C\u73B0\u5DF2\u88AB\u5220\u9664\uFF0C\u53EF\u4F7F\u7528--plugin-load\u6216- -plugin-load-add\u9009\u9879\u5728\u670D\u52A1\u5668\u542F\u52A8\u65F6\u52A0\u8F7D\u63D2\u4EF6\u6216\u8005\u5728\u8FD0\u884C\u65F6\u4F7F\u7528INSTALL PLUGIN\u8BED\u53E5\u52A0\u8F7D\u63D2\u4EF6\u6765\u66FF\u4EE3\u8BE5 \u5DE5\u5177</li></ul><h3 id="_18-2-\u65B0\u7279\u60271-\u7A97\u53E3\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_18-2-\u65B0\u7279\u60271-\u7A97\u53E3\u51FD\u6570" aria-hidden="true">#</a> 18.2 \u65B0\u7279\u60271-\u7A97\u53E3\u51FD\u6570</h3><h4 id="_18-2-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_18-2-1-\u6982\u8FF0" aria-hidden="true">#</a> 18.2.1 \u6982\u8FF0</h4><ul><li><p><strong>\u4F5C\u7528</strong>\uFF1A\u7C7B\u4F3C\u4E8E\u5728\u67E5\u8BE2\u4E2D\u4F7F\u7528<code>GROUP BY</code>\u5BF9\u6570\u636E\u8FDB\u884C\u5206\u7EC4\uFF0C\u4E0D\u540C\u7684\u662F\uFF0C\u5206\u7EC4\u64CD\u4F5C\u4F1A\u628A\u5206\u7EC4\u7684\u7ED3\u679C\u6C47\u805A\u6210\u4E00\u6761\u8BB0\u5F55\uFF0C<em>\u7A97\u53E3\u51FD\u6570\u662F\u5C06\u7ED3\u679C\u7F6E\u4E8E\u6BCF\u4E00\u6761\u6570\u636E\u8BB0\u5F55\u4E2D</em>\u3002</p></li><li><p><strong>\u5206\u7C7B</strong>\uFF1A</p><ul><li><code>\u9759\u6001\u7A97\u53E3\u51FD\u6570</code>\uFF1A\u51FD\u6570\u7684\u7A97\u53E3\u5927\u5C0F\u662F\u56FA\u5B9A\u7684\uFF0C\u4E0D\u4F1A\u56E0\u4E3A\u8BB0\u5F55\u7684\u4E0D\u540C\u800C\u4E0D\u540C</li><li><code>\u52A8\u6001\u7A97\u53E3\u51FD\u6570</code>\uFF1A\u51FD\u6570\u7684\u7A97\u53E3\u5927\u5C0F\u4F1A\u968F\u7740\u8BB0\u5F55\u7684\u4E0D\u540C\u800C\u53D8\u5316</li></ul></li><li><p><strong>\u6982\u89C8</strong>\uFF1A\u7A97\u53E3\u51FD\u6570\u603B\u4F53\u4E0A\u53EF\u4EE5\u5206\u4E3A\u5E8F\u53F7\u51FD\u6570\u3001\u5206\u5E03\u51FD\u6570\u3001\u524D\u540E\u51FD\u6570\u3001\u9996\u5C3E\u51FD\u6570\u548C\u5176\u4ED6\u51FD\u6570\uFF0C\u5982\u4E0B\uFF1A</p><table><thead><tr><th>\u51FD\u6570\u5206\u7C7B</th><th>\u51FD\u6570</th><th>\u63CF\u8FF0</th></tr></thead><tbody><tr><td>\u5E8F\u53F7\u51FD\u6570</td><td>ROW_NUMBER()</td><td>\u987A\u5E8F\u6392\u5E8F</td></tr><tr><td>\u5E8F\u53F7\u51FD\u6570</td><td>RANK()</td><td>\u5E76\u5217\u6392\u5E8F\uFF0C\u4F1A\u8DF3\u8FC7\u91CD\u590D\u7684\u5E8F\u53F7\uFF0C\u59821\u30011\u30013</td></tr><tr><td>\u5E8F\u53F7\u51FD\u6570</td><td>DENSE_RANK()</td><td>\u5E76\u5217\u6392\u5E8F\uFF0C\u4E0D\u4F1A\u8DF3\u8FC7\u91CD\u590D\u7684\u5E8F\u53F7\uFF0C\u59821\u30011\u30012</td></tr><tr><td>\u5206\u5E03\u51FD\u6570</td><td>PERCENT_RANK</td><td>\u7B49\u7EA7\u503C\u767E\u5206\u6BD4</td></tr><tr><td>\u5206\u5E03\u51FD\u6570</td><td>CUME_DIST()</td><td>\u7D2F\u79EF\u5206\u5E03\u503C</td></tr><tr><td>\u524D\u540E\u51FD\u6570</td><td>LAG(expr, n)</td><td>\u8FD4\u56DE\u5F53\u524D\u884C\u7684\u5F80\u524D\u6570\u7B2Cn\u884C\u7684expr\u7684\u503C\u3002expr\u662F\u8868\u4E2D\u5B57\u6BB5\u540D</td></tr><tr><td>\u524D\u540E\u51FD\u6570</td><td>LEAD(expr, n)</td><td>\u8FD4\u56DE\u5F53\u524D\u884C\u7684\u5F80\u540E\u6570\u7B2Cn\u884C\u7684expr\u7684\u503C\u3002expr\u662F\u8868\u4E2D\u5B57\u6BB5\u540D</td></tr><tr><td>\u9996\u5C3E\u51FD\u6570</td><td>FIRST_VALUE(expr)</td><td>\u8FD4\u56DE\u7B2C\u4E00\u4E2Aexpr\u7684\u503C\u3002expr\u662F\u8868\u4E2D\u5B57\u6BB5\u540D</td></tr><tr><td>\u9996\u5C3E\u51FD\u6570</td><td>LAST_VALUE(expr)</td><td>\u8FD4\u56DE\u6700\u540E\u4E00\u4E2Aexpr\u7684\u503C\u3002expr\u662F\u8868\u4E2D\u5B57\u6BB5\u540D</td></tr><tr><td>\u5176\u4ED6\u51FD\u6570</td><td>NTH_VALUE(expr, n)</td><td>\u8FD4\u56DE\u7B2Cn\u4E2Aexpr\u7684\u503C\u3002expr\u662F\u8868\u4E2D\u5B57\u6BB5\u540D</td></tr><tr><td>\u5176\u4ED6\u51FD\u6570</td><td>NTILE(n)</td><td>\u5C06\u5206\u533A\u4E2D\u7684\u6709\u5E8F\u6570\u636E\u5206\u6210n\u4E2A\u6876\uFF0C\u8BB0\u5F55\u6876\u7F16\u53F7</td></tr></tbody></table></li></ul><h4 id="_18-2-2-\u8BED\u6CD5" tabindex="-1"><a class="header-anchor" href="#_18-2-2-\u8BED\u6CD5" aria-hidden="true">#</a> 18.2.2 \u8BED\u6CD5</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT [\u5217\u540D1, \u5217\u540D2, ...,] \u51FD\u6570 OVER ([PARTITION BY \u5B57\u6BB5\u540D ORDER BY \u5B57\u6BB5\u540D ASC|DESC])
FROM ...
...
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u6216</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT [\u5217\u540D1, \u5217\u540D2, ...,] \u51FD\u6570 OVER \u7A97\u53E3\u540D
FROM ...
[WHERE ...]
WINDOW \u7A97\u53E3\u540D AS ([PARTITION BY \u5B57\u6BB5\u540D ORDER BY \u5B57\u6BB5\u540D ASC|DESC])
...
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>==\u8BF4\u660E\uFF1A==</p><ul><li><p><code>OVER</code>\uFF1A\u6307\u5B9A\u7A97\u53E3\u51FD\u6570\u7684\u8303\u56F4\u3002</p><ul><li><p>\u5982\u679C\u7701\u7565\u62EC\u53F7\u4E2D\u7684\u5185\u5BB9\uFF08\u5373<code>\u51FD\u6570 OVER()</code>\uFF09\uFF0C\u5219\u7A97\u53E3\u4F1A\u5305\u542B\u6EE1\u8DB3WHERE\u6761\u4EF6\u7684\u6240\u6709\u8BB0\u5F55\uFF0C\u7A97\u53E3\u51FD\u6570\u4F1A\u57FA\u4E8E\u6240\u6709\u6EE1\u8DB3WHERE\u6761\u4EF6\u7684\u8BB0\u5F55\u5E76\u8FDB\u884C\u8BA1\u7B97\u3002</p></li><li><p>\u5982\u679COVER()\u4E2D\u4F7F\u7528\u4E86ORDER BY\uFF0CFROM\u540E\u8FB9\u5EFA\u8BAE\u4E0D\u8981\u4F7F\u7528ORDER BY\u4E86\uFF0C\u5426\u5219\u7ED3\u679C\u51FA\u4EBA\u610F\u6599\uFF1A</p><p>\u5F53sql\u8BED\u53E5\u4E2D\u7684order by\u5B50\u53E5\u91CC\u7684\u5185\u5BB9\u548C\u7A97\u53E3\u51FD\u6570over()\u4E2D\u7684order by\u5B50\u53E5\u91CC\u7684\u5185\u5BB9\u4E00\u6837\uFF0C\u90A3\u4E48sql\u8BED\u53E5\u4E2D\u7684\u6392\u5E8F\u5C06\u5148\u6267\u884C,\u7A97\u53E3\u51FD\u6570\u5728\u5206\u6790\u65F6\u5C31\u4E0D\u5FC5\u518D\u6392\u5E8F\uFF1Border by \u5B57\u6BB5\u4E24\u8005\u4E0D\u4E00\u81F4\u65F6\uFF0C\u90A3\u4E48sql\u8BED\u53E5\u4E2D\u7684\u6392\u5E8F\u5C06\u6700\u540E\u5728\u7A97\u53E3\u51FD\u6570\u5206\u6790\u7ED3\u675F\u540E\u6267\u884C\u6392\u5E8F\u3002\u6240\u4EE5\u5982\u679C\u5728over\u4E2D\u5DF2\u7ECF\u6DFB\u52A0\u4E86order by\u2026\uFF0C\u5C31\u4E0D\u5EFA\u8BAE\u5728from\u540E\u9762\u518D\u6DFB\u52A0\u76F8\u540C\u7684order by\u3002\u4E8C\u8005\u4E00\u81F4\u7684\u8BDD\u8FD8\u597D(\u6548\u679C\u4E00\u6837\uFF0C\u6CA1\u6709\u5DEE\u522B)\uFF0C\u4F46\u4E0D\u4E00\u81F4\u65F6\u7ED3\u679C\u6709\u65F6\u5C31\u53EF\u80FD\u4EE4\u4EBA\u8D39\u89E3\u4E86\u3002</p></li><li><p><code>OVER ([PARTITION BY \u5B57\u6BB5\u540D1 ORDER BY \u5B57\u6BB5\u540D2 ASC|DESC])</code>\u8868\u793A\u6839\u636E\u5B57\u6BB5\u540D1\u8FDB\u884C\u5206\u7EC4\uFF0C\u5728\u5206\u7EC4\u5185\u6309\u7167\u5B57\u6BB5\u540D2\u6392\u5E8F</p></li></ul></li><li><p><code>PARTITION BY</code>\uFF1A\u6307\u5B9A\u7A97\u53E3\u51FD\u6570\u6309\u7167\u54EA\u4E9B\u5B57\u6BB5\u8FDB\u884C\u5206\u7EC4\u3002</p><p>\u5206\u7EC4\u540E\uFF0C\u7A97\u53E3\u51FD\u6570\u53EF\u4EE5\u5728\u6BCF\u4E2A\u5206\u7EC4\u4E2D\u5206\u522B\u6267\u884C\u3002</p></li><li><p><code>ORDER BY</code>\uFF1A\u6307\u5B9A\u7A97\u53E3\u51FD\u6570\u6309\u7167\u54EA\u4E9B\u5B57\u6BB5\u8FDB\u884C\u6392\u5E8F\u3002</p><p>\u6267\u884C\u6392\u5E8F\u64CD\u4F5C\u4F7F\u7A97\u53E3\u51FD\u6570\u6309\u7167\u6392\u5E8F\u540E\u7684\u6570\u636E\u8BB0\u5F55\u7684\u987A\u5E8F\u8FDB\u884C\u7F16\u53F7</p></li><li><p><code>WINDOW \u5B50\u53E5</code>\uFF1A\u53EF\u4EE5\u53EA\u7528WINDOW\u5B50\u53E5\u4E3A\u7A97\u53E3\u51FD\u6570\u547D\u540D\uFF0C\u5728\u7A97\u53E3\u51FD\u6570\u7684OVER\u5173\u952E\u5B57\u540E\u8FB9\u76F4\u63A5\u4F7F\u7528\u7A97\u53E3\u540D\u5373\u53EF</p></li></ul><h4 id="_18-2-3-\u5E8F\u53F7\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_18-2-3-\u5E8F\u53F7\u51FD\u6570" aria-hidden="true">#</a> 18.2.3 \u5E8F\u53F7\u51FD\u6570</h4><h5 id="_1-row-number" tabindex="-1"><a class="header-anchor" href="#_1-row-number" aria-hidden="true">#</a> \u2460 ROW_NUMBER()</h5><ul><li><p>\u8BED\u6CD5\uFF1A<code>ROW_NUMBER() OVER ([PARTITION BY \u5B57\u6BB51 ORDER BY \u5B57\u6BB5\u540D2 ASC|DESC])</code></p></li><li><p>\u542B\u4E49\uFF1A</p><ul><li>\u6309\u7167\u5B57\u6BB51\u5206\u7EC4\uFF0C\u5206\u7EC4\u5185\u6309\u7167\u5B57\u6BB52\u6392\u5E8F\uFF0C\u7136\u540E\u6309\u7167\u6392\u597D\u7684\u987A\u5E8F\u7ED9<strong>\u6BCF\u4E2A\u5206\u7EC4\u5185</strong>\u7684\u8BB0\u5F55\u6309\u7167\u987A\u5E8F\u7F16\u53F7\u3002</li><li><strong>\u6BCF\u4E2A\u5206\u7EC4\u5185\u7684\u7F16\u53F7\u662F\u8FDE\u7EED\u4E14\u552F\u4E00\u7684</strong>\u3002</li><li>\u5982\u679C<code>PARTITION BY \u5B57\u6BB51</code>\u7701\u7565\uFF0C\u8868\u793A\u6574\u4E2A\u8868\u662F\u4E00\u4E2A\u5206\u7EC4</li><li>\u5982\u679C<code>ORDER BY \u5B57\u6BB5\u540D2</code>\u7701\u7565\uFF0C\u6309\u7167\u9ED8\u8BA4\u6392\u5E8F\u65B9\u5F0F\u8FDB\u884C\u6392\u5E8F</li></ul></li><li><p>\u4E3E\u4F8B\uFF1A\u67E5\u8BE2goods\u4E2D\u5546\u54C1\u4FE1\u606F\uFF0C\u5E76\u7ED9\u4E0D\u7528\u7C7B\u578B\u7684\u670D\u88C5\u4EE5\u4EF7\u683C\u7531\u9AD8\u5230\u4F4E\u8FDB\u884C\u7F16\u53F7\uFF0C\u4E14\u4FDD\u6301\u7F16\u53F7\u7684\u552F\u4E00\u6027\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT row_number() OVER (PARTITION BY category_id ORDER BY price DESC) AS num, id, category_id, \`NAME\`, price
    -&gt; FROM goods;
+-----+----+-------------+-----------------+---------+
| num | id | category_id | NAME            | price   |
+-----+----+-------------+-----------------+---------+
|   1 |  7 |           1 | \u5462\u7ED2\u5916\u5957        |  399.90 |
|   2 |  5 |           1 | \u725B\u4ED4\u88E4          |   89.90 |
|   3 |  9 |           1 | \u536B\u8863            |   89.90 |
|   4 |  2 |           1 | \u8FDE\u8863\u88D9          |   79.90 |
|   5 |  1 |           1 | T\u6064             |   39.90 |
|   6 | 11 |           1 | \u767E\u8936\u88D9          |   29.90 |
|   1 | 10 |           2 | \u5C71\u5730\u81EA\u884C\u8F66      | 1399.90 |
|   2 |  6 |           2 | \u8FD0\u52A8\u5916\u5957        |  799.90 |
|   3 | 12 |           2 | \u6ED1\u677F            |  499.90 |
|   4 |  4 |           2 | \u9A91\u884C\u88C5\u5907        |  399.90 |
|   5 |  8 |           2 | \u81EA\u884C\u8F66          |  399.90 |
|   6 |  3 |           2 | \u767B\u5C71\u6756          |   59.90 |
+-----+----+-------------+-----------------+---------+
12 rows in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li></ul><h5 id="_2-rank-\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_2-rank-\u51FD\u6570" aria-hidden="true">#</a> \u2461 RANK()\u51FD\u6570</h5><ul><li><p>\u8BED\u6CD5\uFF1A<code>RANK() OVER ([PARTITION BY \u5B57\u6BB51 ]ORDER BY \u5B57\u6BB5\u540D2 ASC|DESC)</code></p></li><li><p>\u542B\u4E49\uFF1A</p><ul><li>\u6309\u7167\u5B57\u6BB51\u5206\u7EC4\uFF0C\u5206\u7EC4\u5185\u6309\u7167\u5B57\u6BB52\u6392\u5E8F\uFF0C\u7136\u540E\u6309\u7167\u6392\u597D\u7684\u987A\u5E8F\u7ED9<strong>\u6BCF\u4E2A\u5206\u7EC4\u5185</strong>\u7684\u8BB0\u5F55\u6309\u7167\u987A\u5E8F\u7F16\u53F7\u3002</li><li>\u5E8F\u53F7\u662F\u53EF\u4EE5\u91CD\u590D\u7684\u3002</li><li>\u4F1A\u8DF3\u8FC7\u91CD\u590D\u5E8F\u53F7\uFF0C\u59821\u30012\u30012\u30014</li></ul></li><li><p>\u8BF4\u660E\uFF1AOVER()\u4E2D\u5FC5\u987B\u4F7F\u7528ORDER BY \u8BED\u53E5\uFF0C\u5426\u5219\u6392\u5E8F\u5E8F\u53F7\u5168\u90FD\u4E3A1</p></li><li><p>\u4E3E\u4F8B\uFF1A\u67E5\u8BE2goods\u4E2D\u5546\u54C1\u4FE1\u606F\uFF0C\u5E76\u7ED9\u4E0D\u7528\u7C7B\u578B\u7684\u670D\u88C5\u4EE5\u4EF7\u683C\u7531\u9AD8\u5230\u4F4E\u8FDB\u884C\u7F16\u53F7\uFF0C\u4E14\u8DF3\u8FC7\u91CD\u590D\u5E8F\u53F7</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT RANK() OVER (PARTITION BY category_id ORDER BY price DESC) AS num, id, category_id, \`NAME\`, price
    -&gt; FROM goods;
+-----+----+-------------+-----------------+---------+
| num | id | category_id | NAME            | price   |
+-----+----+-------------+-----------------+---------+
|   1 |  7 |           1 | \u5462\u7ED2\u5916\u5957        |  399.90 |
|   2 |  5 |           1 | \u725B\u4ED4\u88E4          |   89.90 |
|   2 |  9 |           1 | \u536B\u8863            |   89.90 |
|   4 |  2 |           1 | \u8FDE\u8863\u88D9          |   79.90 |
|   5 |  1 |           1 | T\u6064             |   39.90 |
|   6 | 11 |           1 | \u767E\u8936\u88D9          |   29.90 |
|   1 | 10 |           2 | \u5C71\u5730\u81EA\u884C\u8F66      | 1399.90 |
|   2 |  6 |           2 | \u8FD0\u52A8\u5916\u5957        |  799.90 |
|   3 | 12 |           2 | \u6ED1\u677F            |  499.90 |
|   4 |  4 |           2 | \u9A91\u884C\u88C5\u5907        |  399.90 |
|   4 |  8 |           2 | \u81EA\u884C\u8F66          |  399.90 |
|   6 |  3 |           2 | \u767B\u5C71\u6756          |   59.90 |
+-----+----+-------------+-----------------+---------+
12 rows in set (0.00 sec)

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li></ul><h5 id="_3-dense-rank-\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_3-dense-rank-\u51FD\u6570" aria-hidden="true">#</a> \u2462 DENSE_RANK()\u51FD\u6570</h5><ul><li><p>\u8BED\u6CD5\uFF1A<code>DENSE_RANK() OVER ([PARTITION BY \u5B57\u6BB51 ]ORDER BY \u5B57\u6BB5\u540D2 ASC|DESC)</code></p></li><li><p>\u542B\u4E49\uFF1A</p><ul><li>\u6309\u7167\u5B57\u6BB51\u5206\u7EC4\uFF0C\u5206\u7EC4\u5185\u6309\u7167\u5B57\u6BB52\u6392\u5E8F\uFF0C\u7136\u540E\u6309\u7167\u6392\u597D\u7684\u987A\u5E8F\u7ED9<strong>\u6BCF\u4E2A\u5206\u7EC4\u5185</strong>\u7684\u8BB0\u5F55\u6309\u7167\u987A\u5E8F\u7F16\u53F7\u3002</li><li>\u5E8F\u53F7\u662F\u53EF\u4EE5\u91CD\u590D\u7684\u3002</li><li>\u4E0D\u4F1A\u8DF3\u8FC7\u91CD\u590D\u5E8F\u53F7\uFF0C\u59821\u30012\u30012\u30013</li></ul></li><li><p>\u8BF4\u660E\uFF1AOVER()\u4E2D\u5FC5\u987B\u4F7F\u7528ORDER BY \u8BED\u53E5\uFF0C\u5426\u5219\u6392\u5E8F\u5E8F\u53F7\u5168\u90FD\u4E3A1</p></li><li><p>\u4E3E\u4F8B\uFF1A\u67E5\u8BE2goods\u4E2D\u5546\u54C1\u4FE1\u606F\uFF0C\u5E76\u7ED9\u4E0D\u7528\u7C7B\u578B\u7684\u670D\u88C5\u4EE5\u4EF7\u683C\u7531\u9AD8\u5230\u4F4E\u8FDB\u884C\u7F16\u53F7\uFF0C\u4E14\u4E0D\u8981\u8DF3\u8FC7\u91CD\u590D\u5E8F\u53F7\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT DENSE_RANK() OVER (PARTITION BY category_id ORDER BY price DESC) AS num, id, category_id, \`NAME\`, price
    -&gt; FROM goods;
+-----+----+-------------+-----------------+---------+
| num | id | category_id | NAME            | price   |
+-----+----+-------------+-----------------+---------+
|   1 |  7 |           1 | \u5462\u7ED2\u5916\u5957        |  399.90 |
|   2 |  5 |           1 | \u725B\u4ED4\u88E4          |   89.90 |
|   2 |  9 |           1 | \u536B\u8863            |   89.90 |
|   3 |  2 |           1 | \u8FDE\u8863\u88D9          |   79.90 |
|   4 |  1 |           1 | T\u6064             |   39.90 |
|   5 | 11 |           1 | \u767E\u8936\u88D9          |   29.90 |
|   1 | 10 |           2 | \u5C71\u5730\u81EA\u884C\u8F66      | 1399.90 |
|   2 |  6 |           2 | \u8FD0\u52A8\u5916\u5957        |  799.90 |
|   3 | 12 |           2 | \u6ED1\u677F            |  499.90 |
|   4 |  4 |           2 | \u9A91\u884C\u88C5\u5907        |  399.90 |
|   4 |  8 |           2 | \u81EA\u884C\u8F66          |  399.90 |
|   5 |  3 |           2 | \u767B\u5C71\u6756          |   59.90 |
+-----+----+-------------+-----------------+---------+
12 rows in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li></ul><h4 id="_18-2-4-\u5206\u5E03\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_18-2-4-\u5206\u5E03\u51FD\u6570" aria-hidden="true">#</a> 18.2.4 \u5206\u5E03\u51FD\u6570</h4><h5 id="_1-percent-rank-\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_1-percent-rank-\u51FD\u6570" aria-hidden="true">#</a> \u2460 PERCENT_RANK()\u51FD\u6570</h5><ul><li><p>\u8BED\u6CD5\uFF1A<code>PERCENT_RANK() OVER ([PARTITION BY \u5B57\u6BB51 ]ORDER BY \u5B57\u6BB5\u540D2 ASC|DESC)</code></p></li><li><p>\u542B\u4E49\uFF1A</p><ul><li>\u6309\u7167RANK()\u51FD\u6570\u8BA1\u7B97\u51FA\u6765\u7684\u7F16\u53F7\uFF0C\u8BA1\u7B97\u5F53\u524D\u5206\u7EC4\u4E2D\u6BCF\u6761\u8BB0\u5F55\u7684<strong>\u7B49\u7EA7\u503C\u767E\u5206\u6BD4</strong></li><li>\u516C\u5F0F\u4E3A<code>(rank-1)/(rows-1)</code>\uFF0C\u5176\u4E2Drank\u4E3A\u4F7F\u7528RANK()\u4EA7\u751F\u7684\u5E8F\u53F7\uFF0Crows\u4E3A\u5F53\u524D\u5206\u7EC4\u4E2D\u7684\u603B\u8BB0\u5F55\u6761\u6570</li></ul></li><li><p>\u8BF4\u660E\uFF1AOVER()\u4E2D\u5FC5\u987B\u4F7F\u7528ORDER BY\u8BED\u53E5\uFF0C\u5426\u5219\u8BA1\u7B97\u51FA\u6765\u7684\u503C\u4E3A0\uFF08\u56E0\u4E3Arank=1\uFF09</p></li><li><p>\u4E3E\u4F8B\uFF1A\u67E5\u8BE2goods\u4E2D\u5546\u54C1\u4FE1\u606F\uFF0C\u5E76\u8BA1\u7B97\u4E0D\u540C\u7C7B\u522B\u7684\u5546\u54C1\u4EF7\u683C\u7684\u7B49\u7EA7\u767E\u5206\u6BD4</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT RANK() OVER (PARTITION BY category_id ORDER BY price DESC) AS r,
    -&gt; PERCENT_RANK() OVER (PARTITION BY category_id ORDER BY price DESC) AS &#39;pr_%&#39;,
    -&gt; id, category_id, category, NAME, price, stock
    -&gt; FROM goods;
+---+------+----+-------------+---------------------+-----------------+---------+-------+
| r | pr_% | id | category_id | category            | NAME            | price   | stock |
+---+------+----+-------------+---------------------+-----------------+---------+-------+
| 1 |    0 |  7 |           1 | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | \u5462\u7ED2\u5916\u5957        |  399.90 |  1200 |
| 2 |  0.2 |  5 |           1 | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | \u725B\u4ED4\u88E4          |   89.90 |  3500 |
| 2 |  0.2 |  9 |           1 | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | \u536B\u8863            |   89.90 |  1500 |
| 4 |  0.6 |  2 |           1 | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | \u8FDE\u8863\u88D9          |   79.90 |  2500 |
| 5 |  0.8 |  1 |           1 | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | T\u6064             |   39.90 |  1000 |
| 6 |    1 | 11 |           1 | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | \u767E\u8936\u88D9          |   29.90 |   500 |
| 1 |    0 | 10 |           2 | \u6237\u5916\u8FD0\u52A8            | \u5C71\u5730\u81EA\u884C\u8F66      | 1399.90 |  2500 |
| 2 |  0.2 |  6 |           2 | \u6237\u5916\u8FD0\u52A8            | \u8FD0\u52A8\u5916\u5957        |  799.90 |   500 |
| 3 |  0.4 | 12 |           2 | \u6237\u5916\u8FD0\u52A8            | \u6ED1\u677F            |  499.90 |  1200 |
| 4 |  0.6 |  4 |           2 | \u6237\u5916\u8FD0\u52A8            | \u9A91\u884C\u88C5\u5907        |  399.90 |  3500 |
| 4 |  0.6 |  8 |           2 | \u6237\u5916\u8FD0\u52A8            | \u81EA\u884C\u8F66          |  399.90 |  1000 |
| 6 |    1 |  3 |           2 | \u6237\u5916\u8FD0\u52A8            | \u767B\u5C71\u6756          |   59.90 |  1500 |
+---+------+----+-------------+---------------------+-----------------+---------+-------+
12 rows in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></li></ul><h5 id="_2-cume-dist-\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_2-cume-dist-\u51FD\u6570" aria-hidden="true">#</a> \u2461 CUME_DIST()\u51FD\u6570</h5><ul><li><p>\u8BED\u6CD5\uFF1A<code>CUME_DIST() OVER ([PARTITION BY \u5B57\u6BB51 ]ORDER BY \u5B57\u6BB5\u540D2 ASC|DESC)</code></p></li><li><p>\u542B\u4E49\uFF1A\u8BA1\u7B97\u6BCF\u6761\u8BB0\u5F55\u5728\u5F53\u524D\u5206\u7EC4\u4E2D\u6240\u5360\u767E\u5206\u6BD4\uFF0C\u516C\u5F0F\u5982\u4E0B\uFF1A</p><ul><li>\u4F7F\u7528<code>ASC</code>\u5347\u5E8F\u6392\u5E8F\uFF1A\u6839\u636E\u516C\u5F0F<code>\u5F53\u524D\u5206\u7EC4\u4E2D\u5C0F\u4E8E\u7B49\u4E8E\u5F53\u524D\u503C\u7684\u6570\u636E\u884C\u6570 / \u8BE5\u5206\u7EC4\u603B\u884C\u6570totalrows</code>\u8BA1\u7B97\u6BCF\u6761\u8BB0\u5F55\u7684\u767E\u5206\u6BD4</li><li>\u4F7F\u7528<code>DESC</code>\u964D\u5E8F\u6392\u5E8F\uFF1A\u6839\u636E\u516C\u5F0F<code>\u5F53\u524D\u5206\u7EC4\u4E2D\u5927\u4E8E\u7B49\u4E8E\u5F53\u524D\u503C\u7684\u6570\u636E\u884C\u6570 / \u8BE5\u5206\u7EC4\u603B\u884C\u6570totalrows</code>\u8BA1\u7B97\u6BCF\u6761\u8BB0\u5F55\u7684\u767E\u5206\u6BD4</li></ul></li><li><p>\u8BF4\u660E\uFF1AOVER()\u4E2D\u5FC5\u987B\u4F7F\u7528ORDER BY\u8BED\u53E5\uFF0C\u5426\u5219\u8BA1\u7B97\u51FA\u6765\u7684\u503C\u90FD\u4E3A1</p></li><li><p>\u4E3E\u4F8B\uFF1A\u67E5\u8BE2goods\u4E2D\u5546\u54C1\u4FE1\u606F\uFF0C\u5E76\u8BA1\u7B97\u4E0D\u540C\u7C7B\u522B\u7684\u5546\u54C1\u4EF7\u683C\u5C0F\u4E8E\u7B49\u4E8E\u5F53\u524D\u5546\u54C1\u4EF7\u683C\u7684\u6BD4\u4F8B</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT CUME_DIST() OVER (PARTITION BY category_id ORDER BY price ASC) AS &#39;cd_%&#39;,
    -&gt; id, category, NAME, price
    -&gt; FROM goods;
+---------------------+----+---------------------+-----------------+---------+
| cd_%                | id | category            | NAME            | price   |
+---------------------+----+---------------------+-----------------+---------+
| 0.16666666666666666 | 11 | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | \u767E\u8936\u88D9          |   29.90 |
|  0.3333333333333333 |  1 | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | T\u6064             |   39.90 |
|                 0.5 |  2 | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | \u8FDE\u8863\u88D9          |   79.90 |
|  0.8333333333333334 |  5 | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | \u725B\u4ED4\u88E4          |   89.90 |
|  0.8333333333333334 |  9 | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | \u536B\u8863            |   89.90 |
|                   1 |  7 | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | \u5462\u7ED2\u5916\u5957        |  399.90 |
| 0.16666666666666666 |  3 | \u6237\u5916\u8FD0\u52A8            | \u767B\u5C71\u6756          |   59.90 |
|                 0.5 |  4 | \u6237\u5916\u8FD0\u52A8            | \u9A91\u884C\u88C5\u5907        |  399.90 |
|                 0.5 |  8 | \u6237\u5916\u8FD0\u52A8            | \u81EA\u884C\u8F66          |  399.90 |
|  0.6666666666666666 | 12 | \u6237\u5916\u8FD0\u52A8            | \u6ED1\u677F            |  499.90 |
|  0.8333333333333334 |  6 | \u6237\u5916\u8FD0\u52A8            | \u8FD0\u52A8\u5916\u5957        |  799.90 |
|                   1 | 10 | \u6237\u5916\u8FD0\u52A8            | \u5C71\u5730\u81EA\u884C\u8F66      | 1399.90 |
+---------------------+----+---------------------+-----------------+---------+
12 rows in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li></ul><h4 id="_18-2-5-\u524D\u540E\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_18-2-5-\u524D\u540E\u51FD\u6570" aria-hidden="true">#</a> 18.2.5 \u524D\u540E\u51FD\u6570</h4><p>\u4E5F\u79F0==\u504F\u79FB\u91CF\u51FD\u6570==</p><h5 id="_1-lag-expr-\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_1-lag-expr-\u51FD\u6570" aria-hidden="true">#</a> \u2460 LAG(expr)\u51FD\u6570</h5><ul><li><p>\u8BED\u6CD5\uFF1A<code>LAG(expr[,n, [default]]) OVER ([PARTITION BY \u5B57\u6BB51 ORDER BY \u5B57\u6BB5\u540D2 ASC|DESC])</code></p></li><li><p>\u542B\u4E49\uFF1A\u67E5\u8BE2\u5F53\u524D\u8BB0\u5F55\u7684<strong>\u5F80\u524D\u6570</strong>\u7B2Cn\u4E2Aexpr\u7684\u503C\u3002\u53C2\u6570\u8BF4\u660E\u5982\u4E0B\uFF1A</p><ul><li><code>expr</code>\uFF1A\u5FC5\u586B\u3002\u8868\u793A\u5F53\u524D\u8BB0\u5F55\u7684\u54EA\u4E2A\u5B57\u6BB5</li><li><code>n</code>\uFF1A\u9009\u586B\u3002\u9ED8\u8BA4\u4E3A1</li><li><code>default</code>\uFF1A\u9009\u586B\u3002\u9ED8\u8BA4\u4E3Anull\u3002\u8868\u793A\u5F53\u524D\u884C\u5982\u679C\u662F\u5F53\u524D\u5206\u533A\u5185\u7B2C\u4E00\u6761\u5219\u663E\u793Adefault\u503C\u3002</li></ul></li><li><p>\u4E3E\u4F8B\uFF1A\u67E5\u8BE2\u5546\u54C1id\u4E3A1\u7684\u5546\u54C1\u9500\u552E\u989D\uFF0C\u5E76\u8BA1\u7B97\u5F53\u5929\u9500\u552E\u989D\u4E0E<em>\u524D1\u5929</em>\u9500\u552E\u989D\u7684\u5DEE\u503C</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT g.id, g.\`NAME\`, g.category, t.sale_date, t.sales_sum,
    -&gt; (t.sales_sum - LAG(t.sales_sum, 1, 0) OVER (PARTITION BY t.goods_id ORDER BY sale_date ASC)) diff_sales_num
    -&gt; FROM goods g
    -&gt; LEFT JOIN (
    -&gt; SELECT goods_id, DATE_FORMAT(create_time, &#39;%Y-%m-%d&#39;) sale_date, SUM(sales) sales_sum
    -&gt; FROM sale_log
    -&gt; GROUP BY goods_id, DATE_FORMAT(create_time, &#39;%Y-%m-%d&#39;)
    -&gt; ) t ON t.goods_id = g.id
    -&gt; WHERE g.id = 1;
+----+------+---------------------+------------+-----------+----------------+
| id | NAME | category            | sale_date  | sales_sum | diff_sales_num |
+----+------+---------------------+------------+-----------+----------------+
|  1 | T\u6064  | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | 2020-11-10 |         5 |              5 |
|  1 | T\u6064  | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | 2020-11-11 |         1 |             -4 |
|  1 | T\u6064  | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | 2020-11-12 |         1 |              0 |
|  1 | T\u6064  | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | 2020-11-13 |         3 |              2 |
+----+------+---------------------+------------+-----------+----------------+
4 rows in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li></ul><h5 id="_2-lead-expr-\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_2-lead-expr-\u51FD\u6570" aria-hidden="true">#</a> \u2461 LEAD(expr)\u51FD\u6570</h5><ul><li>\u8BED\u6CD5\uFF1A<code>LEAD(expr[,n, [default]]) OVER ([PARTITION BY \u5B57\u6BB51 ORDER BY \u5B57\u6BB5\u540D2 ASC|DESC])</code></li><li>\u542B\u4E49\uFF1A\u67E5\u8BE2\u5F53\u524D\u8BB0\u5F55\u7684<strong>\u5F80\u540E\u6570</strong>\u7B2Cn\u4E2Aexpr\u7684\u503C\u3002\u53C2\u6570\u8BF4\u660E\u5982\u4E0B\uFF1A <ul><li><code>expr</code>\uFF1A\u5FC5\u586B\u3002\u8868\u793A\u5F53\u524D\u8BB0\u5F55\u7684\u54EA\u4E2A\u5B57\u6BB5</li><li><code>n</code>\uFF1A\u9009\u586B\u3002\u9ED8\u8BA4\u4E3A1</li><li><code>default</code>\uFF1A\u9009\u586B\u3002\u9ED8\u8BA4\u4E3Anull\u3002\u8868\u793A\u5F53\u524D\u884C\u5982\u679C\u662F\u5F53\u524D\u5206\u533A\u5185\u6700\u540E\u4E00\u6761\u5219\u663E\u793Adefault\u503C\u3002</li></ul></li></ul><h4 id="_18-2-6-\u9996\u5C3E\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_18-2-6-\u9996\u5C3E\u51FD\u6570" aria-hidden="true">#</a> 18.2.6 \u9996\u5C3E\u51FD\u6570</h4><h5 id="_1-first-value-expr-\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_1-first-value-expr-\u51FD\u6570" aria-hidden="true">#</a> \u2460 FIRST_VALUE(expr)\u51FD\u6570</h5><ul><li><p>\u8BED\u6CD5\uFF1A<code>FIRST_VALUE(expr) OVER ([PARTITION BY \u5B57\u6BB51 ORDER BY \u5B57\u6BB5\u540D2 ASC|DESC])</code></p></li><li><p>\u542B\u4E49\uFF1A\u8FD4\u56DE\u5F53\u524D\u5206\u7EC4\uFF08\u6392\u5E8F\u540E\uFF09\u7684<strong>\u7B2C\u4E00\u4E2A\u503C</strong></p></li><li><p>\u4E3E\u4F8B\uFF1A\u67E5\u8BE2\u5546\u54C1id\u4E3A1\u7684\u5546\u54C1\u9500\u552E\u989D\uFF0C\u5E76\u8BA1\u7B97\u5F53\u5929\u9500\u552E\u989D\u4E0E<em>\u6700\u5927</em>\u9500\u552E\u989D\u7684\u5DEE\u503C</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT g.id, g.\`NAME\`, g.category, t.sale_date, t.sales_sum,
    -&gt; (FIRST_VALUE(t.sales_sum) OVER (PARTITION BY t.goods_id ORDER BY sales_sum DESC) - t.sales_sum) diff_sales_num
    -&gt; FROM goods g
    -&gt; LEFT JOIN (
    -&gt; SELECT goods_id, DATE_FORMAT(create_time, &#39;%Y-%m-%d&#39;) sale_date, SUM(sales) sales_sum
    -&gt; FROM sale_log
    -&gt; GROUP BY goods_id, DATE_FORMAT(create_time, &#39;%Y-%m-%d&#39;)
    -&gt; ) t ON t.goods_id = g.id
    -&gt; WHERE g.id = 1;
+----+------+---------------------+------------+-----------+----------------+
| id | NAME | category            | sale_date  | sales_sum | diff_sales_num |
+----+------+---------------------+------------+-----------+----------------+
|  1 | T\u6064  | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | 2020-11-10 |         5 |              0 |
|  1 | T\u6064  | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | 2020-11-13 |         3 |              2 |
|  1 | T\u6064  | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | 2020-11-11 |         1 |              4 |
|  1 | T\u6064  | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | 2020-11-12 |         1 |              4 |
+----+------+---------------------+------------+-----------+----------------+
4 rows in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li></ul><h5 id="_2-last-value-expr-\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_2-last-value-expr-\u51FD\u6570" aria-hidden="true">#</a> \u2461 LAST_VALUE(expr)\u51FD\u6570</h5><ul><li>\u8BED\u6CD5\uFF1A<code>LAST_VALUE(expr) OVER ([PARTITION BY \u5B57\u6BB51 ORDER BY \u5B57\u6BB5\u540D2 ASC|DESC])</code></li><li>\u542B\u4E49\uFF1A\u8FD4\u56DE\u5F53\u524D\u5206\u7EC4\uFF08\u6392\u5E8F\u540E\uFF09\u7684<strong>\u6700\u540E\u4E00\u4E2A\u503C</strong></li></ul><h4 id="_18-2-7-\u805A\u5408\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_18-2-7-\u805A\u5408\u51FD\u6570" aria-hidden="true">#</a> 18.2.7 \u805A\u5408\u51FD\u6570</h4><p>==\u805A\u5408\u51FD\u6570\u4E5F\u80FD\u5F53\u505A\u7A97\u53E3\u51FD\u6570\u4F7F\u7528==</p><p>\u805A\u5408\u51FD\u6570\uFF1A<code>SUM()</code>\u3001<code>AVG()</code>\u3001<code>COUNT()</code>\u3001<code>MIN()</code>\u3001<code>MAX()</code></p><p>\u4E3E\u4F8B\uFF1A\u4EE5SUM()\u4E3A\u4F8B\uFF0C\u67E5\u8BE2\u5546\u54C1\u6BCF\u5929\u9500\u552E\u989D</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT DISTINCT sl.goods_id, g.\`NAME\`, DATE_FORMAT(sl.create_time, &#39;%Y-%m-%d&#39;) sale_date,
    -&gt; SUM(sl.sales) OVER (PARTITION BY sl.goods_id, DATE_FORMAT(sl.create_time, &#39;%Y-%m-%d&#39;)) sales_sum
    -&gt; FROM sale_log sl
    -&gt; LEFT JOIN goods g ON g.id = sl.goods_id;
+----------+-----------------+------------+-----------+
| goods_id | NAME            | sale_date  | sales_sum |
+----------+-----------------+------------+-----------+
|        1 | T\u6064             | 2020-11-10 |         5 |
|        1 | T\u6064             | 2020-11-11 |         1 |
|        1 | T\u6064             | 2020-11-12 |         1 |
|        1 | T\u6064             | 2020-11-13 |         3 |
|        2 | \u8FDE\u8863\u88D9          | 2020-11-10 |         1 |
|        2 | \u8FDE\u8863\u88D9          | 2020-11-11 |         1 |
|       10 | \u5C71\u5730\u81EA\u884C\u8F66      | 2020-11-15 |         2 |
+----------+-----------------+------------+-----------+
7 rows in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="_18-2-8-\u5176\u4ED6\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_18-2-8-\u5176\u4ED6\u51FD\u6570" aria-hidden="true">#</a> 18.2.8 \u5176\u4ED6\u51FD\u6570</h4><h5 id="_1-nth-value-expr-n-\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_1-nth-value-expr-n-\u51FD\u6570" aria-hidden="true">#</a> \u2460 NTH_VALUE(expr,n)\u51FD\u6570</h5><ul><li><p>\u8BED\u6CD5\uFF1A<code>NTH_VALUE(expr,n) OVER ([PARTITION BY \u5B57\u6BB51 ORDER BY \u5B57\u6BB5\u540D2 ASC|DESC])</code></p></li><li><p>\u542B\u4E49\uFF1A\u8FD4\u56DE\u7B2Cn\u6761\u8BB0\u5F55\u7684expr\u503C</p></li><li><p>\u4E3E\u4F8B\uFF1A\u67E5\u8BE2goods\u4E2D\u5546\u54C1\u4FE1\u606F\uFF0C\u5E76\u8BA1\u7B97\u4E0D\u540C\u5546\u54C1\u7C7B\u578B\u4E2D\u6392\u540D\u7B2C2\u9AD8\u7684\u4EF7\u683C\u4FE1\u606F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT id, category, NAME, price,
    -&gt; NTH_VALUE(price,2) OVER (PARTITION BY category_id ORDER BY price DESC) AS second_price
    -&gt; FROM goods;
+----+---------------------+-----------------+---------+--------------+
| id | category            | NAME            | price   | second_price |
+----+---------------------+-----------------+---------+--------------+
|  7 | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | \u5462\u7ED2\u5916\u5957        |  399.90 |         NULL |
|  5 | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | \u725B\u4ED4\u88E4          |   89.90 |        89.90 |
|  9 | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | \u536B\u8863            |   89.90 |        89.90 |
|  2 | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | \u8FDE\u8863\u88D9          |   79.90 |        89.90 |
|  1 | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | T\u6064             |   39.90 |        89.90 |
| 11 | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       | \u767E\u8936\u88D9          |   29.90 |        89.90 |
| 10 | \u6237\u5916\u8FD0\u52A8            | \u5C71\u5730\u81EA\u884C\u8F66      | 1399.90 |         NULL |
|  6 | \u6237\u5916\u8FD0\u52A8            | \u8FD0\u52A8\u5916\u5957        |  799.90 |       799.90 |
| 12 | \u6237\u5916\u8FD0\u52A8            | \u6ED1\u677F            |  499.90 |       799.90 |
|  4 | \u6237\u5916\u8FD0\u52A8            | \u9A91\u884C\u88C5\u5907        |  399.90 |       799.90 |
|  8 | \u6237\u5916\u8FD0\u52A8            | \u81EA\u884C\u8F66          |  399.90 |       799.90 |
|  3 | \u6237\u5916\u8FD0\u52A8            | \u767B\u5C71\u6756          |   59.90 |       799.90 |
+----+---------------------+-----------------+---------+--------------+
12 rows in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li></ul><h5 id="_2-ntile-n-\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_2-ntile-n-\u51FD\u6570" aria-hidden="true">#</a> \u2461 NTILE(n)\u51FD\u6570</h5><ul><li><p>\u8BED\u6CD5\uFF1A<code>NTILE(n) OVER ([PARTITION BY \u5B57\u6BB51 ORDER BY \u5B57\u6BB5\u540D2 ASC|DESC])</code></p></li><li><p>\u542B\u4E49\uFF1A\u5728\u6BCF\u4E2A\u5206\u7EC4\u4E2D\uFF0C\u5C06\u6570\u636E\u5206\u4E3An\u4E2A\u6876\uFF08\u7EC4\uFF09\uFF0C\u5E76\u8BB0\u5F55\u6876\u7F16\u53F7</p></li><li><p>\u4E3E\u4F8B\uFF1A\u67E5\u8BE2goods\u4E2D\u5546\u54C1\u4FE1\u606F\uFF0C\u5E76\u5C06\u4E0D\u540C\u5546\u54C1\u7C7B\u578B\u4E2D\u7684\u5546\u54C1\u6309\u7167\u4EF7\u683C\u964D\u5E8F\u5206\u4E3A3\u4E2A\u6876\uFF08\u7EC4\uFF09</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; select NTILE(3) OVER (PARTITION BY category_id ORDER BY price DESC) AS num,
    -&gt; id, \`NAME\`, category, price
    -&gt; FROM goods;
+------+----+-----------------+---------------------+---------+
| num  | id | NAME            | category            | price   |
+------+----+-----------------+---------------------+---------+
|    1 |  7 | \u5462\u7ED2\u5916\u5957        | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       |  399.90 |
|    1 |  5 | \u725B\u4ED4\u88E4          | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       |   89.90 |
|    2 |  9 | \u536B\u8863            | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       |   89.90 |
|    2 |  2 | \u8FDE\u8863\u88D9          | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       |   79.90 |
|    3 |  1 | T\u6064             | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       |   39.90 |
|    3 | 11 | \u767E\u8936\u88D9          | \u5973\u88C5/\u5973\u58EB\u7CBE\u54C1       |   29.90 |
|    1 | 10 | \u5C71\u5730\u81EA\u884C\u8F66      | \u6237\u5916\u8FD0\u52A8            | 1399.90 |
|    1 |  6 | \u8FD0\u52A8\u5916\u5957        | \u6237\u5916\u8FD0\u52A8            |  799.90 |
|    2 | 12 | \u6ED1\u677F            | \u6237\u5916\u8FD0\u52A8            |  499.90 |
|    2 |  4 | \u9A91\u884C\u88C5\u5907        | \u6237\u5916\u8FD0\u52A8            |  399.90 |
|    3 |  8 | \u81EA\u884C\u8F66          | \u6237\u5916\u8FD0\u52A8            |  399.90 |
|    3 |  3 | \u767B\u5C71\u6756          | \u6237\u5916\u8FD0\u52A8            |   59.90 |
+------+----+-----------------+---------------------+---------+
12 rows in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li></ul><h4 id="_18-2-9-window\u8BED\u6CD5\u7684\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_18-2-9-window\u8BED\u6CD5\u7684\u4F7F\u7528" aria-hidden="true">#</a> 18.2.9 WINDOW\u8BED\u6CD5\u7684\u4F7F\u7528</h4><ul><li><p>18.2.8-\u2461\u4F8B\u5B50\u53EF\u6539\u5199\u4E3A\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT DISTINCT sl.goods_id, g.\`NAME\`, DATE_FORMAT(sl.create_time, &#39;%Y-%m-%d&#39;) sale_date, 
	SUM(sl.sales) OVER w_sales_sum_cal sales_sum
FROM sale_log sl
LEFT JOIN goods g ON g.id = sl.goods_id
WINDOW w_sales_sum_cal AS (PARTITION BY sl.goods_id, DATE_FORMAT(sl.create_time, &#39;%Y-%m-%d&#39;));
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>18.2.4-\u2460\u4F8B\u5B50\u53EF\u6539\u5199\u4E3A\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT RANK() OVER w_price_desc_rank AS r,
	PERCENT_RANK() OVER w_price_desc_rank AS &#39;pr_%&#39;,
	id, category_id, category, NAME, price, stock
FROM goods
-- WHERE category_id = 1 # \u5982\u679C\u6709where\u6761\u4EF6\uFF0Cwhere\u6761\u4EF6\u9700\u8981\u5199\u5728WINDOW\u8BED\u53E5\u4E4B\u524D
WINDOW w_price_desc_rank AS (PARTITION BY category_id ORDER BY price DESC);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul><h4 id="_18-2-10-\u5C0F\u7ED3-\u7A97\u53E3\u51FD\u6570\u7684\u7279\u70B9" tabindex="-1"><a class="header-anchor" href="#_18-2-10-\u5C0F\u7ED3-\u7A97\u53E3\u51FD\u6570\u7684\u7279\u70B9" aria-hidden="true">#</a> 18.2.10 \u5C0F\u7ED3-\u7A97\u53E3\u51FD\u6570\u7684\u7279\u70B9</h4><ul><li>\u7A97\u53E3\u51FD\u6570\u53EF\u4EE5\u5BF9\u6570\u636E\u8FDB\u884C\u5206\u7EC4\uFF0C\u5E76\u4E14\u53EF\u4EE5\u5728\u7EC4\u5185\u6392\u5E8F</li><li>\u7A97\u53E3\u51FD\u6570\u4E0D\u4F1A\u56E0\u5206\u7EC4\u800C\u51CF\u5C11\u539F\u8868\u4E2D\u7684\u884C\u6570</li></ul><h4 id="_18-2-9-\u6D4B\u8BD5\u4E2D\u7528\u5230\u7684\u8868\u53CA\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_18-2-9-\u6D4B\u8BD5\u4E2D\u7528\u5230\u7684\u8868\u53CA\u6570\u636E" aria-hidden="true">#</a> 18.2.9 \u6D4B\u8BD5\u4E2D\u7528\u5230\u7684\u8868\u53CA\u6570\u636E</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># \u521B\u5EFAgoods\u8868
CREATE TABLE goods(
	id INT PRIMARY KEY AUTO_INCREMENT,
	category_id INT,
	category VARCHAR(15),
	NAME VARCHAR(30),
	price DECIMAL(10,2),
	stock INT,
	upper_time DATETIME
);

INSERT INTO goods(category_id,category,NAME,price,stock,upper_time)
VALUES
(1, &#39;\u5973\u88C5/\u5973\u58EB\u7CBE\u54C1&#39;, &#39;T\u6064&#39;, 39.90, 1000, &#39;2020-11-10 00:00:00&#39;),
(1, &#39;\u5973\u88C5/\u5973\u58EB\u7CBE\u54C1&#39;, &#39;\u8FDE\u8863\u88D9&#39;, 79.90, 2500, &#39;2020-11-10 00:00:00&#39;),
(2, &#39;\u6237\u5916\u8FD0\u52A8&#39;, &#39;\u767B\u5C71\u6756&#39;, 59.90, 1500, &#39;2020-11-10 00:00:00&#39;),
(2, &#39;\u6237\u5916\u8FD0\u52A8&#39;, &#39;\u9A91\u884C\u88C5\u5907&#39;, 399.90, 3500, &#39;2020-11-10 00:00:00&#39;),
(1, &#39;\u5973\u88C5/\u5973\u58EB\u7CBE\u54C1&#39;, &#39;\u725B\u4ED4\u88E4&#39;, 89.90, 3500, &#39;2020-11-10 00:00:00&#39;),
(2, &#39;\u6237\u5916\u8FD0\u52A8&#39;, &#39;\u8FD0\u52A8\u5916\u5957&#39;, 799.90, 500, &#39;2020-11-10 00:00:00&#39;),
(1, &#39;\u5973\u88C5/\u5973\u58EB\u7CBE\u54C1&#39;, &#39;\u5462\u7ED2\u5916\u5957&#39;, 399.90, 1200, &#39;2020-11-10 00:00:00&#39;),
(2, &#39;\u6237\u5916\u8FD0\u52A8&#39;, &#39;\u81EA\u884C\u8F66&#39;, 399.90, 1000, &#39;2020-11-10 00:00:00&#39;),
(1, &#39;\u5973\u88C5/\u5973\u58EB\u7CBE\u54C1&#39;, &#39;\u536B\u8863&#39;, 89.90, 1500, &#39;2020-11-10 00:00:00&#39;),
(2, &#39;\u6237\u5916\u8FD0\u52A8&#39;, &#39;\u5C71\u5730\u81EA\u884C\u8F66&#39;, 1399.90, 2500, &#39;2020-11-10 00:00:00&#39;),
(1, &#39;\u5973\u88C5/\u5973\u58EB\u7CBE\u54C1&#39;, &#39;\u767E\u8936\u88D9&#39;, 29.90, 500, &#39;2020-11-10 00:00:00&#39;),
(2, &#39;\u6237\u5916\u8FD0\u52A8&#39;, &#39;\u6ED1\u677F&#39;, 499.90, 1200, &#39;2020-11-10 00:00:00&#39;);

# \u521B\u5EFA\u9500\u552E\u8BB0\u5F55\u8868
create table sale_log(
	id int PRIMARY KEY auto_increment,
	goods_id int,
	sales int COMMENT &#39;\u672C\u6B21\u552E\u51FA\u6570\u91CF&#39;,
	create_time datetime
);

INSERT INTO \`sale_log\` VALUES (1, 1, 1, &#39;2020-11-10 02:10:33&#39;);
INSERT INTO \`sale_log\` VALUES (2, 1, 4, &#39;2020-11-10 12:10:33&#39;);
INSERT INTO \`sale_log\` VALUES (3, 1, 1, &#39;2020-11-11 22:10:33&#39;);
INSERT INTO \`sale_log\` VALUES (4, 2, 1, &#39;2020-11-10 22:10:33&#39;);
INSERT INTO \`sale_log\` VALUES (5, 2, 1, &#39;2020-11-11 09:10:33&#39;);
INSERT INTO \`sale_log\` VALUES (6, 1, 1, &#39;2020-11-12 11:11:13&#39;);
INSERT INTO \`sale_log\` VALUES (7, 1, 1, &#39;2020-11-13 16:10:33&#39;);
INSERT INTO \`sale_log\` VALUES (8, 1, 2, &#39;2020-11-13 17:50:33&#39;);
INSERT INTO \`sale_log\` VALUES (9, 10, 2, &#39;2020-11-15 17:50:33&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h3 id="_18-3-\u65B0\u7279\u60272-\u516C\u7528\u8868\u8868\u8FBE\u5F0F" tabindex="-1"><a class="header-anchor" href="#_18-3-\u65B0\u7279\u60272-\u516C\u7528\u8868\u8868\u8FBE\u5F0F" aria-hidden="true">#</a> 18.3 \u65B0\u7279\u60272-\u516C\u7528\u8868\u8868\u8FBE\u5F0F</h3><blockquote><p>\u6982\u5FF5</p></blockquote><p>==\u516C\u7528\u8868\u8868\u8FBE\u5F0F==\uFF0C\u7B80\u79F0<strong>CTE</strong>\uFF08Common Table Expressions\uFF09\u3002CTE\u662F\u4E00\u4E2A\u547D\u540D\u7684\u4E34\u65F6\u7ED3\u679C\u96C6\uFF0C\u4F5C\u7528\u8303\u56F4\u662F\u5F53\u524D\u8BED\u53E5\u3002\u53EF\u4EE5\u5C06CTE\u7406\u89E3\u6210\u4E00\u4E2A\u53EF\u4EE5\u590D\u7528\u7684\u5B50\u67E5\u8BE2\uFF0C\u4F46\u662F<strong>CTE\u53EF\u4EE5\u5F15\u7528\u5176\u4ED6CTE</strong>\uFF0C\u4F46\u662F\u5B50\u67E5\u8BE2\u4E0D\u80FD\u5F15\u7528\u5176\u4ED6\u5B50\u67E5\u8BE2\u3002</p><blockquote><p>\u5206\u7C7B</p></blockquote><p>\u6309\u7167<strong>\u8BED\u6CD5\u7ED3\u6784\u548C\u6267\u884C\u65B9\u5F0F</strong>\u7684\u4E0D\u540C\uFF0C\u53EF\u4EE5\u5206\u4E3A\u4E24\u7C7B\uFF1A</p><ul><li><code>\u666E\u901A\u516C\u7528\u8868\u8868\u8FBE\u5F0F</code></li><li><code>\u9012\u5F52\u516C\u7528\u8868\u8868\u8FBE\u5F0F</code></li></ul><h4 id="_18-3-1-\u666E\u901A\u516C\u7528\u8868\u8868\u8FBE\u5F0F" tabindex="-1"><a class="header-anchor" href="#_18-3-1-\u666E\u901A\u516C\u7528\u8868\u8868\u8FBE\u5F0F" aria-hidden="true">#</a> 18.3.1 \u666E\u901A\u516C\u7528\u8868\u8868\u8FBE\u5F0F</h4><ul><li><p>\u8BED\u6CD5\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>WITH CTE\u540D\u79F0
AS (\u67E5\u8BE2\u8BED\u53E5)
SELECT|DELETE|UPDATE \u8BED\u53E5;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>\u4E3E\u4F8B\uFF1A\u67E5\u8BE2\u5458\u5DE5\u6240\u5728\u90E8\u95E8\u7684\u8BE6\u7EC6\u4FE1\u606F\u3002</p><p>\u56E0\u4E3A\u6709\u7684\u90E8\u95E8\u6CA1\u6709\u5458\u5DE5\uFF0C\u8FD9\u4E9B\u90E8\u95E8\u662F\u4E0D\u80FD\u663E\u793A\u7684\uFF0C\u6240\u4EE5\u4E0D\u80FD\u76F4\u63A5\u8FD4\u56DE\u90E8\u95E8\u8868\u4FE1\u606F\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>WITH cte_emps_dept_id
AS (SELECT DISTINCT department_id FROM emps)
SELECT d.*
FROM depts d 
LEFT JOIN cte_emps_dept_id c ON c.department_id = d.department_id
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul><h4 id="_18-3-2-\u9012\u5F52\u516C\u7528\u8868\u8868\u8FBE\u5F0F" tabindex="-1"><a class="header-anchor" href="#_18-3-2-\u9012\u5F52\u516C\u7528\u8868\u8868\u8FBE\u5F0F" aria-hidden="true">#</a> 18.3.2 \u9012\u5F52\u516C\u7528\u8868\u8868\u8FBE\u5F0F</h4><ul><li><p>\u8BED\u6CD5\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>WITH RECURSIVE CTE\u540D\u79F0
AS (\u67E5\u8BE2\u8BED\u53E5\u2460) 
SELECT|DELETE|UPDATE \u8BED\u53E5;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>==\u8BF4\u660E\uFF1A==</p><ul><li><p><code>\u67E5\u8BE2\u8BED\u53E5\u2460</code>\u7531\u4E24\u90E8\u5206\u7EC4\u6210\uFF1A</p><ul><li><p><code>\u79CD\u5B50\u67E5\u8BE2</code>\uFF1A\u7528\u6765<strong>\u83B7\u53D6\u9012\u5F52\u7684\u521D\u59CB\u503C</strong>\u3002\u8FD9\u4E2A\u67E5\u8BE2\u53EA\u8FD0\u884C\u4E00\u6B21\uFF0C\u4EE5\u521B\u5EFA\u521D\u59CB\u6570\u636E\u96C6</p></li><li><p><code>\u9012\u5F52\u67E5\u8BE2</code>\uFF1A\u9012\u5F52\u67E5\u8BE2\u4F1A\u4E00\u76F4\u6267\u884C\uFF0C\u76F4\u5230\u6CA1\u6709\u4EFB\u4F55\u65B0\u7684\u67E5\u8BE2\u6570\u636E\u4EA7\u751F\uFF0C\u9012\u5F52\u8FD4\u56DE\u3002</p><p><strong>\u9012\u5F52\u67E5\u8BE2\u4E2D\uFF0C\u4E0D\u7528\u6216\u614E\u7528\u5916\u8FDE\u63A5\uFF0C\u6700\u597D\u4F7F\u7528\u5185\u8FDE\u63A5\uFF08<code>[inner] join ... on</code>\uFF09</strong></p></li><li><p><strong>\u4E8C\u8005\u901A\u8FC7\u5173\u952E\u5B57<code>UNION [ALL]</code>\u8FDB\u884C\u8FDE\u63A5</strong></p></li></ul></li></ul></li><li><p>\u4E3E\u4F8B\uFF1A\u9488\u5BF9\u4E8E\u6211\u4EEC\u5E38\u7528\u7684emps\u8868\uFF0C\u5305\u542Bemployee_id\uFF0Clast_name\u548Cmanager_id\u4E09\u4E2A\u5B57\u6BB5\u3002\u5982\u679Ca\u662Fb \u7684\u7BA1\u7406\u8005\uFF0C\u90A3\u4E48\uFF0C\u6211\u4EEC\u53EF\u4EE5\u628Ab\u53EB\u505Aa\u7684\u4E0B\u5C5E\uFF0C\u5982\u679C\u540C\u65F6b\u53C8\u662Fc\u7684\u7BA1\u7406\u8005\uFF0C\u90A3\u4E48c\u5C31\u662Fb\u7684\u4E0B\u5C5E\uFF0C\u662Fa\u7684\u4E0B\u4E0B \u5C5E\u3002 \u8981\u6C42\uFF1A\u4F7F\u7528\u9012\u5F52\u516C\u7528\u8868\u8868\u8FBE\u5F0F\u67E5\u8BE2\u51FA\u6240\u6709\u5177\u6709\u4E0B\u4E0B\u5C5E\u8EAB\u4EFD\u7684\u4EBA\u5458\u4FE1\u606F\u3002</p><p>==\u6B65\u9AA4\uFF1A==</p><ul><li>\u2460 \u901A\u8FC7\u79CD\u5B50\u67E5\u8BE2\uFF0C\u83B7\u53D6\u516C\u53F8\u6700\u5927\u9886\u5BFC\uFF0C\u5373\u7B2C\u4E00\u5C42\u5458\u5DE5\u3002\u4F7F\u7528n\u8BB0\u5F55\u5458\u5DE5\u5C42\u7EA7\uFF0C\u7B2C\u4E00\u5C42\u5458\u5DE5\u8BB0n=1</li><li>\u2461 \u5F00\u59CB\u8FDB\u884C\u9012\u5F52\u67E5\u8BE2\u3002\u67E5\u8BE2\u51FA\u4EE5\u516C\u7528\u8868\u8868\u8FBE\u5F0F\u4E2D\u5458\u5DE5\u4E3A\u9886\u5BFC\u7684\u5458\u5DE5\uFF0C\u5E76\u8BB0\u5F55\u8BE5\u5C42\u5458\u5DE5\u7684n\u503C\u4E3A\u516C\u7528\u8868\u8868\u8FBE\u5F0F\u4E2D\u7684n\u503C+1\uFF0C\u9012\u5F52\u8FD4\u56DE</li><li>\u2462 \u6700\u540E\u7684\u67E5\u8BE2\uFF0C\u7B5B\u9009\u51FA\u516C\u7528\u8868\u8868\u8FBE\u5F0F\u4E2D\u5C5E\u4E8E\u4E0B\u4E0B\u5C5E\u8EAB\u4EFD\u7684\u5458\u5DE5\uFF0C\u5373n&gt;=3\u7684\u5458\u5DE5</li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>WITH RECURSIVE cte_emp
AS (
    -- \u79CD\u5B50\u67E5\u8BE2\uFF0C\u83B7\u53D6\u7B2C\u4E00\u5C42\u5458\u5DE5
	SELECT employee_id, last_name, manager_id, 1 AS n FROM emps WHERE manager_id IS NULL 
	UNION ALL 
    -- \u9012\u5F52\u67E5\u8BE2\uFF0C\u83B7\u53D6\u6BCF\u4E00\u5C42\u5458\u5DE5
	SELECT e.employee_id, e.last_name, e.manager_id, cte_emp.n+1 
    FROM emps e 
    JOIN cte_emp ON cte_emp.employee_id = e.manager_id
)
SELECT * FROM cte_emp WHERE n &gt;= 3
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ul><h4 id="_18-3-3-\u5C0F\u7ED3" tabindex="-1"><a class="header-anchor" href="#_18-3-3-\u5C0F\u7ED3" aria-hidden="true">#</a> 18.3.3 \u5C0F\u7ED3</h4><p>\u516C\u7528\u8868\u8868\u8FBE\u5F0F\u7684\u4F5C\u7528\u662F\u53EF\u4EE5\u66FF\u4EE3\u5B50\u67E5\u8BE2\uFF0C\u800C\u4E14\u53EF\u4EE5\u88AB\u591A\u6B21\u5F15\u7528\u3002\u9012\u5F52\u516C\u7528\u8868\u8868\u8FBE\u5F0F\u5BF9\u67E5\u8BE2\u6709\u4E00\u4E2A\u5171\u540C\u6839 \u8282\u70B9\u7684\u6811\u5F62\u7ED3\u6784\u6570\u636E\u975E\u5E38\u9AD8\u6548\uFF0C\u53EF\u4EE5\u8F7B\u677E\u641E\u5B9A\u5176\u4ED6\u67E5\u8BE2\u65B9\u5F0F\u96BE\u4EE5\u5904\u7406\u7684\u67E5\u8BE2\u3002</p><h2 id="_19-\u9644" tabindex="-1"><a class="header-anchor" href="#_19-\u9644" aria-hidden="true">#</a> 19 \u9644</h2><p>\u4EE5\u4E0A\u7B14\u8BB0\u4E2D\u7528\u5230\u7684\u8868\u53CA\u5176\u6570\u636E\uFF1A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- ----------------------------
-- Table structure for departments
-- ----------------------------
DROP TABLE IF EXISTS \`departments\`;
CREATE TABLE \`departments\`  (
  \`department_id\` int(0) NOT NULL DEFAULT 0,
  \`department_name\` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  \`manager_id\` int(0) NULL DEFAULT NULL,
  \`location_id\` int(0) NULL DEFAULT NULL,
  PRIMARY KEY (\`department_id\`) USING BTREE,
  UNIQUE INDEX \`dept_id_pk\`(\`department_id\`) USING BTREE,
  INDEX \`dept_loc_fk\`(\`location_id\`) USING BTREE,
  INDEX \`dept_mgr_fk\`(\`manager_id\`) USING BTREE,
  CONSTRAINT \`dept_loc_fk\` FOREIGN KEY (\`location_id\`) REFERENCES \`locations\` (\`location_id\`) ON DELETE RESTRICT ON UPDATE RESTRICT,
  CONSTRAINT \`dept_mgr_fk\` FOREIGN KEY (\`manager_id\`) REFERENCES \`employees\` (\`employee_id\`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;
-- ----------------------------
-- Records of departments
-- ----------------------------
INSERT INTO \`departments\` VALUES (10, &#39;Administration&#39;, 200, 1700);
INSERT INTO \`departments\` VALUES (20, &#39;Marketing&#39;, 201, 1800);
INSERT INTO \`departments\` VALUES (30, &#39;Purchasing&#39;, 114, 1700);
INSERT INTO \`departments\` VALUES (40, &#39;Human Resources&#39;, 203, 2400);
INSERT INTO \`departments\` VALUES (50, &#39;Shipping&#39;, 121, 1500);
INSERT INTO \`departments\` VALUES (60, &#39;IT&#39;, 103, 1400);
INSERT INTO \`departments\` VALUES (70, &#39;Public Relations&#39;, 204, 2700);
INSERT INTO \`departments\` VALUES (80, &#39;Sales&#39;, 145, 2500);
INSERT INTO \`departments\` VALUES (90, &#39;Executive&#39;, 100, 1700);
INSERT INTO \`departments\` VALUES (100, &#39;Finance&#39;, 108, 1700);
INSERT INTO \`departments\` VALUES (110, &#39;Accounting&#39;, 205, 1700);
INSERT INTO \`departments\` VALUES (120, &#39;Treasury&#39;, NULL, 1700);
INSERT INTO \`departments\` VALUES (130, &#39;Corporate Tax&#39;, NULL, 1700);
INSERT INTO \`departments\` VALUES (140, &#39;Control And Credit&#39;, NULL, 1700);
INSERT INTO \`departments\` VALUES (150, &#39;Shareholder Services&#39;, NULL, 1700);
INSERT INTO \`departments\` VALUES (160, &#39;Benefits&#39;, NULL, 1700);
INSERT INTO \`departments\` VALUES (170, &#39;Manufacturing&#39;, NULL, 1700);
INSERT INTO \`departments\` VALUES (180, &#39;Construction&#39;, NULL, 1700);
INSERT INTO \`departments\` VALUES (190, &#39;Contracting&#39;, NULL, 1700);
INSERT INTO \`departments\` VALUES (200, &#39;Operations&#39;, NULL, 1700);
INSERT INTO \`departments\` VALUES (210, &#39;IT Support&#39;, NULL, 1700);
INSERT INTO \`departments\` VALUES (220, &#39;NOC&#39;, NULL, 1700);
INSERT INTO \`departments\` VALUES (230, &#39;IT Helpdesk&#39;, NULL, 1700);
INSERT INTO \`departments\` VALUES (240, &#39;Government Sales&#39;, NULL, 1700);
INSERT INTO \`departments\` VALUES (250, &#39;Retail Sales&#39;, NULL, 1700);
INSERT INTO \`departments\` VALUES (260, &#39;Recruiting&#39;, NULL, 1700);
INSERT INTO \`departments\` VALUES (270, &#39;Payroll&#39;, NULL, 1700);
-- ----------------------------
-- Table structure for employees
-- ----------------------------
DROP TABLE IF EXISTS \`employees\`;
CREATE TABLE \`employees\`  (
  \`employee_id\` int(0) NOT NULL DEFAULT 0,
  \`first_name\` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  \`last_name\` varchar(25) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  \`email\` varchar(25) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  \`phone_number\` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  \`hire_date\` date NOT NULL,
  \`job_id\` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  \`salary\` double(8, 2) NULL DEFAULT NULL,
  \`commission_pct\` double(2, 2) NULL DEFAULT NULL,
  \`manager_id\` int(0) NULL DEFAULT NULL,
  \`department_id\` int(0) NULL DEFAULT NULL,
  PRIMARY KEY (\`employee_id\`) USING BTREE,
  UNIQUE INDEX \`emp_email_uk\`(\`email\`) USING BTREE,
  UNIQUE INDEX \`emp_emp_id_pk\`(\`employee_id\`) USING BTREE,
  INDEX \`emp_job_fk\`(\`job_id\`) USING BTREE,
  INDEX \`emp_manager_fk\`(\`manager_id\`) USING BTREE,
  INDEX \`emp_dept_fk\`(\`department_id\`) USING BTREE,
  CONSTRAINT \`emp_dept_fk\` FOREIGN KEY (\`department_id\`) REFERENCES \`departments\` (\`department_id\`) ON DELETE RESTRICT ON UPDATE RESTRICT,
  CONSTRAINT \`emp_job_fk\` FOREIGN KEY (\`job_id\`) REFERENCES \`jobs\` (\`job_id\`) ON DELETE RESTRICT ON UPDATE RESTRICT,
  CONSTRAINT \`emp_manager_fk\` FOREIGN KEY (\`manager_id\`) REFERENCES \`employees\` (\`employee_id\`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of employees
-- ----------------------------
INSERT INTO \`employees\` VALUES (100, &#39;Steven&#39;, &#39;King&#39;, &#39;SKING&#39;, &#39;515.123.4567&#39;, &#39;1987-06-17&#39;, &#39;AD_PRES&#39;, 24000.00, NULL, NULL, 90);
INSERT INTO \`employees\` VALUES (101, &#39;Neena&#39;, &#39;Kochhar&#39;, &#39;NKOCHHAR&#39;, &#39;515.123.4568&#39;, &#39;1989-09-21&#39;, &#39;AD_VP&#39;, 17000.00, NULL, 100, 90);
INSERT INTO \`employees\` VALUES (102, &#39;Lex&#39;, &#39;De Haan&#39;, &#39;LDEHAAN&#39;, &#39;515.123.4569&#39;, &#39;1993-01-13&#39;, &#39;AD_VP&#39;, 17000.00, NULL, 100, 90);
INSERT INTO \`employees\` VALUES (103, &#39;Alexander&#39;, &#39;Hunold&#39;, &#39;AHUNOLD&#39;, &#39;590.423.4567&#39;, &#39;1990-01-03&#39;, &#39;IT_PROG&#39;, 9000.00, NULL, 102, 60);
INSERT INTO \`employees\` VALUES (104, &#39;Bruce&#39;, &#39;Ernst&#39;, &#39;BERNST&#39;, &#39;590.423.4568&#39;, &#39;1991-05-21&#39;, &#39;IT_PROG&#39;, 6000.00, NULL, 103, 60);
INSERT INTO \`employees\` VALUES (105, &#39;David&#39;, &#39;Austin&#39;, &#39;DAUSTIN&#39;, &#39;590.423.4569&#39;, &#39;1997-06-25&#39;, &#39;IT_PROG&#39;, 4800.00, NULL, 103, 60);
INSERT INTO \`employees\` VALUES (106, &#39;Valli&#39;, &#39;Pataballa&#39;, &#39;VPATABAL&#39;, &#39;590.423.4560&#39;, &#39;1998-02-05&#39;, &#39;IT_PROG&#39;, 4800.00, NULL, 103, 60);
INSERT INTO \`employees\` VALUES (107, &#39;Diana&#39;, &#39;Lorentz&#39;, &#39;DLORENTZ&#39;, &#39;590.423.5567&#39;, &#39;1999-02-07&#39;, &#39;IT_PROG&#39;, 4200.00, NULL, 103, 60);
INSERT INTO \`employees\` VALUES (108, &#39;Nancy&#39;, &#39;Greenberg&#39;, &#39;NGREENBE&#39;, &#39;515.124.4569&#39;, &#39;1994-08-17&#39;, &#39;FI_MGR&#39;, 12000.00, NULL, 101, 100);
INSERT INTO \`employees\` VALUES (109, &#39;Daniel&#39;, &#39;Faviet&#39;, &#39;DFAVIET&#39;, &#39;515.124.4169&#39;, &#39;1994-08-16&#39;, &#39;FI_ACCOUNT&#39;, 9000.00, NULL, 108, 100);
INSERT INTO \`employees\` VALUES (110, &#39;John&#39;, &#39;Chen&#39;, &#39;JCHEN&#39;, &#39;515.124.4269&#39;, &#39;1997-09-28&#39;, &#39;FI_ACCOUNT&#39;, 8200.00, NULL, 108, 100);
INSERT INTO \`employees\` VALUES (111, &#39;Ismael&#39;, &#39;Sciarra&#39;, &#39;ISCIARRA&#39;, &#39;515.124.4369&#39;, &#39;1997-09-30&#39;, &#39;FI_ACCOUNT&#39;, 7700.00, NULL, 108, 100);
INSERT INTO \`employees\` VALUES (112, &#39;Jose Manuel&#39;, &#39;Urman&#39;, &#39;JMURMAN&#39;, &#39;515.124.4469&#39;, &#39;1998-03-07&#39;, &#39;FI_ACCOUNT&#39;, 7800.00, NULL, 108, 100);
INSERT INTO \`employees\` VALUES (113, &#39;Luis&#39;, &#39;Popp&#39;, &#39;LPOPP&#39;, &#39;515.124.4567&#39;, &#39;1999-12-07&#39;, &#39;FI_ACCOUNT&#39;, 6900.00, NULL, 108, 100);
INSERT INTO \`employees\` VALUES (114, &#39;Den&#39;, &#39;Raphaely&#39;, &#39;DRAPHEAL&#39;, &#39;515.127.4561&#39;, &#39;1994-12-07&#39;, &#39;PU_MAN&#39;, 11000.00, NULL, 100, 30);
INSERT INTO \`employees\` VALUES (115, &#39;Alexander&#39;, &#39;Khoo&#39;, &#39;AKHOO&#39;, &#39;515.127.4562&#39;, &#39;1995-05-18&#39;, &#39;PU_CLERK&#39;, 3100.00, NULL, 114, 30);
INSERT INTO \`employees\` VALUES (116, &#39;Shelli&#39;, &#39;Baida&#39;, &#39;SBAIDA&#39;, &#39;515.127.4563&#39;, &#39;1997-12-24&#39;, &#39;PU_CLERK&#39;, 2900.00, NULL, 114, 30);
INSERT INTO \`employees\` VALUES (117, &#39;Sigal&#39;, &#39;Tobias&#39;, &#39;STOBIAS&#39;, &#39;515.127.4564&#39;, &#39;1997-07-24&#39;, &#39;PU_CLERK&#39;, 2800.00, NULL, 114, 30);
INSERT INTO \`employees\` VALUES (118, &#39;Guy&#39;, &#39;Himuro&#39;, &#39;GHIMURO&#39;, &#39;515.127.4565&#39;, &#39;1998-11-15&#39;, &#39;PU_CLERK&#39;, 2600.00, NULL, 114, 30);
INSERT INTO \`employees\` VALUES (119, &#39;Karen&#39;, &#39;Colmenares&#39;, &#39;KCOLMENA&#39;, &#39;515.127.4566&#39;, &#39;1999-08-10&#39;, &#39;PU_CLERK&#39;, 2500.00, NULL, 114, 30);
INSERT INTO \`employees\` VALUES (120, &#39;Matthew&#39;, &#39;Weiss&#39;, &#39;MWEISS&#39;, &#39;650.123.1234&#39;, &#39;1996-07-18&#39;, &#39;ST_MAN&#39;, 8000.00, NULL, 100, 50);
INSERT INTO \`employees\` VALUES (121, &#39;Adam&#39;, &#39;Fripp&#39;, &#39;AFRIPP&#39;, &#39;650.123.2234&#39;, &#39;1997-04-10&#39;, &#39;ST_MAN&#39;, 8200.00, NULL, 100, 50);
INSERT INTO \`employees\` VALUES (122, &#39;Payam&#39;, &#39;Kaufling&#39;, &#39;PKAUFLIN&#39;, &#39;650.123.3234&#39;, &#39;1995-05-01&#39;, &#39;ST_MAN&#39;, 7900.00, NULL, 100, 50);
INSERT INTO \`employees\` VALUES (123, &#39;Shanta&#39;, &#39;Vollman&#39;, &#39;SVOLLMAN&#39;, &#39;650.123.4234&#39;, &#39;1997-10-10&#39;, &#39;ST_MAN&#39;, 6500.00, NULL, 100, 50);
INSERT INTO \`employees\` VALUES (124, &#39;Kevin&#39;, &#39;Mourgos&#39;, &#39;KMOURGOS&#39;, &#39;650.123.5234&#39;, &#39;1999-11-16&#39;, &#39;ST_MAN&#39;, 5800.00, NULL, 100, 50);
INSERT INTO \`employees\` VALUES (125, &#39;Julia&#39;, &#39;Nayer&#39;, &#39;JNAYER&#39;, &#39;650.124.1214&#39;, &#39;1997-07-16&#39;, &#39;ST_CLERK&#39;, 3200.00, NULL, 120, 50);
INSERT INTO \`employees\` VALUES (126, &#39;Irene&#39;, &#39;Mikkilineni&#39;, &#39;IMIKKILI&#39;, &#39;650.124.1224&#39;, &#39;1998-09-28&#39;, &#39;ST_CLERK&#39;, 2700.00, NULL, 120, 50);
INSERT INTO \`employees\` VALUES (127, &#39;James&#39;, &#39;Landry&#39;, &#39;JLANDRY&#39;, &#39;650.124.1334&#39;, &#39;1999-01-14&#39;, &#39;ST_CLERK&#39;, 2400.00, NULL, 120, 50);
INSERT INTO \`employees\` VALUES (128, &#39;Steven&#39;, &#39;Markle&#39;, &#39;SMARKLE&#39;, &#39;650.124.1434&#39;, &#39;2000-03-08&#39;, &#39;ST_CLERK&#39;, 2200.00, NULL, 120, 50);
INSERT INTO \`employees\` VALUES (129, &#39;Laura&#39;, &#39;Bissot&#39;, &#39;LBISSOT&#39;, &#39;650.124.5234&#39;, &#39;1997-08-20&#39;, &#39;ST_CLERK&#39;, 3300.00, NULL, 121, 50);
INSERT INTO \`employees\` VALUES (130, &#39;Mozhe&#39;, &#39;Atkinson&#39;, &#39;MATKINSO&#39;, &#39;650.124.6234&#39;, &#39;1997-10-30&#39;, &#39;ST_CLERK&#39;, 2800.00, NULL, 121, 50);
INSERT INTO \`employees\` VALUES (131, &#39;James&#39;, &#39;Marlow&#39;, &#39;JAMRLOW&#39;, &#39;650.124.7234&#39;, &#39;1997-02-16&#39;, &#39;ST_CLERK&#39;, 2500.00, NULL, 121, 50);
INSERT INTO \`employees\` VALUES (132, &#39;TJ&#39;, &#39;Olson&#39;, &#39;TJOLSON&#39;, &#39;650.124.8234&#39;, &#39;1999-04-10&#39;, &#39;ST_CLERK&#39;, 2100.00, NULL, 121, 50);
INSERT INTO \`employees\` VALUES (133, &#39;Jason&#39;, &#39;Mallin&#39;, &#39;JMALLIN&#39;, &#39;650.127.1934&#39;, &#39;1996-06-14&#39;, &#39;ST_CLERK&#39;, 3300.00, NULL, 122, 50);
INSERT INTO \`employees\` VALUES (134, &#39;Michael&#39;, &#39;Rogers&#39;, &#39;MROGERS&#39;, &#39;650.127.1834&#39;, &#39;1998-08-26&#39;, &#39;ST_CLERK&#39;, 2900.00, NULL, 122, 50);
INSERT INTO \`employees\` VALUES (135, &#39;Ki&#39;, &#39;Gee&#39;, &#39;KGEE&#39;, &#39;650.127.1734&#39;, &#39;1999-12-12&#39;, &#39;ST_CLERK&#39;, 2400.00, NULL, 122, 50);
INSERT INTO \`employees\` VALUES (136, &#39;Hazel&#39;, &#39;Philtanker&#39;, &#39;HPHILTAN&#39;, &#39;650.127.1634&#39;, &#39;2000-02-06&#39;, &#39;ST_CLERK&#39;, 2200.00, NULL, 122, 50);
INSERT INTO \`employees\` VALUES (137, &#39;Renske&#39;, &#39;Ladwig&#39;, &#39;RLADWIG&#39;, &#39;650.121.1234&#39;, &#39;1995-07-14&#39;, &#39;ST_CLERK&#39;, 3600.00, NULL, 123, 50);
INSERT INTO \`employees\` VALUES (138, &#39;Stephen&#39;, &#39;Stiles&#39;, &#39;SSTILES&#39;, &#39;650.121.2034&#39;, &#39;1997-10-26&#39;, &#39;ST_CLERK&#39;, 3200.00, NULL, 123, 50);
INSERT INTO \`employees\` VALUES (139, &#39;John&#39;, &#39;Seo&#39;, &#39;JSEO&#39;, &#39;650.121.2019&#39;, &#39;1998-02-12&#39;, &#39;ST_CLERK&#39;, 2700.00, NULL, 123, 50);
INSERT INTO \`employees\` VALUES (140, &#39;Joshua&#39;, &#39;Patel&#39;, &#39;JPATEL&#39;, &#39;650.121.1834&#39;, &#39;1998-04-06&#39;, &#39;ST_CLERK&#39;, 2500.00, NULL, 123, 50);
INSERT INTO \`employees\` VALUES (141, &#39;Trenna&#39;, &#39;Rajs&#39;, &#39;TRAJS&#39;, &#39;650.121.8009&#39;, &#39;1995-10-17&#39;, &#39;ST_CLERK&#39;, 3500.00, NULL, 124, 50);
INSERT INTO \`employees\` VALUES (142, &#39;Curtis&#39;, &#39;Davies&#39;, &#39;CDAVIES&#39;, &#39;650.121.2994&#39;, &#39;1997-01-29&#39;, &#39;ST_CLERK&#39;, 3100.00, NULL, 124, 50);
INSERT INTO \`employees\` VALUES (143, &#39;Randall&#39;, &#39;Matos&#39;, &#39;RMATOS&#39;, &#39;650.121.2874&#39;, &#39;1998-03-15&#39;, &#39;ST_CLERK&#39;, 2600.00, NULL, 124, 50);
INSERT INTO \`employees\` VALUES (144, &#39;Peter&#39;, &#39;Vargas&#39;, &#39;PVARGAS&#39;, &#39;650.121.2004&#39;, &#39;1998-07-09&#39;, &#39;ST_CLERK&#39;, 2500.00, NULL, 124, 50);
INSERT INTO \`employees\` VALUES (145, &#39;John&#39;, &#39;Russell&#39;, &#39;JRUSSEL&#39;, &#39;011.44.1344.429268&#39;, &#39;1996-10-01&#39;, &#39;SA_MAN&#39;, 14000.00, 0.40, 100, 80);
INSERT INTO \`employees\` VALUES (146, &#39;Karen&#39;, &#39;Partners&#39;, &#39;KPARTNER&#39;, &#39;011.44.1344.467268&#39;, &#39;1997-01-05&#39;, &#39;SA_MAN&#39;, 13500.00, 0.30, 100, 80);
INSERT INTO \`employees\` VALUES (147, &#39;Alberto&#39;, &#39;Errazuriz&#39;, &#39;AERRAZUR&#39;, &#39;011.44.1344.429278&#39;, &#39;1997-03-10&#39;, &#39;SA_MAN&#39;, 12000.00, 0.30, 100, 80);
INSERT INTO \`employees\` VALUES (148, &#39;Gerald&#39;, &#39;Cambrault&#39;, &#39;GCAMBRAU&#39;, &#39;011.44.1344.619268&#39;, &#39;1999-10-15&#39;, &#39;SA_MAN&#39;, 11000.00, 0.30, 100, 80);
INSERT INTO \`employees\` VALUES (149, &#39;Eleni&#39;, &#39;Zlotkey&#39;, &#39;EZLOTKEY&#39;, &#39;011.44.1344.429018&#39;, &#39;2000-01-29&#39;, &#39;SA_MAN&#39;, 10500.00, 0.20, 100, 80);
INSERT INTO \`employees\` VALUES (150, &#39;Peter&#39;, &#39;Tucker&#39;, &#39;PTUCKER&#39;, &#39;011.44.1344.129268&#39;, &#39;1997-01-30&#39;, &#39;SA_REP&#39;, 10000.00, 0.30, 145, 80);
INSERT INTO \`employees\` VALUES (151, &#39;David&#39;, &#39;Bernstein&#39;, &#39;DBERNSTE&#39;, &#39;011.44.1344.345268&#39;, &#39;1997-03-24&#39;, &#39;SA_REP&#39;, 9500.00, 0.25, 145, 80);
INSERT INTO \`employees\` VALUES (152, &#39;Peter&#39;, &#39;Hall&#39;, &#39;PHALL&#39;, &#39;011.44.1344.478968&#39;, &#39;1997-08-20&#39;, &#39;SA_REP&#39;, 9000.00, 0.25, 145, 80);
INSERT INTO \`employees\` VALUES (153, &#39;Christopher&#39;, &#39;Olsen&#39;, &#39;COLSEN&#39;, &#39;011.44.1344.498718&#39;, &#39;1998-03-30&#39;, &#39;SA_REP&#39;, 8000.00, 0.20, 145, 80);
INSERT INTO \`employees\` VALUES (154, &#39;Nanette&#39;, &#39;Cambrault&#39;, &#39;NCAMBRAU&#39;, &#39;011.44.1344.987668&#39;, &#39;1998-12-09&#39;, &#39;SA_REP&#39;, 7500.00, 0.20, 145, 80);
INSERT INTO \`employees\` VALUES (155, &#39;Oliver&#39;, &#39;Tuvault&#39;, &#39;OTUVAULT&#39;, &#39;011.44.1344.486508&#39;, &#39;1999-11-23&#39;, &#39;SA_REP&#39;, 7000.00, 0.15, 145, 80);
INSERT INTO \`employees\` VALUES (156, &#39;Janette&#39;, &#39;King&#39;, &#39;JKING&#39;, &#39;011.44.1345.429268&#39;, &#39;1996-01-30&#39;, &#39;SA_REP&#39;, 10000.00, 0.35, 146, 80);
INSERT INTO \`employees\` VALUES (157, &#39;Patrick&#39;, &#39;Sully&#39;, &#39;PSULLY&#39;, &#39;011.44.1345.929268&#39;, &#39;1996-03-04&#39;, &#39;SA_REP&#39;, 9500.00, 0.35, 146, 80);
INSERT INTO \`employees\` VALUES (158, &#39;Allan&#39;, &#39;McEwen&#39;, &#39;AMCEWEN&#39;, &#39;011.44.1345.829268&#39;, &#39;1996-08-01&#39;, &#39;SA_REP&#39;, 9000.00, 0.35, 146, 80);
INSERT INTO \`employees\` VALUES (159, &#39;Lindsey&#39;, &#39;Smith&#39;, &#39;LSMITH&#39;, &#39;011.44.1345.729268&#39;, &#39;1997-03-10&#39;, &#39;SA_REP&#39;, 8000.00, 0.30, 146, 80);
INSERT INTO \`employees\` VALUES (160, &#39;Louise&#39;, &#39;Doran&#39;, &#39;LDORAN&#39;, &#39;011.44.1345.629268&#39;, &#39;1997-12-15&#39;, &#39;SA_REP&#39;, 7500.00, 0.30, 146, 80);
INSERT INTO \`employees\` VALUES (161, &#39;Sarath&#39;, &#39;Sewall&#39;, &#39;SSEWALL&#39;, &#39;011.44.1345.529268&#39;, &#39;1998-11-03&#39;, &#39;SA_REP&#39;, 7000.00, 0.25, 146, 80);
INSERT INTO \`employees\` VALUES (162, &#39;Clara&#39;, &#39;Vishney&#39;, &#39;CVISHNEY&#39;, &#39;011.44.1346.129268&#39;, &#39;1997-11-11&#39;, &#39;SA_REP&#39;, 10500.00, 0.25, 147, 80);
INSERT INTO \`employees\` VALUES (163, &#39;Danielle&#39;, &#39;Greene&#39;, &#39;DGREENE&#39;, &#39;011.44.1346.229268&#39;, &#39;1999-03-19&#39;, &#39;SA_REP&#39;, 9500.00, 0.15, 147, 80);
INSERT INTO \`employees\` VALUES (164, &#39;Mattea&#39;, &#39;Marvins&#39;, &#39;MMARVINS&#39;, &#39;011.44.1346.329268&#39;, &#39;2000-01-24&#39;, &#39;SA_REP&#39;, 7200.00, 0.10, 147, 80);
INSERT INTO \`employees\` VALUES (165, &#39;David&#39;, &#39;Lee&#39;, &#39;DLEE&#39;, &#39;011.44.1346.529268&#39;, &#39;2000-02-23&#39;, &#39;SA_REP&#39;, 6800.00, 0.10, 147, 80);
INSERT INTO \`employees\` VALUES (166, &#39;Sundar&#39;, &#39;Ande&#39;, &#39;SANDE&#39;, &#39;011.44.1346.629268&#39;, &#39;2000-03-24&#39;, &#39;SA_REP&#39;, 6400.00, 0.10, 147, 80);
INSERT INTO \`employees\` VALUES (167, &#39;Amit&#39;, &#39;Banda&#39;, &#39;ABANDA&#39;, &#39;011.44.1346.729268&#39;, &#39;2000-04-21&#39;, &#39;SA_REP&#39;, 6200.00, 0.10, 147, 80);
INSERT INTO \`employees\` VALUES (168, &#39;Lisa&#39;, &#39;Ozer&#39;, &#39;LOZER&#39;, &#39;011.44.1343.929268&#39;, &#39;1997-03-11&#39;, &#39;SA_REP&#39;, 11500.00, 0.25, 148, 80);
INSERT INTO \`employees\` VALUES (169, &#39;Harrison&#39;, &#39;Bloom&#39;, &#39;HBLOOM&#39;, &#39;011.44.1343.829268&#39;, &#39;1998-03-23&#39;, &#39;SA_REP&#39;, 10000.00, 0.20, 148, 80);
INSERT INTO \`employees\` VALUES (170, &#39;Tayler&#39;, &#39;Fox&#39;, &#39;TFOX&#39;, &#39;011.44.1343.729268&#39;, &#39;1998-01-24&#39;, &#39;SA_REP&#39;, 9600.00, 0.20, 148, 80);
INSERT INTO \`employees\` VALUES (171, &#39;William&#39;, &#39;Smith&#39;, &#39;WSMITH&#39;, &#39;011.44.1343.629268&#39;, &#39;1999-02-23&#39;, &#39;SA_REP&#39;, 7400.00, 0.15, 148, 80);
INSERT INTO \`employees\` VALUES (172, &#39;Elizabeth&#39;, &#39;Bates&#39;, &#39;EBATES&#39;, &#39;011.44.1343.529268&#39;, &#39;1999-03-24&#39;, &#39;SA_REP&#39;, 7300.00, 0.15, 148, 80);
INSERT INTO \`employees\` VALUES (173, &#39;Sundita&#39;, &#39;Kumar&#39;, &#39;SKUMAR&#39;, &#39;011.44.1343.329268&#39;, &#39;2000-04-21&#39;, &#39;SA_REP&#39;, 6100.00, 0.10, 148, 80);
INSERT INTO \`employees\` VALUES (174, &#39;Ellen&#39;, &#39;Abel&#39;, &#39;EABEL&#39;, &#39;011.44.1644.429267&#39;, &#39;1996-05-11&#39;, &#39;SA_REP&#39;, 11000.00, 0.30, 149, 80);
INSERT INTO \`employees\` VALUES (175, &#39;Alyssa&#39;, &#39;Hutton&#39;, &#39;AHUTTON&#39;, &#39;011.44.1644.429266&#39;, &#39;1997-03-19&#39;, &#39;SA_REP&#39;, 8800.00, 0.25, 149, 80);
INSERT INTO \`employees\` VALUES (176, &#39;Jonathon&#39;, &#39;Taylor&#39;, &#39;JTAYLOR&#39;, &#39;011.44.1644.429265&#39;, &#39;1998-03-24&#39;, &#39;SA_REP&#39;, 8600.00, 0.20, 149, 80);
INSERT INTO \`employees\` VALUES (177, &#39;Jack&#39;, &#39;Livingston&#39;, &#39;JLIVINGS&#39;, &#39;011.44.1644.429264&#39;, &#39;1998-04-23&#39;, &#39;SA_REP&#39;, 8400.00, 0.20, 149, 80);
INSERT INTO \`employees\` VALUES (178, &#39;Kimberely&#39;, &#39;Grant&#39;, &#39;KGRANT&#39;, &#39;011.44.1644.429263&#39;, &#39;1999-05-24&#39;, &#39;SA_REP&#39;, 7000.00, 0.15, 149, NULL);
INSERT INTO \`employees\` VALUES (179, &#39;Charles&#39;, &#39;Johnson&#39;, &#39;CJOHNSON&#39;, &#39;011.44.1644.429262&#39;, &#39;2000-01-04&#39;, &#39;SA_REP&#39;, 6200.00, 0.10, 149, 80);
INSERT INTO \`employees\` VALUES (180, &#39;Winston&#39;, &#39;Taylor&#39;, &#39;WTAYLOR&#39;, &#39;650.507.9876&#39;, &#39;1998-01-24&#39;, &#39;SH_CLERK&#39;, 3200.00, NULL, 120, 50);
INSERT INTO \`employees\` VALUES (181, &#39;Jean&#39;, &#39;Fleaur&#39;, &#39;JFLEAUR&#39;, &#39;650.507.9877&#39;, &#39;1998-02-23&#39;, &#39;SH_CLERK&#39;, 3100.00, NULL, 120, 50);
INSERT INTO \`employees\` VALUES (182, &#39;Martha&#39;, &#39;Sullivan&#39;, &#39;MSULLIVA&#39;, &#39;650.507.9878&#39;, &#39;1999-06-21&#39;, &#39;SH_CLERK&#39;, 2500.00, NULL, 120, 50);
INSERT INTO \`employees\` VALUES (183, &#39;Girard&#39;, &#39;Geoni&#39;, &#39;GGEONI&#39;, &#39;650.507.9879&#39;, &#39;2000-02-03&#39;, &#39;SH_CLERK&#39;, 2800.00, NULL, 120, 50);
INSERT INTO \`employees\` VALUES (184, &#39;Nandita&#39;, &#39;Sarchand&#39;, &#39;NSARCHAN&#39;, &#39;650.509.1876&#39;, &#39;1996-01-27&#39;, &#39;SH_CLERK&#39;, 4200.00, NULL, 121, 50);
INSERT INTO \`employees\` VALUES (185, &#39;Alexis&#39;, &#39;Bull&#39;, &#39;ABULL&#39;, &#39;650.509.2876&#39;, &#39;1997-02-20&#39;, &#39;SH_CLERK&#39;, 4100.00, NULL, 121, 50);
INSERT INTO \`employees\` VALUES (186, &#39;Julia&#39;, &#39;Dellinger&#39;, &#39;JDELLING&#39;, &#39;650.509.3876&#39;, &#39;1998-06-24&#39;, &#39;SH_CLERK&#39;, 3400.00, NULL, 121, 50);
INSERT INTO \`employees\` VALUES (187, &#39;Anthony&#39;, &#39;Cabrio&#39;, &#39;ACABRIO&#39;, &#39;650.509.4876&#39;, &#39;1999-02-07&#39;, &#39;SH_CLERK&#39;, 3000.00, NULL, 121, 50);
INSERT INTO \`employees\` VALUES (188, &#39;Kelly&#39;, &#39;Chung&#39;, &#39;KCHUNG&#39;, &#39;650.505.1876&#39;, &#39;1997-06-14&#39;, &#39;SH_CLERK&#39;, 3800.00, NULL, 122, 50);
INSERT INTO \`employees\` VALUES (189, &#39;Jennifer&#39;, &#39;Dilly&#39;, &#39;JDILLY&#39;, &#39;650.505.2876&#39;, &#39;1997-08-13&#39;, &#39;SH_CLERK&#39;, 3600.00, NULL, 122, 50);
INSERT INTO \`employees\` VALUES (190, &#39;Timothy&#39;, &#39;Gates&#39;, &#39;TGATES&#39;, &#39;650.505.3876&#39;, &#39;1998-07-11&#39;, &#39;SH_CLERK&#39;, 2900.00, NULL, 122, 50);
INSERT INTO \`employees\` VALUES (191, &#39;Randall&#39;, &#39;Perkins&#39;, &#39;RPERKINS&#39;, &#39;650.505.4876&#39;, &#39;1999-12-19&#39;, &#39;SH_CLERK&#39;, 2500.00, NULL, 122, 50);
INSERT INTO \`employees\` VALUES (192, &#39;Sarah&#39;, &#39;Bell&#39;, &#39;SBELL&#39;, &#39;650.501.1876&#39;, &#39;1996-02-04&#39;, &#39;SH_CLERK&#39;, 4000.00, NULL, 123, 50);
INSERT INTO \`employees\` VALUES (193, &#39;Britney&#39;, &#39;Everett&#39;, &#39;BEVERETT&#39;, &#39;650.501.2876&#39;, &#39;1997-03-03&#39;, &#39;SH_CLERK&#39;, 3900.00, NULL, 123, 50);
INSERT INTO \`employees\` VALUES (194, &#39;Samuel&#39;, &#39;McCain&#39;, &#39;SMCCAIN&#39;, &#39;650.501.3876&#39;, &#39;1998-07-01&#39;, &#39;SH_CLERK&#39;, 3200.00, NULL, 123, 50);
INSERT INTO \`employees\` VALUES (195, &#39;Vance&#39;, &#39;Jones&#39;, &#39;VJONES&#39;, &#39;650.501.4876&#39;, &#39;1999-03-17&#39;, &#39;SH_CLERK&#39;, 2800.00, NULL, 123, 50);
INSERT INTO \`employees\` VALUES (196, &#39;Alana&#39;, &#39;Walsh&#39;, &#39;AWALSH&#39;, &#39;650.507.9811&#39;, &#39;1998-04-24&#39;, &#39;SH_CLERK&#39;, 3100.00, NULL, 124, 50);
INSERT INTO \`employees\` VALUES (197, &#39;Kevin&#39;, &#39;Feeney&#39;, &#39;KFEENEY&#39;, &#39;650.507.9822&#39;, &#39;1998-05-23&#39;, &#39;SH_CLERK&#39;, 3000.00, NULL, 124, 50);
INSERT INTO \`employees\` VALUES (198, &#39;Donald&#39;, &#39;OConnell&#39;, &#39;DOCONNEL&#39;, &#39;650.507.9833&#39;, &#39;1999-06-21&#39;, &#39;SH_CLERK&#39;, 2600.00, NULL, 124, 50);
INSERT INTO \`employees\` VALUES (199, &#39;Douglas&#39;, &#39;Grant&#39;, &#39;DGRANT&#39;, &#39;650.507.9844&#39;, &#39;2000-01-13&#39;, &#39;SH_CLERK&#39;, 2600.00, NULL, 124, 50);
INSERT INTO \`employees\` VALUES (200, &#39;Jennifer&#39;, &#39;Whalen&#39;, &#39;JWHALEN&#39;, &#39;515.123.4444&#39;, &#39;1987-09-17&#39;, &#39;AD_ASST&#39;, 4400.00, NULL, 101, 10);
INSERT INTO \`employees\` VALUES (201, &#39;Michael&#39;, &#39;Hartstein&#39;, &#39;MHARTSTE&#39;, &#39;515.123.5555&#39;, &#39;1996-02-17&#39;, &#39;MK_MAN&#39;, 13000.00, NULL, 100, 20);
INSERT INTO \`employees\` VALUES (202, &#39;Pat&#39;, &#39;Fay&#39;, &#39;PFAY&#39;, &#39;603.123.6666&#39;, &#39;1997-08-17&#39;, &#39;MK_REP&#39;, 6000.00, NULL, 201, 20);
INSERT INTO \`employees\` VALUES (203, &#39;Susan&#39;, &#39;Mavris&#39;, &#39;SMAVRIS&#39;, &#39;515.123.7777&#39;, &#39;1994-06-07&#39;, &#39;HR_REP&#39;, 6500.00, NULL, 101, 40);
INSERT INTO \`employees\` VALUES (204, &#39;Hermann&#39;, &#39;Baer&#39;, &#39;HBAER&#39;, &#39;515.123.8888&#39;, &#39;1994-06-07&#39;, &#39;PR_REP&#39;, 10000.00, NULL, 101, 70);
INSERT INTO \`employees\` VALUES (205, &#39;Shelley&#39;, &#39;Higgins&#39;, &#39;SHIGGINS&#39;, &#39;515.123.8080&#39;, &#39;1994-06-07&#39;, &#39;AC_MGR&#39;, 12000.00, NULL, 101, 110);
INSERT INTO \`employees\` VALUES (206, &#39;William&#39;, &#39;Gietz&#39;, &#39;WGIETZ&#39;, &#39;515.123.8181&#39;, &#39;1994-06-07&#39;, &#39;AC_ACCOUNT&#39;, 8300.00, NULL, 205, 110);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br></div></div>`,952);function d(p,c){return t}var o=n(i,[["render",d],["__file","MySQL\u5B66\u4E60\u4E4B\u57FA\u7840\u7BC7.html.vue"]]);export{o as default};
