import{_ as s,o as e,c as a,b as n}from"./app-CQavEA7Q.js";const i="/assets/sever-install-redis-1-DYHvxt47.png",l="/assets/sever-install-redis-2-PqMx9NtQ.png",r="/assets/sever-install-redis-3-DS-iLUcZ.png",d="/assets/sever-install-redis-2-PqMx9NtQ.png",t="/assets/sever-install-redis-4-CCosDf3l.png",c="/assets/sever-install-redis-5-DjMyoW_S.png",p="/assets/sever-install-redis-6-DWp0QXBT.png",o="/assets/sever-install-redis-7-NcV4zP19.png",h="/assets/sever-install-redis-8-BuUuz0HN.png",u={},m=n(`<h1 id="centos7安装redis" tabindex="-1"><a class="header-anchor" href="#centos7安装redis"><span>CentOS7安装redis</span></a></h1><h1 id="_1-安装gcc" tabindex="-1"><a class="header-anchor" href="#_1-安装gcc"><span>1.安装gcc</span></a></h1><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">yum <span class="token parameter variable">-y</span> <span class="token function">install</span> gcc</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h1 id="_2-创建-usr-local-redis文件夹" tabindex="-1"><a class="header-anchor" href="#_2-创建-usr-local-redis文件夹"><span>2.创建/usr/local/redis文件夹</span></a></h1><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">mkdir</span> /usr/local/redis</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h1 id="_3-下载redis安装包并解压" tabindex="-1"><a class="header-anchor" href="#_3-下载redis安装包并解压"><span>3.下载redis安装包并解压</span></a></h1><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token builtin class-name">cd</span> /usr/local/redis</span>
<span class="line"><span class="token function">wget</span> http://download.redis.io/releases/redis-4.0.6.tar.gz</span>
<span class="line"><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> redis-4.0.6.tar.gz</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+i+`" alt=""></p><h1 id="_4-开始安装" tabindex="-1"><a class="header-anchor" href="#_4-开始安装"><span>4.开始安装</span></a></h1><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token builtin class-name">cd</span> redis-4.0.6/</span>
<span class="line"><span class="token function">make</span></span>
<span class="line"><span class="token builtin class-name">cd</span> src</span>
<span class="line"><span class="token function">make</span> <span class="token function">install</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>如果执行make的时候报错</strong>： <code>redis编译报致命错误：jemalloc/jemalloc.h：没有那个文件或目录</code> ，将make命令改为<code>make MALLOC=libc</code></p><h1 id="_5-设置后台启动redis" tabindex="-1"><a class="header-anchor" href="#_5-设置后台启动redis"><span>5.设置后台启动redis</span></a></h1><p><img src="`+l+'" alt=""></p><p>将<code>redis-4.0.6/redis.conf</code>文件中的<code>daemonize</code>改为<code>yes</code>，如下图</p><p><img src="'+r+`" alt=""></p><p><strong>启动命令为：</strong></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">src/redis-server  redis.conf</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h1 id="_6-设置密码" tabindex="-1"><a class="header-anchor" href="#_6-设置密码"><span>6.设置密码</span></a></h1><p><img src="`+d+'" alt=""></p><p>将<code>redis-4.0.6/redis.conf</code>文件中的<code>requirepass</code>的注释取消，并设置密码，如下图：</p><p><img src="'+t+`" alt=""></p><p><strong>启动命令为：</strong></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">src/redis-server  redis.conf</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h1 id="_7-设置远程访问" tabindex="-1"><a class="header-anchor" href="#_7-设置远程访问"><span>7.设置远程访问</span></a></h1><p>将<code>redis-4.0.6/redis.conf</code>文件中的<code>bind 127.0.0.1</code>的注释掉，并将<code>protected-mode</code>值改为<code>no</code>，如下图：</p><p><img src="`+c+`" alt=""></p><h1 id="_8-将redis添加为服务" tabindex="-1"><a class="header-anchor" href="#_8-将redis添加为服务"><span>8.将redis添加为服务</span></a></h1><h2 id="_8-1复制redis脚本" tabindex="-1"><a class="header-anchor" href="#_8-1复制redis脚本"><span>8.1复制redis脚本</span></a></h2><p>将脚本文件 <code>redis_init_script</code> 复制到<code>/etc/rc.d/init.d/</code>，并改名为<code>redis</code>:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">cp</span> utils/redis_init_script /etc/rc.d/init.d/redis</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+p+`" alt=""></p><h2 id="_8-2更改redis脚本" tabindex="-1"><a class="header-anchor" href="#_8-2更改redis脚本"><span>8.2更改redis脚本</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">vim</span> /etc/rc.d/init.d/redis</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+o+`" alt=""></p><h2 id="_8-3复制redis配置文件" tabindex="-1"><a class="header-anchor" href="#_8-3复制redis配置文件"><span>8.3复制redis配置文件</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">mkdir</span> /etc/redis</span>
<span class="line"><span class="token function">cp</span> redis.conf /etc/redis/6379.conf</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-4注册服务" tabindex="-1"><a class="header-anchor" href="#_8-4注册服务"><span>8.4注册服务</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">chkconfig</span> <span class="token parameter variable">--add</span> redis</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_8-5启动服务" tabindex="-1"><a class="header-anchor" href="#_8-5启动服务"><span>8.5启动服务</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 刷新服务单元</span></span>
<span class="line">systemctl daemon-reload</span>
<span class="line"><span class="token comment"># 启动redis</span></span>
<span class="line">systemctl start redis</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-6可能遇到的问题" tabindex="-1"><a class="header-anchor" href="#_8-6可能遇到的问题"><span>8.6可能遇到的问题</span></a></h2><p>使用systemctl start redis启动redis时，可能遇到如下问题:</p><p><img src="`+h+`" alt=""></p><p>解决方法：直接删掉<code>/var/run/redis_6379.pid</code>即可。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">rm</span> <span class="token parameter variable">-f</span> /var/run/redis_6379.pid</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,45),v=[m];function g(b,_){return e(),a("div",null,v)}const k=s(u,[["render",g],["__file","CentOS7安装redis.html.vue"]]),x=JSON.parse('{"path":"/static/tang/server/CentOS7%E5%AE%89%E8%A3%85redis.html","title":"CentOS7安装redis","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"8.1复制redis脚本","slug":"_8-1复制redis脚本","link":"#_8-1复制redis脚本","children":[]},{"level":2,"title":"8.2更改redis脚本","slug":"_8-2更改redis脚本","link":"#_8-2更改redis脚本","children":[]},{"level":2,"title":"8.3复制redis配置文件","slug":"_8-3复制redis配置文件","link":"#_8-3复制redis配置文件","children":[]},{"level":2,"title":"8.4注册服务","slug":"_8-4注册服务","link":"#_8-4注册服务","children":[]},{"level":2,"title":"8.5启动服务","slug":"_8-5启动服务","link":"#_8-5启动服务","children":[]},{"level":2,"title":"8.6可能遇到的问题","slug":"_8-6可能遇到的问题","link":"#_8-6可能遇到的问题","children":[]}],"git":{"updatedTime":1720499771000,"contributors":[{"name":"文铁铁~","email":"1179131421@qq.com","commits":1}]},"filePathRelative":"static/tang/server/CentOS7安装redis.md"}');export{k as comp,x as data};
