import{_ as t,r as d,o as c,c as r,e as s,a as l,w as i,d as e,b as n}from"./app-CW2dCZSC.js";const p="/assets/05_%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2-zcmP564w.png",o={},u=n(`<h1 id="_5-mysql一些常用命令" tabindex="-1"><a class="header-anchor" href="#_5-mysql一些常用命令"><span>5 MySQL一些常用命令</span></a></h1><h2 id="_5-1-查看所有的数据库" tabindex="-1"><a class="header-anchor" href="#_5-1-查看所有的数据库"><span>5.1 查看所有的数据库</span></a></h2><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">show databases;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>“information_schema”是 MySQL 系统自带的数据库，主要保存 MySQL 数据库服务器的系统信息， 比如数据库的名称、数据表的名称、字段名称、存取权限、数据文件 所在的文件夹和系统使用的 文件夹，等等</li><li>“performance_schema”是 MySQL 系统自带的数据库，可以用来监控 MySQL 的各类性能指标。</li><li>“sys”数据库是 MySQL 系统自带的数据库，主要作用是以一种更容易被理解的方式展示 MySQL 数据 库服务器的各类性能指标，帮助系统管理员和开发人员监控 MySQL 的技术性能。</li><li>“mysql”数据库保存了 MySQL 数据库服务器运行时需要的系统信息，比如数据文件夹、当前使用的 字符集、约束检查信息，等等</li></ul><h2 id="_5-2-查看库、表的创建信息" tabindex="-1"><a class="header-anchor" href="#_5-2-查看库、表的创建信息"><span>5.2 查看库、表的创建信息</span></a></h2><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line"># 查看库的创建信息</span>
<span class="line">show create database 库名;</span>
<span class="line"># 查看表的创建信息</span>
<span class="line">show create table 表名称;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-3-显示表结构" tabindex="-1"><a class="header-anchor" href="#_5-3-显示表结构"><span>5.3 显示表结构</span></a></h2><p><code>describe 表名</code>或<code>desc 表名</code></p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">mysql&gt; describe dw_project; #也可以使用d</span>
<span class="line">+-------------+--------------+------+-----+---------+-------+</span>
<span class="line">| Field       | Type         | Null | Key | Default | Extra |</span>
<span class="line">+-------------+--------------+------+-----+---------+-------+</span>
<span class="line">| id          | int          | NO   | PRI | NULL    |       |</span>
<span class="line">| Source_Name | varchar(255) | YES  |     | NULL    |       |</span>
<span class="line">| Fund_Usd    | varchar(100) | YES  |     | NULL    |       |</span>
<span class="line">+-------------+--------------+------+-----+---------+-------+</span>
<span class="line">3 rows in set (0.01 sec)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-4-分页" tabindex="-1"><a class="header-anchor" href="#_5-4-分页"><span>5.4 分页</span></a></h2><p><code>limit</code></p>`,11),m=s("li",null,[e("语法： "),s("code",null,"limit 位置偏移量, 行数"),e("，其中位置偏移量可省（省略时表示从0开始）")],-1),v=s("li",null,[s("strong",null,"limit字句必须放在select语句的最后！")],-1),_=s("code",null,"limit 行数 offset 位置偏移量",-1),h=s("code",null,"limit 位置偏移量, 行数",-1),b=s("li",null,[e("使用limit的优点： "),s("ul",null,[s("li",null,"减少表的网格传输量，提升查询效率。"),s("li",null,[e("当知道返回结果只有1条时，就可以使用"),s("code",null,"limit 1"),e("，这样不需扫描整张表，从而提升效率")])])],-1),g=s("h2",{id:"_5-5-多表查询",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_5-5-多表查询"},[s("span",null,"5.5 多表查询")])],-1),y=s("p",null,[s("img",{src:p,alt:""})],-1),q=n("<li><p><code>inner join ... on</code>或<code>join ... on</code>：内连接。<code>A inner join B ... on</code>表示取A和B的交集</p></li><li><p><code>left outer join ... on</code>或<code>left join ... on</code>：左外连接。<code>A left join B ... on</code>表示取所有满足条件的A中元素</p></li><li><p><code>right outer join ... on</code>或<code>right join ... on</code>：左外连接。<code>A right join B ... on</code>表示取所有满足条件的B中元素</p></li><li><p><code>union</code>或<code>union all</code>：合并查询结果。即将多条select的结果集组合成一个结果集。</p><ul><li><p><code>union</code>：返回两个查询结果集的并集，并<strong>去除重复记录</strong>。</p></li><li><p><code>union all</code>：返回两个查询结果集的并集，<strong>不去重，效率高</strong></p><p>当明知道合并数据后的结果不存在重复数据，或者不需要去重的情况下，尽量使用<code>union all</code>。</p></li></ul></li>",4),f=s("code",null,"natural join",-1),k=s("strong",null,"所有同名的字段",-1),L=s("strong",null,"等值连接",-1),S=n('<p>在SQL92标准中：</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">SELECT employee_id,last_name,department_name</span>\n<span class="line">FROM employees e </span>\n<span class="line">JOIN departments d ON e.`department_id` = d.`department_id` AND e.`manager_id` = d.`manager_id`;</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 SQL99 中可以写成：</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">SELECT employee_id,last_name,department_name</span>\n<span class="line">FROM employees e </span>\n<span class="line">NATURAL JOIN departments d;</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',4),x=s("code",null,"join ... using(字段名)",-1),j=s("strong",null,"指定数据表里的同名字段",-1),E=s("strong",null,"只能配合join使用",-1),Q=n(`<p>在SQL92标准中：</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">SELECT employee_id,last_name,department_name</span>
<span class="line">FROM employees e </span>
<span class="line">JOIN departments d ON e.\`department_id\` = d.\`department_id\`;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 SQL99 中可以写成：</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">SELECT employee_id,last_name,department_name</span>
<span class="line">FROM employees e </span>
<span class="line">JOIN departments d USING (department_id);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),N=n(`<blockquote><p>注意</p></blockquote><p>要<strong>控制连接表的数量</strong> 。多表连接就相当于嵌套 for 循环一样，非常消耗资源，会让 SQL 查询性能下 降得很严重，因此不要连接不必要的表。</p><p>阿里巴巴《Java开发手册》中，<strong>超过三个表禁止 join</strong>。</p><h2 id="_5-6-编码集设置" tabindex="-1"><a class="header-anchor" href="#_5-6-编码集设置"><span>5.6 编码集设置</span></a></h2><p>在<strong>MySQL 8.0版本之前</strong>，默认字符集为latin1，utf8字符集指向的是utf8mb3，如果没有修改编码，<strong>会出现乱码问题</strong>。但是从MySQL 8.0 开始，数据库的默认编码改为 utf8mb4，从而避免了乱码问题。因此，此处编码集设置是<strong>针对MySQL5.7版本</strong>。</p><blockquote><p>问题再现</p></blockquote><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">mysql&gt; INSERT INTO t_stu VALUES(1,&#39;张三&#39;,&#39;男&#39;);</span>
<span class="line">ERROR 1366 (HY000): Incorrect string value: &#39;\\xD5\\xC5\\xC8\\xFD&#39; for column &#39;sname&#39; at</span>
<span class="line">row 1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>问题解决</p></blockquote><ul><li><p>步骤1：查看编码命令</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">show variables like &#39;character_%&#39;;</span>
<span class="line">show variables like &#39;collation_%&#39;;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>步骤2：修改mysql的数据目录下的my.ini配置文件</p><div class="language-ini line-numbers-mode" data-highlighter="prismjs" data-ext="ini" data-title="ini"><pre class="language-ini"><code><span class="line"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysql</span><span class="token punctuation">]</span></span> #大概在63行左右，在其下添加</span>
<span class="line">...</span>
<span class="line"><span class="token key attr-name">default-character-set</span><span class="token punctuation">=</span><span class="token value attr-value">utf8 #默认字符集</span></span>
<span class="line"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysqld</span><span class="token punctuation">]</span></span> # 大概在76行左右，在其下添加</span>
<span class="line">...</span>
<span class="line"><span class="token key attr-name">character-set-server</span><span class="token punctuation">=</span><span class="token value attr-value">utf8</span></span>
<span class="line"><span class="token key attr-name">collation-server</span><span class="token punctuation">=</span><span class="token value attr-value">utf8_general_ci</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>步骤3：重启服务</p></li><li><p>步骤4：查看编码信息</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code><span class="line">mysql&gt; show variables like &#39;character_%&#39;;</span>
<span class="line">+--------------------------+---------------------------------------------+</span>
<span class="line">| Variable_name            | Value                                       |</span>
<span class="line">+--------------------------+---------------------------------------------+</span>
<span class="line">| character_set_client     | utf8                                        |</span>
<span class="line">| character_set_connection | utf8                                        |</span>
<span class="line">| character_set_database   | utf8                                        |</span>
<span class="line">| character_set_filesystem | binary                                      |</span>
<span class="line">| character_set_results    | utf8                                        |</span>
<span class="line">| character_set_server     | utf8                                        |</span>
<span class="line">| character_set_system     | utf8                                        |</span>
<span class="line">| character_sets_dir       | D:\\soft\\mysql-8.0.23-winx64\\share\\charsets\\ |</span>
<span class="line">+--------------------------+---------------------------------------------+</span>
<span class="line">8 rows in set, 1 warning (0.03 sec)</span>
<span class="line"></span>
<span class="line">mysql&gt; show variables like &#39;collation_%&#39;;</span>
<span class="line">+----------------------+--------------------+</span>
<span class="line">| Variable_name        | Value              |</span>
<span class="line">+----------------------+--------------------+</span>
<span class="line">| collation_connection | utf8               |</span>
<span class="line">| collation_database   | utf8               |</span>
<span class="line">| collation_server     | utf8               |</span>
<span class="line">+----------------------+--------------------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul>`,9);function M(w,A){const a=d("front");return c(),r("div",null,[u,s("ul",null,[m,v,s("li",null,[l(a,{style:{background:"yellow"}},{default:i(()=>[e("MySQL8.0新特性")]),_:1}),e("："),_,e(" 和 "),h,e("效果一致")]),b]),g,y,s("ul",null,[q,s("li",null,[s("p",null,[f,e("：自然连接。"),l(a,{style:{background:"yellow"}},{default:i(()=>[e("SQL99新特性")]),_:1}),e("。会自动查询两张表中"),k,e(" ，并对它们进行"),L]),S]),s("li",null,[s("p",null,[x,e("："),l(a,{style:{background:"yellow"}},{default:i(()=>[e("SQL99新特性")]),_:1}),e("。"),j,e("进行**等值连接 **，"),E,e("。")]),Q])]),N])}const O=t(o,[["render",M],["__file","05_MySQL一些常用命令.html.vue"]]),R=JSON.parse('{"path":"/static/tang/mysql/05_MySQL%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html","title":"5 MySQL一些常用命令","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"5.1 查看所有的数据库","slug":"_5-1-查看所有的数据库","link":"#_5-1-查看所有的数据库","children":[]},{"level":2,"title":"5.2 查看库、表的创建信息","slug":"_5-2-查看库、表的创建信息","link":"#_5-2-查看库、表的创建信息","children":[]},{"level":2,"title":"5.3 显示表结构","slug":"_5-3-显示表结构","link":"#_5-3-显示表结构","children":[]},{"level":2,"title":"5.4 分页","slug":"_5-4-分页","link":"#_5-4-分页","children":[]},{"level":2,"title":"5.5 多表查询","slug":"_5-5-多表查询","link":"#_5-5-多表查询","children":[]},{"level":2,"title":"5.6 编码集设置","slug":"_5-6-编码集设置","link":"#_5-6-编码集设置","children":[]}],"git":{"updatedTime":1720499771000,"contributors":[{"name":"文铁铁~","email":"1179131421@qq.com","commits":1}]},"filePathRelative":"static/tang/mysql/05_MySQL一些常用命令.md"}');export{O as comp,R as data};
